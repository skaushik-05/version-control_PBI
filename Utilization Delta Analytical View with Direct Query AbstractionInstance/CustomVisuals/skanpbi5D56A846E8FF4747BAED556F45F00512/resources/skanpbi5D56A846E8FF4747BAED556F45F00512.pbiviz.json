{"visual":{"name":"skanpbi","displayName":"skan_pbi_1","guid":"skanpbi5D56A846E8FF4747BAED556F45F00512","visualClassName":"Visual","version":"1.0.5","description":"A PowerBI graph drawing visual","supportUrl":"https://akvelon.com","gitHubUrl":"https://gitlab.akvelon.net/skan.ai/GraphVisual"},"author":{"name":"Askhat Bikmetov","email":"askhat@hey.com"},"apiVersion":"3.8.0","style":"style/visual.less","stringResources":{},"capabilities":{"supportsLandingPage":true,"supportsEmptyDataView":true,"supportsHighlight":true,"dataRoles":[{"displayName":"Process ID","name":"process_id","kind":"Grouping"},{"displayName":"Instance","name":"instance","kind":"Grouping"},{"displayName":"Chronological Order","name":"ordering","kind":"Measure"},{"displayName":"Node Label","name":"node_label","kind":"Grouping"},{"displayName":"Node Secondary Label","name":"node_secondary_label","kind":"Measure"},{"displayName":"Node Color","name":"node_color","kind":"Measure"},{"displayName":"Node Value","name":"node_value","kind":"Measure"},{"displayName":"Link Value (Standard)","name":"link_value","kind":"Measure"},{"displayName":"Link Value (Self?Reference)","name":"link_value_selfref","kind":"Measure"},{"displayName":"Link Color","name":"link_color","kind":"Measure"},{"displayName":"Link Thickness","name":"link_thickness","kind":"Measure"},{"displayName":"Tooltips","name":"tooltips","kind":"Measure"}],"objects":{"nodeProperties":{"displayName":"Node Properties","properties":{"width":{"displayName":"Width","type":{"numeric":true}}}},"groupingSettings":{"displayName":"Grouping Settings","properties":{"groupBy":{"displayName":"Group by","type":{"enumeration":[{"displayName":"Process ID","value":"process_id"},{"displayName":"Process ID & Instance","value":"process_id_and_instance"}]}},"aggregationAlgorithm":{"displayName":"Aggregation Algorithm","type":{"enumeration":[{"displayName":"Summation","value":"sum"},{"displayName":"Average","value":"avg"},{"displayName":"Maximum","value":"max"},{"displayName":"Minimum","value":"min"}]}}}},"nodeLabel":{"displayName":"Node Label","properties":{"fontFamily":{"displayName":"Font Family","type":{"enumeration":[{"displayName":"Arial","value":"Arial"},{"displayName":"Arial Black","value":"\"Arial Black\""},{"displayName":"Arial Unicode MS","value":"\"Arial Unicode MS\""},{"displayName":"Calibri","value":"Calibri"},{"displayName":"Cambria","value":"Cambria"},{"displayName":"Cambria Math","value":"\"Cambria Math\""},{"displayName":"Candara","value":"Candara"},{"displayName":"Comic Sans MS","value":"\"Comic Sans MS\""},{"displayName":"Consolas","value":"Consolas"},{"displayName":"Constantia","value":"Constantia"},{"displayName":"Corbel","value":"Corbel"},{"displayName":"Courier New","value":"\"Courier New\""},{"displayName":"Georgia","value":"Georgia"},{"displayName":"Lucida Sans Unicode","value":"\"Lucida Sans Unicode\""},{"displayName":"Segoe (Bold)","value":"\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"},{"displayName":"Segoe UI","value":"\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"},{"displayName":"Segoe UI Light","value":"\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"},{"displayName":"Symbol","value":"Symbol"},{"displayName":"Tahoma","value":"Tahoma"},{"displayName":"Times New Roman","value":"\"Times New Roman\""},{"displayName":"Trebuchet MS","value":"\"Trebuchet MS\""},{"displayName":"Verdana","value":"Verdana"},{"displayName":"Wingdings","value":"Wingdings"}]}},"fontSize":{"displayName":"Font Size","type":{"formatting":{"fontSize":true}}},"textAlign":{"displayName":"Text Align","type":{"enumeration":[{"displayName":"Left","value":"left"},{"displayName":"Center","value":"center"},{"displayName":"Right","value":"right"}]}},"fontColor":{"displayName":"Font Color","type":{"fill":{"solid":{"color":true}}}}}}},"dataViewMappings":[{"categorical":{"categories":{"select":[{"bind":{"to":"process_id"}},{"bind":{"to":"instance"}},{"bind":{"to":"node_label"}}],"dataReductionAlgorithm":{"top":{"count":30512}}},"values":{"select":[{"bind":{"to":"node_color"}},{"bind":{"to":"node_secondary_label"}},{"bind":{"to":"node_value"}},{"bind":{"to":"ordering"}},{"bind":{"to":"link_value"}},{"bind":{"to":"link_value_selfref"}},{"bind":{"to":"link_color"}},{"bind":{"to":"link_thickness"}},{"bind":{"to":"tooltips"}}]}}}]},"content":{"js":"/*! For license information please see visual.js.LICENSE.txt */\nvar skanpbi5D56A846E8FF4747BAED556F45F00512;(()=>{var t={9289:(t,e,i)=>{\"use strict\";i.d(e,{n:()=>n});var n=function(){function t(){this._linkSpacing=4,this._maxIterations=100,this.linkSpacing=4,this.maxIterations=100,this._segs=[],this._list=new go.List}return Object.defineProperty(t.prototype,\"linkSpacing\",{get:function(){return this._linkSpacing},set:function(t){this._linkSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"maxIterations\",{get:function(){return this._maxIterations},set:function(t){this._maxIterations=t},enumerable:!0,configurable:!0}),t.prototype.avoidOrthogonalOverlaps=function(t){var e=new go.List;t.each((function(t){t instanceof go.Link&&t.isOrthogonal&&e.add(t)}));var i=e.first();if(!i)return 0;var n=i.diagram;if(!n)return 0;n.startTransaction();for(var r=0,o=1;r<this.maxIterations&&o>0;)o=0,o+=this.adjustOverlapsH(e),o+=this.adjustOverlapsV(e),r++;return this._segs=[],this._list.clear(),n.commitTransaction(\"rerouted overlapping link segments\"),r},t.prototype._allocSegInfo=function(){return this._segs.pop()||new r},t.prototype._freeSegInfo=function(t){this._segs.push(t)},t.prototype.segInfoComparerDefault=function(t,e){return t===e?0:t.layer<e.layer?-1:t.layer>e.layer?1:t.columnMin<e.columnMin?-1:t.columnMin>e.columnMin?1:t.columnMax<e.columnMax?-1:t.columnMax>e.columnMax?1:0},t.prototype.segInfoComparer2DefaultFirst=function(t,e){return t===e?0:t.first<e.first?-1:t.first>e.first||t.turns<e.turns?1:t.turns>e.turns||t.columnMin<e.columnMin?-1:t.columnMin>e.columnMin?1:t.columnMax<e.columnMax?-1:t.columnMax>e.columnMax?1:0},t.prototype.segInfoComparer2DefaultLast=function(t,e){return t===e?0:t.last<e.last?-1:t.last>e.last||t.turns<e.turns?1:t.turns>e.turns||t.columnMin<e.columnMin?-1:t.columnMin>e.columnMin?1:t.columnMax<e.columnMax?-1:t.columnMax>e.columnMax?1:0},t.prototype.isApprox=function(t,e){var i=t-e;return i>-.5&&i<.5},t.prototype.adjustOverlapsH=function(t){var e,i,n=0,r=this._list;r.clear();for(var o=t.iterator;o.next();){var s=o.value;if(null!==s&&s.isOrthogonal)for(var a=2;a<s.pointsCount-3;a++)if(e=s.getPoint(a),i=s.getPoint(a+1),this.isApprox(e.y,i.y)&&!this.isApprox(e.x,i.x)){var h=this._allocSegInfo();h.layer=Math.floor(e.y/this.linkSpacing);var l=s.getPoint(0),u=s.getPoint(s.pointsCount-1);if(h.first=l.x*l.x+l.y,h.last=u.x*u.x+u.y,h.columnMin=Math.min(e.x,i.x),h.columnMax=Math.max(e.x,i.x),h.index=a,h.link=s,a<s.pointsCount-2){var c=s.getPoint(a-1),f=s.getPoint(a+2),d=0;c.y<e.y?d=f.y<e.y?3:e.x<i.x?2:1:c.y>e.y&&(d=f.y>e.y?0:i.x<e.x?2:1),h.turns=d}r.add(h)}}if(r.count>1){r.sort(this.segInfoComparerDefault);for(var p=0;p<r.count;){for(var g=r.get(p).layer,y=p+1;y<r.count&&r.get(y).layer===g;)y++;if(y-p>1)for(var m=p;m<y;){for(var v=r.get(m).columnMax,x=m+1;x<y&&r.get(x).columnMin<v;)v=Math.max(v,r.get(x).columnMax),x++;var b=x-m;if(b>1){r.sortRange(this.segInfoComparer2DefaultLast,m,m+b);var w=1,k=r.get(m).last;for(a=m;a<x;a++)(C=r.get(a)).last!==k&&(w++,k=C.last);r.sortRange(this.segInfoComparer2DefaultFirst,m,m+b);var M=1;for(k=r.get(m).first,a=m;a<x;a++)(C=r.get(a)).first!==k&&(M++,k=C.first);var S=!0,P=M;w<M?(S=!1,P=w,k=r.get(m).last,r.sortRange(this.segInfoComparer2DefaultLast,m,m+b)):k=r.get(m).first;var N=0;for(a=m;a<x;a++){var C=r.get(a);(S?C.first:C.last)!==k&&(N++,k=S?C.first:C.last);var T=C.link;if(T){e=T.getPoint(C.index),i=T.getPoint(C.index+1);var L=this.linkSpacing*(N-(P-1)/2);if(n++,T.startRoute(),T.setPointAt(C.index,e.x,e.y+L),T.setPointAt(C.index+1,i.x,i.y+L),C.index+2<T.pointsCount-1){var A=T.getPoint(C.index+2);this.isApprox(A.y,i.y)&&T.setPointAt(C.index+2,A.x,A.y+L)}T.commitRoute()}}}m=x}p=y}}var j=this;return r.each((function(t){j._freeSegInfo(t)})),n},t.prototype.adjustOverlapsV=function(t){var e,i,n=0,r=this._list;r.clear();for(var o=t.iterator;o.next();){var s=o.value;if(null!==s&&s.isOrthogonal)for(var a=2;a<s.pointsCount-3;a++)if(e=s.getPoint(a),i=s.getPoint(a+1),this.isApprox(e.x,i.x)&&!this.isApprox(e.y,i.y)){var h=this._allocSegInfo();h.layer=Math.floor(e.x/this.linkSpacing);var l=s.getPoint(0),u=s.getPoint(s.pointsCount-1);if(h.first=l.x+l.y*l.y,h.last=u.x+u.y*u.y,h.columnMin=Math.min(e.y,i.y),h.columnMax=Math.max(e.y,i.y),h.index=a,h.link=s,a<s.pointsCount-2){var c=s.getPoint(a-1),f=s.getPoint(a+2),d=0;c.x<e.x?d=f.x<e.x?3:e.y<i.y?2:1:c.x>e.x&&(d=f.x>e.x?0:i.y<e.y?2:1),h.turns=d}r.add(h)}}if(r.count>1){r.sort(this.segInfoComparerDefault);for(var p=0;p<r.count;){for(var g=r.get(p).layer,y=p+1;y<r.count&&r.get(y).layer===g;)y++;if(y-p>1)for(var m=p;m<y;){for(var v=r.get(m).columnMax,x=m+1;x<y&&r.get(x).columnMin<v;)v=Math.max(v,r.get(x).columnMax),x++;var b=x-m;if(b>1){r.sortRange(this.segInfoComparer2DefaultLast,m,m+b);var w=1,k=r.get(m).last;for(a=m;a<x;a++)(C=r.get(a)).last!==k&&(w++,k=C.last);r.sortRange(this.segInfoComparer2DefaultFirst,m,m+b);var M=1;for(k=r.get(m).first,a=m;a<x;a++)(C=r.get(a)).first!==k&&(M++,k=C.first);var S=!0,P=M;w<M?(S=!1,P=w,k=r.get(m).last,r.sortRange(this.segInfoComparer2DefaultLast,m,m+b)):k=r.get(m).first;var N=0;for(a=m;a<x;a++){var C=r.get(a);(S?C.first:C.last)!==k&&(N++,k=S?C.first:C.last);var T=C.link;if(T){e=T.getPoint(C.index),i=T.getPoint(C.index+1);var L=this.linkSpacing*(N-(P-1)/2);if(n++,T.startRoute(),T.setPointAt(C.index,e.x+L,e.y),T.setPointAt(C.index+1,i.x+L,i.y),C.index+2<T.pointsCount-1){var A=T.getPoint(C.index+2);this.isApprox(A.x,i.x)&&T.setPointAt(C.index+2,A.x+L,A.y)}T.commitRoute()}}}m=x}p=y}}var j=this;return r.each((function(t){j._freeSegInfo(t)})),n},t}(),r=function(){this.layer=0,this.first=0,this.last=0,this.columnMin=0,this.columnMax=0,this.index=0,this.link=null,this.turns=0}},9738:(t,e,i)=>{\"use strict\";i.d(e,{z:()=>r});var n=i(9921);class r{constructor(t,e){this._size=125,this._buttonSize=25,this._alignment=n.z6.BottomRight,this._alignmentFocus=n.z6.BottomRight,this._orientation=\"vertical\",this._opacity=.75,this._diagram=t,this._initialScale=t.scale,this._diagramDiv=t.div,this._sliderDiv=null,this._zoomSliderOut=null,this._zoomSliderIn=null,this._zoomSliderRange=null,this._zoomSliderRangeCtn=null,void 0!==e&&(void 0!==e.size&&(this._size=e.size),void 0!==e.buttonSize&&(this._buttonSize=e.buttonSize),void 0!==e.alignment&&(this._alignment=e.alignment),void 0!==e.alignmentFocus&&(this._alignmentFocus=e.alignmentFocus),void 0!==e.orientation&&(this._orientation=e.orientation),void 0!==e.opacity&&(this._opacity=e.opacity));const i=this;this.updateOnViewportBoundsChanged=t=>{i.scaleToValue()},this.init()}get diagram(){return this._diagram}get size(){return this._size}set size(t){this._size!==t&&(this._size=t,this.resize())}get buttonSize(){return this._buttonSize}set buttonSize(t){this._buttonSize!==t&&(this._buttonSize=t,this.resize())}get alignment(){return this._alignment}set alignment(t){this._alignment!==t&&(this._alignment=t,this.realign())}get alignmentFocus(){return this._alignmentFocus}set alignmentFocus(t){this._alignmentFocus!==t&&(this._alignmentFocus=t,this.realign())}get orientation(){return this._orientation}set orientation(t){if(\"horizontal\"!==t&&\"vertical\"!==t)throw new Error('Orientation must be \"horizontal\" or \"vertical\"');this._orientation!==t&&(this._orientation=t,this.resize(!0))}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=t,null!==this._sliderDiv&&(this._sliderDiv.style.opacity=t.toString()))}init(){this.sliderDivSetup(),this.resize(!0),this.sliderListenerSetup()}sliderDivSetup(){this._sliderDiv=document.createElement(\"div\"),this._sliderDiv.className=\"zoomSlider\";const t=document.createElement(\"button\");this._zoomSliderOut=t,t.className=\"zoomButton\",t.innerHTML=\"-\",this._sliderDiv.appendChild(t);const e=document.createElement(\"div\");this._zoomSliderRangeCtn=e,e.className=\"zoomRangeContainer\",this._sliderDiv.appendChild(e);const i=document.createElement(\"input\");this._zoomSliderRange=i,i.className=\"zoomRangeInput\",i.type=\"range\",i.min=\"-50\",i.max=\"100\",e.appendChild(i);const n=document.createElement(\"button\");if(this._zoomSliderIn=n,n.className=\"zoomButton\",n.innerHTML=\"+\",this._sliderDiv.appendChild(n),null!==this._diagramDiv){const t=this._diagramDiv.parentElement;null!==t&&t.appendChild(this._sliderDiv)}}sliderListenerSetup(){const t=this._zoomSliderOut,e=this._zoomSliderIn,i=this._zoomSliderRange;if(null===t||null===e||null===i)return;this.diagram.addDiagramListener(\"ViewportBoundsChanged\",this.updateOnViewportBoundsChanged);const n=this;t.onclick=function(){i.stepDown(),n.valueToScale()},e.onclick=function(){i.stepUp(),n.valueToScale()};const r=function(){n.valueToScale()};i.oninput=r,i.onchange=r}resize(t){let e=0,i=0;const n=this._zoomSliderOut,r=this._zoomSliderIn,o=this._zoomSliderRangeCtn,s=this._zoomSliderRange;if(null!==this._sliderDiv&&null!==n&&null!==r&&null!==o&&null!==s){if(\"horizontal\"===this.orientation){e=this.size,i=this.buttonSize;const t=e-2*i;n.style.width=i+\"px\",n.style.height=i+\"px\",o.style.width=t+\"px\",o.style.height=i+\"px\",s.style.width=t+\"px\",s.style.height=i+\"px\",s.style.transformOrigin=\"\",r.style.width=i+\"px\",r.style.height=i+\"px\"}else{i=this.size,e=this.buttonSize;const t=i-2*e;r.style.width=e+\"px\",r.style.height=e+\"px\",o.style.width=e+\"px\",o.style.height=t+\"px\",s.style.width=t+\"px\",s.style.height=e+\"px\",s.style.transformOrigin=t/2+\"px \"+t/2+\"px\",n.style.width=e+\"px\",n.style.height=e+\"px\"}this._sliderDiv.style.width=e+\"px\",this._sliderDiv.style.height=i+\"px\",t&&this.reorient(),this.realign()}}reorient(){const t=this._zoomSliderOut,e=this._zoomSliderIn,i=this._zoomSliderRange;null!==this._sliderDiv&&null!==t&&null!==e&&null!==i&&(\"horizontal\"===this.orientation?(i.style.transform=\"\",this._sliderDiv.insertBefore(t,this._sliderDiv.firstChild),this._sliderDiv.appendChild(e)):(i.style.transform=\"rotate(-90deg)\",this._sliderDiv.insertBefore(e,this._sliderDiv.firstChild),this._sliderDiv.appendChild(t)))}realign(){if(null===this._diagramDiv||null===this._sliderDiv)return;let t=0,e=0;\"horizontal\"===this.orientation?(t=this.size,e=this.buttonSize):(e=this.size,t=this.buttonSize);const i=this._diagramDiv.parentElement,n=this._diagramDiv.getBoundingClientRect();if(null!==i){const r=i.getBoundingClientRect(),o=n.top-r.top+this.alignment.y*this._diagramDiv.clientHeight+this.alignment.offsetY-this.alignmentFocus.y*e+this.alignmentFocus.offsetY,s=n.left-r.left+this.alignment.x*this._diagramDiv.clientWidth+this.alignment.offsetX-this.alignmentFocus.x*t+this.alignmentFocus.offsetX;this._sliderDiv.style.top=o+\"px\",this._sliderDiv.style.left=s+\"px\"}}scaleToValue(){const t=this._zoomSliderRange;if(null===t)return;const e=this.diagram,i=this._initialScale,n=e.commandHandler.zoomFactor,r=e.scale;t.value=Math.round(Math.log(r/i)/Math.log(n)).toString()}valueToScale(){const t=this._zoomSliderRange;if(null===t)return;const e=this.diagram,i=parseFloat(t.value),n=this._initialScale,r=e.commandHandler.zoomFactor;e.scale=n*Math.pow(r,i)}remove(){this.diagram.removeDiagramListener(\"ViewportBoundsChanged\",this.updateOnViewportBoundsChanged),null!==this._sliderDiv&&(this._sliderDiv.innerHTML=\"\",this._sliderDiv.parentElement&&this._sliderDiv.parentElement.removeChild(this._sliderDiv),this._sliderDiv=null)}}},9921:(t,e,i)=>{\"use strict\";i.d(e,{D5:()=>r,FJ:()=>u,IL:()=>l,KQ:()=>w,KX:()=>c,NB:()=>v,S0:()=>f,Vm:()=>b,ZX:()=>a,Zt:()=>o,al:()=>y,bn:()=>g,bx:()=>d,rU:()=>x,s_:()=>p,uz:()=>m,z6:()=>s,zS:()=>h}),t=i.hmd(t),function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function r(t){var e=\"undefined\"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}function o(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var s,a=\"function\"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if(\"function\"==typeof Object.setPrototypeOf)s=Object.setPrototypeOf;else{var h;t:{var l={};try{l.__proto__={a:!0},h=l.a;break t}catch(t){}h=!1}s=h?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+\" is not extensible\");return t}:null}var u=s;function c(t,e){if(t.prototype=a(e.prototype),t.prototype.constructor=t,u)u(t,e);else for(var i in e)if(\"prototype\"!=i)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.oB=e.prototype}var f=void 0!==i.g&&null!=i.g?i.g:self,d=\"function\"==typeof Object.assign?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function g(t,e){if(e){var i=f;t=t.split(\".\");for(var n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}(e=e(n=i[t=t[t.length-1]]))!=n&&null!=e&&p(i,t,{writable:!0,value:e})}}g(\"Object.assign\",(function(t){return t||d})),g(\"Array.prototype.fill\",(function(t){return t||function(t,e,i){var n=this.length||0;for(0>e&&(e=Math.max(0,n+e)),(null==i||i>n)&&(i=n),0>(i=Number(i))&&(i=Math.max(0,n+i)),e=Number(e||0);e<i;e++)this[e]=t;return this}}));var y=\"object\"==typeof globalThis&&globalThis||\"object\"==typeof i.g&&i.g.global===i.g&&i.g||\"object\"==typeof self&&self.self===self&&self||{};function m(){}function v(t,e){var i=-1;return function(){var n=this,r=arguments;-1!==i&&y.clearTimeout(i),i=x((function(){i=-1,t.apply(n,r)}),e)}}function x(t,e){return y.setTimeout(t,e)}function b(t){return y.document.createElement(t)}function w(t){throw Error(t)}function k(t,e){t=\"The object is frozen, so its properties cannot be set: \"+t.toString(),void 0!==e&&(t+=\"  to value: \"+e),w(t)}function M(t,e,i,n){i=null===i?\"*\":\"string\"==typeof i?i:\"function\"==typeof i&&\"string\"==typeof i.className?i.className:\"\",void 0!==n&&(i+=\".\"+n),w(i+\" is not in the range \"+e+\": \"+t)}function S(t){y.console&&y.console.log(t)}function P(t){return\"object\"==typeof t&&null!==t}function N(t){return Array.isArray(t)||y.NodeList&&t instanceof y.NodeList||y.HTMLCollection&&t instanceof y.HTMLCollection}function C(t){return Array.prototype.slice.call(t)}function T(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):w(\"Cannot insert an object into an HTMLCollection or NodeList: \"+i+\" at \"+e)}function L(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):w(\"Cannot remove an object from an HTMLCollection or NodeList at \"+e)}function A(){var t=_.pop();return void 0===t?[]:t}function j(t){t.length=0,_.push(t)}function O(t){if(\"function\"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(\"\"!==(e=e.substring(9,e.indexOf(\"(\")).trim()))return t._className=e}else if(P(t)&&t.constructor)return O(t.constructor);return typeof t}function D(t){var e=t;return P(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?\"undefined\":null===e?\"null\":e.toString()}function F(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.aB;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function B(t,e,i){Object.defineProperty(bi.prototype,t,{get:e,set:i})}function I(t){for(var e=[],i=0;256>i;i++)e[\"0123456789abcdef\".charAt(i>>4)+\"0123456789abcdef\".charAt(15&i)]=String.fromCharCode(i);t.length%2&&(t=\"0\"+t),i=[];for(var n=0,r=0;r<t.length;r+=2)i[n++]=e[t.substr(r,2)];for(t=\"\"===(t=i.join(\"\"))?\"0\":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)n=(n+e[i]+119)%256,r=e[i],e[i]=e[n],e[n]=r;n=i=0;for(var o=\"\",s=0;s<t.length;s++)n=(n+e[i=(i+1)%256])%256,r=e[i],e[i]=e[n],e[n]=r,o+=String.fromCharCode(t.charCodeAt(s)^e[(e[i]+e[n])%256]);return o}void 0===y.requestAnimationFrame&&(void 0===y.setImmediate?y.requestAnimationFrame=function(t){y.setTimeout(t,0)}:y.requestAnimationFrame=y.setImmediate);var z=void 0!==y.navigator&&0<y.navigator.userAgent.indexOf(\"Trident/7\"),R=void 0!==y.navigator&&0<y.navigator.userAgent.indexOf(\"Edge/\"),E=void 0!==y.navigator&&void 0!==y.navigator.platform&&null!==y.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i),_=[];function V(t,e,i){tt(this),this.j=t,this.na=e,this.o=i}function Y(t,e){return null==e||\"\"===e?null:t[e]}function G(){this.Dw=[]}function X(){}Object.freeze([]),m.className=\"Util\",m.Dx=\"32ab5ff3b26f42dc0ed90f21462913b5\",m.adym=\"gojs.net\",m.vfo=\"28e644fdb5\",m.className=\"Util\",V.prototype.toString=function(){return\"EnumValue.\"+this.na},f.Object.defineProperties(V.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.na}},value:{get:function(){return this.o}}}),V.className=\"EnumValue\",G.prototype.toString=function(){return this.Dw.join(\"\")},G.prototype.add=function(t){\"\"!==t&&this.Dw.push(t)},G.className=\"StringBuilder\",X.className=\"PropertyCollection\";var U,q={cB:!1,hB:!1,eB:!1,gB:!1,mB:!1,kB:!1,Kx:!1,dB:null,trace:function(t){y.console&&y.console.log(t)},fB:function(t,e,i,n){t.strokeStyle=\"red\",t.fillStyle=\"red\",t.font=\"8px sans-serif\",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText(\"DB: \"+Math.round(n.x)+\", \"+Math.round(n.y)+\", \"+Math.round(n.width)+\", \"+Math.round(n.height),n.left,n.top-5)},bB:function(t){var e,i={};for(e in t){if(i.x=e,\"licenseKey\"!==i.x){var n=t[i.x];if(void 0!==n.prototype){i.im=Object.getOwnPropertyNames(n.prototype);for(var r={$j:0};r.$j<i.im.length;(r={$j:r.$j}).$j++){var o=Object.getOwnPropertyDescriptor(n.prototype,i.im[r.$j]);void 0!==o.get&&void 0===o.set&&Object.defineProperty(n.prototype,i.im[r.$j],{set:function(t,e){return function(){throw Error(\"Property \"+t.im[e.$j]+\" of \"+t.x+\" is read-only.\")}}(i,r)})}}}i={im:i.im,x:i.x}}}};function K(){}function H(t){this.key=-1,this.value=t}function W(t){this.rb=t,this.ef=null,t.Ja=null,this.ia=t.Da,this.Ra=-1}function Z(t){this.rb=t,t.Sg=null,this.ia=t.Da,this.Ra=t.m.length}function J(t){tt(this),this.v=!1,this.m=[],this.Da=0,this.Sg=this.Ja=null,\"string\"==typeof t&&w(\"Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type.\"),void 0!==t&&this.addAll(t)}function $(t){this.fg=t,t.Ja=null,this.ia=t.Da,this.ka=null}function Q(t){tt(this),this.v=!1,this.Jb={},this.Ib=0,this.Ja=null,this.Da=0,this.$e=this.ba=null,\"string\"==typeof t&&w(\"Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type.\"),void 0!==t&&this.addAll(t)}function tt(t){t.__gohashid=ht++}function et(t){var e=t.__gohashid;return void 0===e&&(e=ht++,t.__gohashid=e),e}function it(t){return t.__gohashid}K.prototype.reset=function(){},K.prototype.next=function(){return!1},K.prototype.qd=function(){return!1},K.prototype.first=function(){return null},K.prototype.any=function(){return!1},K.prototype.all=function(){return!0},K.prototype.each=function(){return this},K.prototype.map=function(){return this},K.prototype.filter=function(){return this},K.prototype.Td=function(){},K.prototype.toString=function(){return\"EmptyIterator\"},f.Object.defineProperties(K.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),K.prototype.first=K.prototype.first,K.prototype.hasNext=K.prototype.qd,K.prototype.next=K.prototype.next,K.prototype.reset=K.prototype.reset,K.className=\"EmptyIterator\",U=new K,H.prototype.reset=function(){this.key=-1},H.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},H.prototype.qd=function(){return this.next()},H.prototype.first=function(){return this.key=0,this.value},H.prototype.any=function(t){return this.key=-1,t(this.value)},H.prototype.all=function(t){return this.key=-1,t(this.value)},H.prototype.each=function(t){return this.key=-1,t(this.value),this},H.prototype.map=function(t){return new H(t(this.value))},H.prototype.filter=function(t){return t(this.value)?new H(this.value):U},H.prototype.Td=function(){this.value=null},H.prototype.toString=function(){return\"SingletonIterator(\"+this.value+\")\"},f.Object.defineProperties(H.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),H.prototype.first=H.prototype.first,H.prototype.hasNext=H.prototype.qd,H.prototype.next=H.prototype.next,H.prototype.reset=H.prototype.reset,H.className=\"SingletonIterator\",W.prototype.reset=function(){var t=this.rb;t.Ja=null,this.ia=t.Da,this.Ra=-1},W.prototype.next=function(){var t=this.rb;if(t.Da!==this.ia&&0>this.key)return!1;var e=(t=t.m).length,i=++this.Ra,n=this.ef;if(null!==n)for(;i<e;){var r=t[i];if(n(r))return this.key=this.Ra=i,this.value=r,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.Td()}return!1},W.prototype.qd=function(){return this.next()},W.prototype.first=function(){var t=this.rb;this.ia=t.Da,this.Ra=0;var e=(t=t.m).length,i=this.ef;if(null!==i){for(var n=0;n<e;){var r=t[n];if(i(r))return this.key=this.Ra=n,this.value=r;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},W.prototype.any=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var i=(e=e.m).length,n=this.ef,r=0;r<i;r++){var o=e[r];if((null===n||n(o))&&t(o))return!0}return!1},W.prototype.all=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var i=(e=e.m).length,n=this.ef,r=0;r<i;r++){var o=e[r];if((null===n||n(o))&&!t(o))return!1}return!0},W.prototype.each=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var i=(e=e.m).length,n=this.ef,r=0;r<i;r++){var o=e[r];(null===n||n(o))&&t(o)}return this},W.prototype.map=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var i=[],n=(e=e.m).length,r=this.ef,o=0;o<n;o++){var s=e[o];(null===r||r(s))&&i.push(t(s))}return(t=new J).m=i,t.lb(),t.iterator},W.prototype.filter=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var i=[],n=(e=e.m).length,r=this.ef,o=0;o<n;o++){var s=e[o];(null===r||r(s))&&t(s)&&i.push(s)}return(t=new J).m=i,t.lb(),t.iterator},W.prototype.Td=function(){this.key=-1,this.value=null,this.ia=-1,this.ef=null,this.rb.Ja=this},W.prototype.toString=function(){return\"ListIterator@\"+this.Ra+\"/\"+this.rb.count},f.Object.defineProperties(W.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.ef},set:function(t){this.ef=t}},count:{get:function(){var t=this.ef;if(null!==t){for(var e=0,i=this.rb.m,n=i.length,r=0;r<n;r++)t(i[r])&&e++;return e}return this.rb.m.length}}}),W.prototype.first=W.prototype.first,W.prototype.hasNext=W.prototype.qd,W.prototype.next=W.prototype.next,W.prototype.reset=W.prototype.reset,W.className=\"ListIterator\",Z.prototype.reset=function(){var t=this.rb;t.Sg=null,this.ia=t.Da,this.Ra=t.m.length},Z.prototype.next=function(){var t=this.rb;if(t.Da!==this.ia&&0>this.key)return!1;var e=--this.Ra;return 0<=e?(this.key=e,this.value=t.m[e],!0):(this.Td(),!1)},Z.prototype.qd=function(){return this.next()},Z.prototype.first=function(){var t=this.rb;this.ia=t.Da;var e=t.m;return this.Ra=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},Z.prototype.any=function(t){var e=this.rb;e.Sg=null;var i=(e=e.m).length;for(this.Ra=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},Z.prototype.all=function(t){var e=this.rb;e.Sg=null;var i=(e=e.m).length;for(this.Ra=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},Z.prototype.each=function(t){var e=this.rb;e.Sg=null;var i=(e=e.m).length;for(this.Ra=i,--i;0<=i;i--)t(e[i]);return this},Z.prototype.map=function(t){var e=this.rb;e.Sg=null;var i=[],n=(e=e.m).length;for(this.Ra=n,--n;0<=n;n--)i.push(t(e[n]));return(t=new J).m=i,t.lb(),t.iterator},Z.prototype.filter=function(t){var e=this.rb;e.Sg=null;var i=[],n=(e=e.m).length;for(this.Ra=n,--n;0<=n;n--){var r=e[n];t(r)&&i.push(r)}return(t=new J).m=i,t.lb(),t.iterator},Z.prototype.Td=function(){this.key=-1,this.value=null,this.ia=-1,this.rb.Sg=this},Z.prototype.toString=function(){return\"ListIteratorBackwards(\"+this.Ra+\"/\"+this.rb.count+\")\"},f.Object.defineProperties(Z.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.rb.m.length}}}),Z.prototype.first=Z.prototype.first,Z.prototype.hasNext=Z.prototype.qd,Z.prototype.next=Z.prototype.next,Z.prototype.reset=Z.prototype.reset,Z.className=\"ListIteratorBackwards\",(e=J.prototype).lb=function(){var t=this.Da;999999999<++t&&(t=0),this.Da=t},e.freeze=function(){return this.v=!0,this},e.ea=function(){return this.v=!1,this},e.toString=function(){return\"List()#\"+it(this)},e.add=function(t){return null===t||(this.v&&k(this,t),this.m.push(t),this.lb()),this},e.push=function(t){this.add(t)},e.addAll=function(t){if(null===t)return this;this.v&&k(this);var e=this.m;if(N(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.lb(),this},e.clear=function(){this.v&&k(this),this.m.length=0,this.lb()},e.contains=function(t){return null!==t&&-1!==this.m.indexOf(t)},e.has=function(t){return this.contains(t)},e.indexOf=function(t){return null===t?-1:this.m.indexOf(t)},e.J=function(t){var e=this.m;return(0>t||t>=e.length)&&M(t,\"0 <= i < length\",J,\"elt:i\"),e[t]},e.get=function(t){return this.J(t)},e.Oc=function(t,e){var i=this.m;(0>t||t>=i.length)&&M(t,\"0 <= i < length\",J,\"setElt:i\"),this.v&&k(this,t),i[t]=e},e.set=function(t,e){this.Oc(t,e)},e.first=function(){var t=this.m;return 0===t.length?null:t[0]},e.$b=function(){var t=this.m,e=t.length;return 0<e?t[e-1]:null},e.pop=function(){this.v&&k(this);var t=this.m;return 0<t.length?t.pop():null},J.prototype.any=function(t){for(var e=this.m,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},J.prototype.all=function(t){for(var e=this.m,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},J.prototype.each=function(t){for(var e=this.m,i=e.length,n=0;n<i;n++)t(e[n]);return this},J.prototype.map=function(t){for(var e=new J,i=[],n=this.m,r=n.length,o=0;o<r;o++)i.push(t(n[o]));return e.m=i,e.lb(),e},J.prototype.filter=function(t){for(var e=new J,i=[],n=this.m,r=n.length,o=0;o<r;o++){var s=n[o];t(s)&&i.push(s)}return e.m=i,e.lb(),e},(e=J.prototype).wb=function(t,e){0>t&&M(t,\">= 0\",J,\"insertAt:i\"),this.v&&k(this,t);var i=this.m;t>=i.length?i.push(e):i.splice(t,0,e),this.lb()},e.remove=function(t){if(null===t)return!1;this.v&&k(this,t);var e=this.m;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.lb(),!0)},e.delete=function(t){return this.remove(t)},e.eb=function(t){var e=this.m;(0>t||t>=e.length)&&M(t,\"0 <= i < length\",J,\"removeAt:i\"),this.v&&k(this,t),t===e.length-1?e.pop():e.splice(t,1),this.lb()},e.removeRange=function(t,e){var i=this.m,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this.v&&k(this);for(var r=t,o=e+1;o<n;)i[r++]=i[o++];return i.length=n-(e-t+1),this.lb(),this},J.prototype.copy=function(){var t=new J,e=this.m;return 0<e.length&&(t.m=Array.prototype.slice.call(e)),t},(e=J.prototype).ya=function(){for(var t=this.m,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},e.Qv=function(){for(var t=new Q,e=this.m,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},e.sort=function(t){return this.v&&k(this),this.m.sort(t),this.lb(),this},e.Vi=function(t,e,i){var n=this.m,r=n.length;void 0===e&&(e=0),void 0===i&&(i=r),this.v&&k(this);var o=i-e;if(1>=o)return this;if((0>e||e>=r-1)&&M(e,\"0 <= from < length\",J,\"sortRange:from\"),2===o)return 0<t(i=n[e],r=n[e+1])&&(n[e]=r,n[e+1]=i,this.lb()),this;if(0===e)if(i>=r)n.sort(t);else for((e=n.slice(0,i)).sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=r)for((i=n.slice(e)).sort(t),t=e;t<r;t++)n[t]=i[t-e];else for((r=n.slice(e,i)).sort(t),t=e;t<i;t++)n[t]=r[t-e];return this.lb(),this},e.reverse=function(){return this.v&&k(this),this.m.reverse(),this.lb(),this},f.Object.defineProperties(J.prototype,{_dataArray:{get:function(){return this.m}},count:{get:function(){return this.m.length}},size:{get:function(){return this.m.length}},length:{get:function(){return this.m.length}},iterator:{get:function(){if(0>=this.m.length)return U;var t=this.Ja;return null!==t?(t.reset(),t):new W(this)}},iteratorBackwards:{get:function(){if(0>=this.m.length)return U;var t=this.Sg;return null!==t?(t.reset(),t):new Z(this)}}}),J.prototype.reverse=J.prototype.reverse,J.prototype.sortRange=J.prototype.Vi,J.prototype.sort=J.prototype.sort,J.prototype.toSet=J.prototype.Qv,J.prototype.toArray=J.prototype.ya,J.prototype.removeRange=J.prototype.removeRange,J.prototype.removeAt=J.prototype.eb,J.prototype.delete=J.prototype.delete,J.prototype.remove=J.prototype.remove,J.prototype.insertAt=J.prototype.wb,J.prototype.pop=J.prototype.pop,J.prototype.last=J.prototype.$b,J.prototype.first=J.prototype.first,J.prototype.set=J.prototype.set,J.prototype.setElt=J.prototype.Oc,J.prototype.get=J.prototype.get,J.prototype.elt=J.prototype.J,J.prototype.indexOf=J.prototype.indexOf,J.prototype.has=J.prototype.has,J.prototype.contains=J.prototype.contains,J.prototype.clear=J.prototype.clear,J.prototype.addAll=J.prototype.addAll,J.prototype.push=J.prototype.push,J.prototype.add=J.prototype.add,J.prototype.thaw=J.prototype.ea,J.prototype.freeze=J.prototype.freeze,J.className=\"List\",$.prototype.reset=function(){var t=this.fg;t.Ja=null,this.ia=t.Da,this.ka=null},$.prototype.next=function(){var t=this.fg;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Td(),!1)},$.prototype.qd=function(){return this.next()},$.prototype.first=function(){var t=this.fg;if(this.ia=t.Da,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},$.prototype.any=function(t){var e=this.fg;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},$.prototype.all=function(t){var e=this.fg;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},$.prototype.each=function(t){var e=this.fg;for(this.ka=e.Ja=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},$.prototype.map=function(t){var e=this.fg;e.Ja=null;var i=new J;for(e=e.ba;null!==e;)i.add(t(e.value)),e=e.oa;return i.iterator},$.prototype.filter=function(t){var e=this.fg;e.Ja=null;var i=new J;for(e=e.ba;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},$.prototype.Td=function(){this.value=this.key=null,this.ia=-1,this.fg.Ja=this},$.prototype.toString=function(){return null!==this.ka?\"SetIterator@\"+this.ka.value:\"SetIterator\"},f.Object.defineProperties($.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fg.Ib}}}),$.prototype.first=$.prototype.first,$.prototype.hasNext=$.prototype.qd,$.prototype.next=$.prototype.next,$.prototype.reset=$.prototype.reset,$.className=\"SetIterator\",(e=Q.prototype).lb=function(){var t=this.Da;999999999<++t&&(t=0),this.Da=t},e.freeze=function(){return this.v=!0,this},e.ea=function(){return this.v=!1,this},e.toString=function(){return\"Set()#\"+it(this)},e.add=function(t){if(null===t)return this;this.v&&k(this,t);var e=t;return P(t)&&(e=et(t)),void 0===this.Jb[e]&&(this.Ib++,t=new ft(t,t),this.Jb[e]=t,null===(e=this.$e)?this.ba=t:(t.vl=e,e.oa=t),this.$e=t,this.lb()),this},e.addAll=function(t){if(null===t)return this;if(this.v&&k(this),N(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},e.contains=function(t){if(null===t)return!1;var e=t;return(!P(t)||void 0!==(e=it(t)))&&void 0!==this.Jb[e]},e.has=function(t){return this.contains(t)},e.oz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},e.pz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},e.first=function(){var t=this.ba;return null===t?null:t.value},Q.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},Q.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},Q.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e.value),e=e.oa;return this},Q.prototype.map=function(t){for(var e=new Q,i=this.ba;null!==i;)e.add(t(i.value)),i=i.oa;return e},Q.prototype.filter=function(t){for(var e=new Q,i=this.ba;null!==i;){var n=i.value;t(n)&&e.add(n),i=i.oa}return e},(e=Q.prototype).remove=function(t){if(null===t)return!1;this.v&&k(this,t);var e=t;if(P(t)&&void 0===(e=it(t)))return!1;if(void 0===(t=this.Jb[e]))return!1;var i=t.oa,n=t.vl;return null!==i&&(i.vl=n),null!==n&&(n.oa=i),this.ba===t&&(this.ba=i),this.$e===t&&(this.$e=n),delete this.Jb[e],this.Ib--,this.lb(),!0},e.delete=function(t){return this.remove(t)},e.oq=function(t){if(null===t)return this;if(this.v&&k(this),N(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},e.LA=function(t){if(null===t||0===this.count)return this;this.v&&k(this);var e=new Q;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.oq(t),this},e.clear=function(){this.v&&k(this),this.Jb={},this.Ib=0,null!==this.Ja&&this.Ja.reset(),this.$e=this.ba=null,this.lb()},Q.prototype.copy=function(){var t,e=new Q,i=this.Jb;for(t in i)e.add(i[t].value);return e},Q.prototype.ya=function(){var t,e=Array(this.Ib),i=this.Jb,n=0;for(t in i)e[n]=i[t].value,n++;return e},Q.prototype.Pv=function(){var t,e=new J,i=this.Jb;for(t in i)e.add(i[t].value);return e},f.Object.defineProperties(Q.prototype,{count:{get:function(){return this.Ib}},size:{get:function(){return this.Ib}},iterator:{get:function(){if(0>=this.Ib)return U;var t=this.Ja;return null!==t?(t.reset(),t):new $(this)}}}),Q.prototype.toList=Q.prototype.Pv,Q.prototype.toArray=Q.prototype.ya,Q.prototype.clear=Q.prototype.clear,Q.prototype.retainAll=Q.prototype.LA,Q.prototype.removeAll=Q.prototype.oq,Q.prototype.delete=Q.prototype.delete,Q.prototype.remove=Q.prototype.remove,Q.prototype.first=Q.prototype.first,Q.prototype.containsAny=Q.prototype.pz,Q.prototype.containsAll=Q.prototype.oz,Q.prototype.has=Q.prototype.has,Q.prototype.contains=Q.prototype.contains,Q.prototype.addAll=Q.prototype.addAll,Q.prototype.add=Q.prototype.add,Q.prototype.thaw=Q.prototype.ea,Q.prototype.freeze=Q.prototype.freeze;var nt,rt,ot,st,at,ht=1;function lt(t){this.ga=t,this.ia=t.Da,this.ka=null}function ut(t){Q.call(this),tt(this),this.v=!0,this.ga=t}function ct(t){this.ga=t,t.Ze=null,this.ia=t.Da,this.ka=null}function ft(t,e){this.key=t,this.value=e,this.vl=this.oa=null}function dt(t){this.ga=t,t.Ja=null,this.ia=t.Da,this.ka=null}function pt(t){tt(this),this.v=!1,this.Jb={},this.Ib=0,this.Ze=this.Ja=null,this.Da=0,this.$e=this.ba=null,\"string\"==typeof t&&w(\"Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type.\"),void 0!==t&&this.addAll(t)}function gt(t,e){void 0===t?this.y=this.x=0:\"number\"==typeof t&&\"number\"==typeof e?(this.x=t,this.y=e):w(\"Invalid arguments to Point constructor: \"+t+\", \"+e),this.v=!1}function yt(t){if(\"string\"==typeof t){t=t.split(\" \");for(var e=0,i=0;\"\"===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;\"\"===t[e];)e++;return(n=t[e++])&&(r=parseFloat(n)),new gt(i,r)}return new gt}function mt(t){return t.x.toString()+\" \"+t.y.toString()}function vt(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}function xt(t,e){return e.Hd(t),t}function bt(t,e,i,n,r,o){var s=r-i,a=o-n,h=s*s+a*a,l=-(i-=t)*s-(n-=e)*a;return 0>=l||l>=h?(s=r-t,a=o-e,Math.min(i*i+n*n,s*s+a*a)):(t=s*n-a*i)*t/h}function wt(t,e,i,n){return(t=i-t)*t+(e=n-e)*e}function kt(t,e,i,n){return e=n-e,0==(t=i-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}Q.className=\"Set\",Q.uniqueHash=tt,Q.hashIdUnique=et,Q.hashId=it,lt.prototype.reset=function(){this.ia=this.ga.Da,this.ka=null},lt.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=this.key=t=e.key,!0):(this.Td(),!1)},lt.prototype.qd=function(){return this.next()},lt.prototype.first=function(){var t=this.ga;return this.ia=t.Da,null!==(t=t.ba)?(this.ka=t,this.value=this.key=t=t.key):null},lt.prototype.any=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},lt.prototype.all=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},lt.prototype.each=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;)t(e.key),e=e.oa;return this},lt.prototype.map=function(t){var e=this.ga;this.ka=null;var i=new J;for(e=e.ba;null!==e;)i.add(t(e.key)),e=e.oa;return i.iterator},lt.prototype.filter=function(t){var e=this.ga;this.ka=null;var i=new J;for(e=e.ba;null!==e;){var n=e.key;t(n)&&i.add(n),e=e.oa}return i.iterator},lt.prototype.Td=function(){this.value=this.key=null,this.ia=-1},lt.prototype.toString=function(){return null!==this.ka?\"MapKeySetIterator@\"+this.ka.value:\"MapKeySetIterator\"},f.Object.defineProperties(lt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Ib}}}),lt.prototype.first=lt.prototype.first,lt.prototype.hasNext=lt.prototype.qd,lt.prototype.next=lt.prototype.next,lt.prototype.reset=lt.prototype.reset,lt.className=\"MapKeySetIterator\",c(ut,Q),(e=ut.prototype).freeze=function(){return this},e.ea=function(){return this},e.toString=function(){return\"MapKeySet(\"+this.ga.toString()+\")\"},e.add=function(){w(\"This Set is read-only: \"+this.toString())},e.contains=function(t){return this.ga.contains(t)},e.has=function(t){return this.contains(t)},e.remove=function(){w(\"This Set is read-only: \"+this.toString())},e.delete=function(t){return this.remove(t)},e.clear=function(){w(\"This Set is read-only: \"+this.toString())},e.first=function(){var t=this.ga.ba;return null!==t?t.key:null},ut.prototype.any=function(t){for(var e=this.ga.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},ut.prototype.all=function(t){for(var e=this.ga.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},ut.prototype.each=function(t){for(var e=this.ga.ba;null!==e;)t(e.key),e=e.oa;return this},ut.prototype.map=function(t){for(var e=new Q,i=this.ga.ba;null!==i;)e.add(t(i.key)),i=i.oa;return e},ut.prototype.filter=function(t){for(var e=new Q,i=this.ga.ba;null!==i;){var n=i.key;t(n)&&e.add(n),i=i.oa}return e},ut.prototype.copy=function(){return new ut(this.ga)},ut.prototype.Qv=function(){var t,e=new Q,i=this.ga.Jb;for(t in i)e.add(i[t].key);return e},ut.prototype.ya=function(){var t,e=this.ga.Jb,i=Array(this.ga.Ib),n=0;for(t in e)i[n]=e[t].key,n++;return i},ut.prototype.Pv=function(){var t,e=new J,i=this.ga.Jb;for(t in i)e.add(i[t].key);return e},f.Object.defineProperties(ut.prototype,{count:{get:function(){return this.ga.Ib}},size:{get:function(){return this.ga.Ib}},iterator:{get:function(){return 0>=this.ga.Ib?U:new lt(this.ga)}}}),ut.prototype.toList=ut.prototype.Pv,ut.prototype.toArray=ut.prototype.ya,ut.prototype.toSet=ut.prototype.Qv,ut.prototype.first=ut.prototype.first,ut.prototype.clear=ut.prototype.clear,ut.prototype.delete=ut.prototype.delete,ut.prototype.remove=ut.prototype.remove,ut.prototype.has=ut.prototype.has,ut.prototype.contains=ut.prototype.contains,ut.prototype.add=ut.prototype.add,ut.prototype.thaw=ut.prototype.ea,ut.prototype.freeze=ut.prototype.freeze,ut.className=\"MapKeySet\",ct.prototype.reset=function(){var t=this.ga;t.Ze=null,this.ia=t.Da,this.ka=null},ct.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Td(),!1)},ct.prototype.qd=function(){return this.next()},ct.prototype.first=function(){var t=this.ga;if(this.ia=t.Da,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},ct.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},ct.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},ct.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},ct.prototype.map=function(t){var e=this.ga;this.ka=e.Ze=null;var i=new J;for(e=e.ba;null!==e;)i.add(t(e.value)),e=e.oa;return i.iterator},ct.prototype.filter=function(t){var e=this.ga;this.ka=e.Ze=null;var i=new J;for(e=e.ba;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},ct.prototype.Td=function(){this.value=this.key=null,this.ia=-1,this.ga.Ze=this},ct.prototype.toString=function(){return null!==this.ka?\"MapValueSetIterator@\"+this.ka.value:\"MapValueSetIterator\"},f.Object.defineProperties(ct.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Ib}}}),ct.prototype.first=ct.prototype.first,ct.prototype.hasNext=ct.prototype.qd,ct.prototype.next=ct.prototype.next,ct.prototype.reset=ct.prototype.reset,ct.className=\"MapValueSetIterator\",ft.prototype.toString=function(){return\"{\"+this.key+\":\"+this.value+\"}\"},ft.className=\"KeyValuePair\",dt.prototype.reset=function(){var t=this.ga;t.Ja=null,this.ia=t.Da,this.ka=null},dt.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.key=e.key,this.value=e.value,!0):(this.Td(),!1)},dt.prototype.qd=function(){return this.next()},dt.prototype.first=function(){var t=this.ga;return this.ia=t.Da,null!==(t=t.ba)?(this.ka=t,this.key=t.key,this.value=t.value,t):null},dt.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},dt.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},dt.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;null!==e;)t(e),e=e.oa;return this},dt.prototype.map=function(t){var e=this.ga;this.ka=e.Ja=null;var i=new J;for(e=e.ba;null!==e;)i.add(t(e)),e=e.oa;return i.iterator},dt.prototype.filter=function(t){var e=this.ga;this.ka=e.Ja=null;var i=new J;for(e=e.ba;null!==e;)t(e)&&i.add(e),e=e.oa;return i.iterator},dt.prototype.Td=function(){this.value=this.key=null,this.ia=-1,this.ga.Ja=this},dt.prototype.toString=function(){return null!==this.ka?\"MapIterator@\"+this.ka:\"MapIterator\"},f.Object.defineProperties(dt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Ib}}}),dt.prototype.first=dt.prototype.first,dt.prototype.hasNext=dt.prototype.qd,dt.prototype.next=dt.prototype.next,dt.prototype.reset=dt.prototype.reset,dt.className=\"MapIterator\",(e=pt.prototype).lb=function(){var t=this.Da;999999999<++t&&(t=0),this.Da=t},e.freeze=function(){return this.v=!0,this},e.ea=function(){return this.v=!1,this},e.toString=function(){return\"Map()#\"+it(this)},e.add=function(t,e){this.v&&k(this,t);var i=t;P(t)&&(i=et(t));var n=this.Jb[i];return void 0===n?(this.Ib++,t=new ft(t,e),this.Jb[i]=t,null===(i=this.$e)?this.ba=t:(t.vl=i,i.oa=t),this.$e=t,this.lb()):n.value=e,this},e.set=function(t,e){return this.add(t,e)},e.addAll=function(t){if(null===t)return this;if(N(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof pt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},e.first=function(){return this.ba},pt.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},pt.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},pt.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e),e=e.oa;return this},pt.prototype.map=function(t){for(var e=new pt,i=this.ba;null!==i;)e.add(i.key,t(i)),i=i.oa;return e},pt.prototype.filter=function(t){for(var e=new pt,i=this.ba;null!==i;)t(i)&&e.add(i.key,i.value),i=i.oa;return e},(e=pt.prototype).contains=function(t){var e=t;return(!P(t)||void 0!==(e=it(t)))&&void 0!==this.Jb[e]},e.has=function(t){return this.contains(t)},e.H=function(t){var e=t;return P(t)&&void 0===(e=it(t))||void 0===(t=this.Jb[e])?null:t.value},e.get=function(t){return this.H(t)},e.remove=function(t){if(null===t)return!1;this.v&&k(this,t);var e=t;if(P(t)&&void 0===(e=it(t)))return!1;if(void 0===(t=this.Jb[e]))return!1;var i=t.oa,n=t.vl;return null!==i&&(i.vl=n),null!==n&&(n.oa=i),this.ba===t&&(this.ba=i),this.$e===t&&(this.$e=n),delete this.Jb[e],this.Ib--,this.lb(),!0},e.delete=function(t){return this.remove(t)},e.clear=function(){this.v&&k(this),this.Jb={},this.Ib=0,null!==this.Ja&&this.Ja.reset(),null!==this.Ze&&this.Ze.reset(),this.$e=this.ba=null,this.lb()},pt.prototype.copy=function(){var t,e=new pt,i=this.Jb;for(t in i){var n=i[t];e.add(n.key,n.value)}return e},pt.prototype.ya=function(){var t,e=this.Jb,i=Array(this.Ib),n=0;for(t in e){var r=e[t];i[n]=new ft(r.key,r.value),n++}return i},pt.prototype.If=function(){return new ut(this)},f.Object.defineProperties(pt.prototype,{count:{get:function(){return this.Ib}},size:{get:function(){return this.Ib}},iterator:{get:function(){if(0>=this.count)return U;var t=this.Ja;return null!==t?(t.reset(),t):new dt(this)}},iteratorKeys:{get:function(){return 0>=this.count?U:new lt(this)}},iteratorValues:{get:function(){if(0>=this.count)return U;var t=this.Ze;return null!==t?(t.reset(),t):new ct(this)}}}),pt.prototype.toKeySet=pt.prototype.If,pt.prototype.toArray=pt.prototype.ya,pt.prototype.clear=pt.prototype.clear,pt.prototype.delete=pt.prototype.delete,pt.prototype.remove=pt.prototype.remove,pt.prototype.get=pt.prototype.get,pt.prototype.getValue=pt.prototype.H,pt.prototype.has=pt.prototype.has,pt.prototype.contains=pt.prototype.contains,pt.prototype.first=pt.prototype.first,pt.prototype.addAll=pt.prototype.addAll,pt.prototype.set=pt.prototype.set,pt.prototype.add=pt.prototype.add,pt.prototype.thaw=pt.prototype.ea,pt.prototype.freeze=pt.prototype.freeze,pt.className=\"Map\",gt.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},gt.prototype.h=function(t,e){return this.x=t,this.y=e,this},gt.prototype.sg=function(t,e){return this.x=t,this.y=e,this},gt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},gt.prototype.copy=function(){var t=new gt;return t.x=this.x,t.y=this.y,t},(e=gt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},e.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.v=!0,this},e.ea=function(){return Object.isFrozen(this)&&w(\"cannot thaw constant: \"+this),this.v=!1,this},e.toString=function(){return\"Point(\"+this.x+\",\"+this.y+\")\"},e.A=function(t){return t instanceof gt&&this.x===t.x&&this.y===t.y},e.Fi=function(t,e){return this.x===t&&this.y===e},e.Ua=function(t){return Xe.w(this.x,t.x)&&Xe.w(this.y,t.y)},e.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.ie=function(t){return this.x-=t.x,this.y-=t.y,this},e.offset=function(t,e){return this.x+=t,this.y+=e,this},gt.prototype.rotate=function(t){if(0===t)return this;var e=this.x,i=this.y;if(0===e&&0===i)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},(e=gt.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},e.xf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},e.pd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},e.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},e.Pa=function(t){return vt(t.x-this.x,t.y-this.y)},e.direction=function(t,e){return vt(t-this.x,e-this.y)},e.nz=function(t,e){return Xe.Vl(t.x,t.y,e.x,e.y,this.x,this.y)},e.BA=function(t,e,i,n){return Xe.Ih(t,e,i,n,this.x,this.y,this),this},e.CA=function(t,e){return Xe.Ih(t.x,t.y,e.x,e.y,this.x,this.y,this),this},e.QA=function(t,e,i,n){return Xe.Wp(this.x,this.y,t,e,i,n,this),this},e.RA=function(t,e){return Xe.Wp(this.x,this.y,t.x,t.y,e.width,e.height,this),this},e.Ti=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},e.Ui=function(t,e,i,n,r){return this.x=t+r.x*i+r.offsetX,this.y=e+r.y*n+r.offsetY,this},e.transform=function(t){return t.Aa(this),this},e.u=function(){return isFinite(this.x)&&isFinite(this.y)},gt.alloc=function(){var t=At.pop();return void 0===t?new gt:t},gt.allocAt=function(t,e){var i=At.pop();return void 0===i?new gt(t,e):(i.x=t,i.y=e,i)},gt.free=function(t){At.push(t)},gt.prototype.isReal=gt.prototype.u,gt.prototype.setSpot=gt.prototype.Ui,gt.prototype.setRectSpot=gt.prototype.Ti,gt.prototype.snapToGridPoint=gt.prototype.RA,gt.prototype.snapToGrid=gt.prototype.QA,gt.prototype.projectOntoLineSegmentPoint=gt.prototype.CA,gt.prototype.projectOntoLineSegment=gt.prototype.BA,gt.intersectingLineSegments=function(t,e,i,n,r,o,s,a){return Xe.bm(t,e,i,n,r,o,s,a)},gt.prototype.compareWithLineSegmentPoint=gt.prototype.nz,gt.compareWithLineSegment=function(t,e,i,n,r,o){return Xe.Vl(t,e,i,n,r,o)},gt.prototype.direction=gt.prototype.direction,gt.prototype.directionPoint=gt.prototype.Pa,gt.prototype.normalize=gt.prototype.normalize,gt.prototype.distanceSquared=gt.prototype.pd,gt.prototype.distanceSquaredPoint=gt.prototype.xf,gt.prototype.scale=gt.prototype.scale,gt.prototype.rotate=gt.prototype.rotate,gt.prototype.offset=gt.prototype.offset,gt.prototype.subtract=gt.prototype.ie,gt.prototype.add=gt.prototype.add,gt.prototype.equalsApprox=gt.prototype.Ua,gt.prototype.equalTo=gt.prototype.Fi,gt.prototype.equals=gt.prototype.A,gt.prototype.set=gt.prototype.set,gt.prototype.setTo=gt.prototype.sg;var Mt,St,Pt,Nt,Ct,Tt,Lt,At=[];function jt(t,e){void 0===t?this.height=this.width=0:\"number\"==typeof t&&(0<=t||isNaN(t))&&\"number\"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):w(\"Invalid arguments to Size constructor: \"+t+\", \"+e),this.v=!1}function Ot(t){if(\"string\"==typeof t){t=t.split(\" \");for(var e=0,i=0;\"\"===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;\"\"===t[e];)e++;return(n=t[e++])&&(r=parseFloat(n)),new jt(i,r)}return new jt}function Dt(t){return t.width.toString()+\" \"+t.height.toString()}gt.className=\"Point\",gt.parse=yt,gt.stringify=mt,gt.distanceLineSegmentSquared=bt,gt.distanceSquared=wt,gt.direction=kt,gt.Origin=nt=new gt(0,0).ca(),gt.InfiniteTopLeft=rt=new gt(-1/0,-1/0).ca(),gt.InfiniteBottomRight=ot=new gt(1/0,1/0).ca(),gt.SixPoint=st=new gt(6,6).ca(),gt.NoPoint=at=new gt(NaN,NaN).ca(),gt.parse=yt,gt.stringify=mt,gt.distanceLineSegmentSquared=bt,gt.distanceSquared=wt,gt.direction=kt,jt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},jt.prototype.h=function(t,e){return this.width=t,this.height=e,this},jt.prototype.sg=function(t,e){return this.width=t,this.height=e,this},jt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},jt.prototype.copy=function(){var t=new jt;return t.width=this.width,t.height=this.height,t},(e=jt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},e.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.v=!0,this},e.ea=function(){return Object.isFrozen(this)&&w(\"cannot thaw constant: \"+this),this.v=!1,this},e.toString=function(){return\"Size(\"+this.width+\",\"+this.height+\")\"},e.A=function(t){return t instanceof jt&&this.width===t.width&&this.height===t.height},e.Fi=function(t,e){return this.width===t&&this.height===e},e.Ua=function(t){return Xe.w(this.width,t.width)&&Xe.w(this.height,t.height)},e.u=function(){return isFinite(this.width)&&isFinite(this.height)},jt.alloc=function(){var t=Ft.pop();return void 0===t?new jt:t},jt.free=function(t){Ft.push(t)},jt.prototype.isReal=jt.prototype.u,jt.prototype.equalsApprox=jt.prototype.Ua,jt.prototype.equalTo=jt.prototype.Fi,jt.prototype.equals=jt.prototype.A,jt.prototype.set=jt.prototype.set,jt.prototype.setTo=jt.prototype.sg;var Ft=[];function Bt(t,e,i,n){void 0===t?this.height=this.width=this.y=this.x=0:\"number\"==typeof t&&\"number\"==typeof e&&\"number\"==typeof i&&(0<=i||isNaN(i))&&\"number\"==typeof n&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):t instanceof gt?(i=t.x,t=t.y,e instanceof gt?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof jt?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):w(\"Incorrect second argument supplied to Rect constructor \"+e)):w(\"Invalid arguments to Rect constructor: \"+t+\", \"+e+\", \"+i+\", \"+n),this.v=!1}function It(t,e,i){t.width=e,t.height=i}function zt(t){if(\"string\"==typeof t){t=t.split(\" \");for(var e=0,i=0;\"\"===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;\"\"===t[e];)e++;(n=t[e++])&&(r=parseFloat(n));for(var o=0;\"\"===t[e];)e++;(n=t[e++])&&(o=parseFloat(n));for(var s=0;\"\"===t[e];)e++;return(n=t[e++])&&(s=parseFloat(n)),new Bt(i,r,o,s)}return new Bt}function Rt(t){return t.x.toString()+\" \"+t.y.toString()+\" \"+t.width.toString()+\" \"+t.height.toString()}function Et(t,e){return Xe.aa(t.x,e.x)&&Xe.aa(t.y,e.y)&&Xe.aa(t.width,e.width)&&Xe.aa(t.height,e.height)}function _t(t,e,i,n,r){var o=t.width;return i+r<=-o?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=i+r),e+n<=-(i=t.height)?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}function Vt(t,e,i,n,r){var o=Math.max(t.x,e),s=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+r),t.x=o,t.y=s,t.width=Math.max(0,e-o),t.height=Math.max(0,i-s),t}function Yt(t,e){var i=t.width,n=t.x,r=e.x-10;return!(n>e.width+10+10+r||r>i+n||(i=t.height,t=t.y,n=e.y-10,t>e.height+10+10+n||n>i+t))}function Gt(t,e,i,n,r){var o=Math.min(t.x,e),s=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+r),t.x=o,t.y=s,t.width=e-o,t.height=i-s,t}function Xt(t,e,i,n,r,o,s,a){return void 0===s&&(s=0),void 0===a&&(a=0),t<=r&&r+s<=t+i&&e<=o&&o+a<=e+n}function Ut(t,e,i,n,r,o,s,a){return!(t>s+r||r>i+t||e>a+o||o>n+e)}jt.className=\"Size\",jt.parse=Ot,jt.stringify=Dt,jt.ZeroSize=Mt=new jt(0,0).ca(),jt.OneSize=St=new jt(1,1).ca(),jt.SixSize=Pt=new jt(6,6).ca(),jt.EightSize=Nt=new jt(8,8).ca(),jt.TenSize=Ct=new jt(10,10).ca(),jt.InfiniteSize=Tt=new jt(1/0,1/0).ca(),jt.NoSize=Lt=new jt(NaN,NaN).ca(),jt.parse=Ot,jt.stringify=Dt,(e=Bt.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.sg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.Pc=function(t){return this.x=t.x,this.y=t.y,this},e.PA=function(t){return this.width=t.width,this.height=t.height,this},Bt.prototype.copy=function(){var t=new Bt;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(e=Bt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},e.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.v=!0,this},e.ea=function(){return Object.isFrozen(this)&&w(\"cannot thaw constant: \"+this),this.v=!1,this},e.toString=function(){return\"Rect(\"+this.x+\",\"+this.y+\",\"+this.width+\",\"+this.height+\")\"},e.A=function(t){return t instanceof Bt&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},e.Fi=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},e.Ua=function(t){return Xe.w(this.x,t.x)&&Xe.w(this.y,t.y)&&Xe.w(this.width,t.width)&&Xe.w(this.height,t.height)},e.$=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},e.Ge=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},e.contains=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},e.offset=function(t,e){return this.x+=t,this.y+=e,this},e.Jc=function(t,e){return _t(this,e,t,e,t)},e.Lp=function(t){return _t(this,t.top,t.right,t.bottom,t.left)},e.Nv=function(t){return _t(this,-t.top,-t.right,-t.bottom,-t.left)},e.eA=function(t,e,i,n){return _t(this,t,e,i,n)},e.Zx=function(t){return Vt(this,t.x,t.y,t.width,t.height)},e.$u=function(t,e,i,n){return Vt(this,t,e,i,n)},e.Lc=function(t){return this.av(t.x,t.y,t.width,t.height)},e.av=function(t,e,i,n){var r=this.width,o=this.x;return!(1/0!==r&&1/0!==i&&(r+=o,i+=t,isNaN(i)||isNaN(r)||o>i||t>r)||(t=this.height,i=this.y,1/0!==t&&1/0!==n&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))},e.Oe=function(t){return Gt(this,t.x,t.y,0,0)},e.Qc=function(t){return Gt(this,t.x,t.y,t.width,t.height)},e.Tv=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),Gt(this,t,e,i,n)},e.Ui=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this},e.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.kA=function(){return 0===this.width&&0===this.height},Bt.alloc=function(){var t=Ht.pop();return void 0===t?new Bt:t},Bt.allocAt=function(t,e,i,n){var r=Ht.pop();return void 0===r?new Bt(t,e,i,n):r.h(t,e,i,n)},Bt.free=function(t){Ht.push(t)},f.Object.defineProperties(Bt.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new gt(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new jt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new gt(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),Bt.prototype.isEmpty=Bt.prototype.kA,Bt.prototype.isReal=Bt.prototype.u,Bt.intersectsLineSegment=function(t,e,i,n,r,o,s,a){return Xe.$x(t,e,i,n,r,o,s,a)},Bt.prototype.setSpot=Bt.prototype.Ui,Bt.prototype.union=Bt.prototype.Tv,Bt.prototype.unionRect=Bt.prototype.Qc,Bt.prototype.unionPoint=Bt.prototype.Oe,Bt.prototype.intersects=Bt.prototype.av,Bt.prototype.intersectsRect=Bt.prototype.Lc,Bt.prototype.intersect=Bt.prototype.$u,Bt.prototype.intersectRect=Bt.prototype.Zx,Bt.prototype.grow=Bt.prototype.eA,Bt.prototype.subtractMargin=Bt.prototype.Nv,Bt.prototype.addMargin=Bt.prototype.Lp,Bt.prototype.inflate=Bt.prototype.Jc,Bt.prototype.offset=Bt.prototype.offset,Bt.prototype.contains=Bt.prototype.contains,Bt.prototype.containsRect=Bt.prototype.Ge,Bt.prototype.containsPoint=Bt.prototype.$,Bt.prototype.equalsApprox=Bt.prototype.Ua,Bt.prototype.equalTo=Bt.prototype.Fi,Bt.prototype.equals=Bt.prototype.A,Bt.prototype.setSize=Bt.prototype.PA,Bt.prototype.setPoint=Bt.prototype.Pc,Bt.prototype.set=Bt.prototype.set,Bt.prototype.setTo=Bt.prototype.sg;var qt,Kt,Ht=[];function Wt(t,e,i,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===i?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==n?(this.top=t,this.right=e,this.bottom=i,this.left=n):w(\"Invalid arguments to Margin constructor: \"+t+\", \"+e+\", \"+i+\", \"+n),this.v=!1}function Zt(t){if(\"string\"==typeof t){t=t.split(\" \");for(var e=0,i=NaN;\"\"===t[e];)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new Wt;for(var r=NaN;\"\"===t[e];)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new Wt(i);for(var o=NaN;\"\"===t[e];)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new Wt(i,r);for(var s=NaN;\"\"===t[e];)e++;return(n=t[e++])&&(s=parseFloat(n)),isNaN(s)?new Wt(i,r):new Wt(i,r,o,s)}return new Wt}function Jt(t){return t.top.toString()+\" \"+t.right.toString()+\" \"+t.bottom.toString()+\" \"+t.left.toString()}Bt.className=\"Rect\",Bt.parse=zt,Bt.stringify=Rt,Bt.contains=Xt,Bt.intersects=Ut,Bt.ZeroRect=qt=new Bt(0,0,0,0).ca(),Bt.NoRect=Kt=new Bt(NaN,NaN,NaN,NaN).ca(),Bt.parse=zt,Bt.stringify=Rt,Bt.contains=Xt,Bt.intersects=Ut,Wt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Wt.prototype.sg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},Wt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Wt.prototype.copy=function(){var t=new Wt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(e=Wt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},e.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.v=!0,this},e.ea=function(){return Object.isFrozen(this)&&w(\"cannot thaw constant: \"+this),this.v=!1,this},e.toString=function(){return\"Margin(\"+this.top+\",\"+this.right+\",\"+this.bottom+\",\"+this.left+\")\"},e.A=function(t){return t instanceof Wt&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},e.Fi=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},e.Ua=function(t){return Xe.w(this.top,t.top)&&Xe.w(this.right,t.right)&&Xe.w(this.bottom,t.bottom)&&Xe.w(this.left,t.left)},e.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Wt.alloc=function(){var t=Ie.pop();return void 0===t?new Wt:t},Wt.free=function(t){Ie.push(t)},Wt.prototype.isReal=Wt.prototype.u,Wt.prototype.equalsApprox=Wt.prototype.Ua,Wt.prototype.equalTo=Wt.prototype.Fi,Wt.prototype.equals=Wt.prototype.A,Wt.prototype.set=Wt.prototype.set,Wt.prototype.setTo=Wt.prototype.sg;var $t,Qt,te,ee,ie,ne,re,oe,se,ae,he,le,ue,ce,fe,de,pe,ge,ye,me,ve,xe,be,we,ke,Me,Se,Pe,Ne,Ce,Te,Le,Ae,je,Oe,De,Fe,Be,Ie=[];function ze(t,e,i,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this.v=!1}function Re(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Ee(t){if(\"string\"==typeof t){if(\"None\"===(t=t.trim()))return te;if(\"TopLeft\"===t)return ee;if(\"Top\"===t||\"TopCenter\"===t||\"MiddleTop\"===t)return ie;if(\"TopRight\"===t)return ne;if(\"Left\"===t||\"LeftCenter\"===t||\"MiddleLeft\"===t)return re;if(\"Center\"===t)return oe;if(\"Right\"===t||\"RightCenter\"===t||\"MiddleRight\"===t)return se;if(\"BottomLeft\"===t)return ae;if(\"Bottom\"===t||\"BottomCenter\"===t||\"MiddleBottom\"===t)return he;if(\"BottomRight\"===t)return le;if(\"TopSide\"===t)return ue;if(\"LeftSide\"===t)return ce;if(\"RightSide\"===t)return fe;if(\"BottomSide\"===t)return de;if(\"TopBottomSides\"===t)return pe;if(\"LeftRightSides\"===t)return ge;if(\"TopLeftSides\"===t)return ye;if(\"TopRightSides\"===t)return me;if(\"BottomLeftSides\"===t)return ve;if(\"BottomRightSides\"===t)return xe;if(\"NotTopSide\"===t)return be;if(\"NotLeftSide\"===t)return we;if(\"NotRightSide\"===t)return ke;if(\"NotBottomSide\"===t)return Me;if(\"AllSides\"===t)return Se;if(\"Default\"===t)return Pe;t=t.split(\" \");for(var e=0,i=0;\"\"===t[e];)e++;var n=t[e++];void 0!==n&&0<n.length&&(i=parseFloat(n));for(var r=0;\"\"===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(r=parseFloat(n));for(var o=0;\"\"===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(o=parseFloat(n));for(var s=0;\"\"===t[e];)e++;return void 0!==(n=t[e++])&&0<n.length&&(s=parseFloat(n)),new ze(i,r,o,s)}return new ze}function _e(t){return t.hb()?t.x.toString()+\" \"+t.y.toString()+\" \"+t.offsetX.toString()+\" \"+t.offsetY.toString():t.toString()}Wt.className=\"Margin\",Wt.parse=Zt,Wt.stringify=Jt,Wt.ZeroMargin=$t=new Wt(0,0,0,0).ca(),Wt.TwoMargin=Qt=new Wt(2,2,2,2).ca(),Wt.parse=Zt,Wt.stringify=Jt,ze.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ze.prototype.sg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},ze.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ze.prototype.copy=function(){var t=new ze;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(e=ze.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},e.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},e.freeze=function(){return this.v=!0,this},e.ea=function(){return Object.isFrozen(this)&&w(\"cannot thaw constant: \"+this),this.v=!1,this},e.toString=function(){return this.hb()?0===this.offsetX&&0===this.offsetY?\"Spot(\"+this.x+\",\"+this.y+\")\":\"Spot(\"+this.x+\",\"+this.y+\",\"+this.offsetX+\",\"+this.offsetY+\")\":this.A(te)?\"None\":this.A(ee)?\"TopLeft\":this.A(ie)?\"Top\":this.A(ne)?\"TopRight\":this.A(re)?\"Left\":this.A(oe)?\"Center\":this.A(se)?\"Right\":this.A(ae)?\"BottomLeft\":this.A(he)?\"Bottom\":this.A(le)?\"BottomRight\":this.A(ue)?\"TopSide\":this.A(ce)?\"LeftSide\":this.A(fe)?\"RightSide\":this.A(de)?\"BottomSide\":this.A(pe)?\"TopBottomSides\":this.A(ge)?\"LeftRightSides\":this.A(ye)?\"TopLeftSides\":this.A(me)?\"TopRightSides\":this.A(ve)?\"BottomLeftSides\":this.A(xe)?\"BottomRightSides\":this.A(be)?\"NotTopSide\":this.A(we)?\"NotLeftSide\":this.A(ke)?\"NotRightSide\":this.A(Me)?\"NotBottomSide\":this.A(Se)?\"AllSides\":this.A(Pe)?\"Default\":\"None\"},e.A=function(t){return t instanceof ze&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},e.pv=function(){return new ze(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},e.Df=function(t){if(!this.Nc())return!1;if(!t.Nc())if(t.A(Ne))t=ce;else if(t.A(Ce))t=fe;else if(t.A(Te))t=ue;else{if(!t.A(Le))return!1;t=de}return t=t.offsetY,(this.offsetY&t)===t},e.hb=function(){return!isNaN(this.x)&&!isNaN(this.y)},e.zc=function(){return isNaN(this.x)||isNaN(this.y)},e.Nc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},e.Ds=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},e.Mb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},ze.alloc=function(){var t=Ve.pop();return void 0===t?new ze:t},ze.free=function(t){Ve.push(t)},ze.prototype.isDefault=ze.prototype.Mb,ze.prototype.isNone=ze.prototype.Ds,ze.prototype.isSide=ze.prototype.Nc,ze.prototype.isNoSpot=ze.prototype.zc,ze.prototype.isSpot=ze.prototype.hb,ze.prototype.includesSide=ze.prototype.Df,ze.prototype.opposite=ze.prototype.pv,ze.prototype.equals=ze.prototype.A,ze.prototype.set=ze.prototype.set,ze.prototype.setTo=ze.prototype.sg;var Ve=[];function Ye(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}ze.className=\"Spot\",ze.parse=Ee,ze.stringify=_e,ze.None=te=Re(new ze(0,0,0,0),0).ca(),ze.Default=Pe=Re(new ze(0,0,-1,0),-1).ca(),ze.TopLeft=ee=new ze(0,0,0,0).ca(),ze.TopCenter=ie=new ze(.5,0,0,0).ca(),ze.TopRight=ne=new ze(1,0,0,0).ca(),ze.LeftCenter=re=new ze(0,.5,0,0).ca(),ze.Center=oe=new ze(.5,.5,0,0).ca(),ze.RightCenter=se=new ze(1,.5,0,0).ca(),ze.BottomLeft=ae=new ze(0,1,0,0).ca(),ze.BottomCenter=he=new ze(.5,1,0,0).ca(),ze.BottomRight=le=new ze(1,1,0,0).ca(),ze.MiddleTop=Ae=ie,ze.MiddleLeft=je=re,ze.MiddleRight=Oe=se,ze.MiddleBottom=De=he,ze.Top=Te=ie,ze.Left=Ne=re,ze.Right=Ce=se,ze.Bottom=Le=he,ze.TopSide=ue=Re(new ze(0,0,1,1),1).ca(),ze.LeftSide=ce=Re(new ze(0,0,1,2),1).ca(),ze.RightSide=fe=Re(new ze(0,0,1,4),1).ca(),ze.BottomSide=de=Re(new ze(0,0,1,8),1).ca(),ze.TopBottomSides=pe=Re(new ze(0,0,1,9),1).ca(),ze.LeftRightSides=ge=Re(new ze(0,0,1,6),1).ca(),ze.TopLeftSides=ye=Re(new ze(0,0,1,3),1).ca(),ze.TopRightSides=me=Re(new ze(0,0,1,5),1).ca(),ze.BottomLeftSides=ve=Re(new ze(0,0,1,10),1).ca(),ze.BottomRightSides=xe=Re(new ze(0,0,1,12),1).ca(),ze.NotTopSide=be=Re(new ze(0,0,1,14),1).ca(),ze.NotLeftSide=we=Re(new ze(0,0,1,13),1).ca(),ze.NotRightSide=ke=Re(new ze(0,0,1,11),1).ca(),ze.NotBottomSide=Me=Re(new ze(0,0,1,7),1).ca(),ze.AllSides=Se=Re(new ze(0,0,1,15),1).ca(),Fe=new ze(.156,.156).ca(),Be=new ze(.844,.844).ca(),ze.parse=Ee,ze.stringify=_e,Ye.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Ye.prototype.setTransform=function(t,e,i,n,r,o){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},Ye.prototype.copy=function(){var t=new Ye;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Ye.prototype.toString=function(){return\"Transform(\"+this.m11+\",\"+this.m12+\",\"+this.m21+\",\"+this.m22+\",\"+this.dx+\",\"+this.dy+\")\"},Ye.prototype.A=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Ye.prototype.Bs=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},Ye.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Ye.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},Ye.prototype.lv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,r=-t.m21*e,o=t.m11*e,s=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,this.dx=this.m11*s+this.m21*t+this.dx,this.dy=this.m12*s+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},Ye.prototype.As=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},Ye.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,i),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.m12*t+this.m22*n,o=this.m11*-n+this.m21*t,s=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=r,this.m21=o,this.m22=s,this.translate(-e,-i),this},(e=Ye.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},e.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},e.Aa=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},e.Hd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},e.yx=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},e.wq=function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,o=this.m11,s=this.m12,a=this.m21,h=this.m22,l=this.dx,u=this.dy,c=e*o+i*a+l,f=e*s+i*h+u,d=n*o+i*a+l,p=n*s+i*h+u;return i=e*o+r*a+l,e=e*s+r*h+u,o=n*o+r*a+l,n=n*s+r*h+u,r=Math.min(c,d),c=Math.max(c,d),d=Math.min(f,p),f=Math.max(f,p),r=Math.min(r,i),c=Math.max(c,i),d=Math.min(d,e),f=Math.max(f,e),r=Math.min(r,o),c=Math.max(c,o),d=Math.min(d,n),f=Math.max(f,n),t.h(r,d,c-r,f-d),t},Ye.alloc=function(){var t=Ge.pop();return void 0===t?new Ye:t},Ye.free=function(t){Ge.push(t)},Ye.prototype.transformRect=Ye.prototype.wq,Ye.prototype.transformPoint=Ye.prototype.Aa,Ye.prototype.scale=Ye.prototype.scale,Ye.prototype.translate=Ye.prototype.translate,Ye.prototype.rotate=Ye.prototype.rotate,Ye.prototype.invert=Ye.prototype.As,Ye.prototype.multiplyInverted=Ye.prototype.lv,Ye.prototype.multiply=Ye.prototype.multiply,Ye.prototype.reset=Ye.prototype.reset,Ye.prototype.isIdentity=Ye.prototype.Bs,Ye.prototype.equals=Ye.prototype.A,Ye.prototype.setTransform=Ye.prototype.setTransform,Ye.prototype.set=Ye.prototype.set;var Ge=[];Ye.className=\"Transform\",Ye.xF=\"54a702f3e53909c447824c6706603faf4c\";var Xe={ZA:\"7da71ca0ad381e90\",vg:(Math.sqrt(2)-1)/3*4,rw:null,sqrt:function(t){if(0>=t)return 0;var e=Xe.rw;if(null===e){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);Xe.rw=e}return 1>t?2e3>=(i=1/t)?1/e[0|i]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},w:function(t,e){return.5>(t-=e)&&-.5<t},aa:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Nb:function(t,e,i,n,r,o,s){if(0>=r&&(r=1e-6),t<i)var a=t,h=i;else a=i,h=t;if(e<n)var l=e,u=n;else l=n,u=e;if(t===i)return l<=s&&s<=u&&t-r<=o&&o<=t+r;if(e===n)return a<=o&&o<=h&&e-r<=s&&s<=e+r;if(h+=r,(a-=r)<=o&&o<=h&&(u+=r,(l-=r)<=s&&s<=u))if(h-a>u-l){if(!(t-i>r||i-t>r))return!0;if((o=(n-e)/(i-t)*(o-t)+e)-r<=s&&s<=o+r)return!0}else{if(!(e-n>r||n-e>r))return!0;if((s=(i-t)/(n-e)*(s-e)+t)-r<=o&&o<=s+r)return!0}return!1},hs:function(t,e,i,n,r,o,s,a,h,l,u,c){if(Xe.Nb(t,e,s,a,c,i,n)&&Xe.Nb(t,e,s,a,c,r,o))return Xe.Nb(t,e,s,a,c,l,u);var f=(t+i)/2,d=(e+n)/2,p=(i+r)/2,g=(n+o)/2,y=((n=(f+p)/2)+(p=(p+(r=(r+s)/2))/2))/2,m=((i=(d+g)/2)+(g=(g+(o=(o+a)/2))/2))/2;return Xe.hs(t,e,f,d,n,i,y,m,h,l,u,c)||Xe.hs(y,m,p,g,r,o,s,a,h,l,u,c)},iz:function(t,e,i,n,r,o,s,a,h){var l=(i+r)/2,u=(n+o)/2;return h.h((((t+i)/2+l)/2+(l+(r+s)/2)/2)/2,(((e+n)/2+u)/2+(u+(o+a)/2)/2)/2),h},hz:function(t,e,i,n,r,o,s,a){var h=(i+r)/2,l=(n+o)/2;return kt(((t+i)/2+h)/2,((e+n)/2+l)/2,(h+(r+s)/2)/2,(l+(o+a)/2)/2)},Tl:function(t,e,i,n,r,o,s,a,h,l){if(Xe.Nb(t,e,s,a,h,i,n)&&Xe.Nb(t,e,s,a,h,r,o))Gt(l,t,e,0,0),Gt(l,s,a,0,0);else{var u=(t+i)/2,c=(e+n)/2,f=(i+r)/2,d=(n+o)/2,p=((n=(u+f)/2)+(f=(f+(r=(r+s)/2))/2))/2,g=((i=(c+d)/2)+(d=(d+(o=(o+a)/2))/2))/2;Xe.Tl(t,e,u,c,n,i,p,g,h,l),Xe.Tl(p,g,f,d,r,o,s,a,h,l)}return l},Fe:function(t,e,i,n,r,o,s,a,h,l){if(Xe.Nb(t,e,s,a,h,i,n)&&Xe.Nb(t,e,s,a,h,r,o))0===l.length&&(l.push(t),l.push(e)),l.push(s),l.push(a);else{var u=(t+i)/2,c=(e+n)/2,f=(i+r)/2,d=(n+o)/2,p=((n=(u+f)/2)+(f=(f+(r=(r+s)/2))/2))/2,g=((i=(c+d)/2)+(d=(d+(o=(o+a)/2))/2))/2;Xe.Fe(t,e,u,c,n,i,p,g,h,l),Xe.Fe(p,g,f,d,r,o,s,a,h,l)}return l},uv:function(t,e,i,n,r,o,s,a,h,l){if(Xe.Nb(t,e,r,o,l,i,n))return Xe.Nb(t,e,r,o,l,a,h);var u=(t+i)/2,c=(e+n)/2,f=(u+(i=(i+r)/2))/2,d=(c+(n=(n+o)/2))/2;return Xe.uv(t,e,u,c,f,d,s,a,h,l)||Xe.uv(f,d,i,n,r,o,s,a,h,l)},nB:function(t,e,i,n,r,o,s){return s.h(((t+i)/2+(i+r)/2)/2,((e+n)/2+(n+o)/2)/2),s},tv:function(t,e,i,n,r,o,s,a){if(Xe.Nb(t,e,r,o,s,i,n))Gt(a,t,e,0,0),Gt(a,r,o,0,0);else{var h=(t+i)/2,l=(e+n)/2,u=(h+(i=(i+r)/2))/2,c=(l+(n=(n+o)/2))/2;Xe.tv(t,e,h,l,u,c,s,a),Xe.tv(u,c,i,n,r,o,s,a)}return a},kq:function(t,e,i,n,r,o,s,a){if(Xe.Nb(t,e,r,o,s,i,n))0===a.length&&(a.push(t),a.push(e)),a.push(r),a.push(o);else{var h=(t+i)/2,l=(e+n)/2,u=(h+(i=(i+r)/2))/2,c=(l+(n=(n+o)/2))/2;Xe.kq(t,e,h,l,u,c,s,a),Xe.kq(u,c,i,n,r,o,s,a)}return a},Np:function(t,e,i,n,r,o,s,a,h,l,u,c,f,d){if(Xe.Nb(t,e,s,a,f,i,n)&&Xe.Nb(t,e,s,a,f,r,o))return!!Xe.bm(t,e,s,a,h,l,u,c)&&0!=(f=(t-s)*(l-c)-(e-a)*(h-u))&&(d.h(((t*a-e*s)*(h-u)-(t-s)*(h*c-l*u))/f,((t*a-e*s)*(l-c)-(e-a)*(h*c-l*u))/f),!0);var p=(t+i)/2,g=(e+n)/2,y=(i+r)/2,m=(n+o)/2,v=((n=(p+y)/2)+(y=(y+(r=(r+s)/2))/2))/2,x=((i=(g+m)/2)+(m=(m+(o=(o+a)/2))/2))/2,b=1/0,w=!1,k=0,M=0;return Xe.Np(t,e,p,g,n,i,v,x,h,l,u,c,f,d)&&(t=(d.x-h)*(d.x-h)+(d.y-l)*(d.y-l))<b&&(b=t,w=!0,k=d.x,M=d.y),Xe.Np(v,x,y,m,r,o,s,a,h,l,u,c,f,d)&&(d.x-h)*(d.x-h)+(d.y-l)*(d.y-l)<b&&(w=!0,k=d.x,M=d.y),w&&(d.x=k,d.y=M),w},Op:function(t,e,i,n,r,o,s,a,h,l,u,c,f){var d=0;if(Xe.Nb(t,e,s,a,f,i,n)&&Xe.Nb(t,e,s,a,f,r,o)){if(0==(f=(t-s)*(l-c)-(e-a)*(h-u)))return d;var p=((t*a-e*s)*(h-u)-(t-s)*(h*c-l*u))/f,g=((t*a-e*s)*(l-c)-(e-a)*(h*c-l*u))/f;if(p>=u)return d;if((h>u?h-u:u-h)<(l>c?l-c:c-l)){if(e<a?(h=e,t=a):(h=a,t=e),g<h||g>t)return d}else if(t<s?(h=t,t=s):h=s,p<h||p>t)return d;0<f?d++:0>f&&d--}else{g=(e+n)/2;var y=(i+r)/2,m=(n+o)/2,v=((n=((p=(t+i)/2)+y)/2)+(y=(y+(r=(r+s)/2))/2))/2,x=((i=(g+m)/2)+(m=(m+(o=(o+a)/2))/2))/2;d+=Xe.Op(t,e,p,g,n,i,v,x,h,l,u,c,f),d+=Xe.Op(v,x,y,m,r,o,s,a,h,l,u,c,f)}return d},Ih:function(t,e,i,n,r,o,s){return Xe.aa(t,i)?(e<n?(i=e,e=n):i=n,o<i?(s.h(t,i),!1):o>e?(s.h(t,e),!1):(s.h(t,o),!0)):Xe.aa(e,n)?(t<i?(n=t,t=i):n=i,r<n?(s.h(n,e),!1):r>t?(s.h(t,e),!1):(s.h(r,e),!0)):-5e-6>(r=((t-r)*(t-i)+(e-o)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)))?(s.h(t,e),!1):1.000005<r?(s.h(i,n),!1):(s.h(t+r*(i-t),e+r*(n-e)),!0)},Le:function(t,e,i,n,r,o,s,a,h){return Xe.w(t,i)&&Xe.w(e,n)?(h.h(t,e),!1):Xe.aa(r,s)?Xe.aa(t,i)?(Xe.Ih(t,e,i,n,r,o,h),!1):Xe.Ih(t,e,i,n,r,(n-e)/(i-t)*(r-t)+e,h):(a=(a-o)/(s-r),Xe.aa(t,i)?(i=a*(t-r)+o,e<n?(r=e,e=n):r=n,i<r?(h.h(t,r),!1):i>e?(h.h(t,e),!1):(h.h(t,i),!0)):(s=(n-e)/(i-t),Xe.aa(a,s)?(Xe.Ih(t,e,i,n,r,o,h),!1):(r=(s*t-a*r+o-e)/(s-a),Xe.aa(s,0)?(t<i?(n=t,t=i):n=i,r<n?(h.h(n,e),!1):r>t?(h.h(t,e),!1):(h.h(r,e),!0)):Xe.Ih(t,e,i,n,r,s*(r-t)+e,h))))},lB:function(t,e,i,n,r){return Xe.Le(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,r)},jB:function(t,e,i,n,r,o,s,a,h,l){function u(i,n){var r=(i-t)*(i-t)+(n-e)*(n-e);r<c&&(c=r,h.h(i,n))}var c=1/0;u(h.x,h.y);var f=0,d=0,p=0,g=0;if(r<s?(f=r,d=s):(f=s,d=r),o<a?(p=r,g=s):(p=s,g=r),f=(d-f)/2+l,l=(g-p)/2+l,r=(r+s)/2,o=(o+a)/2,0===f||0===l)return h;if(.5>(i>t?i-t:t-i)){if(0>(f=1-(i-r)*(i-r)/(f*f)))return h;n=-l*(f=Math.sqrt(f))+o,u(i,l*f+o),u(i,n)}else{if(0>(f=(a=2*(i=(n-e)/(i-t))*(e-i*t)/(l*l)-2*i*o/(l*l)-2*r/(f*f))*a-4*(n=1/(f*f)+i*i/(l*l))*(2*i*t*o/(l*l)-2*e*o/(l*l)+o*o/(l*l)+r*r/(f*f)-1+(e-i*t)*(e-i*t)/(l*l))))return h;u(l=(-a+(f=Math.sqrt(f)))/(2*n),i*l-i*t+e),u(f=(-a-f)/(2*n),i*f-i*t+e)}return h},Cf:function(t,e,i,n,r,o,s,a,h){var l=1e21,u=t,c=e;if(Xe.Le(t,e,t,n,r,o,s,a,h)){var f=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o);f<l&&(l=f,u=h.x,c=h.y)}return Xe.Le(i,e,i,n,r,o,s,a,h)&&(f=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o))<l&&(l=f,u=h.x,c=h.y),Xe.Le(t,e,i,e,r,o,s,a,h)&&(e=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o))<l&&(l=e,u=h.x,c=h.y),Xe.Le(t,n,i,n,r,o,s,a,h)&&(t=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o))<l&&(l=t,u=h.x,c=h.y),h.h(u,c),1e21>l},iB:function(t,e,i,n,r,o,s,a,h){return s=r-s,r=0==(i=t-i)||0===s?0===i?(e=(o-a)/s)*(a=t)+(o-e*r):(o=(e-n)/i)*(a=r)+(e-o*t):(n=(e-n)/i)*(a=(o-(a=(o-a)/s)*r-(t=e-n*t))/(n-a))+t,h.h(a,r),h},ys:function(t,e,i){return Xe.$x(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},$x:function(t,e,i,n,r,o,s,a){var h=t+i,l=e+n;return r===s?(o<a?(s=o,o=a):s=a,t<=r&&r<=h&&s<=l&&o>=e):o===a?(r<s?(a=r,r=s):a=s,e<=o&&o<=l&&a<=h&&r>=t):!!(Xt(t,e,i,n,r,o)||Xt(t,e,i,n,s,a)||Xe.bm(t,e,h,e,r,o,s,a)||Xe.bm(h,e,h,l,r,o,s,a)||Xe.bm(h,l,t,l,r,o,s,a)||Xe.bm(t,l,t,e,r,o,s,a))},bm:function(t,e,i,n,r,o,s,a){return 0>=Xe.Vl(t,e,i,n,r,o)*Xe.Vl(t,e,i,n,s,a)&&0>=Xe.Vl(r,o,s,a,t,e)*Xe.Vl(r,o,s,a,i,n)},Vl:function(t,e,i,n,r,o){return i-=t,0==(o=(t=r-t)*(n-=e)-(e=o-e)*i)&&0<(o=t*i+e*n)&&0>(o=(t-i)*i+(e-n)*n)&&(o=0),o},iq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Fx:function(t,e,i,n,r,o){var s=Math.PI;o||(n*=s/180,r*=s/180);var a=n>r?-1:1;o=[];var h=s/2,l=n;if(1e-5>(n=Math.min(2*s,Math.abs(r-n))))return h=l+a*Math.min(n,h),a=t+i*Math.cos(l),l=e+i*Math.sin(l),t+=i*Math.cos(h),e+=i*Math.sin(h),i=(a+t)/2,h=(l+e)/2,o.push([a,l,i,h,i,h,t,e]),o;for(;1e-5<n;)r=l+a*Math.min(n,h),o.push(Xe.rz(i,l,r,t,e)),n-=Math.abs(r-l),l=r;return o},rz:function(t,e,i,n,r){var o=(i-e)/2,s=t*Math.cos(o),a=t*Math.sin(o),h=-a,l=s*s+h*h,u=l+s*s+h*a;return a=s-(l=4/3*(Math.sqrt(2*l*u)-u)/(s*a-h*s))*h,h=-(s=h+l*s),l=o+e,o=Math.cos(l),l=Math.sin(l),[n+t*Math.cos(e),r+t*Math.sin(e),n+a*o-s*l,r+a*l+s*o,n+a*o-h*l,r+a*l+h*o,n+t*Math.cos(i),r+t*Math.sin(i)]},Wp:function(t,e,i,n,r,o,s){var a=i=Math.floor((t-i)/r)*r+i;return i+r-t<r/2&&(a=i+r),t=n=Math.floor((e-n)/o)*o+n,n+o-e<o/2&&(t=n+o),s.h(a,t),s},Qx:function(t,e){var i,n=Math.max(t,e);t=Math.min(t,e);do{e=n%t,n=i=t,t=e}while(0<e);return i},xz:function(t,e,i,n){var r=0>i,o=0>n;if(t<e)var s=1,a=0;else s=0,a=1;var h=0===s?t:e,l=0===s?i:n;return(0===s?r:o)&&(l=-l),i=0===(s=a)?i:n,(0===s?r:o)&&(i=-i),Xe.yz(h,0===s?t:e,l,i,0,0)},yz:function(t,e,i,n,r,o){if(0<n)if(0<i){r=t*t,t*=i;var s=e*n,a=-(o=e*e)+s,h=-o+Math.sqrt(t*t+s*s);e=a;for(var l=0;9999999999>l&&(e=.5*(a+h))!==a&&e!==h;++l){var u=t/(e+r),c=s/(e+o);if(0<(u=u*u+c*c-1))a=e;else{if(!(0>u))break;h=e}}i=r*i/(e+r)-i,n=o*n/(e+o)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else(o=t*i)<(n=t*t-e*e)?(n=o/n,o=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+o*o)):i=Math.abs(i-t);return i},Qe:new X,Gm:new X,Jf:new X,Kf:0,Hm:100};function Ue(t){tt(this),this.v=!1,void 0===t&&(t=Ue.o),this.ha=t,this.sc=this.ic=this.bd=this.ad=0,this.gj=new J,this.$q=this.gj.Da,this.Mq=(new Bt).freeze(),this.qa=!0,this.Om=this.xk=null,this.Pm=NaN,this.mf=ee,this.nf=le,this.$k=this.al=NaN,this.Of=cs}function qe(t,e){return t.type===Ue.j&&e.type===Ue.o&&!!(1===e.figures.count&&(e=e.figures.J(0),1===e.segments.count&&Xe.w(t.startX,e.startX)&&Xe.w(t.startY,e.startY)&&(e=e.segments.J(0),e.type===ri&&Xe.w(t.endX,e.endX)&&Xe.w(t.endY,e.endY))))}function Ke(t,e,i){switch(t.type){case Ue.j:case Ue.D:case Ue.L:i?e.h(t.ad,t.bd,0,0):Gt(e,t.ad,t.bd,0,0),Gt(e,t.ic,t.sc,0,0);break;case Ue.o:var n=t.figures;t=n.m,n=n.length;for(var r=0;r<n;r++){var o=t[r];i&&0===r?e.h(o.startX,o.startY,0,0):Gt(e,o.startX,o.startY,0,0);for(var s=o.segments.m,a=s.length,h=o.startX,l=o.startY,u=0;u<a;u++){var c=s[u];switch(c.type){case ri:case ni:Gt(e,h=c.endX,l=c.endY,0,0);break;case oi:Xe.Tl(h,l,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,e),h=c.endX,l=c.endY;break;case si:Xe.tv(h,l,c.point1X,c.point1Y,c.endX,c.endY,.5,e),h=c.endX,l=c.endY;break;case ai:case hi:var f=c.type===ai?ei(c,o):ii(c,o,h,l),d=f.length;if(0===d){Gt(e,h=c.type===ai?c.centerX:c.endX,l=c.type===ai?c.centerY:c.endY,0,0);break}c=null;for(var p=0;p<d;p++)c=f[p],Xe.Tl(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.5,e);null!==c&&(h=c[6],l=c[7]);break;default:w(\"Unknown Segment type: \"+c.type)}}}break;default:w(\"Unknown Geometry type: \"+t.type)}}function He(t,e,i,n,r){var o=e.x;e=e.y;for(var s,a,h,l,u=t.bounds.x-20,c=0,f=t.figures.m,d=f.length,p=0;p<d;p++){var g=f[p];if(g.isFilled){if(n&&g.$(o,e,i))return!0;for(var y=g.segments,m=s=g.startX,v=a=g.startY,x=y.m,b=0;b<=y.length;b++){var k=void 0;if(b!==y.length){var M=(k=x[b]).type;t=k.endX,l=k.endY}else M=ri,t=m,l=v;switch(M){case ni:if(m=We(o,e,u,e,s,a,m,v),isNaN(m))return!0;c+=m,m=t,v=l;break;case ri:if(s=We(o,e,u,e,s,a,t,l),isNaN(s))return!0;c+=s;break;case oi:c+=h=Xe.Op(s,a,k.point1X,k.point1Y,k.point2X,k.point2Y,t,l,u,e,o,e,.5);break;case si:c+=h=Xe.Op(s,a,(s+2*k.point1X)/3,(a+2*k.point1Y)/3,(2*k.point1X+t)/3,(2*k.point1Y+l)/3,t,l,u,e,o,e,.5);break;case ai:case hi:var S=(M=k.type===ai?ei(k,g):ii(k,g,s,a)).length;if(0===S){if(s=We(o,e,u,e,s,a,k.type===ai?k.centerX:k.endX,k.type===ai?k.centerY:k.endY),isNaN(s))return!0;c+=s;break}k=null;for(var P=0;P<S;P++){if(k=M[P],0===P){if(h=We(o,e,u,e,s,a,k[0],k[1]),isNaN(h))return!0;c+=h}c+=h=Xe.Op(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],u,e,o,e,.5)}null!==k&&(t=k[6],l=k[7]);break;default:w(\"Unknown Segment type: \"+k.type)}s=t,a=l}if(0!==c)return!0;c=0}else if(g.$(o,e,r?i:i+2))return!0}return 0!==c}function We(t,e,i,n,r,o,s,a){if(Xe.Nb(r,o,s,a,.05,t,e))return NaN;var h=(t-i)*(o-a);if(0===h)return 0;var l=((t*n-e*i)*(r-s)-(t-i)*(r*a-o*s))/h;if(e=(t*n-e*i)*(o-a)/h,l>=t)return 0;if((r>s?r-s:s-r)<(o>a?o-a:a-o)){if(o<a){if(e<o||e>a)return 0}else if(e<a||e>o)return 0}else if(r<s){if(l<r||l>s)return 0}else if(l<s||l>r)return 0;return 0<h?1:-1}function Ze(t,e,i,n){for(var r=(t=t.figures.m).length,o=0;o<r;o++)if(t[o].$(e,i,n))return!0;return!1}function Je(t){if(null===t.xk){var e=t.xk=[],i=t.Om=[],n=[],r=[];if(t.type===Ue.j)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(r);else if(t.type===Ue.D)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),i.push(r);else if(t.type===Ue.L){var o=new Qe;o.startX=t.endX,o.startY=(t.startY+t.endY)/2;var s=new ti(ai);if(s.startAngle=0,s.sweepAngle=360,s.centerX=(t.startX+t.endX)/2,s.centerY=(t.startY+t.endY)/2,s.radiusX=Math.abs(t.startX-t.endX)/2,s.radiusY=Math.abs(t.startY-t.endY)/2,o.add(s),0===(r=(t=ei(s,o)).length))n.push(s.centerX),n.push(s.centerY);else{s=o.startX,o=o.startY;for(var a=0;a<r;a++){var h=t[a];Xe.Fe(s,o,h[2],h[3],h[4],h[5],h[6],h[7],.5,n),s=h[6],o=h[7]}}e.push(n),i.push($e(n))}else for(t=t.figures.iterator;t.next();){r=t.value,(n=[]).push(r.startX),n.push(r.startY),a=s=r.startX,h=o=r.startY;for(var l=r.segments.m,u=l.length,c=0;c<u;c++){var f=l[c];switch(f.type){case ni:4<=n.length&&(e.push(n),i.push($e(n))),(n=[]).push(f.endX),n.push(f.endY),a=s=f.endX,h=o=f.endY;break;case ri:n.push(f.endX),n.push(f.endY),s=f.endX,o=f.endY;break;case oi:Xe.Fe(s,o,f.point1X,f.point1Y,f.point2X,f.point2Y,f.endX,f.endY,.5,n),s=f.endX,o=f.endY;break;case si:Xe.kq(s,o,f.point1X,f.point1Y,f.endX,f.endY,.5,n),s=f.endX,o=f.endY;break;case ai:var d=ei(f,r),p=d.length;if(0===p){n.push(f.centerX),n.push(f.centerY),s=f.centerX,o=f.centerY;break}for(var g=0;g<p;g++){var y=d[g];Xe.Fe(s,o,y[2],y[3],y[4],y[5],y[6],y[7],.5,n),s=y[6],o=y[7]}break;case hi:if(p=(d=ii(f,r,s,o)).length,g=f.endX,y=f.endY,0===p){n.push(g),n.push(y),s=g,o=y;break}for(g=0;g<p;g++)y=d[g],Xe.Fe(s,o,y[2],y[3],y[4],y[5],y[6],y[7],.5,n),s=y[6],o=y[7];break;default:w(\"Segment not of valid type: \"+f.type)}f.isClosed&&(n.push(a),n.push(h))}4<=n.length&&(e.push(n),i.push($e(n)))}}}function $e(t){for(var e=[],i=0,n=0,r=t.length,o=0;o<r;o+=2){var s=t[o],a=t[o+1];0!==o&&e.push(Math.sqrt(wt(i,n,s,a))),i=s,n=a}return e}function Qe(t,e,i,n){tt(this),this.Ew=null,this.v=!1,void 0===i&&(i=!0),this.jr=i,void 0===n&&(n=!0),this.pr=n,this.ad=void 0!==t?t:0,this.bd=void 0!==e?e:0,this.Cl=new J,this.Or=this.Cl.Da,this.qa=!0}function ti(t,e,i,n,r,o,s,a){tt(this),this.v=!1,void 0===t&&(t=ri),this.ha=t,this.ic=void 0!==e?e:0,this.sc=void 0!==i?i:0,void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),t===hi?(0>(t=o%360)&&(t+=360),this.De=t,this.pi=0,this.ri=Math.max(n,0),this.fh=Math.max(r,0),this.hl=\"boolean\"==typeof s?s:\"number\"==typeof s&&!!s,this.Dk=!!a):(this.De=n,this.pi=r,t===ai&&(o=Math.max(o,0)),this.ri=o,\"number\"==typeof s?(t===ai&&(s=Math.max(s,0)),this.fh=s):this.fh=0,this.Dk=this.hl=!1),this.mj=!1,this.qa=!0,this.Rd=null}function ei(t,e){if(null!==t.Rd&&!1===e.qa)return t.Rd;var i=t.radiusX,n=t.radiusY;if(void 0===n&&(n=i),0===i||0===n)return t.Rd=[],t.Rd;e=t.De;var r=t.pi,o=Xe.Fx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var s=Ye.alloc();s.reset(),i<n?s.scale(1,n/i):s.scale(i/n,1),Ue.Ba(o,s),Ye.free(s)}for(i=o.length,n=0;n<i;n++)(s=o[n])[0]+=e,s[1]+=r,s[2]+=e,s[3]+=r,s[4]+=e,s[5]+=r,s[6]+=e,s[7]+=r;return t.Rd=o,t.Rd}function ii(t,e,i,n){function r(t,e,i,n){return(t*n<e*i?-1:1)*Math.acos((t*i+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n)))}if(null!==t.Rd&&!1===e.qa)return t.Rd;if(0===t.radiusX||0===t.radiusY)return t.Rd=[],t.Rd;e=t.ri;var o=t.fh;0===e&&(e=1e-4),0===o&&(o=1e-4);var s=Math.PI/180*t.De,a=t.hl,h=t.Dk,l=t.ic,u=t.sc,c=Math.cos(s),f=Math.sin(s),d=c*(i-l)/2+f*(n-u)/2,p=d*d/(e*e)+(s=-f*(i-l)/2+c*(n-u)/2)*s/(o*o);return 1<p&&(e*=Math.sqrt(p),o*=Math.sqrt(p)),p=(a===h?-1:1)*Math.sqrt((e*e*o*o-e*e*s*s-o*o*d*d)/(e*e*s*s+o*o*d*d)),isNaN(p)&&(p=0),a=p*e*s/o,p=p*-o*d/e,isNaN(a)&&(a=0),isNaN(p)&&(p=0),i=(i+l)/2+c*a-f*p,n=(n+u)/2+f*a+c*p,u=r(1,0,(d-a)/e,(s-p)/o),s=r(c=(d-a)/e,l=(s-p)/o,d=(-d-a)/e,a=(-s-p)/o),-1>=(d=(c*d+l*a)/(Math.sqrt(c*c+l*l)*Math.sqrt(d*d+a*a)))?s=Math.PI:1<=d&&(s=0),!h&&0<s&&(s-=2*Math.PI),h&&0>s&&(s+=2*Math.PI),h=e>o?1:e/o,d=e>o?o/e:1,e=Xe.Fx(0,0,e>o?e:o,u,u+s,!0),(o=Ye.alloc()).reset(),o.translate(i,n),o.rotate(t.De,0,0),o.scale(h,d),Ue.Ba(e,o),Ye.free(o),t.Rd=e,t.Rd}Xe.za=Xe.ZA,Ue.prototype.copy=function(){var t=new Ue;t.ha=this.ha,t.ad=this.ad,t.bd=this.bd,t.ic=this.ic,t.sc=this.sc;for(var e=this.gj.m,i=e.length,n=t.gj,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.$q=this.$q,t.Mq.assign(this.Mq),t.qa=this.qa,t.xk=this.xk,t.Om=this.Om,t.Pm=this.Pm,t.mf=this.mf.I(),t.nf=this.nf.I(),t.al=this.al,t.$k=this.$k,t.Of=this.Of,t},Ue.prototype.ca=function(){return this.freeze(),Object.freeze(this),this},Ue.prototype.freeze=function(){this.v=!0;var t=this.figures;t.freeze();for(var e=(t=t.m).length,i=0;i<e;i++)t[i].freeze();return this},Ue.prototype.ea=function(){Object.isFrozen(this)&&w(\"cannot thaw constant: \"+this),this.v=!1;var t=this.figures;t.ea();for(var e=(t=t.m).length,i=0;i<e;i++)t[i].ea();return this},Ue.prototype.Ua=function(t){if(!(t instanceof Ue))return!1;if(this.type!==t.type)return this.type===Ue.j&&t.type===Ue.o?qe(this,t):t.type===Ue.j&&this.type===Ue.o&&qe(t,this);if(this.type===Ue.o){var e=this.figures.m;t=t.figures.m;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Ua(t[n]))return!1;return!0}return Xe.w(this.startX,t.startX)&&Xe.w(this.startY,t.startY)&&Xe.w(this.endX,t.endX)&&Xe.w(this.endY,t.endY)},Ue.wa=function(t){return t.toString()},Ue.prototype.gb=function(t){t.classType===Ue&&(this.type=t)},Ue.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case Ue.j:return 0>t?\"M\"+this.startX.toString()+\" \"+this.startY.toString()+\"L\"+this.endX.toString()+\" \"+this.endY.toString():\"M\"+this.startX.toFixed(t)+\" \"+this.startY.toFixed(t)+\"L\"+this.endX.toFixed(t)+\" \"+this.endY.toFixed(t);case Ue.D:var e=new Bt(this.startX,this.startY,0,0);return e.Tv(this.endX,this.endY,0,0),0>t?\"M\"+e.x.toString()+\" \"+e.y.toString()+\"H\"+e.right.toString()+\"V\"+e.bottom.toString()+\"H\"+e.left.toString()+\"z\":\"M\"+e.x.toFixed(t)+\" \"+e.y.toFixed(t)+\"H\"+e.right.toFixed(t)+\"V\"+e.bottom.toFixed(t)+\"H\"+e.left.toFixed(t)+\"z\";case Ue.L:if((e=new Bt(this.startX,this.startY,0,0)).Tv(this.endX,this.endY,0,0),0>t)return\"M\"+(t=e.left.toString()+\" \"+(e.y+e.height/2).toString())+\"A\"+(e.width/2).toString()+\" \"+(e.height/2).toString()+\" 0 0 1 \"+e.right.toString()+\" \"+(e.y+e.height/2).toString()+\"A\"+(e.width/2).toString()+\" \"+(e.height/2).toString()+\" 0 0 1 \"+t;var i=e.left.toFixed(t)+\" \"+(e.y+e.height/2).toFixed(t);return\"M\"+i+\"A\"+(e.width/2).toFixed(t)+\" \"+(e.height/2).toFixed(t)+\" 0 0 1 \"+e.right.toFixed(t)+\" \"+(e.y+e.height/2).toFixed(t)+\"A\"+(e.width/2).toFixed(t)+\" \"+(e.height/2).toFixed(t)+\" 0 0 1 \"+i;case Ue.o:e=\"\";for(var n=(i=this.figures.m).length,r=0;r<n;r++){var o=i[r];0<r&&(e+=\" x \"),o.isFilled&&(e+=\"F \"),e+=o.toString(t)}return e;default:return this.type.toString()}},Ue.Ma=function(t){for(var e=(t=t.split(/[Xx]/)).length,i=\"\",n=0;n<e;n++){var r=t[n];i=null!==r.match(/[Ff]/)?0===n?i+r:i+\"X\"+(\" \"===r[0]?\"\":\" \")+r:i+(0===n?\"\":\"X \")+\"F\"+(\" \"===r[0]?\"\":\" \")+r}return i},Ue.parse=function(t,e){function i(){return g>=b-1||null!==l[g+1].match(w)}function n(){return g++,l[g]}function r(t){var e=parseFloat(n()),i=parseFloat(n());y===y.toLowerCase()&&(e=x.x+e,i=x.y+i),t.h(e,i)}function o(){return r(x),x}function s(){return r(v),v}function a(){var t=m.toLowerCase();return\"c\"!==t&&\"s\"!==t&&\"q\"!==t&&\"t\"!==t?x:new gt(2*x.x-v.x,2*x.y-v.y)}void 0===e&&(e=!1);var h=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,l=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm,\" \")).replace(h,\"$1 $2\")).replace(h,\"$1 $2\")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,\"$1 $2\")).replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,\"$1 $2\")).replace(/([0-9])([+\\-])/gm,\"$1 $2\")).replace(/[\\s\\r\\t\\n]+/gm,\" \")).replace(/^\\s+|\\s+$/g,\"\")).split(\" \");for(t=0;t<l.length;t++){var u=l[t];if(null!==u.match(/(\\.[0-9]*)(\\.)/gm)){h=A();for(var c=\"\",f=!1,d=0;d<u.length;d++){var p=u[d];\".\"!==p||f?\".\"===p?(h.push(c),c=\".\"):c+=p:(f=!0,c+=p)}for(h.push(c),l.splice(t,1),u=0;u<h.length;u++)l.splice(t+u,0,h[u]);t+=h.length-1,j(h)}}var g=-1,y=\"\",m=\"\";h=new gt(0,0);var v=new gt(0,0),x=new gt(0,0),b=l.length;t=Hl(null),c=u=!1,f=!0,d=null;for(var w=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(g>=b-1);)if(m=y,\"\"!==(y=n()))switch(y.toUpperCase()){case\"X\":f=!0,c=u=!1;break;case\"M\":for(d=o(),null===t.jc||!0===f?(Gl(t,d.x,d.y,u,!c),f=!1):t.moveTo(d.x,d.y),h.assign(x);!i();)d=o(),t.lineTo(d.x,d.y);break;case\"L\":for(;!i();)d=o(),t.lineTo(d.x,d.y);break;case\"H\":for(;!i();)x=new gt((y===y.toLowerCase()?x.x:0)+parseFloat(n()),x.y),t.lineTo(x.x,x.y);break;case\"V\":for(;!i();)x=new gt(x.x,(y===y.toLowerCase()?x.y:0)+parseFloat(n())),t.lineTo(x.x,x.y);break;case\"C\":for(;!i();){r(d=new gt),p=s();var k=o();Ul(t,d.x,d.y,p.x,p.y,k.x,k.y)}break;case\"S\":for(;!i();)d=a(),p=s(),k=o(),Ul(t,d.x,d.y,p.x,p.y,k.x,k.y);break;case\"Q\":for(;!i();)d=s(),p=o(),ql(t,d.x,d.y,p.x,p.y);break;case\"T\":for(;!i();)v=d=a(),p=o(),ql(t,d.x,d.y,p.x,p.y);break;case\"B\":for(;!i();){d=parseFloat(n()),p=parseFloat(n()),k=parseFloat(n());var M=parseFloat(n()),S=parseFloat(n()),P=S,N=!1;i()||(P=parseFloat(n()),i()||(N=0!==parseFloat(n()))),y===y.toLowerCase()&&(k+=x.x,M+=x.y),t.arcTo(d,p,k,M,S,P,N)}break;case\"A\":for(;!i();)d=Math.abs(parseFloat(n())),p=Math.abs(parseFloat(n())),k=parseFloat(n()),S=M=!1,N=P=0,1===(P=n()).length?(M=!!parseFloat(P),S=!!parseFloat(n()),P=parseFloat(n())):2===P.length?(M=!!parseFloat(P[0]),S=!!parseFloat(P[1]),P=parseFloat(n())):(M=!!parseFloat(P[0]),S=!!parseFloat(P[1]),P=parseFloat(P.slice(2))),N=parseFloat(n()),y===y.toLowerCase()&&(P=x.x+P,N=x.y+N),x.h(P,N),Kl(t,d,p,k,M,S,P,N);break;case\"Z\":Xl(t),x.assign(h);break;case\"F\":for(d=\"\",p=1;l[g+p];)if(null!==l[g+p].match(/[Uu]/))p++;else{if(null!==l[g+p].match(w)){d=l[g+p];break}p++}d.match(/[Mm]/)?u=!0:0<t.jc.segments.length&&(t.jc.isFilled=!0);break;case\"U\":for(d=\"\",p=1;l[g+p];)if(null!==l[g+p].match(/[Ff]/))p++;else{if(null!==l[g+p].match(w)){d=l[g+p];break}p++}d.match(/[Mm]/)?c=!0:t.zm(!1)}if(h=t.ss,Wl=t,e)for(e=h.figures.iterator;e.next();)e.value.isFilled=!0;return h},Ue.Ba=function(t,e){for(var i=t.length,n=gt.alloc(),r=0;r<i;r++){var o=t[r];n.x=o[0],n.y=o[1],e.Aa(n),o[0]=n.x,o[1]=n.y,n.x=o[2],n.y=o[3],e.Aa(n),o[2]=n.x,o[3]=n.y,n.x=o[4],n.y=o[5],e.Aa(n),o[4]=n.x,o[5]=n.y,n.x=o[6],n.y=o[7],e.Aa(n),o[6]=n.x,o[7]=n.y}gt.free(n)},Ue.prototype.ev=function(){if(this.qa||this.$q!==this.figures.Da)return!0;for(var t=this.figures.m,e=t.length,i=0;i<e;i++)if(t[i].ev())return!0;return!1},Ue.prototype.computeBounds=function(){this.qa=!1,this.Om=this.xk=null,this.Pm=NaN,this.$q=this.figures.Da;for(var t=this.figures.m,e=t.length,i=0;i<e;i++){var n=t[i];n.qa=!1;var r=n.segments;n.Or=r.Da,r=(n=r.m).length;for(var o=0;o<r;o++){var s=n[o];s.qa=!1,s.Rd=null}}(t=this.Mq).ea(),isNaN(this.al)||isNaN(this.$k)?t.h(0,0,0,0):t.h(0,0,this.al,this.$k),Ke(this,t,!1),Gt(t,0,0,0,0),t.freeze()},Ue.prototype.Ex=function(){var t=new Bt;return Ke(this,t,!0),t},Ue.prototype.normalize=function(){this.v&&k(this);var t=this.Ex();return this.offset(-t.x,-t.y),new gt(-t.x,-t.y)},Ue.prototype.offset=function(t,e){return this.v&&k(this),this.transform(1,0,0,1,t,e),this},Ue.prototype.scale=function(t,e){return this.v&&k(this),this.transform(t,0,0,e,0,0),this},Ue.prototype.rotate=function(t,e,i){this.v&&k(this),void 0===e&&(e=0),void 0===i&&(i=0);var n=Ye.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Ye.free(n),this},(e=Ue.prototype).transform=function(t,e,i,n,r,o){switch(this.type){case Ue.j:case Ue.D:case Ue.L:var s=this.ad,a=this.bd;this.ad=s*t+a*i+r,this.bd=s*e+a*n+o,s=this.ic,a=this.sc,this.ic=s*t+a*i+r,this.sc=s*e+a*n+o;break;case Ue.o:for(var h=this.figures.m,l=h.length,u=0;u<l;u++){var c=h[u];s=c.startX,a=c.startY,c.startX=s*t+a*i+r,c.startY=s*e+a*n+o;for(var f=(c=c.segments.m).length,d=0;d<f;d++){var p=c[d];switch(p.type){case ri:case ni:s=p.endX,a=p.endY,p.endX=s*t+a*i+r,p.endY=s*e+a*n+o;break;case oi:s=p.point1X,a=p.point1Y,p.point1X=s*t+a*i+r,p.point1Y=s*e+a*n+o,s=p.point2X,a=p.point2Y,p.point2X=s*t+a*i+r,p.point2Y=s*e+a*n+o,s=p.endX,a=p.endY,p.endX=s*t+a*i+r,p.endY=s*e+a*n+o;break;case si:s=p.point1X,a=p.point1Y,p.point1X=s*t+a*i+r,p.point1Y=s*e+a*n+o,s=p.endX,a=p.endY,p.endX=s*t+a*i+r,p.endY=s*e+a*n+o;break;case ai:s=p.centerX,a=p.centerY,p.centerX=s*t+a*i+r,p.centerY=s*e+a*n+o,0!==e&&(0>(s=180*Math.atan2(e,t)/Math.PI)&&(s+=360),p.startAngle+=s),0>t&&(p.startAngle=180-p.startAngle,p.sweepAngle=-p.sweepAngle),0>n&&(p.startAngle=-p.startAngle,p.sweepAngle=-p.sweepAngle),p.radiusX*=Math.sqrt(t*t+i*i),void 0!==p.radiusY&&(p.radiusY*=Math.sqrt(e*e+n*n));break;case hi:if(s=p.endX,a=p.endY,p.endX=s*t+a*i+r,p.endY=s*e+a*n+o,0===p.radiusX||0===p.radiusY)break;0!==e&&(0>(s=180*Math.atan2(e,t)/Math.PI)&&(s+=360),p.xAxisRotation+=s),0>t&&(p.xAxisRotation=180-p.xAxisRotation,p.isClockwiseArc=!p.isClockwiseArc),0>n&&(p.xAxisRotation=-p.xAxisRotation,p.isClockwiseArc=!p.isClockwiseArc),p.radiusX*=Math.sqrt(t*t+i*i),p.radiusY*=Math.sqrt(e*e+n*n);break;default:w(\"Unknown Segment type: \"+p.type)}}}}return this.qa=!0,this},e.$=function(t,e){void 0===e&&(e=0);var i=this.ad,n=this.bd,r=this.ic,o=this.sc;switch(this.type){case Ue.j:return Xe.Nb(i,n,r,o,e,t.x,t.y);case Ue.D:var s=Bt.allocAt(Math.min(i,r)-e,Math.min(n,o)-e,Math.abs(r-i)+2*e,Math.abs(o-n)+2*e);return t=s.$(t),Bt.free(s),t;case Ue.L:s=Math.min(i,r)-e;var a=Math.min(n,o)-e;return i=(Math.abs(r-i)+2*e)/2,e=(Math.abs(o-n)+2*e)/2,!(0>=i||0>=e)&&1>=(s=t.x-(s+i))*s/(i*i)+(a=t.y-(a+e))*a/(e*e);case Ue.o:return He(this,t,e,!0,!1);default:return!1}},e.Tu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new gt),this.type===Ue.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,s=0,a=0;a<r;a++){var h=n[a],l=h.length;for(t=0;t<l;t++){var u=h[t];if(s+u>=o)return n=o-s,n=0===u?0:n/u,a=(i=i[a])[2*t],r=i[2*t+1],e.h(a+(i[2*t+2]-a)*n,r+(i[2*t+3]-r)*n),e;s+=u}}return e},e.Rx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===Ue.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,r=this.flattenedTotalLength*t,o=0,s=0;s<n;s++){var a=i[s],h=a.length;for(t=0;t<h;t++){var l=a[t];if(o+l>=r)return e=(r=e[s])[2*t],i=r[2*t+1],n=r[2*t+2],t=r[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;o+=l}}return NaN},e.Uu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===Ue.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,s=0,a=0;a<r;a++){var h=n[a],l=h.length;for(t=0;t<l;t++){var u=h[t];if(s+u>=o)return n=o-s,n=0===u?0:n/u,i=(u=i[a])[2*t],a=u[2*t+1],r=u[2*t+2],t=u[2*t+3],e[0]=i+(r-i)*n,e[1]=a+(t-a)*n,e[2]=1>Math.abs(r-i)&&1>Math.abs(t-a)?0:1>Math.abs(r-i)?0<=t-a?90:270:1>Math.abs(t-a)?0<=r-i?0:180:180*Math.atan2(t-a,r-i)/Math.PI,e;s+=u}}return e},e.Sx=function(t){if(this.type===Ue.j){var e=this.startX,i=this.startY,n=this.endX,r=this.endY;if(e!==n||i!==r){var o=t.x;if(t=t.y,e===n){if(i<r){var s=i;n=r}else s=r,n=i;return t<=s?s===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-s)}if(i===r)return e<n?s=e:(s=n,n=e),o<=s?s===e?0:1:o>=n?n===e?0:1:Math.abs(o-e)/(n-s);s=(n-e)*(n-e)+(r-i)*(r-i);var a=gt.alloc();return Xe.Ih(e,i,n,r,o,t,a),t=a.x,o=a.y,gt.free(a),Math.sqrt(((t-e)*(t-e)+(o-i)*(o-i))/s)}}else{if(this.type!==Ue.D){e=this.flattenedSegments,i=this.flattenedLengths,o=this.flattenedTotalLength,n=gt.alloc(),r=1/0,a=s=0,m=e.length;for(var h=v=0,l=0;l<m;l++)for(var u=e[l],c=i[l],f=u.length,d=0;d<f;d+=2){var p=u[d],g=u[d+1];if(0!==d){Xe.Ih(v,h,p,g,t.x,t.y,n);var y=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);y<r&&(r=y,s=a,s+=Math.sqrt((n.x-v)*(n.x-v)+(n.y-h)*(n.y-h))),a+=c[(d-2)/2]}v=p,h=g}return gt.free(n),0>(t=s/o)?0:1<t?1:t}s=this.startX,a=this.startY;var m=this.endX;if(r=this.endY,s!==m||a!==r){o=2*(e=m-s)+2*(i=r-a),n=t.x,t=t.y,n=Math.min(Math.max(n,s),m),t=Math.min(Math.max(t,a),r),s=Math.abs(n-s),m=Math.abs(n-m),a=Math.abs(t-a),r=Math.abs(t-r);var v=Math.min(s,m,a,r);if(v===a)return n/o;if(v===m)return(e+t)/o;if(v===r)return(2*e+i-n)/o;if(v===s)return(2*e+2*i-t)/o}}return 0},e.add=function(t){return this.gj.add(t),this},e.Am=function(t,e,i,n,r,o,s,a){return this.v&&k(this),this.mf=new ze(t,e,r,o).freeze(),this.nf=new ze(i,n,s,a).freeze(),this},f.Object.defineProperties(Ue.prototype,{flattenedSegments:{get:function(){return Je(this),this.xk}},flattenedLengths:{get:function(){return Je(this),this.Om}},flattenedTotalLength:{get:function(){var t=this.Pm;if(isNaN(t)){if(this.type===Ue.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===Ue.D)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var i=(e=this.flattenedLengths).length,n=t=0;n<i;n++)for(var r=e[n],o=r.length,s=0;s<o;s++)t+=r[s];this.Pm=t}return t}},type:{get:function(){return this.ha},set:function(t){this.ha!==t&&(this.v&&k(this,t),this.ha=t,this.qa=!0)}},startX:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.v&&k(this,t),this.ad=t,this.qa=!0)}},startY:{get:function(){return this.bd},set:function(t){this.bd!==t&&(this.v&&k(this,t),this.bd=t,this.qa=!0)}},endX:{get:function(){return this.ic},set:function(t){this.ic!==t&&(this.v&&k(this,t),this.ic=t,this.qa=!0)}},endY:{get:function(){return this.sc},set:function(t){this.sc!==t&&(this.v&&k(this,t),this.sc=t,this.qa=!0)}},figures:{get:function(){return this.gj},set:function(t){this.gj!==t&&(this.v&&k(this,t),this.gj=t,this.qa=!0)}},spot1:{get:function(){return this.mf},set:function(t){this.v&&k(this,t),this.mf=t.I()}},spot2:{get:function(){return this.nf},set:function(t){this.v&&k(this,t),this.nf=t.I()}},defaultStretch:{get:function(){return this.Of},set:function(t){this.v&&k(this,t),this.Of=t}},bounds:{get:function(){return this.ev()&&this.computeBounds(),this.Mq}}}),Ue.prototype.setSpots=Ue.prototype.Am,Ue.prototype.add=Ue.prototype.add,Ue.prototype.getFractionForPoint=Ue.prototype.Sx,Ue.prototype.getPointAndAngleAlongPath=Ue.prototype.Uu,Ue.prototype.getAngleAlongPath=Ue.prototype.Rx,Ue.prototype.getPointAlongPath=Ue.prototype.Tu,Ue.prototype.containsPoint=Ue.prototype.$,Ue.prototype.transform=Ue.prototype.transform,Ue.prototype.rotate=Ue.prototype.rotate,Ue.prototype.scale=Ue.prototype.scale,Ue.prototype.offset=Ue.prototype.offset,Ue.prototype.normalize=Ue.prototype.normalize,Ue.prototype.computeBoundsWithoutOrigin=Ue.prototype.Ex,Ue.prototype.equalsApprox=Ue.prototype.Ua,Ue.className=\"Geometry\",Ue.j=new V(Ue,\"Line\",0),Ue.D=new V(Ue,\"Rectangle\",1),Ue.L=new V(Ue,\"Ellipse\",2),Ue.o=new V(Ue,\"Path\",3),Ue.Qb=\"UuBbMmZzLlHhVvCcSsQqTtAaFfXx\",Ue.className=\"Geometry\",Ue.stringify=Ue.wa,Ue.fillPath=Ue.Ma,Ue.parse=Ue.parse,Ue.Line=Ue.j,Ue.Rectangle=Ue.D,Ue.Ellipse=Ue.L,Ue.Path=Ue.o,Qe.prototype.copy=function(){var t=new Qe;t.jr=this.jr,t.pr=this.pr,t.ad=this.ad,t.bd=this.bd;for(var e=this.Cl.m,i=e.length,n=t.Cl,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.Or=this.Or,t.qa=this.qa,t.Ew=this.Ew,t},(e=Qe.prototype).Ua=function(t){if(!(t instanceof Qe&&Xe.w(this.startX,t.startX)&&Xe.w(this.startY,t.startY)))return!1;var e=this.segments.m;t=t.segments.m;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Ua(t[n]))return!1;return!0},e.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?\"M\"+this.startX.toString()+\" \"+this.startY.toString():\"M\"+this.startX.toFixed(t)+\" \"+this.startY.toFixed(t),i=this.segments.m,n=i.length,r=0;r<n;r++)e+=\" \"+i[r].toString(t);return e},e.freeze=function(){this.v=!0;var t=this.segments;t.freeze();var e=t.m;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},e.ea=function(){this.v=!1;var t=this.segments;t.ea();for(var e=(t=t.m).length,i=0;i<e;i++)t[i].ea();return this},e.ev=function(){if(this.qa)return!0;var t=this.segments;if(this.Or!==t.Da)return!0;for(var e=(t=t.m).length,i=0;i<e;i++)if(t[i].qa)return!0;return!1},e.add=function(t){return this.Cl.add(t),this},e.$=function(t,e,i){for(var n=this.startX,r=this.startY,o=n,s=r,a=this.segments.m,h=a.length,l=0;l<h;l++){var u=a[l];switch(u.type){case ni:o=u.endX,s=u.endY,n=u.endX,r=u.endY;break;case ri:if(Xe.Nb(n,r,u.endX,u.endY,i,t,e))return!0;n=u.endX,r=u.endY;break;case oi:if(Xe.hs(n,r,u.point1X,u.point1Y,u.point2X,u.point2Y,u.endX,u.endY,.5,t,e,i))return!0;n=u.endX,r=u.endY;break;case si:if(Xe.uv(n,r,u.point1X,u.point1Y,u.endX,u.endY,.5,t,e,i))return!0;n=u.endX,r=u.endY;break;case ai:case hi:var c=u.type===ai?ei(u,this):ii(u,this,n,r),f=c.length,d=u.type===ai?u.centerX:u.endX,p=u.type===ai?u.centerY:u.endY;if(0===f){if(Xe.Nb(n,r,d,p,i,t,e))return!0;n=d,r=p;break}for(d=null,p=0;p<f;p++)if(d=c[p],0===p&&Xe.Nb(n,r,d[0],d[1],i,t,e)||Xe.hs(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,t,e,i))return!0;null!==d&&(n=d[6],r=d[7]);break;default:w(\"Unknown Segment type: \"+u.type)}if(u.isClosed&&(n!==o||r!==s)&&Xe.Nb(n,r,o,s,i,t,e))return!0}return!1},f.Object.defineProperties(Qe.prototype,{isFilled:{get:function(){return this.jr},set:function(t){this.v&&k(this,t),this.jr=t}},isShadowed:{get:function(){return this.pr},set:function(t){this.v&&k(this,t),this.pr=t}},startX:{get:function(){return this.ad},set:function(t){this.v&&k(this,t),this.ad=t,this.qa=!0}},startY:{get:function(){return this.bd},set:function(t){this.v&&k(this,t),this.bd=t,this.qa=!0}},segments:{get:function(){return this.Cl},set:function(t){this.v&&k(this,t),this.Cl=t,this.qa=!0}}}),Qe.prototype.add=Qe.prototype.add,Qe.prototype.equalsApprox=Qe.prototype.Ua,Qe.className=\"PathFigure\",ti.prototype.copy=function(){var t=new ti;return t.ha=this.ha,t.ic=this.ic,t.sc=this.sc,t.De=this.De,t.pi=this.pi,t.ri=this.ri,t.fh=this.fh,t.hl=this.hl,t.Dk=this.Dk,t.mj=this.mj,t.qa=this.qa,t},(e=ti.prototype).Ua=function(t){if(!(t instanceof ti)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case ni:case ri:return Xe.w(this.endX,t.endX)&&Xe.w(this.endY,t.endY);case oi:return Xe.w(this.endX,t.endX)&&Xe.w(this.endY,t.endY)&&Xe.w(this.point1X,t.point1X)&&Xe.w(this.point1Y,t.point1Y)&&Xe.w(this.point2X,t.point2X)&&Xe.w(this.point2Y,t.point2Y);case si:return Xe.w(this.endX,t.endX)&&Xe.w(this.endY,t.endY)&&Xe.w(this.point1X,t.point1X)&&Xe.w(this.point1Y,t.point1Y);case ai:return Xe.w(this.startAngle,t.startAngle)&&Xe.w(this.sweepAngle,t.sweepAngle)&&Xe.w(this.centerX,t.centerX)&&Xe.w(this.centerY,t.centerY)&&Xe.w(this.radiusX,t.radiusX)&&Xe.w(this.radiusY,t.radiusY);case hi:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&Xe.w(this.xAxisRotation,t.xAxisRotation)&&Xe.w(this.endX,t.endX)&&Xe.w(this.endY,t.endY)&&Xe.w(this.radiusX,t.radiusX)&&Xe.w(this.radiusY,t.radiusY);default:return!1}},e.gb=function(t){t.classType===ti&&(this.type=t)},e.toString=function(t){switch(void 0===t&&(t=-1),this.type){case ni:t=0>t?\"M\"+this.endX.toString()+\" \"+this.endY.toString():\"M\"+this.endX.toFixed(t)+\" \"+this.endY.toFixed(t);break;case ri:t=0>t?\"L\"+this.endX.toString()+\" \"+this.endY.toString():\"L\"+this.endX.toFixed(t)+\" \"+this.endY.toFixed(t);break;case oi:t=0>t?\"C\"+this.point1X.toString()+\" \"+this.point1Y.toString()+\" \"+this.point2X.toString()+\" \"+this.point2Y.toString()+\" \"+this.endX.toString()+\" \"+this.endY.toString():\"C\"+this.point1X.toFixed(t)+\" \"+this.point1Y.toFixed(t)+\" \"+this.point2X.toFixed(t)+\" \"+this.point2Y.toFixed(t)+\" \"+this.endX.toFixed(t)+\" \"+this.endY.toFixed(t);break;case si:t=0>t?\"Q\"+this.point1X.toString()+\" \"+this.point1Y.toString()+\" \"+this.endX.toString()+\" \"+this.endY.toString():\"Q\"+this.point1X.toFixed(t)+\" \"+this.point1Y.toFixed(t)+\" \"+this.endX.toFixed(t)+\" \"+this.endY.toFixed(t);break;case ai:t=0>t?\"B\"+this.startAngle.toString()+\" \"+this.sweepAngle.toString()+\" \"+this.centerX.toString()+\" \"+this.centerY.toString()+\" \"+this.radiusX.toString()+\" \"+this.radiusY.toString():\"B\"+this.startAngle.toFixed(t)+\" \"+this.sweepAngle.toFixed(t)+\" \"+this.centerX.toFixed(t)+\" \"+this.centerY.toFixed(t)+\" \"+this.radiusX.toFixed(t)+\" \"+this.radiusY.toFixed(t);break;case hi:t=0>t?\"A\"+this.radiusX.toString()+\" \"+this.radiusY.toString()+\" \"+this.xAxisRotation.toString()+\" \"+(this.isLargeArc?1:0)+\" \"+(this.isClockwiseArc?1:0)+\" \"+this.endX.toString()+\" \"+this.endY.toString():\"A\"+this.radiusX.toFixed(t)+\" \"+this.radiusY.toFixed(t)+\" \"+this.xAxisRotation.toFixed(t)+\" \"+(this.isLargeArc?1:0)+\" \"+(this.isClockwiseArc?1:0)+\" \"+this.endX.toFixed(t)+\" \"+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.mj?\"z\":\"\")},e.freeze=function(){return this.v=!0,this},e.ea=function(){return this.v=!1,this},e.close=function(){return this.mj=!0,this},f.Object.defineProperties(ti.prototype,{isClosed:{get:function(){return this.mj},set:function(t){this.mj!==t&&(this.mj=t,this.qa=!0)}},type:{get:function(){return this.ha},set:function(t){this.v&&k(this,t),this.ha=t,this.qa=!0}},endX:{get:function(){return this.ic},set:function(t){this.v&&k(this,t),this.ic=t,this.qa=!0}},endY:{get:function(){return this.sc},set:function(t){this.v&&k(this,t),this.sc=t,this.qa=!0}},point1X:{get:function(){return this.De},set:function(t){this.v&&k(this,t),this.De=t,this.qa=!0}},point1Y:{get:function(){return this.pi},set:function(t){this.v&&k(this,t),this.pi=t,this.qa=!0}},point2X:{get:function(){return this.ri},set:function(t){this.v&&k(this,t),this.ri=t,this.qa=!0}},point2Y:{get:function(){return this.fh},set:function(t){this.v&&k(this,t),this.fh=t,this.qa=!0}},centerX:{get:function(){return this.De},set:function(t){this.v&&k(this,t),this.De=t,this.qa=!0}},centerY:{get:function(){return this.pi},set:function(t){this.v&&k(this,t),this.pi=t,this.qa=!0}},radiusX:{get:function(){return this.ri},set:function(t){0>t&&M(t,\">= zero\",ti,\"radiusX\"),this.v&&k(this,t),this.ri=t,this.qa=!0}},radiusY:{get:function(){return this.fh},set:function(t){0>t&&M(t,\">= zero\",ti,\"radiusY\"),this.v&&k(this,t),this.fh=t,this.qa=!0}},startAngle:{get:function(){return this.ic},set:function(t){this.ic!==t&&(this.v&&k(this,t),0>(t%=360)&&(t+=360),this.ic=t,this.qa=!0)}},sweepAngle:{get:function(){return this.sc},set:function(t){this.v&&k(this,t),360<t&&(t=360),-360>t&&(t=-360),this.sc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.Dk},set:function(t){this.v&&k(this,t),this.Dk=t,this.qa=!0}},isLargeArc:{get:function(){return this.hl},set:function(t){this.v&&k(this,t),this.hl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.De},set:function(t){0>(t%=360)&&(t+=360),this.v&&k(this,t),this.De=t,this.qa=!0}}}),ti.prototype.equalsApprox=ti.prototype.Ua;var ni=new V(ti,\"Move\",0),ri=new V(ti,\"Line\",1),oi=new V(ti,\"Bezier\",2),si=new V(ti,\"QuadraticBezier\",3),ai=new V(ti,\"Arc\",4),hi=new V(ti,\"SvgArc\",4);function li(){this.C=null,this.ou=new gt(0,0).freeze(),this.yt=new gt(0,0).freeze(),this.Fq=this.yr=0,this.Gq=1,this.di=\"\",this.ds=this.Uq=!1,this.Sq=this.Iq=0,this.xg=this.gr=this.mr=!1,this.Yq=null,this.bs=0,this.od=this.$r=null}function ui(){this.C=null,this.na=\"\",this.Gr=this.Wr=null}function ci(){this.Vm=di,this.ff=this.xr=\"\",this.Ao=this.Bo=this.Go=this.Ho=this.Fo=this.C=this.Wb=null}ti.className=\"PathSegment\",ti.Move=ni,ti.Line=ri,ti.Bezier=oi,ti.QuadraticBezier=si,ti.Arc=ai,ti.SvgArc=hi,li.prototype.copy=function(){var t=new li;return this.clone(t)},li.prototype.clone=function(t){return t.C=this.C,t.ou.assign(this.viewPoint),t.yt.assign(this.documentPoint),t.yr=this.yr,t.Fq=this.Fq,t.Gq=this.Gq,t.di=this.di,t.Uq=this.Uq,t.ds=this.ds,t.Iq=this.Iq,t.Sq=this.Sq,t.mr=this.mr,t.gr=this.gr,t.xg=this.xg,t.Yq=this.Yq,t.bs=this.bs,t.$r=this.$r,t.od=this.od,t},li.prototype.toString=function(){var t=\"^\";return 0!==this.modifiers&&(t+=\"M:\"+this.modifiers),0!==this.button&&(t+=\"B:\"+this.button),\"\"!==this.key&&(t+=\"K:\"+this.key),0!==this.clickCount&&(t+=\"C:\"+this.clickCount),0!==this.delta&&(t+=\"D:\"+this.delta),this.handled&&(t+=\"h\"),this.bubbles&&(t+=\"b\"),null!==this.documentPoint&&(t+=\"@\"+this.documentPoint.toString()),t},li.prototype.Zp=function(t,e){var i=this.diagram;return null===i||qr(i,this.event,t,e),e},li.prototype.Zz=function(t,e){var i=this.diagram;return null===i||(qr(i,this.event,t,e),e.assign(i.Xs(e))),e},f.Object.defineProperties(li.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},viewPoint:{get:function(){return this.ou},set:function(t){this.ou.assign(t)}},documentPoint:{get:function(){return this.yt},set:function(t){this.yt.assign(t)}},modifiers:{get:function(){return this.yr},set:function(t){this.yr=t}},button:{get:function(){return this.Fq},set:function(t){if(this.Fq=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Gq},set:function(t){this.Gq=t}},key:{get:function(){return this.di},set:function(t){this.di=t}},down:{get:function(){return this.Uq},set:function(t){this.Uq=t}},up:{get:function(){return this.ds},set:function(t){this.ds=t}},clickCount:{get:function(){return this.Iq},set:function(t){this.Iq=t}},delta:{get:function(){return this.Sq},set:function(t){this.Sq=t}},isMultiTouch:{get:function(){return this.mr},set:function(t){this.mr=t}},handled:{get:function(){return this.gr},set:function(t){this.gr=t}},bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},event:{get:function(){return this.Yq},set:function(t){this.Yq=t}},isTouchEvent:{get:function(){var t=y.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=y.PointerEvent)&&e instanceof t&&(\"touch\"===e.pointerType||\"pen\"===e.pointerType)}},timestamp:{get:function(){return this.bs},set:function(t){this.bs=t}},targetDiagram:{get:function(){return this.$r},set:function(t){this.$r=t}},targetObject:{get:function(){return this.od},set:function(t){this.od=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||\"mousedown\"!==t.type&&\"mouseup\"!==t.type&&\"pointerdown\"!==t.type&&\"pointerup\"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||\"mousedown\"!==t.type&&\"mouseup\"!==t.type&&\"pointerdown\"!==t.type&&\"pointerup\"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||\"mousedown\"!==t.type&&\"mouseup\"!==t.type&&\"pointerdown\"!==t.type&&\"pointerup\"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),li.prototype.getMultiTouchDocumentPoint=li.prototype.Zz,li.prototype.getMultiTouchViewPoint=li.prototype.Zp,li.className=\"InputEvent\",ui.prototype.copy=function(){var t=new ui;return t.C=this.C,t.na=this.na,t.Wr=this.Wr,t.Gr=this.Gr,t},ui.prototype.toString=function(){var t=\"*\"+this.name;return null!==this.subject&&(t+=\":\"+this.subject.toString()),null!==this.parameter&&(t+=\"(\"+this.parameter.toString()+\")\"),t},f.Object.defineProperties(ui.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},name:{get:function(){return this.na},set:function(t){this.na=t}},subject:{get:function(){return this.Wr},set:function(t){this.Wr=t}},parameter:{get:function(){return this.Gr},set:function(t){this.Gr=t}}}),ui.className=\"DiagramEvent\",ci.prototype.clear=function(){this.Ao=this.Bo=this.Go=this.Ho=this.Fo=this.C=this.Wb=null},ci.prototype.copy=function(){var t=new ci;t.Vm=this.Vm,t.xr=this.xr,t.ff=this.ff,t.Wb=this.Wb,t.C=this.C,t.Fo=this.Fo;var e=this.Ho;return t.Ho=P(e)&&\"function\"==typeof e.I?e.I():e,e=this.Go,t.Go=P(e)&&\"function\"==typeof e.I?e.I():e,e=this.Bo,t.Bo=P(e)&&\"function\"==typeof e.I?e.I():e,e=this.Ao,t.Ao=P(e)&&\"function\"==typeof e.I?e.I():e,t},ci.prototype.gb=function(t){t.classType===ci&&(this.change=t)},ci.prototype.toString=function(){var t=\"\";return t=this.change===fi?t+\"* \":this.change===di?t+(null!==this.model?\"!m\":\"!d\"):t+(null!==this.model?\"!m\":\"!d\")+this.change,this.propertyName&&\"string\"==typeof this.propertyName&&(t+=\" \"+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=\" \"+this.modelChange),t+=\": \",this.change===fi?null!==this.oldValue&&(t+=\" \"+this.oldValue):(null!==this.object&&(t+=D(this.object)),null!==this.oldValue&&(t+=\"  old: \"+D(this.oldValue)),null!==this.oldParam&&(t+=\" \"+this.oldParam),null!==this.newValue&&(t+=\"  new: \"+D(this.newValue)),null!==this.newParam&&(t+=\" \"+this.newParam)),t},ci.prototype.H=function(t){return t?this.oldValue:this.newValue},ci.prototype.aA=function(t){return t?this.oldParam:this.newParam},ci.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},ci.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},ci.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},ci.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},f.Object.defineProperties(ci.prototype,{model:{get:function(){return this.Wb},set:function(t){this.Wb=t}},diagram:{get:function(){return this.C},set:function(t){this.C=t}},change:{get:function(){return this.Vm},set:function(t){this.Vm=t}},modelChange:{get:function(){return this.xr},set:function(t){this.xr=t}},propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},isTransactionFinished:{get:function(){return this.Vm===fi&&(\"CommittedTransaction\"===this.ff||\"FinishedUndo\"===this.ff||\"FinishedRedo\"===this.ff)}},object:{get:function(){return this.Fo},set:function(t){this.Fo=t}},oldValue:{get:function(){return this.Ho},set:function(t){this.Ho=t}},oldParam:{get:function(){return this.Go},set:function(t){this.Go=t}},newValue:{get:function(){return this.Bo},set:function(t){this.Bo=t}},newParam:{get:function(){return this.Ao},set:function(t){this.Ao=t}}}),ci.prototype.redo=ci.prototype.redo,ci.prototype.canRedo=ci.prototype.canRedo,ci.prototype.undo=ci.prototype.undo,ci.prototype.canUndo=ci.prototype.canUndo,ci.prototype.getParam=ci.prototype.aA,ci.prototype.getValue=ci.prototype.H,ci.prototype.clear=ci.prototype.clear;var fi=new V(ci,\"Transaction\",-1),di=new V(ci,\"Property\",0),pi=new V(ci,\"Insert\",1),gi=new V(ci,\"Remove\",2);function yi(){this.o=(new J).freeze(),this.na=\"\",this.j=!1}function mi(){this.Rt=new Q,this.vd=!1,this.D=(new J).freeze(),this.se=-1,this.o=999,this.ue=!1,this.Qq=null,this.xi=0,this.j=!1,this.ze=(new J).freeze(),this.ql=new J,this.Ft=!0,this.It=this.kr=this.Lt=this.Kt=!1}function vi(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&S(\"Ending transaction without having started a transaction: \"+i);var n=1===t.transactionLevel,r=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Db(\"CommittingTransaction\",i,r));var o=0;if(0<t.transactionLevel&&(t.xi--,t.isEnabled)){var s=t.ze.count;0<s&&(\"\"===i&&(i=t.ze.J(0)),t.ze.ea(),t.ze.eb(s-1),t.ze.freeze()),0<(s=t.ql.count)&&(o=t.ql.J(s-1),t.ql.eb(s-1))}if(n){if(e){if(t.kr=!1,null===r&&\"\"!==i&&(r=t.currentTransaction),t.isEnabled&&null!==r){for(r.isComplete||(r.isComplete=!0,r.name=i),(e=t.history).ea(),n=e.count-1;n>t.historyIndex;n--)null!==(o=e.J(n))&&o.clear(),e.eb(n),t.kr=!0;0<=(n=t.maxHistoryLength)&&(0===n?e.clear():e.count>=n&&(null!==(o=e.J(0))&&o.clear(),e.eb(0),t.se--)),0===n||0!==e.count&&e.get(e.count-1)===r||(e.add(r),t.se++),e.freeze()}t.isInternalTransaction||t.Db(\"CommittedTransaction\",i,r)}else{t.ue=!0;try{t.isEnabled&&null!==r&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Db(\"RolledBackTransaction\",i,r),t.ue=!1}null!==r&&r.clear()}return t.Qq=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==r){for(t=o,r=(i=r.changes).count-1;r>=t;r--)null!==(e=i.J(r))&&e.undo(),i.ea(),i.eb(r);i.freeze()}return!1}function xi(){tt(this),this.C=vr,this.na=\"\",this.vd=!0,this.Qb=!1,this.sk=null,this.Wy=new li,this.fs=-1}function bi(){xi.call(this),this.name=\"ToolManager\",this.Gb=new J,this.Rb=new J,this.rc=new J,this.L=this.wa=850,this.o=new jt(2,2).ca(),this.Ma=5e3,this.Ba=ki,this.D=Pi,this.Pq=this.j=null,this.Jj=-1}function wi(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}ci.className=\"ChangedEvent\",ci.Transaction=fi,ci.Property=di,ci.Insert=pi,ci.Remove=gi,yi.prototype.toString=function(t){var e=\"Transaction: \"+this.name+\" \"+this.changes.count.toString()+(this.isComplete?\"\":\", incomplete\");if(void 0!==t&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.J(i);null!==n&&(e+=\"\\n  \"+n.toString())}}return e},yi.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.J(e);null!==i&&i.clear()}t.clear(),t.freeze()},yi.prototype.canUndo=function(){return this.isComplete},yi.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.J(t);null!==e&&e.undo()}},yi.prototype.canRedo=function(){return this.isComplete},yi.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.J(e);null!==i&&i.redo()}},yi.prototype.Ms=function(){if(this.isComplete){var t=this.changes;t.ea();for(var e=new pt,i=0;i<t.count;i++){var n=t.J(i);if(null!==n&&n.change===di&&n.object){var r=e.get(n.object);r||(r=new pt,e.set(n.object,r));var o=r.get(n.propertyName);null===o?r.set(n.propertyName,-1):(0<o&&t.Oc(o,null),r.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)null!==(n=t.J(i))&&(i>e&&t.Oc(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},f.Object.defineProperties(yi.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.na},set:function(t){this.na=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),yi.prototype.optimize=yi.prototype.Ms,yi.prototype.redo=yi.prototype.redo,yi.prototype.canRedo=yi.prototype.canRedo,yi.prototype.undo=yi.prototype.undo,yi.prototype.canUndo=yi.prototype.canUndo,yi.prototype.clear=yi.prototype.clear,yi.className=\"Transaction\",mi.prototype.toString=function(t){var e=\"UndoManager \"+this.historyIndex+\"<\"+this.history.count+\"<=\"+this.maxHistoryLength;e+=\"[\";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=\" \"),e+=this.nestedTransactionNames.J(n);if(e+=\"]\",void 0!==t&&0<t)for(i=this.history.count,n=0;n<i;n++)e+=\"\\n \"+this.history.J(n).toString(t-1);return e},mi.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.J(e);null!==i&&i.clear()}t.clear(),this.se=-1,t.freeze(),this.ue=!1,this.Qq=null,this.xi=0,this.ze.ea(),this.ze.clear(),this.ze.freeze(),this.ql.clear(),this.It=this.kr=this.Lt=this.Kt=!1},mi.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(e=mi.prototype).ux=function(t){this.Rt.add(t)},e.py=function(t){this.Rt.remove(t)},e.xa=function(t){if(void 0===t&&(t=\"\"),null===t&&(t=\"\"),this.isUndoingRedoing)return!1;!0===this.Ft&&(this.Ft=!1,this.xi++,this.isInternalTransaction||this.Db(\"StartingFirstTransaction\",t,this.currentTransaction),0<this.xi&&this.xi--),this.isEnabled&&(this.ze.ea(),this.ze.add(t),this.ze.freeze(),null===this.currentTransaction?this.ql.add(0):this.ql.add(this.currentTransaction.changes.count)),this.xi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Db(\"StartedTransaction\",t,this.currentTransaction)),e},e.Xa=function(t){return void 0===t&&(t=\"\"),vi(this,!0,t)},e.Hf=function(){return vi(this,!1,\"\")},mi.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},mi.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.ue=!0,this.Db(\"StartingUndo\",\"Undo\",t),this.se--,t.undo()}catch(t){S(\"undo error: \"+t.toString())}finally{this.Db(\"FinishedUndo\",\"Undo\",t),this.ue=!1}}},mi.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},mi.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.ue=!0,this.Db(\"StartingRedo\",\"Redo\",t),this.se++,t.redo()}catch(t){S(\"redo error: \"+t.toString())}finally{this.Db(\"FinishedRedo\",\"Redo\",t),this.ue=!1}}},mi.prototype.Db=function(t,e,i){void 0===i&&(i=null);var n=new ci;for(n.change=fi,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)e=t.value,n.model=e,e.js(n)},mi.prototype.Yu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.Qq=e=new yi);var i=t.copy();(e=e.changes).ea(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ft&&(null!==(t=t.diagram)&&!1===t.Oi||S(\"Change not within a transaction: \"+i.toString()))}},mi.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},f.Object.defineProperties(mi.prototype,{models:{get:function(){return this.Rt.iterator}},isEnabled:{get:function(){return this.vd},set:function(t){this.vd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.J(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.J(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.ue}},history:{get:function(){return this.D}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.se}},currentTransaction:{get:function(){return this.Qq}},transactionLevel:{get:function(){return this.xi}},isInTransaction:{get:function(){return 0<this.xi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.ze}},isPendingClear:{get:function(){return this.Kt},set:function(t){this.Kt=t}},isPendingUnmodified:{get:function(){return this.Lt},set:function(t){this.Lt=t}},isInternalTransaction:{get:function(){return this.It},set:function(t){this.It=t}},isJustDiscarded:{get:function(){return this.kr}}}),mi.prototype.handleChanged=mi.prototype.Yu,mi.prototype.redo=mi.prototype.redo,mi.prototype.undo=mi.prototype.undo,mi.prototype.canUndo=mi.prototype.canUndo,mi.prototype.rollbackTransaction=mi.prototype.Hf,mi.prototype.commitTransaction=mi.prototype.Xa,mi.prototype.startTransaction=mi.prototype.xa,mi.prototype.removeModel=mi.prototype.py,mi.prototype.addModel=mi.prototype.ux,mi.prototype.clear=mi.prototype.clear,mi.className=\"UndoManager\",xi.prototype.toString=function(){return\"\"!==this.name?this.name+\" Tool\":O(this.constructor)},xi.prototype.updateAdornments=function(){},xi.prototype.canStart=function(){return this.isEnabled},xi.prototype.doStart=function(){},xi.prototype.doActivate=function(){this.isActive=!0},xi.prototype.doDeactivate=function(){this.isActive=!1},xi.prototype.doStop=function(){},xi.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},xi.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor=\"\")},xi.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},xi.prototype.doMouseMove=function(){},xi.prototype.doMouseUp=function(){this.stopTool()},xi.prototype.doMouseWheel=function(){},xi.prototype.canStartMultiTouch=function(){return!0},xi.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.Zp(0,gt.allocAt(NaN,NaN)),n=e.Zp(1,gt.allocAt(NaN,NaN));if(i.u()&&n.u()&&(this.doCancel(),t.am(\"hasGestureZoom\"))){t.Xw=t.scale;var r=n.x-i.x,o=n.y-i.y;t.gx=Math.sqrt(r*r+o*o),e.bubbles=!1}gt.free(i),gt.free(n)},xi.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.Zp(0,gt.allocAt(NaN,NaN)),n=e.Zp(1,gt.allocAt(NaN,NaN));if(i.u()&&n.u()&&(this.doCancel(),t.am(\"hasGestureZoom\"))){var r=n.x-i.x,o=n.y-i.y;o=Math.sqrt(r*r+o*o)/t.gx,r=new gt((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),o*=t.Xw;var s=t.commandHandler;if(o!==t.scale&&s.canResetZoom(o)){var a=t.zoomPoint;t.zoomPoint=r,s.resetZoom(o),t.zoomPoint=a}e.bubbles=!1}gt.free(i),gt.free(n)},xi.prototype.doKeyDown=function(){\"Esc\"===this.diagram.lastInput.key&&this.doCancel()},xi.prototype.doKeyUp=function(){},xi.prototype.xa=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.xa(t)},xi.prototype.stopTransaction=function(){var t=this.diagram;return null===this.transactionResult?t.Hf():t.Xa(this.transactionResult)},xi.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.Zl(e.documentPoint,!1);if(null!==i){if(E?e.meta:e.control){for(t.S(\"ChangingSelection\",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.S(\"ChangedSelection\",t.selection)}else if(e.shift){if(!i.isSelected){for(t.S(\"ChangingSelection\",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.S(\"ChangedSelection\",t.selection)}}else if(!i.isSelected){for(e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(E?e.meta:e.control)||e.shift||t.clearSelection()}},xi.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(t){return!t.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.Zb(n.documentPoint,t,e),n.targetObject=t,function(t,e,i){if(e.handled=!1,null===t||t.Ef()){var n=0;e.left?n=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(n=3);var r=\"ObjectSingleClicked\";if(null!==t){switch(n){case 1:r=\"ObjectSingleClicked\";break;case 2:r=\"ObjectDoubleClicked\";break;case 3:r=\"ObjectContextClicked\"}0!==n&&i.S(r,t)}else{switch(n){case 1:r=\"BackgroundSingleClicked\";break;case 2:r=\"BackgroundDoubleClicked\";break;case 3:r=\"BackgroundContextClicked\"}0!==n&&i.S(r)}if(null!==t)for(;null!==t;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(null!==i&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}null!==t&&t(e)}}}(t,n,i),n.handled},xi.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.tb){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.$(e.documentPoint)?t.Zb(e.documentPoint,null,null):null;e.targetObject=n;var r=!1;if(n!==t.Jk){var o=t.Jk,s=o;for(t.Jk=n,this.doCurrentObjectChanged(o,n),e.handled=!1;null!==o;){var a=o.mouseLeave;if(null!==a){if(n===o)break;if(null!==n&&n.rg(o))break;if(a(e,o,n),r=!0,e.handled)break}o=o.panel}for(o=s,e.handled=!1;null!==n;){if(null!==(s=n.mouseEnter)){if(o===n)break;if(null!==o&&o.rg(n))break;if(s(e,n,o),r=!0,e.handled)break}n=n.panel}n=t.Jk}if(null!==n){for(o=n,s=\"\";null!==o&&\"\"===(s=o.cursor);)o=o.panel;for(t.currentCursor=s,e.handled=!1,o=n;null!==o&&(null===(n=o.mouseOver)||(n(e,o),r=!0,!e.handled));)o=o.panel}else t.currentCursor=\"\",null!==(n=t.mouseOver)&&(n(e),r=!0);r&&t.Fb(),t.skipsUndoManager=i}},xi.prototype.doCurrentObjectChanged=function(){},xi.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(0!==i&&t.documentBounds.u()){var n=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(null!==n&&(r===Mi&&!e.shift||r===ki&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===Mi&&e.shift||r===ki&&!e.control){n=t.position.copy();var o=0<i?i:-i,s=e.event,a=s.deltaMode;if(r=s.deltaX,s=s.deltaY,(z||R)&&(a=1,0<r&&(r=3),0>r&&(r=-3),0<s&&(s=3),0>s&&(s=-3)),void 0===a||void 0===r||void 0===s||0===r&&0===s||e.shift)!e.shift&&t.allowVerticalScroll?(o=3*o*t.scrollVerticalLineChange,0<i?t.scroll(\"pixel\",\"up\",o):t.scroll(\"pixel\",\"down\",o)):e.shift&&t.allowHorizontalScroll&&(o=3*o*t.scrollHorizontalLineChange,0<i?t.scroll(\"pixel\",\"left\",o):t.scroll(\"pixel\",\"right\",o));else{switch(a){case 0:default:i=\"pixel\";break;case 1:i=\"line\";break;case 2:i=\"page\"}0!==r&&t.allowHorizontalScroll&&(0<(r*=t.scrollHorizontalLineChange/16)?t.scroll(i,\"left\",-r):t.scroll(i,\"right\",r)),0!==s&&t.allowVerticalScroll&&(0<(s*=t.scrollVerticalLineChange/16)?t.scroll(i,\"up\",-s):t.scroll(i,\"down\",s))}t.position.A(n)||(e.bubbles=!1)}}},xi.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.Wy);this.fs=x((function(){i.doWaitAfter(n)}),t)},xi.prototype.cancelWaitAfter=function(){-1!==this.fs&&y.clearTimeout(this.fs),this.fs=-1},xi.prototype.doWaitAfter=function(){},xi.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.Zb(t,(function(t){for(;null!==t&&!(t.panel instanceof bu);)t=t.panel;return t})))?null:t.part.category===e?t:null},xi.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;void 0===t&&(t=i.firstInput.viewPoint),void 0===e&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,r=n.width;return n=n.height,i.firstInput.isTouchEvent&&(r+=6,n+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>n},f.Object.defineProperties(xi.prototype,{diagram:{get:function(){return this.C},set:function(t){t instanceof Pr&&(this.C=t)}},name:{get:function(){return this.na},set:function(t){this.na=t}},isEnabled:{get:function(){return this.vd},set:function(t){this.vd=t}},isActive:{get:function(){return this.Qb},set:function(t){this.Qb=t}},transactionResult:{get:function(){return this.sk},set:function(t){this.sk=t}}}),xi.prototype.startTransaction=xi.prototype.xa,xi.className=\"Tool\",c(bi,xi),bi.prototype.initializeStandardTools=function(){},bi.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof bu&&this.Pq===t){var i=e.adornedObject;(null!==t?i.part===t:null===i)?this.showToolTip(e,i):this.hideToolTip()}},bi.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Ni&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Ci)return void(e.bubbles=!0);if(this.gestureBehavior===Ni)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.J(n);if(r.diagram=this.diagram,r.canStart())return t.doFocus(),t.currentTool=r,void(t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===ki?this.mouseWheelBehavior=Mi:this.mouseWheelBehavior===Mi&&(this.mouseWheelBehavior=ki)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},bi.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Ci)return void(e.bubbles=!0);if(this.gestureBehavior===Ni)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var r=this.mouseMoveTools.J(n);if(r.diagram=this.diagram,r.canStart())return t.doFocus(),t.currentTool=r,void(t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove()))}wi(this,t),null===(t=e.event)||\"pointermove\"!==t.type&&t.cancelable||(e.bubbles=!0)},bi.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof bu&&(e===t||e.rg(t))||this.hideToolTip()},bi.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ca&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.ju=!0,e.doMouseUp()))},bi.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Zb(e.documentPoint,null,null));var i=e.targetObject;if(null!==i)for(e.handled=!1;null!==i&&(null===(t=this.isActive?i.mouseHold:i.mouseHover)||(t(e,i),!e.handled));)i=i.panel;else null!==(i=this.isActive?t.mouseHold:t.mouseHover)&&i(e)},bi.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Zb(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof bu)||e!==t&&!e.rg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},bi.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof bu){t.layerName=\"Tool\",t.selectable=!1,t.scale=1/i.scale,t.category=\"ToolTip\",null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.Ta(),this.positionToolTip(t,e)}else t instanceof bn&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,-1!==this.Jj&&(y.clearTimeout(this.Jj),this.Jj=-1),0<(t=this.toolTipDuration)&&1/0!==t){var r=this;this.Jj=x((function(){r.hideToolTip()}),t)}},bi.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y=i.y+20/e.scale+n.height>r.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<r.y&&(i.y=r.y),t.position=i}},bi.prototype.hideToolTip=function(){-1!==this.Jj&&(y.clearTimeout(this.Jj),this.Jj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof bu?(t.remove(e),null!==this.Pq&&this.Pq.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof bn&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},bi.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.J(i);if(n.diagram=this.diagram,n.canStart())return t.doFocus(),t.currentTool=n,void(t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp()))}t.doFocus(),this.doDeactivate()},bi.prototype.doMouseWheel=function(){this.standardMouseWheel()},bi.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},bi.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},bi.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.J(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if((n=this.mouseMoveTools.J(i)).name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if((n=this.mouseUpTools.J(i)).name===t)return n;return null},bi.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.J(n);if(r.name===t)return null!==e?this.mouseDownTools.Oc(n,e):this.mouseDownTools.eb(n),r}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if((r=this.mouseMoveTools.J(n)).name===t)return null!==e?this.mouseMoveTools.Oc(n,e):this.mouseMoveTools.eb(n),r;for(i=this.mouseUpTools.length,n=0;n<i;n++)if((r=this.mouseUpTools.J(n)).name===t)return null!==e?this.mouseUpTools.Oc(n,e):this.mouseUpTools.eb(n),r;return null},bi.prototype.Za=function(t,e,i){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&i.add(e)},f.Object.defineProperties(bi.prototype,{mouseWheelBehavior:{get:function(){return this.Ba},set:function(t){this.Ba=t}},gestureBehavior:{get:function(){return this.D},set:function(t){this.D=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Pq=null!==t&&t instanceof bu?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Gb}},mouseMoveTools:{get:function(){return this.Rb}},mouseUpTools:{get:function(){return this.rc}},hoverDelay:{get:function(){return this.wa},set:function(t){this.wa=t}},holdDelay:{get:function(){return this.L},set:function(t){this.L=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.I()}},toolTipDuration:{get:function(){return this.Ma},set:function(t){this.Ma=t}}}),bi.prototype.replaceStandardTool=bi.prototype.Za;var ki=new V(bi,\"WheelScroll\",0),Mi=new V(bi,\"WheelZoom\",1),Si=new V(bi,\"WheelNone\",2),Pi=new V(bi,\"GestureZoom\",3),Ni=new V(bi,\"GestureCancel\",4),Ci=new V(bi,\"GestureNone\",5);function Ti(){xi.call(this),this.name=\"Dragging\",this.D=this.Rb=!0,this.o=this.Ma=this.wa=this.cg=null,this.rn=this.rc=!1,this.Il=new gt(NaN,NaN),this.Ur=new gt,this.Gb=!0,this.Pk=100,this.Jg=[],this.ke=(new Q).freeze(),this.Ba=new Ms,this.co=null,this.L=\"copy\",this.Nd=\"\",this.Od=\"no-drop\"}function Li(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.bk()&&1===e.count&&e.first()instanceof qu?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Oj(),t.cg=i.toolManager.findTool(\"Relinking\"),null===t.cg&&(t.cg=new on,t.cg.diagram=i)):(t.draggedLink=null,t.cg=null))}}function Ai(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,Ri(t,e.lastInput,null),e.skipsUndoManager=i,t.Jg.length=0}function ji(){var t=Ki;Di(t),Ii(t);var e=t.diagram;t.Il.u()&&(e.position=t.Il),e.tg()}function Oi(t,e){if(null===t.copiedParts){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&null!==t.draggedParts){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?null!==n.currentTransaction&&0<n.currentTransaction.changes.count&&(i.undoManager.Hf(),i.xa(\"Drag\")):Ii(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.If():i.selection,e=i.Tj(e,i,!0),i=new pt,n=t.draggedParts.iterator;n.next();){var r=n.key;if(r.Mc()&&r.canCopy()){var o=e.H(r);null!==o&&(o.location=r.location,o.Ta(),i.add(o,t.Ad(o.location)))}}for(e=e.iterator;e.next();)(n=e.value)instanceof qu&&n.canCopy()&&i.add(n,t.Ad());t.copiedParts=i,Li(t,i.If()),null!==t.draggedLink&&(e=(i=t.draggedLink).routeBounds,Wu(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}function Di(t){var e=t.diagram;if(null!==t.copiedParts){if(e.Ps(t.copiedParts.If(),!1),t.copiedParts=null,null!==t.draggedParts)for(var i=t.draggedParts.iterator;i.next();)i.key instanceof qu&&(i.value.point=new gt(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Fi(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.cg){var e=t.cg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.cg=null}}function Bi(t,e,i){var n=t.diagram,r=t.startPoint,o=gt.alloc();o.assign(n.lastInput.documentPoint),t.moveParts(e,o.ie(r),i),gt.free(o),!0===n.Ie(\"temporaryPixelRatio\")&&null===n.si&&30<n.xx&&(Lr(n),n.nq())}function Ii(t){if(null!==t.draggedParts){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Mc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if((n=i.key)instanceof qu&&n.suspendsRouting){var r=i.value.point;t.draggedParts.add(n,t.Ad()),Wu(n,-r.x,-r.y)}e.gd()}}function zi(t,e){var i=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Vi(t,!1));var n=t.findDragOverObject(e),r=i.lastInput;r.targetObject=n,t.doUpdateCursor(n,!1);var o=i.skipsUndoManager,s=!1;try{if(i.skipsUndoManager=!0,s=Ri(t,r,n),!t.isActive&&null===Ki)return;var a=null!==n?n.part:null;if(null===a||i.handlesDragDropForTopLevelParts&&a.isTopLevel&&!(a instanceof _u)){var h=i.mouseDragOver;null!==h&&(h(r),s=!0)}if(!t.isActive&&null===Ki)return;if(t.doDragOver(e,n),!t.isActive&&null===Ki)return}finally{i.skipsUndoManager=o,s&&i.gd()}t.co=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.ms(r.viewPoint)}function Ri(t,e,i){var n=!1,r=t.Jg.length,o=0<r?t.Jg[0]:null;if(i===o)return!1;e.handled=!1;for(var s=0;s<r;s++){var a=t.Jg[s],h=a.mouseDragLeave;if(null!==h&&(h(e,a,i),n=!0,e.handled))break}if(t.Jg.length=0,!t.isActive&&null===Ki||null===i)return n;for(e.handled=!1,r=i;null!==r;)t.Jg.push(r),r=Ei(r);for(r=t.Jg.length,i=0;i<r&&(null===(a=(s=t.Jg[i]).mouseDragEnter)||(a(e,s,o),n=!0,!e.handled));i++);return n}function Ei(t){var e=t.panel;return null!==e?e:t instanceof Jl&&!(t instanceof _u)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function _i(t,e,i){var n=t.cg;if(null===n)return null;var r=t.diagram.pg(e,n.portGravity,(function(t){return n.findValidLinkablePort(t,i)}));t=gt.alloc();var o=1/0,s=null;for(r=r.iterator;r.next();){var a=r.value;if(null!==a.part){var h=a.da(oe,t);(h=e.xf(h))<o&&(s=a,o=h)}}return gt.free(t),s}function Vi(t,e){var i=t.draggedLink;if(null!==i&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var r=t.cg;if(null!==r){var o=null,s=null;null===i.fromNode&&null!==(o=_i(t,i.i(0),!1))&&(s=o.part);var a=null,h=null;null===i.toNode&&null!==(a=_i(t,i.i(i.pointsCount-1),!0))&&(h=a.part),r.isValidLink(s,o,h,a)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=s,null!==o&&(i.fromPortId=o.portId),i.toNode=h,null!==a&&(i.toPortId=a.portId),i.fromPort!==n.ky&&n.S(\"LinkRelinked\",i,n.ky),i.toPort!==n.ly&&n.S(\"LinkRelinked\",i,n.ly)):sn(r,s,o,h,a):sn(r,null,null,null,null)}}}}function Yi(t,e){var i=t.diagram;t.dragsLink&&Vi(t,!0),Ai(t);var n=t.findDragOverObject(e),r=i.lastInput;if(r.targetObject=n,null!==n){r.handled=!1;for(var o=n;null!==o;){var s=o.mouseDrop;if(null!==s&&(s(r,o),r.handled))break;Gi(t,r,o),o=Ei(o)}}else null!==(o=i.mouseDrop)&&o(r);if(t.isActive||null!==Ki){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)(o=r.key)instanceof wu&&o.linksConnected.each((function(t){t.suspendsRouting=!1}));if(t.doDropOnto(e,n),t.isActive||null!==Ki){for(t=Bt.alloc(),e=i.selection.iterator;e.next();)(n=e.value)instanceof wu&&Xi(i,n,t);Bt.free(t)}}}function Gi(t,e,i){t=t.diagram,i=i.part,!t.handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof _u||null!==(i=t.mouseDrop)&&i(e)}function Xi(t,e,i){var n=!1;if(e.getAvoidableRect(i),t.viewportBounds.Ge(i)&&(n=!0),0!==(t=t.Qu(i,(function(t){return t.part}),(function(t){return t instanceof qu}),!0,(function(t){return t instanceof qu}),n)).count)for(t=t.iterator;t.next();)!(i=t.value).Jd(e)&&i.isAvoiding&&i.Va()}function Ui(t,e,i,n){if(null===t.copiedParts){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!i,r.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=r.Tj(e,r,!0);var o=Bt.alloc();r=n=1/0;for(var s=-1/0,a=-1/0,h=e.iterator;h.next();){var l=h.value;if(l.isVisible()){var u=l.location;l=u.x,u=u.y,isNaN(l)||isNaN(u)||(l<n&&(n=l),u<r&&(r=u),l>s&&(s=l),u>a&&(a=u))}}for(1/0===n?o.h(0,0,0,0):o.h(n,r,s-n,a-r),n=o.x+o.width/2,r=o.y+o.height/2,Bt.free(o),o=t.Ur,s=new pt,a=gt.alloc(),h=e.iterator;h.next();)(l=h.value)instanceof qu&&l.canCopy()&&null!==(u=i.H(l))&&(u.points=l.points,Wu(u,o.x-n,o.y-r),u.suspendsRouting=!0,s.add(u,t.Ad()));for(e=e.iterator;e.next();)(l=e.value).Mc()&&l.canCopy()&&null!==(h=i.H(l))&&(l=l.location,a.h(o.x-(n-l.x),o.y-(r-l.y)),h.location=a,h.Ta(),s.add(h,t.Ad(a)));gt.free(a),t.copiedParts=s,Li(t,s.If()),null!==t.draggedLink&&(e=(i=t.draggedLink).routeBounds,Wu(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}bi.className=\"ToolManager\",bi.WheelScroll=ki,bi.WheelZoom=Mi,bi.WheelNone=Si,bi.GestureZoom=Pi,bi.GestureCancel=Ni,bi.GestureNone=Ci,c(Ti,xi),Ti.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Pk))&&null!==this.findDraggablePart()},Ti.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.Zl(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},Ti.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.Zl(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.S(\"ChangingSelection\",t.selection),e=t.lastInput,(E?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.S(\"ChangedSelection\",t.selection))}}},Ti.prototype.doActivate=function(){var t=this.diagram;this.co=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(t.zu(!0),Ki=null,this.isActive=!0,this.Il.set(t.position),Li(this,t.selection),this.Jg.length=0,t.animationManager.qc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.Vs=!0,!0===t.Ie(\"temporaryPixelRatio\")&&30<t.xx&&Lr(t),uo(t,this.draggedParts),this.xa(\"Drag\"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.rn=!1,Ki=this,Hi=this.diagram,this.doSimulatedDragOut()))},Ti.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},Ti.prototype.Ad=function(t){return void 0===t?new us(nt):this.isGridSnapEnabled?new us(new gt(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new us(t.copy())},Ti.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.zu(!1),t.tg(),Ai(this),co(t,this.draggedParts),this.draggedParts=this.currentPart=this.co=null,this.rn=this.isDragOutStarted=!1,0<qi.count){for(var e=qi,i=e.length,n=0;n<i;n++){var r=e.J(n);Fi(r),Di(r),Ai(r),r.diagram.tg()}e.clear()}Fi(this),this.Il.h(NaN,NaN),null!==Hi&&(Hi.currentCursor=\"\"),Ki=Hi=null,Di(this),t.isMouseCaptured=!1,t.currentCursor=\"\",t.Vs=!1,this.stopTransaction(),Ar(t,!0)},Ti.prototype.stopTransaction=function(){var t=this.diagram,e=xi.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Ms(),e},Ti.prototype.doCancel=function(){Di(this),Ii(this);var t=this.diagram;this.Il.u()&&(t.position=this.Il),this.stopTool()},Ti.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(\"Esc\"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},Ti.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},Ti.prototype.moveParts=function(t,e,i){void 0===i&&(i=!1);var n=this.diagram;null!==n&&ao(n,t,e,this.dragOptions,i)},Ti.prototype.findDragOverObject=function(t){var e=this;return _r(this.diagram,t,null,(function(t){return!(t=null===t||!!(null===(t=t.part)||t instanceof bu||t.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(t)||e.copiedParts&&e.copiedParts.contains(t)))}))},Ti.prototype.doUpdateCursor=function(t,e){var i=this.diagram;(e||this.co!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?i.currentCursor=this.copyCursor:this.mayMove()?i.currentCursor=this.moveCursor:this.mayDragOut()&&(i.currentCursor=this.nodropCursor))},Ti.prototype.doDragOver=function(){},Ti.prototype.doDropOnto=function(){},Ti.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Oi(this,!1),uo(t,this.copiedParts),Bi(this,this.copiedParts,!1),co(t,this.copiedParts)):this.mayMove()?(Di(this),Bi(this,this.draggedParts,!0)):this.mayDragOut()?(Oi(this,!1),Bi(this,this.copiedParts,!1)):Di(this),zi(this,t.lastInput.documentPoint))}},Ti.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&null!==this.copiedParts?(Di(this),Oi(this,!0),uo(t,this.copiedParts),Bi(this,this.copiedParts,!1),co(t,this.copiedParts),null!==this.copiedParts&&(t.S(\"ChangingSelection\",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each((function(t){t.isSelected=!0})))):(e=!0,Di(this),this.mayMove()&&(Bi(this,this.draggedParts,!0),zi(this,t.lastInput.documentPoint))),this.rn=!0,Yi(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.If():this.draggedParts.If();this.copiedParts=null,e&&function(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof wu&&(null===(i=i.containingGroup)||null===i.placeholder||t.draggedParts.contains(i)||i.placeholder.s())}}(this),t.Qa(),co(t,this.draggedParts),this.transactionResult=i?\"Copy\":\"Move\",t.S(i?\"SelectionCopied\":\"SelectionMoved\",n)}this.stopTool(),i&&t.S(\"ChangedSelection\",t.selection)}}},Ti.prototype.simulatedMouseMove=function(t,e,i){if(null===Ki)return!1;var n=Ki.diagram;i instanceof Pr||(i=null);var r=Hi;return i!==r&&(null!==r&&r!==n&&(r.tg(),Ki.isDragOutStarted=!1,null!==(r=r.toolManager.findTool(\"Dragging\"))&&r.doSimulatedDragLeave()),Hi=i,null!==i&&i!==n&&(ji(),null!==(r=i.toolManager.findTool(\"Dragging\"))&&(qi.contains(r)||qi.add(r),r.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),!(null===i||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert||(null!==(n=i.toolManager.findTool(\"Dragging\"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.vq(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),0))},Ti.prototype.simulatedMouseUp=function(t,e,i){if(null===Ki)return!1;var n=Hi,r=Ki.diagram;if(null===i)return Ki.doCancel(),!0;if(i!==n){var o=n.toolManager.findTool(\"Dragging\");if(null!==n&&n!==r&&null!==o)return n.tg(),Ki.isDragOutStarted=!1,o.doSimulatedDragLeave(),!1;Hi=i,null!==(n=i.toolManager.findTool(\"Dragging\"))&&(ji(),qi.contains(n)||qi.add(n),n.doSimulatedDragEnter())}return i!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):null===e&&(e=new gt),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.vq(e),i.lastInput.down=!1,i.lastInput.up=!0,null!==(t=i.toolManager.findTool(\"Dragging\"))&&t.doSimulatedDrop(),null!==(t=Ki)&&(i=t.mayCopy(),t.transactionResult=i?\"Copy\":\"Move\",t.stopTool()),!0)},Ti.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(E?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Ti.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Ti.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},Ti.prototype.computeBorder=function(t,e,i){return this.rn||null===this.draggedParts||this.draggedParts.contains(t)?null:i.assign(e)},Ti.prototype.Yz=function(){return Ki},Ti.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&(null!==Ki&&Ki.diagram.model.dataFormat===t.model.dataFormat)},Ti.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.qc(),Hr(t),t.animationManager.qc(),null!==(t=Ki)&&(t.diagram.Vs=!1),this.doUpdateCursor(null,!0)}},Ti.prototype.doSimulatedDragLeave=function(){null!==Ki&&Ki.doSimulatedDragOut(),this.doCancel()},Ti.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Tm=!0;var e=Ki;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;Ui(this,e.draggedParts.If(),!1,t.firstInput),Bi(this,this.copiedParts,!1),zi(this,t.lastInput.documentPoint)}t.animationManager.Tm=!1},Ti.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Ki;if(null!==e){var i=e.diagram;if(e.rn=!0,Di(this),!this.mayDragIn())return;t.animationManager.Tm=!0,t.S(\"ChangingSelection\",t.selection),this.xa(\"Drop\"),Ui(this,e.draggedParts.If(),!0,t.lastInput),Bi(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each((function(t){t.isSelected=!0}))),Yi(this,t.lastInput.documentPoint),t.Qa(),e=t.selection,null!==this.copiedParts?this.transactionResult=\"ExternalCopy\":e=new Q,this.copiedParts=null,t.doFocus(),t.S(\"ExternalObjectsDropped\",e,i),this.stopTransaction(),t.S(\"ChangedSelection\",t.selection)}t.animationManager.Tm=!1},Ti.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Vs=!1,this.mayCopy()||this.mayMove()?t.currentCursor=\"\":t.currentCursor=this.nodropCursor,this.co=null},Ti.prototype.computeMove=function(t,e,i,n){return null!==(i=this.diagram)?i.computeMove(t,e,this.dragOptions,n):new gt},f.Object.defineProperties(Ti.prototype,{isCopyEnabled:{get:function(){return this.Rb},set:function(t){this.Rb=t}},copiesEffectiveCollection:{get:function(){return this.D},set:function(t){this.D=t}},dragOptions:{get:function(){return this.Ba},set:function(t){this.Ba=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Gb},set:function(t){this.Gb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.A(t)||(t=t.I(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.L},set:function(t){this.L=t}},moveCursor:{get:function(){return this.Nd},set:function(t){this.Nd=t}},nodropCursor:{get:function(){return this.Od},set:function(t){this.Od=t}},currentPart:{get:function(){return this.wa},set:function(t){this.wa=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Ma},set:function(t){this.Ma=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.If():null!==this.draggedParts?this.draggedParts.If():this.ke}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.rc},set:function(t){this.rc=t}},startPoint:{get:function(){return this.Ur},set:function(t){this.Ur.A(t)||this.Ur.assign(t)}},delay:{get:function(){return this.Pk},set:function(t){this.Pk=t}}}),Ti.prototype.getDraggingSource=Ti.prototype.Yz;var qi=null,Ki=null,Hi=null;function Wi(){xi.call(this),this.Od=100,this.Ba=!1,this.Th=\"pointer\";var t=new qu,e=new Hh;e.isPanelMain=!0,e.stroke=\"blue\",t.add(e),(e=new Hh).toArrow=\"Standard\",e.fill=\"blue\",e.stroke=\"blue\",t.add(e),t.layerName=\"Tool\",this.$i=t,t=new wu,(e=new Hh).portId=\"\",e.figure=\"Rectangle\",e.fill=null,e.stroke=\"magenta\",e.strokeWidth=2,e.desiredSize=St,t.add(e),t.selectable=!1,t.layerName=\"Tool\",this.Zi=t,this.j=e,t=new wu,(e=new Hh).portId=\"\",e.figure=\"Rectangle\",e.fill=null,e.stroke=\"magenta\",e.strokeWidth=2,e.desiredSize=St,t.add(e),t.selectable=!1,t.layerName=\"Tool\",this.rk=t,this.o=e,this.Nd=this.rc=this.Gb=this.Ma=this.Rb=null,this.wa=!0,this.Im=new pt,this.ke=this.ii=this.Yi=null}function Zi(t,e,i,n){if(e===i)return!0;var r=e.fromNode;return!(null===r||!r.isLinkLabel||(n.add(r),!Zi(t,r.labeledLink,i,n)))||!(null===(e=e.toNode)||!e.isLinkLabel||(n.add(e),!Zi(t,e.labeledLink,i,n)))}function Ji(t,e,i,n,r){if(e===i)return!0;if(null===e||null===i)return!1;for(var o=e.linksConnected;o.next();){var s=o.value;if(s!==n&&(!r||s.isTreeLink)&&s.toNode===e&&(s=s.fromNode)!==e&&Ji(t,s,i,n,r))return!0}return!1}function $i(t,e,i,n,r){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var s=o.value;if(s!==r&&s.toNode===i&&(s=s.fromNode)!==i&&$i(t,e,s,n,r))return!0}return!1}function Qi(t,e,i,n,r){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var s=o.value;if(s!==r){var a=s.fromNode;if(s=s.toNode,(a=a===i?s:a)!==i&&Qi(t,e,a,n,r))return!0}}return!1}function tn(){Wi.call(this),this.name=\"Linking\",this.L={},this.D=null,this.K=en,this.Bc=null}Ti.className=\"DraggingTool\",qi=new J,B(\"draggingTool\",(function(){return this.findTool(\"Dragging\")}),(function(t){this.Za(\"Dragging\",t,this.mouseMoveTools)})),bi.prototype.doCancel=function(){null!==Ki&&Ki.doCancel(),xi.prototype.doCancel.call(this)},c(Wi,xi),Wi.prototype.doStop=function(){this.diagram.tg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Wi.prototype.copyPortProperties=function(t,e,i,n,r){if(null!==t&&null!==e&&null!==i&&null!==n){var o=e.Af(),s=jt.alloc();s.width=e.naturalBounds.width*o,s.height=e.naturalBounds.height*o,n.desiredSize=s,jt.free(s),r?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=oe,o=gt.alloc(),i.location=e.da(oe,o),gt.free(o),n.angle=e.Ki(),null!==this.portTargeted&&this.portTargeted(t,e,i,n,r)}},Wi.prototype.setNoTargetPortProperties=function(t,e,i){null!==e&&(e.desiredSize=St,e.fromSpot=te,e.toSpot=te),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,i)},Wi.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Wi.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof wu){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.ms(t.lastInput.viewPoint)}},Wi.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var i=t.part;if(!(i instanceof wu))return null;for(;null!==t;){var n=e?t.toLinkable:t.fromLinkable;if(!0===n&&(null!==t.portId||t instanceof wu)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===n)break;t=t.panel}return null},Wi.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var r=this,o=e.pg(i,n,(function(e){return r.findValidLinkablePort(e,t)}),null,!0);for(n=1/0,e=null,o=o.iterator;o.next();){var s=o.value,a=s.part;if(a instanceof wu){var h=s.da(oe,gt.alloc()),l=i.x-h.x,u=i.y-h.y;gt.free(h),(h=l*l+u*u)<n&&(null!==(l=this.validPortsCache.H(s))?l&&(e=s,n=h):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,a,s)||!t&&this.isValidLink(a,s,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(s,!0),e=s,n=h):this.validPortsCache.add(s,!1))}}return null!==e&&(i=e.part)instanceof wu&&(null===i.layer||i.layer.allowLink)?e:null},Wi.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var i=e.fromMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=\"\"),t.Vp(e).count>=i)return!1}return!0},Wi.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var i=e.toMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=\"\"),t.Gd(e).count>=i)return!1}return!0},Wi.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(t=t.part,e=e.part,null!==t&&t===e))},Wi.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var i=t.part;if(!(i instanceof wu))return!1;null===(t=t.portId)&&(t=\"\");var n=e.part;if(!(n instanceof wu))return!1;for(null===(e=e.portId)&&(e=\"\"),e=n.Gd(e);e.next();)if((n=e.value).fromNode===i&&n.fromPortId===t)return!0;return!1},Wi.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(null===e||null===n||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==i&&this.isLabelDependentOnLink(i,this.originalLink))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.originalLink))return!1;if(null!==t){var r=t.linkValidation;if(null!==r&&!r(t,e,i,n,this.originalLink))return!1}return!(null!==i&&null!==(r=i.linkValidation)&&!r(t,e,i,n,this.originalLink))&&(null===(r=this.linkValidation)||r(t,e,i,n,this.originalLink))},Wi.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var i=t.labeledLink;if(null===i)return!1;if(i===e)return!0;var n=new Q;return n.add(t),Zi(this,i,e,n)},Wi.prototype.isValidCycle=function(t,e,i){if(void 0===i&&(i=null),null===t||null===e)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==Uo){if(n===Wo){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var r=n.value;if(r!==i&&r.isTreeLink&&r.toNode===e)return!1}return!Ji(this,t,e,i,!0)}if(n===Zo){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if((r=n.value)!==i&&r.isTreeLink&&r.fromNode===t)return!1;return!Ji(this,t,e,i,!0)}if(n===qo)return t===e?t=!0:((n=new Q).add(e),t=$i(this,n,t,e,i)),!t;if(n===Ko)return!Ji(this,t,e,i,!1);if(n===Ho)return t===e?t=!0:((n=new Q).add(e),t=Qi(this,n,t,e,i)),!t}return!0},f.Object.defineProperties(Wi.prototype,{portGravity:{get:function(){return this.Od},set:function(t){0<=t&&(this.Od=t)}},isUnconnectedLinkValid:{get:function(){return this.Ba},set:function(t){this.Ba=t}},linkingCursor:{get:function(){return this.Th},set:function(t){this.Th=t}},temporaryLink:{get:function(){return this.$i},set:function(t){this.$i=t}},temporaryFromNode:{get:function(){return this.Zi},set:function(t){(this.Zi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(null!==this.j){var e=this.j.panel;if(null!==e){var i=e.T.indexOf(this.j);e.eb(i),e.wb(i,t)}}this.j=t}},temporaryToNode:{get:function(){return this.rk},set:function(t){(this.rk=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(null!==this.o){var e=this.o.panel;if(null!==e){var i=e.T.indexOf(this.o);e.eb(i),e.wb(i,t)}}this.o=t}},originalLink:{get:function(){return this.Rb},set:function(t){this.Rb=t}},originalFromNode:{get:function(){return this.Ma},set:function(t){this.Ma=t}},originalFromPort:{get:function(){return this.Gb},set:function(t){this.Gb=t}},originalToNode:{get:function(){return this.rc},set:function(t){this.rc=t}},originalToPort:{get:function(){return this.Nd},set:function(t){this.Nd=t}},isForwards:{get:function(){return this.wa},set:function(t){this.wa=t}},validPortsCache:{get:function(){return this.Im}},targetPort:{get:function(){return this.Yi},set:function(t){this.Yi=t}},linkValidation:{get:function(){return this.ii},set:function(t){this.ii=t}},portTargeted:{get:function(){return this.ke},set:function(t){this.ke=t}}}),Wi.className=\"LinkingBaseTool\",c(tn,Wi),tn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Cs()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},tn.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Zb(t.firstInput.documentPoint,null,null)),null===e)return null;if(!((t=e.part)instanceof wu))return null;var i=this.direction;if(i===en||i===nn){var n=this.findValidLinkablePort(e,!1);if(null!==n||this.startObject===t&&(n=t.port,this.findValidLinkablePort(n,!1)))return this.isForwards=!0,n}return i!==en&&i!==rn||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?null:(this.isForwards=!1,e)},tn.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof wu&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof wu&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Va(),t.add(this.temporaryLink)),this.isActive=!0)},tn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor=\"\",this.stopTransaction()},tn.prototype.doStop=function(){Wi.prototype.doStop.call(this),this.startObject=null},tn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,i=null,n=null,r=null,o=null;try{var s=this.targetPort=this.findTargetPort(this.isForwards);if(null!==s){var a=s.part;a instanceof wu&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,i=this.originalFromPort),n=a,r=s):(e=a,i=s,null!==this.originalToNode&&(n=this.originalToNode,r=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(n=this.originalToNode,r=this.originalToPort);null!==e||null!==n?null!==(o=this.insertLink(e,i,n,r))?(null===s&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.S(\"ChangingSelection\",t.selection),t.clearSelection(!0),o.isSelected=!0),this.transactionResult=this.name,t.S(\"LinkDrawn\",o)):this.doNoLink(e,i,n,r):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),o&&t.allowSelect&&t.S(\"ChangedSelection\",t.selection)}}},tn.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof qu)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},tn.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},tn.prototype.doNoLink=function(){},f.Object.defineProperties(tn.prototype,{archetypeLinkData:{get:function(){return this.L},set:function(t){this.L=t}},archetypeLabelNodeData:{get:function(){return this.D},set:function(t){this.D=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Bc},set:function(t){this.Bc=t}}});var en=new V(tn,\"Either\",0),nn=new V(tn,\"ForwardsOnly\",0),rn=new V(tn,\"BackwardsOnly\",0);function on(){Wi.call(this),this.name=\"Relinking\";var t=new Hh;t.figure=\"Diamond\",t.desiredSize=Nt,t.fill=\"lightblue\",t.stroke=\"dodgerblue\",t.cursor=this.linkingCursor,t.segmentIndex=0,this.L=t,(t=new Hh).figure=\"Diamond\",t.desiredSize=Nt,t.fill=\"lightblue\",t.stroke=\"dodgerblue\",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Bc=t,this.D=null,this.$w=new Bt}function sn(t,e,i,n,r){null!==e?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==n?(t.copyPortProperties(n,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function an(){xi.call(this),this.name=\"LinkReshaping\";var t=new Hh;t.figure=\"Rectangle\",t.desiredSize=Pt,t.fill=\"lightblue\",t.stroke=\"dodgerblue\",this.o=t,(t=new Hh).figure=\"Diamond\",t.desiredSize=Nt,t.fill=\"lightblue\",t.stroke=\"dodgerblue\",t.cursor=\"move\",this.D=t,this.L=3,this.ot=this.j=null,this.ax=new gt,this.Fr=new J}function hn(t,e,i,n,r,o){return o?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-r.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-r.x)<t.resegmentingDistance}tn.className=\"LinkingTool\",tn.Either=en,tn.ForwardsOnly=nn,tn.BackwardsOnly=rn,c(on,Wi),on.prototype.updateAdornments=function(t){if(null!==t&&t instanceof qu){var e=\"RelinkFrom\",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;null!==n&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Ff()&&null===(i=t.Wj(e))&&(i=this.makeAdornment(n,!1),t.xh(e,i))}null===i&&t.Gf(e),e=\"RelinkTo\",i=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(n=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Ff()&&(null===(i=t.Wj(e))?(i=this.makeAdornment(n,!0),t.xh(e,i)):i.s()),null===i&&t.Gf(e)}},on.prototype.makeAdornment=function(t,e){var i=new bu;return i.type=fh.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&i.add(e.copy()),i.adornedObject=t,i},on.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Cs()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,\"RelinkFrom\");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,\"RelinkTo\")),null!==e},on.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,\"RelinkFrom\"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,\"RelinkTo\")),null===e)return;var i=e.part;if(!(i instanceof bu&&i.adornedPart instanceof qu))return;this.handle=e,this.isForwards=null===i||\"RelinkTo\"===i.category,this.originalLink=i.adornedPart}this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.$w.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=Mt),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=Mt),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Va(),t.add(this.temporaryLink)),this.isActive=!0},on.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;i!==kc&&i!==wc||(i=xc),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},on.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor=\"\",this.stopTransaction()},on.prototype.doStop=function(){Wi.prototype.doStop.call(this),this.handle=null},on.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,r=this.originalToPort,o=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var s=this.targetPort.part;s instanceof wu&&(this.isForwards?(n=s,r=this.targetPort):(e=s,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=n=null:i=e=null:o=null;null!==o?(this.reconnectLink(o,this.isForwards?n:e,this.isForwards?r:i,this.isForwards),null===this.targetPort&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint,o.Va()),this.transactionResult=this.name,t.S(\"LinkRelinked\",o,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.eq(this.$w)}finally{this.stopTool()}}},on.prototype.reconnectLink=function(t,e,i,n){return i=null!==i&&null!==i.portId?i.portId:\"\",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},on.prototype.doNoRelink=function(){},f.Object.defineProperties(on.prototype,{fromHandleArchetype:{get:function(){return this.L},set:function(t){this.L=t}},toHandleArchetype:{get:function(){return this.Bc},set:function(t){this.Bc=t}},handle:{get:function(){return this.D},set:function(t){if(null!==t&&!(t.part instanceof bu))throw Error(\"new handle is not in an Adornment: \"+t);this.D=t}}}),on.className=\"RelinkingTool\",B(\"linkingTool\",(function(){return this.findTool(\"Linking\")}),(function(t){this.Za(\"Linking\",t,this.mouseMoveTools)})),B(\"relinkingTool\",(function(){return this.findTool(\"Relinking\")}),(function(t){this.Za(\"Relinking\",t,this.mouseDownTools)})),c(an,xi),an.prototype.Vu=function(t){return t&&t.Jr&&0!==t.Jr.value?t.Jr:ln},an.prototype.ym=function(t,e){t.Jr=e},an.prototype.updateAdornments=function(t){if(null!==t&&t instanceof qu){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;null!==i&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Ff()&&(null===(e=t.Wj(this.name))||e.Ww!==t.pointsCount||e.qx!==t.resegmentable)&&null!==(e=this.makeAdornment(i))&&(e.Ww=t.pointsCount,e.qx=t.resegmentable,t.xh(this.name,e))}null===e&&t.Gf(this.name)}},an.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,r=null;if(null!==e.points&&1<i){(r=new bu).type=fh.Link,i=e.firstPickIndex;var o=e.lastPickIndex,s=n?1:0;if(e.resegmentable&&e.computeCurve()!==bc)for(var a=i+s;a<o-s;a++){var h=this.makeResegmentHandle(t,a);null!==h&&(h.segmentIndex=a,h.segmentFraction=.5,h.fromMaxLinks=999,r.add(h))}for(s=i+1;s<o;s++)if(null!==(a=this.makeHandle(t,s))){if(a.segmentIndex=s,s!==i)if(s===i+1&&n){h=e.i(i);var l=e.i(i+1);Xe.w(h.x,l.x)&&Xe.w(h.y,l.y)&&(l=e.i(i-1)),Xe.w(h.x,l.x)?(this.ym(a,cn),a.cursor=\"n-resize\"):Xe.w(h.y,l.y)&&(this.ym(a,un),a.cursor=\"w-resize\")}else s===o-1&&n?(h=e.i(o-1),l=e.i(o),Xe.w(h.x,l.x)&&Xe.w(h.y,l.y)&&(h=e.i(o+1)),Xe.w(h.x,l.x)?(this.ym(a,cn),a.cursor=\"n-resize\"):Xe.w(h.y,l.y)&&(this.ym(a,un),a.cursor=\"w-resize\")):s!==o&&(this.ym(a,fn),a.cursor=\"move\");r.add(a)}r.adornedObject=t}return r},an.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},an.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},an.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},an.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof qu){if(this.ot=e,t.isMouseCaptured=!0,this.xa(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.wb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.wb(this.handle.segmentIndex+1,n),e.points=i,e.Lb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.ax=e.i(this.handle.segmentIndex),this.Fr=e.points.copy(),this.isActive=!0}}},an.prototype.doDeactivate=function(){this.stopTransaction(),this.ot=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},an.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Fr),this.stopTool()},an.prototype.getResegmentingPoint=function(){return this.handle.da(oe)},an.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},an.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),r=e.i(i),o=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var s=e.i(i-2);if(Math.abs(n.x-r.x)<this.resegmentingDistance&&Math.abs(n.y-r.y)<this.resegmentingDistance&&(hn(this,s,n,r,o,!0)||hn(this,s,n,r,o,!1))){var a=e.points.copy();hn(this,s,n,r,o,!0)?(a.Oc(i-2,new gt(s.x,(o.y+s.y)/2)),a.Oc(i+1,new gt(o.x,(o.y+s.y)/2))):(a.Oc(i-2,new gt((o.x+s.x)/2,s.y)),a.Oc(i+1,new gt((o.x+s.x)/2,o.y))),a.eb(i),a.eb(i-1),e.points=a,e.Lb()}else s=e.i(i+2),Math.abs(r.x-o.x)<this.resegmentingDistance&&Math.abs(r.y-o.y)<this.resegmentingDistance&&(hn(this,n,r,o,s,!0)||hn(this,n,r,o,s,!1))&&(a=e.points.copy(),hn(this,n,r,o,s,!0)?(a.Oc(i-1,new gt(n.x,(n.y+s.y)/2)),a.Oc(i+2,new gt(s.x,(n.y+s.y)/2))):(a.Oc(i-1,new gt((n.x+s.x)/2,n.y)),a.Oc(i+2,new gt((n.x+s.x)/2,s.y))),a.eb(i+1),a.eb(i),e.points=a,e.Lb())}}else s=gt.alloc(),Xe.Ih(n.x,n.y,o.x,o.y,r.x,r.y,s)&&s.xf(r)<this.resegmentingDistance*this.resegmentingDistance&&((n=e.points.copy()).eb(i),e.points=n,e.Lb()),gt.free(s)}t.Qa(),this.transactionResult=this.name,t.S(\"LinkReshaped\",this.adornedLink,this.Fr)}this.stopTool()},an.prototype.reshape=function(t){var e=this.adornedLink;e.Lh();var i=this.handle.segmentIndex,n=this.Vu(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===cn?(e.M(i,e.i(i-1).x,t.y),e.M(i+1,e.i(i+2).x,t.y)):n===un&&(e.M(i,t.x,e.i(i-1).y),e.M(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===cn?(e.M(i-1,e.i(i-2).x,t.y),e.M(i,e.i(i+1).x,t.y)):n===un&&(e.M(i-1,t.x,e.i(i-2).y),e.M(i,t.x,e.i(i+1).y));else{n=i;var r=e.i(n),o=e.i(n-1),s=e.i(n+1);Xe.w(o.x,r.x)&&Xe.w(r.y,s.y)?(Xe.w(o.x,e.i(n-2).x)&&!Xe.w(o.y,e.i(n-2).y)?(e.l(n,t.x,o.y),i++,n++):e.M(n-1,t.x,o.y),Xe.w(s.y,e.i(n+2).y)&&!Xe.w(s.x,e.i(n+2).x)?e.l(n+1,s.x,t.y):e.M(n+1,s.x,t.y)):Xe.w(o.y,r.y)&&Xe.w(r.x,s.x)?(Xe.w(o.y,e.i(n-2).y)&&!Xe.w(o.x,e.i(n-2).x)?(e.l(n,o.x,t.y),i++,n++):e.M(n-1,o.x,t.y),Xe.w(s.x,e.i(n+2).x)&&!Xe.w(s.y,e.i(n+2).y)?e.l(n+1,t.x,s.y):e.M(n+1,t.x,s.y)):Xe.w(o.x,r.x)&&Xe.w(r.x,s.x)?(Xe.w(o.x,e.i(n-2).x)&&!Xe.w(o.y,e.i(n-2).y)?(e.l(n,t.x,o.y),i++,n++):e.M(n-1,t.x,o.y),Xe.w(s.x,e.i(n+2).x)&&!Xe.w(s.y,e.i(n+2).y)?e.l(n+1,t.x,s.y):e.M(n+1,t.x,s.y)):Xe.w(o.y,r.y)&&Xe.w(r.y,s.y)&&(Xe.w(o.y,e.i(n-2).y)&&!Xe.w(o.x,e.i(n-2).x)?(e.l(n,o.x,t.y),i++,n++):e.M(n-1,o.x,t.y),Xe.w(s.y,e.i(n+2).y)&&!Xe.w(s.x,e.i(n+2).x)?e.l(n+1,s.x,t.y):e.M(n+1,s.x,t.y)),e.M(i,t.x,t.y)}else e.M(i,t.x,t.y),n=e.fromNode,r=e.fromPort,null!==n&&null!==(o=n.findVisibleNode())&&o!==n&&(r=(n=o).port),1===i&&e.computeSpot(!0,r).zc()&&(o=r.da(oe,gt.alloc()),n=e.getLinkPointFromPoint(n,r,o,t,!0,gt.alloc()),e.M(0,n.x,n.y),gt.free(o),gt.free(n)),n=e.toNode,r=e.toPort,null!==n&&null!==(o=n.findVisibleNode())&&o!==n&&(r=(n=o).port),i===e.pointsCount-2&&e.computeSpot(!1,r).zc()&&(i=r.da(oe,gt.alloc()),t=e.getLinkPointFromPoint(n,r,i,t,!1,gt.alloc()),e.M(e.pointsCount-1,t.x,t.y),gt.free(i),gt.free(t));e.vf()},an.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Vu(this.handle)){case fn:return t;case cn:return new gt(e.i(i).x,t.y);case un:return new gt(t.x,e.i(i).y);default:return e.i(i)}},f.Object.defineProperties(an.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.D},set:function(t){this.D=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof bu))throw Error(\"new handle is not in an Adornment: \"+t);this.j=t}},adornedLink:{get:function(){return this.ot}},resegmentingDistance:{get:function(){return this.L},set:function(t){this.L=t}},originalPoint:{get:function(){return this.ax}},originalPoints:{get:function(){return this.Fr}}}),an.prototype.setReshapingBehavior=an.prototype.ym,an.prototype.getReshapingBehavior=an.prototype.Vu;var ln=new V(an,\"None\",0),un=new V(an,\"Horizontal\",1),cn=new V(an,\"Vertical\",2),fn=new V(an,\"All\",3);function dn(){xi.call(this),this.name=\"Resizing\",this.Zf=new jt(1,1).freeze(),this.Yf=new jt(9999,9999).freeze(),this.yg=new jt(NaN,NaN).freeze(),this.D=!1,this.L=!0,this.le=null;var t=new Hh;t.alignmentFocus=oe,t.figure=\"Rectangle\",t.desiredSize=Pt,t.fill=\"lightblue\",t.stroke=\"dodgerblue\",t.strokeWidth=1,t.cursor=\"pointer\",this.o=t,this.j=null,this.Er=new gt,this.Zw=new jt,this.Io=new gt,this.Dt=new jt(0,0),this.Ct=new jt(1/0,1/0),this.Bt=new jt(1,1)}function pn(){xi.call(this),this.name=\"Rotating\",this.Ba=45,this.wa=2,this.Io=new gt,this.le=null;var t=new Hh;t.figure=\"Ellipse\",t.desiredSize=Nt,t.fill=\"lightblue\",t.stroke=\"dodgerblue\",t.strokeWidth=1,t.cursor=\"pointer\",this.o=t,this.j=null,this.Yw=0,this.Kr=new gt(NaN,NaN),this.D=0,this.L=50}function gn(){xi.call(this),this.name=\"ClickSelecting\"}function yn(){xi.call(this),this.name=\"Action\",this.tk=null}function mn(){xi.call(this),this.name=\"ClickCreating\",this.bj=null,this.o=!0,this.j=!1,this.Lw=new gt(0,0)}function vn(){xi.call(this),this.name=\"DragSelecting\",this.Pk=175,this.o=!1;var t=new Jl;t.layerName=\"Tool\",t.selectable=!1;var e=new Hh;e.name=\"SHAPE\",e.figure=\"Rectangle\",e.fill=null,e.stroke=\"magenta\",t.add(e),this.j=t}function xn(){xi.call(this),this.name=\"Panning\",this.Vt=new gt,this.Vy=new gt,this.xg=!1;var t=this;this.hx=function(){var e=t.diagram;null!==e&&e.removeEventListener(y.document,\"scroll\",t.hx,!1),t.stopTool()}}function bn(){this.L=this.D=this.j=this.o=null}function wn(t,e,i){this.text=t,this.Cx=e,this.visible=i}function kn(){xi.call(this),this.name=\"ContextMenu\",this.o=this.ut=this.j=null,this.Uw=new gt,this.vt=null,this.Jt=!1;var t=this;this.mu=function(){t.stopTool()}}function Mn(t){return t.preventDefault(),!1}function Sn(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(null!==i){if(!(i instanceof bn)){var n=e.Zb(e.lastInput.documentPoint,null,null);null!==n&&n.rg(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(Pn(t,!0),t.isActive||t.stopTool())}function Pn(t,e,i){if(void 0===i&&(i=null),!t.Jt&&(t.Jt=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Jt=!1,!e)){if(t.isActive=!0,e=Nn,null===i&&(i=t.findObjectWithContextMenu()),null!==i){var n=i.contextMenu;null!==n?(t.currentObject=i instanceof Ds?i:null,t.showContextMenu(n,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof bu&&!t.currentContextMenu.visible&&t.stopTool()}}an.className=\"LinkReshapingTool\",an.None=ln,an.Horizontal=un,an.Vertical=cn,an.All=fn,B(\"linkReshapingTool\",(function(){return this.findTool(\"LinkReshaping\")}),(function(t){this.Za(\"LinkReshaping\",t,this.mouseDownTools)})),c(dn,xi),dn.prototype.updateAdornments=function(t){if(!(null===t||t instanceof qu)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.Wj(this.name);if(null!==e&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()&&(null!==i&&i.adornedObject===e||(i=this.makeAdornment(e)),null!==i))return e=e.Ki(),fu(t)&&this.updateResizeHandles(i,e),void t.xh(this.name,i)}t.Gf(this.name)}},dn.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new bu).type=fh.Spot,e.locationSpot=oe;var i=new Uu;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,ee)),e.add(this.makeHandle(t,ne)),e.add(this.makeHandle(t,le)),e.add(this.makeHandle(t,ae)),e.add(this.makeHandle(t,Ae)),e.add(this.makeHandle(t,Oe)),e.add(this.makeHandle(t,De)),e.add(this.makeHandle(t,je))}else if(jh(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},dn.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},dn.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Mb()&&(\"pointer\"===t.cursor||0<t.cursor.indexOf(\"resize\")))t:{var i=t.alignment;if(i.zc()&&(i=oe),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else{if(!(1<=i.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?\"e-resize\":67.5>e?\"se-resize\":112.5>e?\"s-resize\":157.5>e?\"sw-resize\":202.5>e?\"w-resize\":247.5>e?\"nw-resize\":292.5>e?\"n-resize\":337.5>e?\"ne-resize\":\"e-resize\"}else if(t instanceof fh)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},dn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},dn.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.qc(),this.xa(this.name),this.Er.set(this.adornedObject.da(this.handle.alignment.pv())),this.Io.set(this.adornedObject.part.location),this.Zw.set(this.adornedObject.desiredSize),this.Bt=this.computeCellSize(),this.Dt=this.computeMinSize(),this.Ct=this.computeMaxSize(),this.isActive=!0))},dn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.isActive=t.isMouseCaptured=!1},dn.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},dn.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Dt,i=this.Ct,n=this.Bt,r=this.adornedObject.us(t.lastInput.documentPoint,gt.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),t.gd(),gt.free(r)}},dn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Dt,i=this.Ct,n=this.Bt,r=this.adornedObject.us(t.lastInput.documentPoint,gt.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),gt.free(r),t.Qa(),this.transactionResult=this.name,t.S(\"PartResized\",this.adornedObject,this.originalDesiredSize)}this.stopTool()},dn.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(null!==i){if(i.desiredSize=t.size,(t=i.part).Ta(),i=i.da(this.handle.alignment.pv()),t instanceof _u){var n=new J;if(n.add(t),!this.dragsMembers&&null===t.placeholder){var r=new Ms;r.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().ie(i),!0,r)}else t.location=t.location.copy().ie(i).add(this.oppositePoint);e.gd()}},dn.prototype.computeResize=function(t,e,i,n,r,o){e.zc()&&(e=oe);var s=this.adornedObject.naturalBounds,a=s.x,h=s.y,l=s.x+s.width,u=s.y+s.height,c=1;if(!o){c=s.width;var f=s.height;0>=c&&(c=1),0>=f&&(f=1),c=f/c}return f=gt.alloc(),Xe.Wp(t.x,t.y,a,h,r.width,r.height,f),t=s.copy(),0>=e.x?0>=e.y?(t.x=Math.max(f.x,l-n.width),t.x=Math.min(t.x,l-i.width),t.width=Math.max(l-t.x,i.width),t.y=Math.max(f.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,n.height),i.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,n.width),i.width),t.height=c*t.width),t.x=l-t.width,t.y=u-t.height)):1<=e.y?(t.x=Math.max(f.x,l-n.width),t.x=Math.min(t.x,l-i.width),t.width=Math.max(l-t.x,i.width),t.height=Math.max(Math.min(f.y-h,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,n.height),i.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,n.width),i.width),t.height=c*t.width),t.x=l-t.width)):(t.x=Math.max(f.x,l-n.width),t.x=Math.min(t.x,l-i.width),t.width=l-t.x,o||(t.height=Math.max(Math.min(c*t.width,n.height),i.height),t.width=t.height/c,t.y=h+.5*(u-h-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(f.x-a,n.width),i.width),t.y=Math.max(f.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,n.height),i.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,n.width),i.width),t.height=c*t.width),t.y=u-t.height)):1<=e.y?(t.width=Math.max(Math.min(f.x-a,n.width),i.width),t.height=Math.max(Math.min(f.y-h,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,n.height),i.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,n.width),i.width),t.height=c*t.width))):(t.width=Math.max(Math.min(f.x-a,n.width),i.width),o||(t.height=Math.max(Math.min(c*t.width,n.height),i.height),t.width=t.height/c,t.y=h+.5*(u-h-t.height))):0>=e.y?(t.y=Math.max(f.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=u-t.y,o||(t.width=Math.max(Math.min(t.height/c,n.width),i.width),t.height=c*t.width,t.x=a+.5*(l-a-t.width))):1<=e.y&&(t.height=Math.max(Math.min(f.y-h,n.height),i.height),o||(t.width=Math.max(Math.min(t.height/c,n.width),i.width),t.height=c*t.width,t.x=a+.5*(l-a-t.width))),gt.free(f),t},dn.prototype.computeReshape=function(){var t=fs;return this.adornedObject instanceof Hh&&(t=Zh(this.adornedObject)),!(t===ds||this.diagram.lastInput.shift)},dn.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},dn.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},dn.prototype.computeCellSize=function(){var t=new jt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},f.Object.defineProperties(dn.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof bu))throw Error(\"new handle is not in an Adornment: \"+t);this.j=t}},adornedObject:{get:function(){return this.le},set:function(t){if(null!==t&&t.part instanceof bu)throw Error(\"new handle must not be in an Adornment: \"+t);this.le=t}},minSize:{get:function(){return this.Zf},set:function(t){if(!this.Zf.A(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.Zf.h(e,t)}}},maxSize:{get:function(){return this.Yf},set:function(t){if(!this.Yf.A(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Yf.h(e,t)}}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.A(t)||this.yg.assign(t)}},isGridSnapEnabled:{get:function(){return this.D},set:function(t){this.D=t}},dragsMembers:{get:function(){return this.L},set:function(t){this.L=t}},oppositePoint:{get:function(){return this.Er},set:function(t){this.Er.A(t)||this.Er.assign(t)}},originalDesiredSize:{get:function(){return this.Zw}},originalLocation:{get:function(){return this.Io}}}),dn.className=\"ResizingTool\",B(\"resizingTool\",(function(){return this.findTool(\"Resizing\")}),(function(t){this.Za(\"Resizing\",t,this.mouseDownTools)})),c(pn,xi),pn.prototype.updateAdornments=function(t){if(null!==t){if(t.Hh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()){var i=t.Wj(this.name);if(null!==i&&i.adornedObject===e||(i=this.makeAdornment(e)),null!==i)return i.angle=e.Ki(),null===i.placeholder&&(i.location=this.computeAdornmentLocation(e)),void t.xh(this.name,i)}t.Gf(this.name)}},pn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new bu).type=fh.Position,e.locationSpot=oe;var i=this.handleArchetype;null!==i&&e.add(i.copy())}else if(jh(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},pn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},pn.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.xa(this.name),this.Yw=this.adornedObject.angle,this.Kr=this.computeRotationPoint(this.adornedObject),this.Io=this.adornedObject.part.location.copy(),this.isActive=!0)},pn.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.hb()?t.da(e.rotationSpot):t===e||t===i?i.da(e.locationSpot):t.da(oe)},pn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.us(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return 0===i?e.x=t.naturalBounds.width+n:45===i?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):90===i?e.y=t.naturalBounds.height+n:135===i?(e.x=-n,e.y=t.naturalBounds.height+n):180===i?e.x=-n:225===i?(e.x=-n,e.y=-n):270===i?e.y=-n:315===i&&(e.x=t.naturalBounds.width+n,e.y=-n),t.da(e)},pn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.Kr=new gt(NaN,NaN),this.isActive=t.isMouseCaptured=!1},pn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},pn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},pn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Qa(),this.transactionResult=this.name,t.S(\"PartRotated\",this.adornedObject,this.originalAngle)}this.stopTool()},pn.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Ta();var i=e.locationObject,n=e.rotateObject;(i===n||i.rg(n))&&(i=this.Io.copy(),e.location=i.ie(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.gd()}},pn.prototype.computeRotate=function(t){t=this.rotationPoint.Pa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.Ki()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},f.Object.defineProperties(pn.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof bu))throw Error(\"new handle is not in an Adornment: \"+t);this.j=t}},adornedObject:{get:function(){return this.le},set:function(t){if(null!==t&&t.part instanceof bu)throw Error(\"new handle must not be in an Adornment: \"+t);this.le=t}},snapAngleMultiple:{get:function(){return this.Ba},set:function(t){this.Ba=t}},snapAngleEpsilon:{get:function(){return this.wa},set:function(t){this.wa=t}},originalAngle:{get:function(){return this.Yw}},rotationPoint:{get:function(){return this.Kr},set:function(t){this.Kr=t.copy()}},handleAngle:{get:function(){return this.D},set:function(t){this.D=t}},handleDistance:{get:function(){return this.L},set:function(t){this.L=t}}}),pn.className=\"RotatingTool\",B(\"rotatingTool\",(function(){return this.findTool(\"Rotating\")}),(function(t){this.Za(\"Rotating\",t,this.mouseDownTools)})),c(gn,xi),gn.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},gn.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},gn.className=\"ClickSelectingTool\",c(yn,xi),yn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.Zb(e.documentPoint,(function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t}));return null!==i&&!!i.isActionable&&(this.tk=i,t.Jk=t.Zb(e.documentPoint,null,null),!0)},yn.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.tk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},yn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.tk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},yn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.tk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick((function(t){for(;null!==t.panel&&(!t.isActionable||t!==e);)t=t.panel;return t}),(function(t){return t===e}))}this.stopTool()},yn.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.tk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},yn.prototype.doStop=function(){this.tk=null},yn.className=\"ActionTool\",c(mn,xi),mn.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.Lw=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.Lw))return!1}else if(1!==t.lastInput.clickCount)return!1;return t.currentTool===this||null===t.Zl(t.lastInput.documentPoint,!0)},mn.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},mn.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(null===i)return null;var n=null;try{if(e.S(\"ChangingSelection\",e.selection),this.xa(this.name),i instanceof Jl)i.Mc()&&(jh(i),null!==(n=i.copy())&&e.add(n));else if(null!==i){var r=e.model.copyNodeData(i);P(r)&&(e.model.sf(r),n=e.yc(r))}if(null!==n){var o=gt.allocAt(t.x,t.y);this.isGridSnapEnabled&&lo(this.diagram,n,t,o),n.location=o,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),gt.free(o)}e.Qa(),this.transactionResult=this.name,e.S(\"PartCreated\",n)}finally{this.stopTransaction(),e.S(\"ChangedSelection\",e.selection)}return n},f.Object.defineProperties(mn.prototype,{archetypeNodeData:{get:function(){return this.bj},set:function(t){this.bj=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),mn.className=\"ClickCreatingTool\",c(vn,xi),vn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.Zl(e.documentPoint,!0)))},vn.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},vn.prototype.doDeactivate=function(){var t=this.diagram;t.tg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},vn.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),i=this.box.Ya(\"SHAPE\");null===i&&(i=this.box.pb());var n=jt.alloc().h(e.width,e.height);i.desiredSize=n,this.box.wm(e.x,e.y,!1),jt.free(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.ms(t.lastInput.viewPoint)}},vn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor=\"wait\",t.S(\"ChangingSelection\",t.selection),this.selectInRect(this.computeBoxBounds()),t.S(\"ChangedSelection\",t.selection)}finally{t.currentCursor=\"\"}}this.stopTool()},vn.prototype.computeBoxBounds=function(){var t=this.diagram;return new Bt(t.firstInput.documentPoint,t.lastInput.documentPoint)},vn.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.Px(t,this.isPartialInclusion),E?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(i=new J,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},f.Object.defineProperties(vn.prototype,{delay:{get:function(){return this.Pk},set:function(t){this.Pk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),vn.className=\"DragSelectingTool\",c(xn,xi),xn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},xn.prototype.doActivate=function(){var t=this.diagram;this.xg?(t.lastInput.bubbles=!0,t.addEventListener(y.document,\"scroll\",this.hx,!1)):(t.currentCursor=\"move\",t.isMouseCaptured=!0,this.Vt.assign(t.position)),this.isActive=!0},xn.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor=\"\",this.isActive=t.isMouseCaptured=!1},xn.prototype.doCancel=function(){var t=this.diagram;t.position=this.Vt,t.isMouseCaptured=!1,this.stopTool()},xn.prototype.doMouseMove=function(){this.move()},xn.prototype.doMouseUp=function(){this.move(),this.stopTool()},xn.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.xg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,r=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.Vy.h(r,i)}},f.Object.defineProperties(xn.prototype,{bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},originalPosition:{get:function(){return this.Vt}}}),xn.className=\"PanningTool\",B(\"clickCreatingTool\",(function(){return this.findTool(\"ClickCreating\")}),(function(t){this.Za(\"ClickCreating\",t,this.mouseUpTools)})),B(\"clickSelectingTool\",(function(){return this.findTool(\"ClickSelecting\")}),(function(t){this.Za(\"ClickSelecting\",t,this.mouseUpTools)})),B(\"panningTool\",(function(){return this.findTool(\"Panning\")}),(function(t){this.Za(\"Panning\",t,this.mouseMoveTools)})),B(\"dragSelectingTool\",(function(){return this.findTool(\"DragSelecting\")}),(function(t){this.Za(\"DragSelecting\",t,this.mouseMoveTools)})),B(\"actionTool\",(function(){return this.findTool(\"Action\")}),(function(t){this.Za(\"Action\",t,this.mouseDownTools)})),f.Object.defineProperties(bn.prototype,{mainElement:{get:function(){return this.D},set:function(t){this.D=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.L},set:function(t){this.L=t}}}),bn.className=\"HTMLInfo\",wn.className=\"ContextMenuButtonInfo\",c(kn,xi),kn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},kn.prototype.doStart=function(){this.Uw.set(this.diagram.firstInput.documentPoint)},kn.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},kn.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.lastInput,n=null;if(t instanceof Pr||(n=t instanceof Ds?t:e.Zb(i.documentPoint,null,(function(t){return!t.layer.isTemporary}))),null!==n){for(t=n;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(null!==e.contextMenu)return e;return null},kn.prototype.doActivate=function(){},kn.prototype.doMouseDown=function(){if(xi.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof bu){var t=this.diagram.toolManager.findTool(\"Action\");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&Sn(this)},kn.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof bu){var t=this.diagram.toolManager.findTool(\"Action\");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}Sn(this)},kn.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool(\"Action\");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},kn.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof bu){t.layerName=\"Tool\",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.Ta(),this.positionContextMenu(t,e)}else t instanceof bn&&t.show(e,i,this);this.currentContextMenu=t},kn.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y+n.height>r.bottom&&(i.y-=n.height+5/e.scale),i.y<r.y&&(i.y=r.y),t.position=i}},kn.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof bu?(t.remove(e),null!==this.ut&&this.ut.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof bn&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display=\"none\")),this.currentContextMenu=null,this.standardMouseOver())},kn.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.vt&&(this.vt=function(t){var e=new J;return e.add(new wn(\"Copy\",(function(t){t.commandHandler.copySelection()}),(function(t){return t.commandHandler.canCopySelection()}))),e.add(new wn(\"Cut\",(function(t){t.commandHandler.cutSelection()}),(function(t){return t.commandHandler.canCutSelection()}))),e.add(new wn(\"Delete\",(function(t){t.commandHandler.deleteSelection()}),(function(t){return t.commandHandler.canDeleteSelection()}))),e.add(new wn(\"Paste\",(function(e){e.commandHandler.pasteSelection(t.mouseDownPoint)}),(function(e){return e.commandHandler.canPasteSelection(t.mouseDownPoint)}))),e.add(new wn(\"Select All\",(function(t){t.commandHandler.selectAll()}),(function(t){return t.commandHandler.canSelectAll()}))),e.add(new wn(\"Undo\",(function(t){t.commandHandler.undo()}),(function(t){return t.commandHandler.canUndo()}))),e.add(new wn(\"Redo\",(function(t){t.commandHandler.redo()}),(function(t){return t.commandHandler.canRedo()}))),e.add(new wn(\"Scroll To Part\",(function(t){t.commandHandler.scrollToPart()}),(function(t){return t.commandHandler.canScrollToPart()}))),e.add(new wn(\"Zoom To Fit\",(function(t){t.commandHandler.zoomToFit()}),(function(t){return t.commandHandler.canZoomToFit()}))),e.add(new wn(\"Reset Zoom\",(function(t){t.commandHandler.resetZoom()}),(function(t){return t.commandHandler.canResetZoom()}))),e.add(new wn(\"Group Selection\",(function(t){t.commandHandler.groupSelection()}),(function(t){return t.commandHandler.canGroupSelection()}))),e.add(new wn(\"Ungroup Selection\",(function(t){t.commandHandler.ungroupSelection()}),(function(t){return t.commandHandler.canUngroupSelection()}))),e.add(new wn(\"Edit Text\",(function(t){t.commandHandler.editTextBlock()}),(function(t){return t.commandHandler.canEditTextBlock()}))),e}(this)),Ln.innerHTML=\"\",Tn.addEventListener(\"pointerdown\",this.mu,!1);var e=this,i=b(\"ul\");i.className=\"goCXul\",Ln.appendChild(i),i.innerHTML=\"\";for(var n=this.vt.iterator;n.next();){var r=n.value,o=r.visible;if(\"function\"==typeof r.Cx&&(\"function\"!=typeof o||o(t))){(o=b(\"li\")).className=\"goCXli\";var s=b(\"a\");s.className=\"goCXa\",s.href=\"#\",s.Jy=r.Cx,s.addEventListener(\"pointerdown\",(function(i){return this.Jy(t),e.stopTool(),i.preventDefault(),!1}),!1),s.textContent=r.text,o.appendChild(s),i.appendChild(o)}}Ln.style.display=\"block\",Tn.style.display=\"block\"},kn.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===Nn){Ln.style.display=\"none\",Tn.style.display=\"none\";var t=this.diagram;null!==t&&t.removeEventListener(Tn,\"pointerdown\",this.mu,!1),this.currentContextMenu=null}},f.Object.defineProperties(kn.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.ut=t instanceof bu?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Cn&&null===Nn&&Eo&&function(t){var e=new bn;e.show=function(t,e,i){i.showDefaultContextMenu()},e.hide=function(t,e){e.hideDefaultContextMenu()},Nn=e,t.mu=function(){t.stopTool()},e=b(\"div\");var i=b(\"div\");e.style.cssText=\"top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px\",i.style.cssText=\"z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;\";var n=b(\"style\");y.document.getElementsByTagName(\"head\")[0].appendChild(n),n.sheet.insertRule(\".goCXul { list-style: none; }\",0),n.sheet.insertRule(\".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }\",0),n.sheet.insertRule(\".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }\",0),null!==(n=t.diagram)&&(n.addEventListener(e,\"contextmenu\",Mn,!1),n.addEventListener(e,\"selectstart\",Mn,!1),n.addEventListener(i,\"contextmenu\",Mn,!1)),e.className=\"goCXforeground\",i.className=\"goCXbackground\",y.document.body&&(y.document.body.appendChild(e),y.document.body.appendChild(i)),Ln=e,Tn=i,Cn=!0}(this),Nn},set:function(t){null===t&&(Cn=!0),Nn=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.Uw}}});var Nn=null,Cn=!1,Tn=null,Ln=null;function An(){xi.call(this),this.name=\"TextEditing\",this.qh=new rl,this.Ba=null,this.wa=zn,this.ui=null,this.ia=En,this.D=1,this.L=!0,this.o=null,this.j=new bn,this.wt=null,function(t,e){if(Eo){var i=b(\"textarea\");t.wt=i,i.addEventListener(\"input\",(function(){if(null!==t.textBlock){var e=t.iy(this.value);this.style.width=20+e.measuredBounds.width*this.SA+\"px\",this.rows=e.lineCount}}),!1),i.addEventListener(\"keydown\",(function(e){if(null!==t.textBlock){var i=e.key;\"Enter\"===i?(!1===t.textBlock.isMultiline&&e.preventDefault(),t.acceptText(Bn)):\"Tab\"===i?(t.acceptText(Fn),e.preventDefault()):\"Escape\"===i&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}}),!1),i.addEventListener(\"focus\",(function(){if(null!==t.currentTextEditor&&t.state!==En){var e=t.wt;t.ia===_n&&(t.ia=Vn),\"function\"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}}),!1),i.addEventListener(\"blur\",(function(){if(null!==t.currentTextEditor&&t.state!==En){var e=t.wt;\"function\"==typeof e.focus&&e.focus(),\"function\"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}}),!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(t,e,n){if(t instanceof rl&&n instanceof An)if(n.state===Gn)i.style.border=\"3px solid red\",i.focus();else{var r=t.da(oe),o=e.position,s=e.scale,a=t.Af()*s;a<n.minimumEditorScale&&(a=n.minimumEditorScale);var h=t.naturalBounds.width*a+6,l=t.naturalBounds.height*a+2,u=(r.x-o.x)*s;r=(r.y-o.y)*s,o=t.verticalAlignment,s=(t.lineHeight+t.spacingAbove+t.spacingBelow)*t.lineCount*a,l=o.y*l-o.y*s+o.offsetY-(.5*l-.5*s)-s/2,i.value=t.text,e.div.style.font=t.font,i.style.position=\"absolute\",i.style.zIndex=\"100\",i.style.font=\"inherit\",i.style.fontSize=100*a+\"%\",i.style.lineHeight=\"normal\",i.style.width=h+\"px\",i.style.left=(u-h/2|0)-1+\"px\",i.style.top=(r+l|0)-1+\"px\",i.style.textAlign=t.textAlign,i.style.margin=\"0\",i.style.padding=\"1px\",i.style.border=\"0\",i.style.outline=\"none\",i.style.whiteSpace=\"pre-wrap\",i.style.overflow=\"hidden\",i.rows=t.lineCount,i.SA=a,i.className=\"goTXarea\",e.div.appendChild(i),i.focus(),n.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(t){t.div.removeChild(i)}}}(this,this.j)}function jn(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(null!==e&&null!==n){var r=e.text,o=\"\";null!==n.valueFunction&&(o=n.valueFunction()),t.isValidText(e,r,o)?(t.xa(t.name),t.ia=Xn,t.transactionResult=t.name,e.text=o,t.doSuccess(r,o),null!==i&&i.S(\"TextEdited\",e,r),t.stopTransaction(),t.stopTool(),null!==i&&i.doFocus()):(t.ia=Gn,t.doError(r,o))}}kn.className=\"ContextMenuTool\",B(\"contextMenuTool\",(function(){return this.findTool(\"ContextMenu\")}),(function(t){this.Za(\"ContextMenu\",t,this.mouseUpTools)})),c(An,xi),An.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||Un&&Un!==this&&(Un.acceptText(Dn),Un&&Un!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Zb(t.lastInput.documentPoint);return!!(null!==e&&e instanceof rl&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===zn&&!e.isSelected||this.starting===Rn&&2>t.lastInput.clickCount)},An.prototype.doStart=function(){Un=this,null!==this.textBlock&&this.doActivate()},An.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.Zb(t.lastInput.documentPoint)),null!==e&&e instanceof rl&&(this.textBlock=e,null!==e.part)){t.animationManager.qc(),this.isActive=!0,this.ia=_n;var i=this.defaultTextEditor;null!==e.textEditor&&(i=e.textEditor),this.qh=this.textBlock.copy();var n=new Bt(this.textBlock.da(ee),this.textBlock.da(le));t.Fv(n),i.show(e,t,this),this.currentTextEditor=i}}}},An.prototype.doCancel=function(){this.stopTool()},An.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},An.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Dn)},An.prototype.acceptText=function(t){switch(t){case Dn:this.ia===Xn?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():this.ia!==_n&&this.ia!==Gn&&this.ia!==Vn||(this.ia=Yn,jn(this));break;case On:case Bn:case Fn:Bn===t&&!0===this.textBlock.isMultiline||this.ia!==_n&&this.ia!==Gn&&this.ia!==Vn||(this.ia=Yn,jn(this))}},An.prototype.doError=function(t,e){var i=this.textBlock;null!==i.errorFunction&&i.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(i,this.diagram,this)},An.prototype.doSuccess=function(t,e){var i=this.textBlock;null!==i.textEdited&&i.textEdited(i,t,e)},An.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.ia=En,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},An.prototype.doStop=function(){Un=null},An.prototype.isValidText=function(t,e,i){var n=this.textValidation;return!(null!==n&&!n(t,e,i)||null!==(n=t.textValidation)&&!n(t,e,i))},An.prototype.iy=function(t){var e=this.qh;return e.text=t,e.measure(this.textBlock.ei,1/0),e},f.Object.defineProperties(An.prototype,{textBlock:{get:function(){return this.Ba},set:function(t){this.Ba=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.wa},set:function(t){this.wa=t}},textValidation:{get:function(){return this.ui},set:function(t){this.ui=t}},minimumEditorScale:{get:function(){return this.D},set:function(t){this.D=t}},selectsTextOnActivate:{get:function(){return this.L},set:function(t){this.L=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),An.prototype.measureTemporaryTextBlock=An.prototype.iy;var On=new V(An,\"LostFocus\",0),Dn=new V(An,\"MouseDown\",1),Fn=new V(An,\"Tab\",2),Bn=new V(An,\"Enter\",3),In=new V(An,\"SingleClick\",0),zn=new V(An,\"SingleClickSelected\",1),Rn=new V(An,\"DoubleClick\",2),En=new V(An,\"StateNone\",0),_n=new V(An,\"StateActive\",1),Vn=new V(An,\"StateEditing\",2),Yn=new V(An,\"StateValidating\",3),Gn=new V(An,\"StateInvalid\",4),Xn=new V(An,\"StateValidated\",5),Un=null;function qn(t){nr||(er(),nr=!0),this.C=vr,this.Xk=this.tb=this.qr=this.kc=!1,this.nx=!0,this.Yk=rr,this.Tm=!1,this.$h=this.vd=!0,this.Kg=600,this.Bw=this.lx=!1,this.Se=new Q,this.Sd=new ar,this.Sd.Pd=this,this.aj=new Q,this.iu=new Q,this.cs=new Q,this.yl=new Q,t&&Object.assign(this,t)}function Kn(t,e){t.vd&&t.canStart(e)&&(t.Se.add(e),t.defaultAnimation.isAnimating&&t.qc(),Wr(t.C),t.tb=!0)}function Hn(t){if(t.vd&&t.tb){var e=t.Sd,i=t.C,n=t.Se.contains(\"Model\");n&&(t.Xk=!0,t.Yk===rr?(e.isViewportUnconstrained=!0,e.mc.clear(),e.add(i,\"position\",i.position.copy().offset(0,-200),i.position),e.add(i,\"opacity\",0,1)):t.Yk===sr&&e.mc.clear(),t.nx=!(t.Yk!==or||!i.au.A(i.ja)),i.S(\"InitialAnimationStarting\",t)),n&&!t.$h||0===e.mc.count?(t.Se.clear(),t.tb=!1,e.mc.clear(),hr(e,i),t.Xk=!1,i.N()):(t.Se.clear(),i.jg=!1,n=e.mc.get(i),i.autoScale!==Yo&&null!==n&&(delete n.start.scale,delete n.end.scale),y.requestAnimationFrame((function(){!1===t.tb||e.kc||(i.Ie(\"temporaryPixelRatio\")&&Lr(i),jr(i),t.tb=!1,e.start(),Zn(t),i.Qa(),fr(e,0),Hr(i,!0),Jn(t),i.S(\"AnimationStarting\",t))})))}}function Wn(t,e,i,n){t.isTicking||e instanceof qu&&(null!==e.fromNode||null!==e.toNode)||t.Sd.add(e,\"position\",i,n,!1)}function Zn(t){if(!t.qr){var e=t.C;t.lx=e.skipsUndoManager,t.Bw=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.qr=!0}}function Jn(t){var e=t.C;e.skipsUndoManager=t.lx,e.skipsModelSourceBindings=t.Bw,t.qr=!1}function $n(t,e,i){t.tb&&!e.A(i)&&(t.C.Oi||(e=i.copy()),lr(t.Sd,t.C,\"position\",e,i))}function Qn(t,e){for(e=e.findLinksConnected();e.next();){var i=e.value;i.gf=i.points.copy(),t.yl.add(i)}}function tr(t,e,i,n,r){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var o=t[0],s=t[1],a=t[2];t=t[3];var h=e[0],l=e[1],u=e[2];return e=e[3],0===a||100===a?(o=h,s=l):0!==u&&100!==u||(h=o,l=s),180<Math.abs(h-o)&&(h>o?o+=360:h+=360),\"hsla(\"+(o=r(i,o,h-o,n)%360)+\", \"+(s=r(i,s,l-s,n))+\"%, \"+(a=r(i,a,u-a,n))+\"%, \"+(i=r(i,t,e-t,n))+\")\"}function er(){function t(t,e,i,n,r,o){t.position=new gt(n(r,e.x,i.x-e.x,o),n(r,e.y,i.y-e.y,o))}var e=new pt;e.add(\"position:diagram\",t),e.add(\"position\",t),e.add(\"position:part\",(function(t,e,i,n,r,o){r<o?t.wm(n(r,e.x,i.x-e.x,o),n(r,e.y,i.y-e.y,o),!1):t.position=new gt(n(r,e.x,i.x-e.x,o),n(r,e.y,i.y-e.y,o))})),e.add(\"location\",(function(t,e,i,n,r,o){r<o?t.wm(n(r,e.x,i.x-e.x,o),n(r,e.y,i.y-e.y,o),!0):t.location=new gt(n(r,e.x,i.x-e.x,o),n(r,e.y,i.y-e.y,o))})),e.add(\"position:placeholder\",(function(t,e,i,n,r,o){r<o?t.wm(n(r,e.x,i.x-e.x,o),n(r,e.y,i.y-e.y,o),!1):t.position=new gt(n(r,e.x,i.x-e.x,o),n(r,e.y,i.y-e.y,o))})),e.add(\"position:nodeCollapse\",(function(t,e,i,n,r,o){var s=t.actualBounds,a=i.actualBounds;i=a.x+a.width/2-s.width/2,s=a.y+a.height/2-s.height/2,r<o?t.wm(n(r,e.x,i-e.x,o),n(r,e.y,s-e.y,o),!1):t.position=new gt(n(r,e.x,i-e.x,o),n(r,e.y,s-e.y,o))})),e.add(\"desiredSize\",(function(t,e,i,n,r,o){t.desiredSize=new Bt(n(r,e.width,i.width-e.width,o),n(r,e.height,i.height-e.height,o))})),e.add(\"width\",(function(t,e,i,n,r,o){t.width=n(r,e,i-e,o)})),e.add(\"height\",(function(t,e,i,n,r,o){t.height=n(r,e,i-e,o)})),e.add(\"fill\",(function(t,e,i,n,r,o){t.fill=tr(e,i,r,o,n)})),e.add(\"stroke\",(function(t,e,i,n,r,o){t.stroke=tr(e,i,r,o,n)})),e.add(\"strokeWidth\",(function(t,e,i,n,r,o){t.strokeWidth=n(r,e,i-e,o)})),e.add(\"strokeDashOffset\",(function(t,e,i,n,r,o){t.strokeDashOffset=n(r,e,i-e,o)})),e.add(\"background\",(function(t,e,i,n,r,o){t.background=tr(e,i,r,o,n)})),e.add(\"areaBackground\",(function(t,e,i,n,r,o){t.areaBackground=tr(e,i,r,o,n)})),e.add(\"opacity\",(function(t,e,i,n,r,o){t.opacity=n(r,e,i-e,o)})),e.add(\"scale\",(function(t,e,i,n,r,o){t.scale=n(r,e,i-e,o)})),e.add(\"angle\",(function(t,e,i,n,r,o){t.angle=n(r,e,i-e,o)})),ir=e}An.className=\"TextEditingTool\",An.LostFocus=On,An.MouseDown=Dn,An.Tab=Fn,An.Enter=Bn,An.SingleClick=In,An.SingleClickSelected=zn,An.DoubleClick=Rn,An.StateNone=En,An.StateActive=_n,An.StateEditing=Vn,An.StateValidating=Yn,An.StateInvalid=Gn,An.StateValidated=Xn,B(\"textEditingTool\",(function(){return this.findTool(\"TextEditing\")}),(function(t){this.Za(\"TextEditing\",t,this.mouseUpTools)})),qn.prototype.Ne=function(t){this.C=t},qn.prototype.canStart=function(){return!0},(e=qn.prototype).Ls=function(t){return this.Sd.Ls(t)},e.cv=function(t){return this.Sd.cv(t)},e.qc=function(t){var e=this.Sd;if(!0===this.tb&&(this.Xk=this.tb=!1,this.Se.clear(),0<e.mc.count&&this.C.Fb()),this.kc){if(e.Xl(!0),e.mc.clear(),hr(e,null),!0===t)for(t=this.aj.ya(),e=0;e<t.length;e++)t[e].Xl(!0)}else e.mc.clear(),hr(e,this.C)},e.Xl=function(t){t===this.defaultAnimation&&this.defaultAnimation.mc.clear(),this.aj.remove(t),0===this.aj.count&&(this.kc=!1,this.C.Fb()),t===this.defaultAnimation&&(this.defaultAnimation.mc.clear(),this.C.S(\"AnimationFinished\",this))},e.Mj=function(t,e){this.tb&&(this.Se.contains(\"Expand Tree\")||this.Se.contains(\"Expand SubGraph\"))&&(this.Sd.Mj(t,e),Qn(this,t))},e.Kj=function(t,e){this.tb&&(this.Se.contains(\"Collapse Tree\")||this.Se.contains(\"Collapse SubGraph\"))&&(this.Sd.Kj(t,e),lr(this.Sd,e,\"position\",e.position,e.position),Qn(this,t))},f.Object.defineProperties(qn.prototype,{animationReasons:{get:function(){return this.Se}},isEnabled:{get:function(){return this.vd},set:function(t){(this.vd=t)&&this.aj.each((function(t){t.isAnimating||1/0!==t.runCount||t.start()}))}},duration:{get:function(){return this.Kg},set:function(t){1>t&&M(t,\">= 1\",qn,\"duration\"),this.Kg=t}},isAnimating:{get:function(){return this.kc}},isTicking:{get:function(){return this.qr}},isInitial:{get:function(){return this.$h},set:function(t){this.$h=t}},defaultAnimation:{get:function(){return this.Sd}},activeAnimations:{get:function(){return this.aj}},initialAnimationStyle:{get:function(){return this.Yk},set:function(t){this.Yk=t}}}),qn.prototype.stopAnimation=qn.prototype.qc;var ir=null,nr=!1,rr=new V(qn,\"Default\",1),or=new V(qn,\"AnimateLocations\",2),sr=new V(qn,\"None\",3);function ar(t){this.nu=this.kx=this.Pd=this.C=null,this.el=this.kc=this.j=!1,this.xn=this.Cd=0,this.Oq=this.At=dr,this.dl=this.Xo=!1,this.$t=1,this.Yt=0,this.ud=this.Kg=NaN,this.Fw=0,this.yn=null,this.o=nt,this.mc=new pt,this.Tt=new pt,this.Pl=new Q,this.Ut=new Q,this.Cw=Jo,t&&Object.assign(this,t)}function hr(t,e){if(t.Tt.clear(),t.dl=!1,t.Yt=0,t.ud=NaN,0<t.Pl.count&&t.Pl.clear(),0<t.Ut.count&&t.Ut.clear(),null!==e)for(t=e.links;t.next();)t.value.gf=null}function lr(t,e,i,n,r,o){var s=t.mc;if(e instanceof Pr&&\"position\"===i&&(i=\"position:diagram\"),\"fill\"!==i&&\"stroke\"!==i&&\"background\"!==i&&\"areaBackground\"!==i||(Ca(n),Ta(),n=[qa.j,qa.D,qa.o,qa.L],Ca(r),Ta(),r=[qa.j,qa.D,qa.o,qa.L]),s.contains(e)){var a=s.H(e),h=a.start,l=a.end;void 0===h[i]&&(h[i]=ur(n)),l[i]=ur(r)}else l={},(h={})[i]=ur(n),l[i]=ur(r),a=h.position,e instanceof Ds&&a instanceof gt&&!a.u()&&e.diagram.animationManager.Se.contains(\"Expand SubGraph\")&&a.assign(l.position),a=new gr(h,l,o),s.add(e,a);(s=h[i])instanceof gt&&!s.u()&&s.assign(t.o),o&&0===i.indexOf(\"position:\")&&e instanceof Jl?a.Lu.location=ur(e.location):o&&(a.Lu[i]=ur(n))}function ur(t){return t instanceof gt||t instanceof jt?t.copy():t}function cr(t,e){if(!t.el||e){var i=t.Pd;if(!1!==t.kc){var n=+new Date,r=n>t.xn?t.ud:n-t.Cd;e&&((r=t.Fw)<t.ud?(t.Cd=+new Date-r,t.xn=t.Cd+t.ud):r=t.ud),Zn(i),fr(t,r),Hr(t.C,!0),Jn(i),n>t.xn&&(t.Xo&&!t.dl?(t.Cd=+new Date,t.xn=t.Cd+t.ud,t.dl=!0):t.Xl(!1))}}}function fr(t,e){for(var i=t.ud,n=t.mc.iterator,r=t.dl;n.next();){var o=n.key;if(!(o instanceof Ds&&null===o.diagram)){var s=n.value,a=r?s.end:s.start;s=r?s.start:s.end;var h,l=ir;for(h in s)\"position\"===h&&(s[\"position:placeholder\"]||s[\"position:nodeCollapse\"])||null===l.get(h)||l.get(h)(o,a[h],s[h],t.Oq,e,i,t)}}}function dr(t,e,i,n){return 1>(t/=n/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function pr(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function gr(t,e,i){this.start=t,this.end=e,this.Lu={},this.Du=i,this.yv=!1}function yr(t,e,i){this.od=null,this.ff=t,this.vp=i||xr,this.yk=null,void 0!==e&&(this.yk=e,void 0===i&&(this.vp=br))}qn.className=\"AnimationManager\",qn.defineAnimationEffect=function(t,e){nr||(er(),nr=!0),ir.add(t,e)},qn.Default=rr,qn.AnimateLocations=or,qn.None=sr,ar.prototype.suspend=function(){this.el=!0},ar.prototype.advanceTo=function(t,e){e&&(this.el=!1),this.Xo&&t>=this.ud&&(this.dl=!0,t-=this.ud),this.Fw=t,cr(this,!0),Zn(this.Pd),Hr(this.C),Jn(this.Pd),this.C.redraw()},(e=ar.prototype).start=function(){if(0===this.mc.count||this.kc)return this;for(var t=this.C,e=this.mc.iterator;e.next();){var i=e.value.end,n=e.key;if(i[\"position:placeholder\"]){var r=n.findVisibleNode();if(r instanceof _u&&null!==r.placeholder){var o=r.placeholder;r=o.da(ee),o=o.padding,r.x+=o.left,r.y+=o.top,i[\"position:placeholder\"]=r}}null===t&&(n instanceof Pr?t=n:n instanceof Ds&&(t=n.diagram))}return null===t||(this.C=t,this.Pd=t.animationManager,!1===(e=this.Pd).isEnabled||(this.ud=isNaN(this.Kg)?e.duration:this.Kg,this.Oq=this.At,e.Xk&&e.Yk===rr&&this===e.defaultAnimation&&(this.Oq=pr,this.ud=isNaN(this.Kg)?600===e.duration?900:e.duration:this.Kg),this.Cw=t.scrollMode,this.isViewportUnconstrained&&(t.Gj=$o),Zn(e),this.Pl.each((function(e){e.data=null,t.add(e)})),Jn(e),this.kc=!0,this.Cd=+new Date,this.xn=this.Cd+this.ud,function(t,e){function i(){if(0<r.cs.count&&(n.addAll(r.cs),r.cs.clear(),r.kc=!0),!1!==r.kc&&0!==n.count){r.iu.addAll(n);for(var t=r.iu.iterator;t.next();){var e=t.value;if(!1!==e.kc){t:if(0<e.Pl.count)var o=!0;else{for(o=e.mc.iterator;o.next();){var s=o.key;if(s instanceof Ds&&null!==s.diagram||s instanceof Pr){o=!0;break t}}o=!1}o?cr(e,!1):e.el=!0}}r.iu.clear(),Zn(r),Hr(r.C),Jn(r),y.requestAnimationFrame(i)}}var n=t.aj,r=t;t.kc?t.cs.add(e):(t.kc=!0,n.add(e),y.requestAnimationFrame((function(){i()})))}(e,this))),this},e.dz=function(t,e){return t.Mc()?(this.Pl.add(t),this.C=e,this):this},e.add=function(t,e,i,n,r){if(\"position\"===e&&i.A(n))return this;if(null===this.C&&(t instanceof Pr?this.C=t:t instanceof Ds&&null!==t.diagram&&(this.C=t.diagram)),t instanceof Jl){if(!t.isAnimated)return this;\"position\"===e&&(e=\"position:part\")}return lr(this,t,e,i,n,r),this},e.Ls=function(t){return!!this.kc&&null!==(t=this.mc.H(t))&&t.yv},e.cv=function(t){return!!this.kc&&null!==(t=this.mc.H(t))&&(t.start.position||t.start.location)},e.stop=function(){return this.kc?(this.Xl(!0),this):this},e.Xl=function(t){if(null!==this.nu&&this.nu.ep.remove(this.kx),this.kc){var e=this.C,i=this.Pd;this.el=this.kc=i.Xk=!1,Zn(i);for(var n=this.mc,r=this.Pl.iterator;r.next();)e.remove(r.value);for(r=this.Ut.iterator;r.next();)r.value.s();r=this.Xo,n=n.iterator;for(var o=ir;n.next();){var s,a=n.key,h=n.value,l=r?h.end:h.start,u=r?h.start:h.end,c=h.Lu;for(s in u)if(null!==o.get(s)){var f=s;!h.Du||\"position:nodeCollapse\"!==f&&\"position:placeholder\"!==f||(f=\"position\"),o.get(f)(a,l[s],void 0!==c[s]?c[s]:h.Du?l[s]:u[s],this.Oq,this.ud,this.ud,this)}h.Du&&void 0!==c.location&&a instanceof Jl&&(a.location=c.location),h.yv&&a instanceof Jl&&a.Ob(!1)}if(e.Gs.clear(),Ar(e,!1),e.Qa(),e.N(),Hr(e,!0),i.defaultAnimation===this){for(s=i.yl.iterator;s.next();)null!==(r=s.value).gf&&(r.points=r.gf,r.gf=null);i.yl.clear()}this.isViewportUnconstrained&&(e.scrollMode=this.Cw),Jn(i),this.Yt++,!t&&this.$t>this.Yt?(this.dl=!1,this.start()):(this.yn&&this.yn(this),hr(this,null),i.Xl(this),e.Fb())}},e.Mj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof _u&&(n=e.placeholder),null!==n?(i=n.da(ee),n=n.padding,i.x+=n.left,i.y+=n.top,this.add(t,\"position\",i,t.position,!1)):this.add(t,\"position\",new gt(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,\"scale\",.01,t.scale,!1),t instanceof _u)for(t=t.memberParts;t.next();)(n=t.value)instanceof wu&&this.Mj(n,e)},e.Kj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof _u&&(i=e.placeholder),null!==i?this.add(t,\"position:placeholder\",t.position,i,!0):this.add(t,\"position:nodeCollapse\",t.position,e,!0),this.add(t,\"scale\",t.scale,.01,!0),(i=this.mc).contains(t)&&(i.H(t).yv=!0),t instanceof _u)for(t=t.memberParts;t.next();)(i=t.value)instanceof wu&&this.Kj(i,e)}},e.bA=function(t){var e=this.Tt.get(t);return null===e&&(e={},this.Tt.add(t,e)),e},f.Object.defineProperties(ar.prototype,{duration:{get:function(){return this.Kg},set:function(t){1>t&&M(t,\">= 1\",ar,\"duration\"),this.Kg=t}},reversible:{get:function(){return this.Xo},set:function(t){this.Xo=t}},runCount:{get:function(){return this.$t},set:function(t){0<t?this.$t=t:w(\"Animation.runCount value must be a positive integer.\")}},finished:{get:function(){return this.yn},set:function(t){this.yn!==t&&(this.yn=t)}},easing:{get:function(){return this.At},set:function(t){this.At=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.kc}}}),ar.prototype.getTemporaryState=ar.prototype.bA,ar.prototype.stop=ar.prototype.stop,ar.prototype.add=ar.prototype.add,ar.prototype.addTemporaryPart=ar.prototype.dz,ar.className=\"Animation\",ar.EaseLinear=function(t,e,i,n){return i*t/n+e},ar.EaseInOutQuad=dr,ar.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},ar.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},ar.EaseInExpo=function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},ar.EaseOutExpo=pr,gr.className=\"AnimationState\",yr.prototype.copy=function(){var t=new yr(this.ff);t.vp=this.vp;var e=this.yk;if(null!==e){var i={};void 0!==e.duration&&(i.duration=e.duration),void 0!==e.finished&&(i.finished=e.finished),void 0!==e.easing&&(i.easing=e.easing),t.yk=i}return t},f.Object.defineProperties(yr.prototype,{propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},animationSettings:{get:function(){return this.yk},set:function(t){this.yk=t}},startCondition:{get:function(){return this.vp},set:function(t){this.vp=t}}});var mr,vr,xr=new V(yr,\"Default\",1),br=new V(yr,\"Immediate\",2),wr=new V(yr,\"Bundled\",3);function kr(t){tt(this),this.C=null,this.Ha=new J,this.na=\"\",this.mb=1,this.o=!1,this.j=this.oi=this.Bc=this.Nd=this.rc=this.Rb=this.Gb=this.Ma=this.Qb=this.Ba=this.ke=this.wa=this.Od=this.L=this.D=!0,this.Jo=[],t&&Object.assign(this,t)}function Mr(t,e){var i=1;return 1!==t.mb&&(i=e.globalAlpha,e.globalAlpha=i*t.mb),i}function Sr(t,e,i){if(e=function(t,e,i){var n=i.zOrder;if(isNaN(n))return e;var r=(t=t.Ha).count;if(1>=r)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var o=e-1,s=NaN;0<=o&&(s=t.J(o).zOrder,isNaN(s));)o--;for(var a=e+1,h=NaN;a<r&&(h=t.J(a).zOrder,isNaN(h));)a++;if(!isNaN(s)&&s>n)for(;;){if(-1===o||s<=n){if(++o===e)break;return t.eb(e),t.wb(o,i),o}for(s=NaN;0<=--o&&(s=t.J(o).zOrder,isNaN(s)););}else if(!isNaN(h)&&h<n)for(;;){if(a===r||h>=n){if(--a===e)break;return t.eb(e),t.wb(a,i),a}for(h=NaN;++a<r&&(h=t.J(a).zOrder,isNaN(h)););}return e}(t,e,i),i instanceof _u&&null!==i&&isNaN(i.zOrder)){if(0!==i.memberParts.count){for(var n=-1,r=t.Ha.m,o=r.length,s=0;s<o;s++){var a=r[s];if(a===i&&(e=s,0<=n))break;if(0>n&&a.containingGroup===i&&(n=s,0<=e))break}!(0>n)&&n<e&&((r=t.Ha).eb(e),r.wb(n,i))}null!==(i=i.containingGroup)&&Sr(t,-1,i)}}function Pr(t,e){if(ss||(function(){if(Eo){var t=y.document.createElement(\"canvas\"),e=t.getContext(\"2d\"),i=I(\"7ca11abfd022028846\");e[i]=I(\"398c3597c01238\");for(var n=[\"5da73c80a36455d6038e4972187c3cae51fd22\",m.Dx+\"4ae6247590da4bb21c324ba3a84e385776\",Ye.xF+\"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387\",Xe.za],r=1;5>r;r++)e[I(\"7ca11abfd7330390\")](I(n[r-1]),10,15*r);for(e[i]=I(\"39f046ebb36e4b\"),i=1;5>i;i++)e[I(\"7ca11abfd7330390\")](I(n[i-1]),10,15*i);4===n.length&&\"5\"===n[0][0]&&\"7\"===n[3][0]||(Ye.prototype.Hd=Ye.prototype.yx),os=t}}(),ss=!0),tt(this),vr=this,this.qb=!0,this.Ga=null,this.ta=this.ua=0,this.Ca=null,Eo){var i=this,n=function(){i.removeEventListener(y.document,\"DOMContentLoaded\",n,!1),i.setRTL()};null!==y.document.body?this.setRTL():i.addEventListener(y.document,\"DOMContentLoaded\",n,!1)}this.xl=null,zo.add(\"Model\",If);var r=this;return this.mw=function(t){var e=r.partManager;if(t.model===e.diagram.model&&e.diagram.Z){e.diagram.Z=!1;try{var i=t.change;\"\"===t.modelChange&&i===di&&e.updateDataBindings(t.object,t.propertyName)}finally{e.diagram.Z=!0}}},this.nw=function(t){r.partManager.doModelChanged(t)},this.du=this.fu=null,Nr(this),this.model=vd(),this.kh=!0,Or(this),this.layout=new rf,this.kh=!1,this.lk=this.mk=this.kk=this.jk=this.xA=this.gk=this.Zv=null,this.nq=function(){},this.preventDefault=null,this.Tn=!1,this.Zh=new as,void 0!==t&&(\"string\"==typeof t||y.Element&&t instanceof Element?ls(this,t):e=t),this.qb=!1,e&&this.xm(e),this}function Nr(t){t.Pd=new qn,t.Pd.Ne(t),t.ub=17,t.bx=!1,t.Vn=!1,t.Zt=\"default\",t.Oa=new J,t.Qy=new pt,t.sy(),t.qy(),t.mb=1,t.ja=new gt(NaN,NaN).freeze(),t.au=new gt(NaN,NaN),t.sa=1,t.Rq=1,t.Zu=new gt(NaN,NaN).freeze(),t.fv=NaN,t.sv=1e-4,t.ov=100,t.vb=new Ye,t.et=new gt(NaN,NaN).freeze(),t.Fu=new Bt(NaN,NaN,NaN,NaN).freeze(),t.Fj=new Wt(0,0,0,0).freeze(),t.Gj=Jo,t.at=!1,t.cw=null,t.dw=null,t.Ph=Yo,t.Gk=Pe,t.Qg=Yo,t.hr=Pe,t.Xu=ee,t.gv=ee,t.Vc=!0,t.Qn=!1,t.te=new Q,t.Xh=new pt,t.qn=!0,t.Bq=250,t.zk=-1,t.Dq=new Wt(16,16,16,16).freeze(),t.jg=!1,t.Qk=!1,t.zn=!0,t.br=new li,t.br.diagram=t,t.gh=new li,t.gh.diagram=t,t.rj=new li,t.rj.diagram=t,t.zg=null,t.df=null,t.ju=!1,function(t){function e(t){var e=t.toLowerCase(),r=new J;i.add(t,r),i.add(e,r),n.add(t,t),n.add(e,t)}var i=new pt,n=new pt;e(\"InitialAnimationStarting\"),e(\"AnimationStarting\"),e(\"AnimationFinished\"),e(\"BackgroundSingleClicked\"),e(\"BackgroundDoubleClicked\"),e(\"BackgroundContextClicked\"),e(\"ClipboardChanged\"),e(\"ClipboardPasted\"),e(\"DocumentBoundsChanged\"),e(\"ExternalObjectsDropped\"),e(\"GainedFocus\"),e(\"InitialLayoutCompleted\"),e(\"LayoutCompleted\"),e(\"LinkDrawn\"),e(\"LinkRelinked\"),e(\"LinkReshaped\"),e(\"LostFocus\"),e(\"Modified\"),e(\"ObjectSingleClicked\"),e(\"ObjectDoubleClicked\"),e(\"ObjectContextClicked\"),e(\"PartCreated\"),e(\"PartResized\"),e(\"PartRotated\"),e(\"SelectionMoved\"),e(\"SelectionCopied\"),e(\"SelectionDeleting\"),e(\"SelectionDeleted\"),e(\"SelectionGrouped\"),e(\"SelectionUngrouped\"),e(\"ChangingSelection\"),e(\"ChangedSelection\"),e(\"SubGraphCollapsed\"),e(\"SubGraphExpanded\"),e(\"TextEdited\"),e(\"TreeCollapsed\"),e(\"TreeExpanded\"),e(\"ViewportBoundsChanged\"),e(\"InvalidateDraw\"),t.Hw=i,t.Gw=n}(t),t.wi=new Q,t.hv=!0,t.bt=Qo,t.jw=!1,t.dt=Uo,t.Ys=\"auto\",t.Zi=\"auto\",t.Ag=null,t.Ig=null,t.Cg=null,t.ah=null,t.Zg=null,t.Yg=null,t.vv=null,t.Wg=null,t.Su=!1,t.Xg=null,t.$g=null,t.uh=null,t.Dg=null,t.St=!1,t.Wt={},t.ul=[null,null],t.kh=!1,t.pw=!1,t.hu=!1,t.xt=!1,t.lw=!0,t.Wc=!1,t.nj=!1,t.px=!0,t.se=-2,t.eh=new pt,t.Oo=new J,t.Rg=!1,t.vd=!0,t.rk=!0,t.D=!0,t.L=!0,t.sk=!1,t.Im=!0,t.Od=!0,t.wa=!0,t.ke=!0,t.jt=!0,t.Ba=!0,t.Qb=!0,t.Ma=!0,t.Gb=!0,t.Rb=!0,t.rc=!0,t.Nd=!0,t.kt=!0,t.nt=!0,t.kw=!1,t.cl=!1,t.Mn=!0,t.Nn=!0,t.it=!0,t.mt=!0,t.Zs=16,t.$s=16,t.Nr=!1,t.cu=!1,t.gu=0,t.eu=0,t.nb=new Wt(5).freeze(),t.ex=(new Q).freeze(),t.rv=999999999,t.Nw=(new Q).freeze(),t.jj=!0,t.kj=!0,t.lj=!0,t.Ye=!1,t.Sf=!1,t.Oh=!0,t.Uf=!1,t.Gy=new Q,t.Ow=new Q,t.Zc=null,t.Xw=1,t.gx=0,t.dd={scale:1,position:new gt,bounds:new Bt,zx:new jt,jy:new jt,by:!1},t.ox=new Bt(NaN,NaN,NaN,NaN).freeze(),t.Fp=new jt(NaN,NaN).freeze(),t.Tq=new Bt(NaN,NaN,NaN,NaN).freeze(),t.iv=!1,t.j=new pt;var e=new wu,i=new rl;i.bind(new Pd(\"text\",\"\",D)),e.add(i),t.My=e,t.j.add(\"\",e),e=new wu,(i=new rl).stroke=\"brown\",i.bind(new Pd(\"text\",\"\",D)),e.add(i),t.j.add(\"Comment\",e),(e=new wu).selectable=!1,e.avoidable=!1,(i=new Hh).figure=\"Ellipse\",i.fill=\"black\",i.stroke=null,i.desiredSize=new jt(3,3).ca(),e.add(i),t.j.add(\"LinkLabel\",e),t.Bc=new pt,(e=new _u).selectionObjectName=\"GROUPPANEL\",e.type=fh.Vertical,(i=new rl).font=\"bold 12pt sans-serif\",i.bind(new Pd(\"text\",\"\",D)),e.add(i),(i=new fh(fh.Auto)).name=\"GROUPPANEL\";var n=new Hh;n.figure=\"Rectangle\",n.fill=\"rgba(128,128,128,0.2)\",n.stroke=\"black\",i.add(n),(n=new Uu).padding=new Wt(5,5,5,5).ca(),i.add(n),e.add(i),t.Ky=e,t.Bc.add(\"\",e),t.o=new pt,e=new qu,(i=new Hh).isPanelMain=!0,e.add(i),(i=new Hh).toArrow=\"Standard\",i.fill=\"black\",i.stroke=null,i.strokeWidth=0,e.add(i),t.Ly=e,t.o.add(\"\",e),e=new qu,(i=new Hh).isPanelMain=!0,i.stroke=\"brown\",e.add(i),t.o.add(\"Comment\",e),(e=new bu).type=fh.Auto,(i=new Hh).fill=null,i.stroke=\"dodgerblue\",i.strokeWidth=3,e.add(i),(i=new Uu).margin=new Wt(1.5,1.5,1.5,1.5).ca(),e.add(i),t.Dv=e,t.Ku=e,(e=new bu).type=fh.Link,(i=new Hh).isPanelMain=!0,i.fill=null,i.stroke=\"dodgerblue\",i.strokeWidth=3,e.add(i),t.mv=e,t.Yd=null,t.fr=!1,t.Jk=null,t.partManager=new If,t.toolManager=new bi,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.ru=null,t.on=new Ms,t.Sv=null,t.Yv=null,t.Yr=!1,t.commandHandler=Tr(),t.Zr=!1,t.dr=null,t.er=at,t.mx=!1,t.dc=1,t.si=null,t.wr=1,t.zr=0,t.Vw=[0,0,0,0,0],t.Ar=0,t.rr=1,t.Qw=0,t.Rw=new gt,t.Xy=500,t.Cq=new gt,t.Mt=!1}function Cr(t,e){t.animationManager.qc(!0),t.ex=(new Q).freeze(),t.Nw=(new Q).freeze();var i=t.skipsUndoManager,n=null!==t.Wb&&void 0!==t.Wb;n&&(t.skipsUndoManager=!0);var r=null;null!==t.Yd&&null!==(r=t.Yd.part)&&t.remove(r);var o=[],s=t.Oa.length;if(e){for(e=0;e<s;e++)for(var a=t.Oa.m[e].parts;a.next();){var h=a.value;h!==r&&null===h.data&&o.push(h)}for(e=0;e<o.length;e++)t.remove(o[e])}for(e=0;e<s;e++)t.Oa.m[e].clear();return t.partManager.clear(),t.te.clear(),t.Xh.clear(),t.wi.clear(),t.Jk=null,t.Oo.clear(),Fl(),t.eh.clear(),_=[],null!==r&&(t.add(r),t.partManager.parts.remove(r)),n&&(t.skipsUndoManager=i),o}function Tr(){return null}function Lr(t){30<t.zr&&(t.si=1)}function Ar(t,e){null!==t.si&&(t.si=null,e&&t.nq(),q&&q.Kx||(t.zr=0,t.Vw=[0,0,0,0,0],t.Ar=0))}function jr(t){if(null!==t.Ca){var e=t.Ga;if(null!==e&&0!==e.clientWidth&&0!==e.clientHeight){t.bx||t.setScrollWidth();var i=t.Sf?t.ub:0,n=t.Ye?t.ub:0,r=t.dc;t.dc=t.computePixelRatio(),t.dc!==r&&(t.Qn=!0,t.Fb()),e.clientWidth===t.ua+i&&e.clientHeight===t.ta+n||(t.kj=!0,t.Vc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===Yo&&(t.Qk=!0,e.B()),t.Wc||t.Fb())}}}function Or(t){var e=new kr;e.name=\"Background\",t.Sl(e),(e=new kr).name=\"\",t.Sl(e),(e=new kr).name=\"Foreground\",t.Sl(e),(e=new kr).name=\"Adornment\",e.isTemporary=!0,e.isInDocumentBounds=!1,t.Sl(e),(e=new kr).name=\"Tool\",e.isTemporary=!0,e.isInDocumentBounds=!0,t.Sl(e),(e=new kr).name=\"Grid\",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.tx(e,t.Xj(\"Background\"))}function Dr(t){var e=new fh(fh.Grid);e.name=\"GRID\";var i=new Hh;return i.figure=\"LineH\",i.stroke=\"lightgray\",i.strokeWidth=.5,i.interval=1,e.add(i),(i=new Hh).figure=\"LineH\",i.stroke=\"gray\",i.strokeWidth=.5,i.interval=5,e.add(i),(i=new Hh).figure=\"LineH\",i.stroke=\"gray\",i.strokeWidth=1,i.interval=10,e.add(i),(i=new Hh).figure=\"LineV\",i.stroke=\"lightgray\",i.strokeWidth=.5,i.interval=1,e.add(i),(i=new Hh).figure=\"LineV\",i.stroke=\"gray\",i.strokeWidth=.5,i.interval=5,e.add(i),(i=new Hh).figure=\"LineV\",i.stroke=\"gray\",i.strokeWidth=1,i.interval=10,e.add(i),(i=new Jl).add(e),i.layerName=\"Grid\",i.zOrder=0,i.isInDocumentBounds=!1,i.isAnimated=!1,i.pickable=!1,i.locationObjectName=\"GRID\",t.add(i),t.partManager.parts.remove(i),e.visible=!1,e}function Fr(){this.C.cu?this.C.cu=!1:this.C.isEnabled?this.C.Gx(this):ro(this.C)}function Br(t){this.C.isEnabled?(this.C.gu=t.target.scrollTop,this.C.eu=t.target.scrollLeft):ro(this.C)}function Ir(t,e){if(t.fixedBounds.u())return e.assign(t.fixedBounds),e.Lp(t.nb),e;for(var i=!0,n=t.Oa.m,r=n.length,o=0;o<r;o++){var s=n[o];if(s.visible&&s.isInDocumentBounds)for(var a=(s=s.Ha.m).length,h=0;h<a;h++){var l=s[h];l.isInDocumentBounds&&l.isVisible()&&(l=l.actualBounds).u()&&(i?(i=!1,e.assign(l)):e.Qc(l))}}return i&&e.h(0,0,0,0),e.Lp(t.nb),e}function zr(t,e){if((e||t.Uf)&&!t.qb&&null!==t.Ca&&t.documentBounds.u()){if(e){var i=t.initialPosition;if(i.u())return void(t.position=i);(i=gt.alloc()).Ti(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=Bt.allocAt(0,0,n.width,n.height);var r=gt.alloc();r.Ti(n,t.initialViewportSpot),r.h(i.x-r.x,i.y-r.y),t.position=r,Bt.free(n),gt.free(r),gt.free(i)}t.qb=!0,i=t.Ph,e&&t.Qg!==Yo&&(i=t.Qg);var o=i!==Yo?Rr(t,i):t.scale;i=t.ja.x,n=t.ja.y,r=t.ua/o;var s=t.ta/o,a=t.Gk,h=t.hr;e&&!a.hb()&&(h.hb()||h.Mb())&&(a=h.Mb()?oe:h),Er(t,t.documentBounds,r,s,a,e),e=t.scale,t.scale=o,t.qb=!1,to(t),Kr(t,!0,!1),o=t.viewportBounds,Xe.w(o.x,i)&&Xe.w(o.y,n)&&Xe.w(o.width,r)&&Xe.w(o.height,s)||t.onViewportBoundsChanged(new Bt(i,n,r,s),o,e,!1)}}function Rr(t,e){var i=t.Rq;if(null===t.Ca)return i;t.Ta();var n=t.documentBounds;if(!n.u())return i;var r=n.width;n=n.height;var o=t.ua+(t.Sf?t.ub:0),s=t.ta+(t.Ye?t.ub:0),a=o/r,h=s/n;return e===Go?((e=Math.min(h,a))>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Xo?((e=h>a?(s-t.ub)/n:(o-t.ub)/r)>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function Er(t,e,i,n,r,o){var s=gt.allocAt(t.ja.x,t.ja.y),a=s.x,h=s.y;if(null!==t.dr){var l=gt.alloc();a=(l=t.dr.da(ee,l)).x-t.er.x/t.scale,h=l.y-t.er.y/t.scale,r=te,gt.free(l)}(o||t.scrollMode===Jo)&&(r.hb()&&(i>e.width&&(a=e.x+(r.x*e.width+r.offsetX)-(r.x*i-r.offsetX)),n>e.height&&(h=e.y+(r.y*e.height+r.offsetY)-(r.y*n-r.offsetY))),r=t.Fj,o=i-e.width,i<e.width+r.left+r.right?(a=Math.min(a+i/2,e.right+Math.max(o,r.right)-i/2),a=Math.max(a,e.left-Math.max(o,r.left)+i/2),a-=i/2):a>e.left?a=e.left:a<e.right-i&&(a=e.right-i),i=n-e.height,n<e.height+r.top+r.bottom?(h=Math.min(h+n/2,e.bottom+Math.max(i,r.bottom)-n/2),h=Math.max(h,e.top-Math.max(i,r.top)+n/2),h-=n/2):h>e.top?h=e.top:h<e.bottom-n&&(h=e.bottom-n)),s.x=isFinite(a)?a:-t.nb.left,s.y=isFinite(h)?h:-t.nb.top,null!==t.positionComputation&&(e=t.positionComputation(t,s),s.x=e.x,s.y=e.y),$n(t.Pd,t.ja,s),t.ja.h(s.x,s.y),wo(t),gt.free(s)}function _r(t,e,i,n){for(void 0===i&&(i=null),void 0===n&&(n=null),Wr(t),t=t.Oa.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&null!==(r=r.Zb(e,i,n)))return r}return null}function Vr(t,e,i){var n=t.gh;return t.gh=t.rj,t.rj=n,n.diagram=t,n.event=e,i?Ur(t,e,n):(n.viewPoint=t.gh.viewPoint,n.documentPoint=t.gh.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,void 0!==e.buttons&&(n.buttons=e.buttons),E&&0===e.button&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=Yr(e,e.target),n.targetObject=null,n}function Yr(t,e){return null===e?null:(e=e.C)?e:((e=t.path)||\"function\"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]&&e[0].C?e[0].C:null)}function Gr(t,e,i,n,r,o){var s=t.gh;return t.gh=t.rj,t.rj=s,s.diagram=t,s.clickCount=1,t=s.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),s.modifiers=t,s.event=e,s.timestamp=e.timeStamp,s.button=e.button,s.buttons=e.buttons,E&&0===e.button&&e.ctrlKey&&(s.button=2),s.down=i,s.up=n,s.handled=!1,s.bubbles=r,s.isMultiTouch=o,s}function Xr(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function Ur(t,e,i){var n=t.Ca,r=t.ua,o=t.ta,s=0,a=0;null!==n&&(n=n.getBoundingClientRect(),s=e.clientX-r/n.width*n.left,a=e.clientY-o/n.height*n.top),i.viewPoint.h(s,a),null!==t.vb?(e=gt.allocAt(s,a),t.vb.Hd(e),i.documentPoint.assign(e),gt.free(e)):i.documentPoint.h(s,a)}function qr(t,e,i,n){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[i]}else{if(null===t.ul[0])return;e=t.ul[i]}null!==(i=t.Ca)&&(i=i.getBoundingClientRect(),n.h(e.clientX-t.ua/i.width*i.left,e.clientY-t.ta/i.height*i.top))}function Kr(t,e,i){t.animationManager.defaultAnimation.isAnimating||t.qb||!t.kj||ro(t)||(e&&Wr(t),i&&zr(t,!1))}function Hr(t,e){if(!t.Wc&&(t.jg=!1,null!==t.Ga||t.Fp.u())){t.Wc=!0;var i=t.animationManager,n=t.Oo;if(!i.isAnimating&&0!==n.length){for(var r=n.m,o=r.length,s=0;s<o;s++){var a=r[s];Js(a,!1),a.s()}n.clear()}0<(n=t.Ow).count&&(n.each((function(t){t.Xv()})),n.clear()),r=n=!1,i.defaultAnimation.isAnimating&&(r=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.tb||jr(t),Kr(t,!1,!0),null!==t.Yd&&(t.Yd.visible&&!t.fr&&(yo(t),t.fr=!0),!t.Yd.visible&&t.fr&&(t.fr=!1)),Wr(t),o=!1,t.Uf&&!t.Oh||(t.Uf?Po(t,!t.Qk):(t.xa(\"Initial Layout\"),!1===i.isEnabled&&i.qc(),Po(t,!1)),o=!0),t.Qk=!1,Wr(t),t.hu||function(t){t.Wc||Wr(t),t.Ta()}(t),Kr(t,!0,!1),s=!1,o?((i=Bt.alloc()).assign(t.viewportBounds),t.Uf||(s=t.Uf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function(t){var e=t.sa;if(t.Qg!==Yo)t.scale=Rr(t,t.Qg);else if(t.Ph!==Yo)t.scale=Rr(t,t.Ph);else{var i=t.initialScale;isFinite(i)&&0<i&&(t.scale=i)}t.sa!==e&&(to(t),Kr(t,!0,!1)),zr(t,!0),e=t.Oa.m,t.Md(e,e.length,t,t.viewportBounds),t.S(\"InitialLayoutCompleted\"),t.au.assign(t.ja),yo(t)}(t)),t.S(\"LayoutCompleted\"),i.A(t.viewportBounds)||Kr(t,!0,!1),Bt.free(i)):i.Xk&&i.nx&&(t.Qg!==Yo?t.scale=Rr(t,t.Qg):t.Ph!==Yo?t.scale=Rr(t,t.Ph):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),zr(t,!0)),Wr(t),o&&s&&t.Xa(\"Initial Layout\"),t.Au(),e||t.oc(t.Vb),r&&(t.skipsUndoManager=n),t.Wc=!1}}function Wr(t){if(0!==t.te.count&&(t.Wc||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var i=t.te.iterator;if(null===i||0===t.te.count)break;t.te=new Q,t.Xv(i,t.te)}t.nodes.each((function(t){t instanceof _u&&0!=(65536&t.R)!=0&&(t.R=65536^t.R)}))}}function Zr(t,e){for(var i=A(),n=A(),r=e.memberParts;r.next();){var o=r.value;o.isVisible()&&(o instanceof _u?(Zs(o)||$s(o)||lu(o))&&Zr(t,o):o instanceof qu?o.fromNode===e||o.toNode===e?n.push(o):i.push(o):(o.measure(1/0,1/0),o.arrange()))}for(t=i.length,r=0;r<t;r++)(o=i[r]).measure(1/0,1/0),o.arrange();for(j(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)(i=n[e]).measure(1/0,1/0),i.arrange();j(n)}function Jr(t,e,i,n,r,o,s,a,h,l){if(null!==t.Ga){null===t.Ca&&w(\"No canvas specified\"),void 0===s&&(s=null),void 0===a&&(a=null),void 0===h&&(h=!1),void 0===l&&(l=!1),io(t),t.Vb.Hc(!0),eo(t),t.nj=!0;var u=t.sa;t.sa=r;var c=t.Oa.m,f=c.length;try{var d=new Bt(o.x,o.y,n.width/r,n.height/r),p=d.copy();p.Lp(i),yo(t,p),Wr(t),t.Md(c,f,t,d),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),null!==a&&\"\"!==a&&(e.fillStyle=a,e.fillRect(0,0,n.width,n.height));var g=t.dc;e.scale(g,g);var y=Ye.alloc();y.reset(),y.translate(i.left,i.top),y.scale(r),0===o.x&&0===o.y||y.translate(-o.x,-o.y),e.setTransform(y.m11,y.m12,y.m21,y.m22,y.dx,y.dy),Ye.free(y),$r(t,e),e.globalAlpha=t.mb;var m=t.Xj(\"Grid\");if(s){var v=new Q,x=s.iterator;for(x.reset();x.next();){var b=x.value;b instanceof Jl&&(l||b.layer!==m)&&v.add(b)}for(l=0;l<f;l++){var k=c[l];m=e;var M=t;if(k.visible&&0!==k.mb&&(h||!k.isTemporary)){var S=k.Ha.m,P=S.length;if(0!==P){var N=Mr(k,m),C=k.Jo;C.length=0;var T=M.scale,L=Bt.alloc();for(i=0;i<P;i++){var A=S[i];v.contains(A)&&k.Di(m,A,M,C,T,L,!1)}Bt.free(L),m.globalAlpha=N}}}}else for(v=0;v<f;v++)(M=c[v])===m?l&&M.oc(e,t,!0):M.oc(e,t,h);t.nj=!1,t.Zh&&hs(t.Zh,t)&&t.zt()}finally{t.sa=u,t.Vb.Hc(!0),eo(t),t.Md(c,f,t,t.viewportBounds),yo(t)}}}function $r(t,e){null!==(t=t.hh)&&(void 0!==t.imageSmoothingEnabled&&e.vy(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function Qr(t,e){var i,n=t instanceof fh,r=t instanceof Pr;for(i in e){\"\"===i&&w(\"Setting properties requires non-empty property names\");var o=t,s=i;if(n||r){var a=i.indexOf(\".\");if(0<a){var h=i.substring(0,a);n?o=t.Ya(h):null==(o=t[h])&&(o=t.toolManager[h]),P(o)?s=i.substr(a+1):w(\"Unable to find object named: \"+h+\" in \"+t.toString()+\" when trying to set property: \"+i)}}if(\"_\"!==s[0]&&!F(o,s)){if(r&&\"ModelChanged\"===s){t.vx(e[s]);continue}if(r&&\"Changed\"===s){t.yh(e[s]);continue}if(r&&F(t.toolManager,s))o=t.toolManager;else{if(r&&Co(t,s)){t.Lj(s,e[s]);continue}if(t instanceof Qf&&\"Changed\"===s){t.yh(e[s]);continue}w('Trying to set undefined property \"'+s+'\" on object: '+o.toString())}}o[s]=e[i],\"_\"===s[0]&&o instanceof Ds&&o.sx(s)}}function to(t){!1===t.kj&&(t.kj=!0)}function eo(t){!1===t.lj&&(t.lj=!0)}function io(t){!1!==t.Qn&&(t.Qn=!1,no(t,t.ua,t.ta))}function no(t,e,i){wo(t);var n=t.dc;t.Ca.resize(e*n,i*n,e,i)&&(t.Vc=!0,t.Vb.Hc(!0))}function ro(t){var e=t.Ca;if(null===e||t.Fp.u())return!0;var i=t.ua,n=t.ta,r=t.viewportBounds;if(!t.viewportBounds.u())return!0;var o=r.x,s=r.y,a=r.width,h=r.height,l=t.fu,u=t.du,c=t.Ga,f=!1,d=t.Sf?t.ub:0,p=t.Ye?t.ub:0,g=c.clientWidth||i+d,y=c.clientHeight||n+p;if(g===i+d&&y===n+p||(t.Sf=!1,t.Ye=!1,p=d=0,t.ua=g,t.ta=y,f=t.Qn=!0,wo(t)),!(f||t.Sf||t.Ye||t.Mn||t.Nn))return!0;t.kj=!1;var m=t.documentBounds,v=0,x=0,b=0,w=0;c=r.width;var k=r.height,M=t.Fj;t.contentAlignment.hb()?(m.width>c&&(v=M.left,x=M.right),m.height>k&&(b=M.top,w=M.bottom)):(v=M.left,x=M.right,b=M.top,w=M.bottom),M=m.width+v+x;var S=m.height+b+w;v=m.x-v;var P=r.x;x=m.right+x;var N=r.right+d;b=m.y-b;var C=r.y;m=m.bottom+w,w=r.bottom+p;var T=\"1px\",L=\"1px\";if(g=M>g/(r=t.scale),y=S>y/r,t.scrollMode===Jo&&(g||y)&&(g&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(g=1,v+1<P&&(g=Math.max((P-v)*r+t.ua,g)),x>N+1&&(g=Math.max((x-N)*r+t.ua,g)),c+d+1<M&&(g=Math.max((M-c)*r+t.ua,g)),T=g.toString()+\"px\"),y&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(g=1,b+1<C&&(g=Math.max((C-b)*r+t.ta,g)),m>w+1&&(g=Math.max((m-w)*r+t.ta,g)),k+p+1<S&&(g=Math.max((S-k)*r+t.ta,g)),L=g.toString()+\"px\")),y=\"1px\"!==L,(g=\"1px\"!==T)&&y||!g&&!y||(y&&(N-=t.ub),g&&(w-=t.ub),M<c+d||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(d=1,v+1<P&&(d=Math.max((P-v)*r+t.ua,d)),x>N+1&&(d=Math.max((x-N)*r+t.ua,d)),c+1<M&&(d=Math.max((M-c)*r+t.ua,d)),T=d.toString()+\"px\"),g=\"1px\"!==T,d=t.ta,g!==t.Ye&&(d=g?t.ta-t.ub:t.ta+t.ub),S<k+p||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(p=1,b+1<C&&(p=Math.max((C-b)*r+d,p)),m>w+1&&(p=Math.max((m-w)*r+d,p)),k+1<S&&(p=Math.max((S-k)*r+d,p)),L=p.toString()+\"px\"),y=\"1px\"!==L),t.Nr&&g===t.Ye&&y===t.Sf)return i===t.ua&&n===t.ta||t.gd(),!1;if(g!==t.Ye&&(t.ta=\"1px\"===T?t.ta+t.ub:Math.max(t.ta-t.ub,1),f=!0),t.Ye=g,u.style.width=T,y!==t.Sf&&(t.ua=\"1px\"===L?t.ua+t.ub:Math.max(t.ua-t.ub,1),f=!0,t.Vn&&(p=gt.alloc(),y?(e.style.left=t.ub+\"px\",t.position=p.h(t.ja.x+t.ub/t.scale,t.ja.y)):(e.style.left=\"0px\",t.position=p.h(t.ja.x-t.ub/t.scale,t.ja.y)),gt.free(p))),f&&wo(t),t.Sf=y,u.style.height=L,t.cu=!0,f&&(t.Qn=!0),e=l.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(c+1<M?e=(t.position.x-v)*r:v+1<P?e=l.scrollWidth-l.clientWidth:x>N+1&&(e=t.position.x*r)),t.Vn)switch(t.Zt){case\"negative\":e=-(l.scrollWidth-e-l.clientWidth);break;case\"reverse\":e=l.scrollWidth-e-l.clientWidth}return l.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(k+1<S?l.scrollTop=(t.position.y-b)*r:b+1<C?l.scrollTop=l.scrollHeight-l.clientHeight:m>w+1&&(l.scrollTop=t.position.y*r)),g=t.ua,y=t.ta,l.style.width=g+(t.Sf?t.ub:0)+\"px\",l.style.height=y+(t.Ye?t.ub:0)+\"px\",i===g&&n===y&&!t.animationManager.tb||(i=Bt.allocAt(o,s,a,h),t.onViewportBoundsChanged(i,t.viewportBounds,r,f),Bt.free(i),!1)}function oo(t,e,i){var n=e.layer;null!==n&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.B(2),i&&e.Uj(),0<=(i=n.ec(-1,e,!1))&&t.Wa(gi,\"parts\",n,e,null,i,null),null!==(t=e.layerChanged)&&t(e,n,null))}function so(t,e,i,n,r,o){if(!e.contains(i)&&(void 0===o&&(o=!1),!n||o||i.canMove()||i.canCopy()))if(void 0===r&&(r=ho(t)),i instanceof wu){if(e.add(i,t.Ad(r,i,i.location)),i instanceof _u&&(null!==i.placeholder||r.dragsMembers))for(o=i.memberParts;o.next();)so(t,e,o.value,n,r,r.groupsAlwaysMove);for(o=i.linksConnected;o.next();){var s=o.value;if(!e.contains(s)){var a=s.fromNode,h=s.toNode;null!==a&&e.contains(a)&&null!==h&&e.contains(h)&&so(t,e,s,n,r)}}if(r.dragsTree)for(i=i.Ru();i.next();)so(t,e,i.value,n,r)}else if(i instanceof qu)for(e.add(i,t.Ad(r,i)),i=i.labelNodes;i.next();)so(t,e,i.value,n,r);else i instanceof bu||e.add(i,t.Ad(r,i,i.location))}function ao(t,e,i,n,r){if(null!==e&&0!==e.count){var o=gt.alloc(),s=gt.alloc();s.assign(i),isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),(i=t.Yr)||uo(t,e);for(var a=A(),h=A(),l=e.iterator,u=gt.alloc();l.next();){var c=l.key,f=l.value;if(c.Mc()){var d=fo(t,c,e);null!==d?a.push(new ks(c,f,d)):r&&!c.canMove()||(d=f.point,o.assign(d),t.computeMove(c,o.add(s),n,u),c.location=u,void 0===f.shifted&&(f.shifted=new gt),f.shifted.assign(u.ie(d)))}else l.key instanceof qu&&h.push(l.ka)}for(gt.free(u),r=a.length,l=0;l<r;l++)c=a[l],o.assign(c.info.point),void 0===c.Wu.shifted&&(c.Wu.shifted=new gt),c.node.location=o.add(c.Wu.shifted);for(r=gt.alloc(),l=gt.alloc(),c=h.length,f=0;f<c;f++){var p=h[f];if((d=p.key)instanceof qu)if(d.suspendsRouting){d.gf=null,u=d.fromNode;var g=d.toNode;if(null!==t.draggedLink&&n.dragsLink)if(g=p.value.point,null===d.dragComputation)e.add(d,t.Ad(n,d,s)),Wu(d,s.x-g.x,s.y-g.y);else{p=gt.allocAt(0,0),(u=d.i(0))&&u.u()&&p.assign(u);var y=u=gt.alloc().assign(p).add(s);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&lo(t,d,u,y=gt.alloc(),n),u.assign(d.dragComputation(d,u,y)).ie(p),e.add(d,t.Ad(n,d,u)),Wu(d,u.x-g.x,u.y-g.y),gt.free(p),gt.free(u),y!==u&&gt.free(y)}else null!==u&&(r.assign(u.location),null!==(y=e.H(u))&&r.ie(y.point)),null!==g&&(l.assign(g.location),null!==(y=e.H(g))&&l.ie(y.point)),null!==u&&null!==g?r.Ua(l)?(u=p.value.point,(g=o).assign(r),g.ie(u),e.add(d,t.Ad(n,d,r)),Wu(d,g.x,g.y)):(d.suspendsRouting=!1,d.Va()):(p=p.value.point,u=null!==u?r:null!==g?l:s,e.add(d,t.Ad(n,d,u)),Wu(d,u.x-p.x,u.y-p.y))}else null!==d.fromNode&&null!==d.toNode||(u=p.value.point,e.add(d,t.Ad(n,d,s)),Wu(d,s.x-u.x,s.y-u.y))}gt.free(o),gt.free(s),gt.free(r),gt.free(l),j(a),j(h),i||(Wr(t),co(t,e))}}function ho(t){var e=t.toolManager.findTool(\"Dragging\");return null!==e?e.dragOptions:t.on}function lo(t,e,i,n,r){if(void 0===r&&(r=ho(t)),n.assign(i),null!==e){var o=t.grid;t=(e=r.gridSnapCellSize).width,e=e.height;var s=r.gridSnapOrigin,a=s.x;if(s=s.y,r=r.gridSnapCellSpot,null!==o){var h=o.gridCellSize;isNaN(t)&&(t=h.width),isNaN(e)&&(e=h.height),o=o.gridOrigin,isNaN(a)&&(a=o.x),isNaN(s)&&(s=o.y)}(o=gt.allocAt(0,0)).Ui(0,0,t,e,r),Xe.Wp(i.x,i.y,a+o.x,s+o.y,t,e,n),gt.free(o)}}function uo(t,e){if(null!==e)for(t.Yr=!0,t=e.iterator;t.next();)(e=t.key)instanceof qu&&(e.suspendsRouting=!0)}function co(t,e){if(null!==e){for(e=e.iterator;e.next();){var i=e.key;i instanceof qu&&(i.suspendsRouting=!1,ec(i)&&i.Va())}t.Yr=!1}}function fo(t,e,i){if(null!==(e=e.containingGroup)){if(null!==(t=fo(t,e,i)))return t;if(null!==(t=i.H(e)))return t}return null}function po(t,e,i){if(null!==e.diagram&&e.diagram!==t&&w(\"Cannot share a Layer with another Diagram: \"+e+\" of \"+e.diagram),null===i?null!==e.diagram&&w(\"Cannot add an existing Layer to this Diagram again: \"+e):(i.diagram!==t&&w(\"Existing Layer must be in this Diagram: \"+i+\" not in \"+i.diagram),e===i&&w(\"Cannot move a Layer before or after itself: \"+e)),e.diagram!==t){e=e.name,i=(t=t.Oa).count;for(var n=0;n<i;n++)t.J(n).name===e&&w(\"Cannot add Layer with the name '\"+e+\"'; a Layer with the same name is already present in this Diagram.\")}}function go(t,e,i){var n=t.animationManager;if(t.qb||t.Wc)t.sa=i,wo(t),n.tb&&n.Sd.add(n.C,\"scale\",e,t.sa);else if(null===t.Ca)t.sa=i,wo(t);else{t.qb=!0;var r=t.viewportBounds.copy(),o=t.ua,s=t.ta;r.width=t.ua/e,r.height=t.ta/e;var a=t.zoomPoint.x,h=t.zoomPoint.y,l=t.contentAlignment;isNaN(a)&&(l.Nc()?l.Df(ce)?a=0:l.Df(fe)&&(a=o-1):a=l.hb()?l.x*(o-1):o/2),isNaN(h)&&(l.Nc()?l.Df(ue)?h=0:l.Df(de)&&(h=s-1):h=l.hb()?l.y*(s-1):s/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),o=gt.allocAt(t.ja.x+a/e-a/i,t.ja.y+h/e-h/i),t.position=o,gt.free(o),t.sa=i,wo(t),t.onViewportBoundsChanged(r,t.viewportBounds,e,!1),t.qb=!1,zr(t,!1),n.tb&&n.Sd.add(n.C,\"scale\",e,t.sa),t.N(),to(t)}}function yo(t,e){var i=t.Yd;if(null!==i&&i.visible){for(var n=jt.alloc(),r=1,o=1,s=i.T.m,a=s.length,h=0;h<a;h++){var l=s[h],u=Math.abs(l.interval);2>u||(yh(l.figure)?o=o*u/Xe.Qx(o,u):r=r*u/Xe.Qx(r,u))}if(s=i.gridCellSize,n.h(o*s.width,r*s.height),void 0!==e)r=e.width,o=e.height,t=e.x,s=e.y;else{if(e=Bt.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.u())return void Bt.free(e);r=e.width,o=e.height,t=e.x,s=e.y,Bt.free(e)}i.width=r+2*n.width,i.height=o+2*n.height,e=gt.alloc(),Xe.Wp(t,s,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),jt.free(n),i.part.location=e,gt.free(e)}}function mo(t){var e=t.isModified;t.px!==e&&(t.px=e,t.S(\"Modified\"))}function vo(t,e){for(var i=(e=e.T.m).length,n=0;n<i;n++)xo(t,e[n])}function xo(t,e){if(e instanceof Dl){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){i.Hg instanceof Q&&i.Hg.add(t);var n=e.Lg;if(null!==n&&!0===n.lr&&null!==e.diagram&&e.diagram.Oo.add(e),i.En)if(i=i.getAttribute(\"src\")||\"\",null===(n=t.eh.H(i)))(n=[]).push(e),t.eh.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function bo(t,e){if(e instanceof Dl){var i=e.element;if(null!==i&&i instanceof HTMLImageElement&&(i.Hg instanceof Q&&i.Hg.remove(t),Il(i),i.En)){i=i.getAttribute(\"src\")||\"\";var n=t.eh.H(i);if(null!==n)for(var r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1),0===n.length&&(t.eh.remove(i),Fl(i));break}}}}function wo(t){var e=t.ja,i=t.sa;t.ox.h(e.x,e.y,Math.max(t.ua,0)/i,Math.max(t.ta,0)/i)}function ko(t,e){t.jj=!1;var i=t.Tq;i.A(e)||(i=i.copy(),t.Tq.assign(e),zr(t,!1),t.S(\"DocumentBoundsChanged\",void 0,i),to(t))}function Mo(t,e){for(var i=t.wi.iterator;i.next();)So(t,i.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.B())}function So(t,e,i){if(null!==e){for(var n=e.pl.iterator;n.next();)So(t,n.value,i);null!==e.layout&&(i?e.layout.isValidLayout=!1:e.layout.B())}}function Po(t,e){if(t.Oh&&!t.xt){var i=t.Z;t.Z=!0;var n=t.undoManager.transactionLevel,r=t.layout,o=t.animationManager;try{0===n&&(t.undoManager.isInternalTransaction=!0,t.xa(\"Layout\")),1>=n&&!o.defaultAnimation.isAnimating&&!o.tb&&(e||Kn(o,\"Layout\")),t.Oh=!1;for(var s=t.wi.iterator;s.next();)No(t,s.value,e,n);r.isValidLayout||(!e||r.isRealtime||null===r.isRealtime||0===n?(r.doLayout(t),Wr(t),r.isValidLayout=!0):t.Oh=!0)}finally{e=t.undoManager.isInternalTransaction,0===n&&(t.Xa(\"Layout\"),t.undoManager.isInternalTransaction=!1),!e||0!==n&&1!==n||Hn(o),t.Z=i}}}function No(t,e,i,n){if(null!==e){for(var r=e.pl.iterator;r.next();)No(t,r.value,i,n);null===(r=e.layout)||r.isValidLayout||(!i||r.isRealtime||0===n?(e.Jh=!e.location.u(),r.doLayout(e),e.B(32),Zr(t,e),r.isValidLayout=!0):t.Oh=!0)}}function Co(t,e){var i=t.Gw.H(e);return null!==i?i:t.Gw.H(e.toLowerCase())}function To(t,e){var i=t.Hw.H(e);return null!==i||null!==(i=t.Hw.H(e.toLowerCase()))?i:void w(\"Unknown DiagramEvent name: \"+e)}function Lo(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool(\"Dragging\")||!t.Yr||e.isComplexRoutingRealtime}function Ao(t,e,i,n){if(null===t.Zc&&(t.Zc=new Rc),t.Zc.zs||t.Zc.group!==i||t.Zc.yy!==n){if(null!==i&&(i=jo(t,i)),null===i){e=Bt.alloc(),t.computeOccupiedArea(e),e.Jc(100,100),t.Zc.initialize(e);for(var r=t.nodes;r.next();){var o=r.value,s=o.layer;null!==s&&s.visible&&!s.isTemporary&&Oo(t,o,n,e)}Bt.free(e)}else{for(0<i.memberParts.count&&((e=t.computePartsBounds(i.memberParts,!1)).Jc(20,20),t.Zc.initialize(e)),e=Bt.alloc(),r=i.memberParts;r.next();)(o=r.value)instanceof wu&&Oo(t,o,n,e);Bt.free(e)}t.Zc.group=i,t.Zc.yy=n,t.Zc.zs=!1}else e&&Vc(t.Zc);return t.Zc}function jo(t,e){return e.avoidable&&!e.isLinkLabel?e:null!==e.containingGroup?jo(t,e.containingGroup):null}function Oo(t,e,i,n){if(e!==i&&e.isVisible())if(e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(n),t=t.Zc;var r=e.x,o=e.y;if(Ec(t,r,o))for(i=(o-t.zd)/t.hc|0,n=Math.min((r+e.width-t.yd)/t.gc|0,t.yi),e=Math.min((o+e.height-t.zd)/t.hc|0,t.zi),r=(r-t.yd)/t.gc|0;r<=n;r++)if((o=t.Tb[r]).fill)o.fill(Kc,i,e+1);else for(var s=i;s<=e;s++)o[s]=Kc}else if(e instanceof _u)for(e=e.memberParts;e.next();)(r=e.value)instanceof wu&&Oo(t,r,i,n)}function Do(t,e){null===t.Zc||t.Zc.zs||void 0!==e&&(!e.avoidable||e.isLinkLabel)||(t.Zc.zs=!0)}function Fo(t){-1===t.zk&&(t.zk=x((function(){if(-1!==t.zk&&(t.tg(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.Cq);e.Ua(t.position)||(t.position=e,t.lastInput.documentPoint=t.Xs(t.Cq),t.doMouseMove(),t.jj=!0,e=Bt.alloc(),t.computeBounds(e),e.Qc(t.documentBounds),ko(t,e),Bt.free(e),t.Vc=!0,t.gd(),Fo(t))}}),t.Bq))}function Bo(t,e,i){function n(){var t=+new Date;for(o=!0,s.reset();s.next();)if(!s.value[0].kl){o=!1;break}o||t-l>h?e(i,r,a):y.requestAnimationFrame(n)}for(var r=i.callback,o=!0,s=t.eh.iterator;s.next();)if(!s.value[0].kl){o=!1;break}if(\"function\"!=typeof r||o)return e(i,r,t);var a=t,h=i.callbackTimeout||300,l=+new Date;return y.requestAnimationFrame((function(){n()})),null}function Io(t,e,i,n){if(t.animationManager.qc(),t.gd(),null===t.Ca)return null;\"object\"!=typeof e&&w(\"properties argument must be an Object.\");var r=e.size||null,o=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(o=\"NaN\");var s=e.maxSize;void 0===e.maxSize&&(s=\"SVG\"===i?new jt(1/0,1/0):new jt(2e3,2e3));var a=e.position||null,h=e.parts||null,l=void 0===e.padding?1:e.padding,u=e.background||null,c=e.omitTemporary;void 0===c&&(c=!0);var f=e.document||document,d=e.elementFinished||null,p=e.showTemporary;void 0===p&&(p=!c),void 0===(e=e.showGrid)&&(e=p),null!==r&&isNaN(r.width)&&isNaN(r.height)&&(r=null),\"number\"==typeof l?l=new Wt(l):l instanceof Wt||w(\"MakeImage padding must be a Margin or a number.\"),l.left=Math.max(l.left,0),l.right=Math.max(l.right,0),l.top=Math.max(l.top,0),l.bottom=Math.max(l.bottom,0),t.Vb.Hc(!0);var g=(c=new ma(null,f)).context;if(!(r||o||h||a))return c.width=t.ua+Math.ceil(l.left+l.right),c.height=t.ta+Math.ceil(l.top+l.bottom),\"SVG\"===i?null===n?null:(n.resize(c.width,c.height,c.width,c.height),n.ownerDocument=f,n.Tp=d,Jr(t,n.context,l,new jt(c.width,c.height),t.sa,t.ja,h,u,p,e),n.context):(t.qn=!1,Jr(t,g,l,new jt(c.width,c.height),t.sa,t.ja,h,u,p,e),t.qn=!0,c.context);var y=t.Rq,m=t.documentBounds.copy();if(m.Nv(t.nb),p)for(var v=t.Oa.m,x=v.length,b=0;b<x;b++){var k=v[b];if(k.visible&&k.isTemporary)for(var M=(k=k.Ha.m).length,S=0;S<M;S++){var P=k[S];P.isInDocumentBounds&&P.isVisible()&&(P=P.actualBounds).u()&&m.Qc(P)}}if(v=new gt(m.x,m.y),null!==h){for(x=new Bt(0,0,0,0),b=!0,(k=h.iterator).reset();k.next();)(M=k.value)instanceof Jl&&(null!==(S=M.layer)&&!S.visible||null!==S&&!p&&S.isTemporary||!M.isVisible()||(M=M.actualBounds).u()&&(b?(b=!1,x.assign(M)):x.Qc(M)));m.width=x.width,m.height=x.height,v.x=x.x,v.y=x.y}return null!==a&&a.u()&&(v=a,o||(o=y)),x=a=0,null!==l&&(a=l.left+l.right,x=l.top+l.bottom),b=k=0,null!==r&&(k=r.width,b=r.height,isFinite(k)&&(k=Math.max(0,k-a)),isFinite(b)&&(b=Math.max(0,b-x))),null!==r&&null!==o?(\"NaN\"===o&&(o=y),r.u()?(r=k,m=b):isNaN(b)?(r=k,m=m.height*o):(r=m.width*o,m=b)):null!==r?r.u()?(o=Math.min(k/m.width,b/m.height),r=k,m=b):isNaN(b)?(o=k/m.width,r=k,m=m.height*o):(o=b/m.height,r=m.width*o,m=b):null!==o?\"NaN\"===o&&s.u()?(o=Math.min((s.width-a)/m.width,(s.height-x)/m.height))>y?(o=y,r=m.width,m=m.height):(r=s.width,m=s.height):(r=m.width*o,m=m.height*o):(o=y,r=m.width,m=m.height),null!==l?(r+=a,m+=x):l=new Wt(0),null!==s&&(y=s.width,s=s.height,isNaN(y)&&(y=2e3),isNaN(s)&&(s=2e3),isFinite(y)&&(r=Math.min(r,y)),isFinite(s)&&(m=Math.min(m,s))),c.width=Math.ceil(r),c.height=Math.ceil(m),\"SVG\"===i?null===n?null:(n.resize(c.width,c.height,c.width,c.height),n.ownerDocument=f,n.Tp=d,Jr(t,n.context,l,new jt(Math.ceil(r),Math.ceil(m)),o,v,h,u,p,e),n.context):(t.qn=!1,Jr(t,g,l,new jt(Math.ceil(r),Math.ceil(m)),o,v,h,u,p,e),t.qn=!0,c.context)}yr.className=\"AnimationTrigger\",yr.Default=xr,yr.Immediate=br,yr.Bundled=wr,(e=kr.prototype).clear=function(){this.Ha.clear(),this.Jo.length=0},e.Ne=function(t){this.C=t},e.toString=function(t){void 0===t&&(t=0);var e='Layer \"'+this.name+'\"';if(0>=t)return e;for(var i=0,n=0,r=0,o=0,s=0,a=this.Ha.iterator;a.next();){var h=a.value;h instanceof _u?r++:h instanceof wu?n++:h instanceof qu?o++:h instanceof bu?s++:i++}if(a=\"\",0<i&&(a+=i+\" Parts \"),0<n&&(a+=n+\" Nodes \"),0<r&&(a+=r+\" Groups \"),0<o&&(a+=o+\" Links \"),0<s&&(a+=s+\" Adornments \"),1<t)for(t=this.Ha.iterator;t.next();)a+=\"\\n    \"+(i=t.value).toString(),null!==(n=i.data)&&it(n)&&(a+=\" #\"+it(n)),i instanceof wu?a+=\" \"+D(n):i instanceof qu&&(a+=\" \"+D(i.fromNode)+\" \"+D(i.toNode));return e+\" \"+this.Ha.count+\": \"+a},e.Zb=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),!1===this.oi)return null;var n=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(n=!0);for(var r=gt.alloc(),o=this.Ha.m,s=o.length;s--;){var a=o[s];if((!0!==n||!1!==fu(a))&&a.isVisible()&&(r.assign(t),xt(r,a.fe),null!==(a=a.Zb(r,e,i))&&(null!==e&&(a=e(a)),null!==a&&(null===i||i(a)))))return gt.free(r),a}return gt.free(r),null},e.Hi=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),n instanceof J||n instanceof Q||(n=new Q),!1===this.oi)return n;var r=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(r=!0);for(var o=gt.alloc(),s=this.Ha.m,a=s.length;a--;){var h=s[a];if((!0!==r||!1!==fu(h))&&h.isVisible()){o.assign(t),xt(o,h.fe);var l=h;h.Hi(o,e,i,n)&&(null!==e&&(l=e(l)),null===l||null!==i&&!i(l)||n.add(l))}}return gt.free(o),n},e.zf=function(t,e,i,n,r){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),r instanceof J||r instanceof Q||(r=new Q),!1===this.oi)return r;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.Ge(t)&&(o=!0);for(var s=this.Ha.m,a=s.length;a--;){var h=s[a];if((!0!==o||!1!==fu(h))&&h.isVisible()){var l=h;h.zf(t,e,i,n,r)&&(null!==e&&(l=e(l)),null===l||null!==i&&!i(l)||r.add(l))}}return r},e.Qu=function(t,e,i,n,r,o,s){if(!1===this.oi)return r;for(var a=this.Ha.m,h=a.length;h--;){var l=a[h];if((!0!==s||!1!==fu(l))&&o(l)&&l.isVisible()){var u=l;l.zf(t,e,i,n,r)&&(null!==e&&(u=e(u)),null===u||null!==i&&!i(u)||r.add(u))}}return r},e.pg=function(t,e,i,n,r,o){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof J||r instanceof Q)&&(o=r),r=!0),o instanceof J||o instanceof Q||(o=new Q),!1===this.oi)return o;var s=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(s=!0);for(var a=gt.alloc(),h=gt.alloc(),l=this.Ha.m,u=l.length;u--;){var c=l[u];if((!0!==s||!1!==fu(c))&&c.isVisible()){a.assign(t),xt(a,c.fe),h.h(t.x+e,t.y),xt(h,c.fe);var f=c;c.pg(a,h,i,n,r,o)&&(null!==i&&(f=i(f)),null===f||null!==n&&!n(f)||o.add(f))}}return gt.free(a),gt.free(h),o},e.Md=function(t,e){if(this.visible){var i=this.Ha.m,n=i.length;if(0!==n){t=A();for(var r=A(),o=0;o<n;o++){var s=i[o];if(s.Sw=o,s instanceof qu){if(!1===s.td)continue}else if(s instanceof bu&&null!==s.adornedPart)continue;var a=s.actualBounds;s.isVisible()&&Yt(a,e)?(s.Md(!0),t.push(s)):(s.Md(!1),null!==s.adornments&&0<s.adornments.count&&r.push(s))}for(e=0;e<t.length;e++)for($l(i=t[e]),i=i.adornments;i.next();)(n=i.value).measure(1/0,1/0),n.arrange(),n.Md(!0);for(e=0;e<r.length;e++)$l(r[e]);j(t),j(r)}}},e.oc=function(t,e,i){if(this.visible&&0!==this.mb&&(void 0===i&&(i=!0),i||!this.isTemporary)){var n=(i=this.Ha.m).length;if(0!==n){var r=Mr(this,t),o=this.Jo;o.length=0;for(var s=e.scale,a=Bt.alloc(),h=0;h<n;h++)this.Di(t,i[h],e,o,s,a,!0);Bt.free(a),t.globalAlpha=r}}},e.Di=function(t,e,i,n,r,o,s){if(!s||fu(e)){if(null!==n&&e instanceof qu&&(e.isOrthogonal&&n.push(e),!1===e.td))return;for(s=!1,n=e.containingGroup;null!==n;)s?null!==n.$a&&o.Zx(n.$a):null!==n.$a&&(s=!0,o.assign(n.$a)),n=n.containingGroup;var a=e.actualBounds;if(n=!1,s&&e.isVisible()){if(!o.Lc(a))return;n=!o.Ge(a)}n&&(t.save(),t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip()),a.width*r>i.wr||a.height*r>i.wr?e.oc(t,i):(r=e.actualBounds,o=e.naturalBounds,0===r.width||0===r.height||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(i=e.transform,null!==e.areaBackground&&(Es(e,t,e.areaBackground,!0,!0,o,r),t.fillRect(r.x,r.y,r.width,r.height)),null===e.areaBackground&&null===e.background&&(Es(e,t,\"rgba(0,0,0,0.3)\",!0,!1,o,r),t.fillRect(r.x,r.y,r.width,r.height)),null!==e.background&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),Es(e,t,e.background,!0,!1,o,r),t.fillRect(0,0,o.width/2,o.height/2),i.Bs()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))))),n&&(t.restore(),t.Hc(!0))}},e.g=function(t,e,i,n,r){var o=this.diagram;null!==o&&o.Wa(di,t,this,e,i,n,r)},e.Ni=function(t,e,i){var n=this.Ha;if(e.fi=this,t>=n.count)t=n.count;else if(n.J(t)===e)return-1;return n.wb(t,e),e.bq(i),null!==(n=this.diagram)&&(i?n.N():n.Ni(e)),Sr(this,t,e),t},e.ec=function(t,e,i){if(!i&&e.layer!==this&&null!==e.layer)return e.layer.ec(t,e,i);var n=this.Ha;if(0>t||t>=n.length){if(0>(t=n.indexOf(e)))return-1}else if(n.J(t)!==e&&0>(t=n.indexOf(e)))return-1;return e.cq(i),n.eb(t),null!==(n=this.diagram)&&(i?n.N():n.ec(e)),e.fi=null,t},f.Object.defineProperties(kr.prototype,{parts:{get:function(){return this.Ha.iterator}},partsBackwards:{get:function(){return this.Ha.iteratorBackwards}},diagram:{get:function(){return this.C}},name:{get:function(){return this.na},set:function(t){var e=this.na;if(e!==t){var i=this.diagram;if(null!==i)for(\"\"===e&&w(\"Cannot rename default Layer to: \"+t),i=i.layers;i.next();)i.value.name===t&&w(\"Layer.name is already present in this diagram: \"+t);for(this.na=t,this.g(\"name\",e,t),t=this.Ha.iterator;t.next();)t.value.layerName=this.na}}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&M(t,\"0 <= value <= 1\",kr,\"opacity\"),this.mb=t,this.g(\"opacity\",e,t),null!==(t=this.diagram)&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g(\"isTemporary\",e,t))}},visible:{get:function(){return this.Bc},set:function(t){var e=this.Bc;if(e!==t){for(this.Bc=t,this.g(\"visible\",e,t),e=this.Ha.iterator;e.next();)e.value.Ob(t);null!==(t=this.diagram)&&t.N()}}},pickable:{get:function(){return this.oi},set:function(t){var e=this.oi;e!==t&&(this.oi=t,this.g(\"pickable\",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==this.diagram&&this.diagram.Qa())}},allowCopy:{get:function(){return this.D},set:function(t){var e=this.D;e!==t&&(this.D=t,this.g(\"allowCopy\",e,t))}},allowDelete:{get:function(){return this.L},set:function(t){var e=this.L;e!==t&&(this.L=t,this.g(\"allowDelete\",e,t))}},allowTextEdit:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(this.Od=t,this.g(\"allowTextEdit\",e,t))}},allowGroup:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(this.wa=t,this.g(\"allowGroup\",e,t))}},allowUngroup:{get:function(){return this.ke},set:function(t){var e=this.ke;e!==t&&(this.ke=t,this.g(\"allowUngroup\",e,t))}},allowLink:{get:function(){return this.Ba},set:function(t){var e=this.Ba;e!==t&&(this.Ba=t,this.g(\"allowLink\",e,t))}},allowRelink:{get:function(){return this.Qb},set:function(t){var e=this.Qb;e!==t&&(this.Qb=t,this.g(\"allowRelink\",e,t))}},allowMove:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(this.Ma=t,this.g(\"allowMove\",e,t))}},allowReshape:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(this.Gb=t,this.g(\"allowReshape\",e,t))}},allowResize:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(this.Rb=t,this.g(\"allowResize\",e,t))}},allowRotate:{get:function(){return this.rc},set:function(t){var e=this.rc;e!==t&&(this.rc=t,this.g(\"allowRotate\",e,t))}},allowSelect:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.g(\"allowSelect\",e,t))}}}),kr.prototype.findObjectsNear=kr.prototype.pg,kr.prototype.findObjectsIn=kr.prototype.zf,kr.prototype.findObjectsAt=kr.prototype.Hi,kr.prototype.findObjectAt=kr.prototype.Zb,kr.className=\"Layer\",Pr.prototype.clear=function(){this.animationManager.qc(),this.model.clear(),_o=null,Vo=\"\",Cr(this,!1),this.Oo.clear(),Fl(),this.eh.clear(),this.Qa(),this.Ta(),this.N()},Pr.prototype.reset=function(){this.clear(),this.qb=!0,Nr(this),wo(this),this.kh=!0,Or(this),this.layout=new rf,this.kh=!1,this.model=vd(),this.model.undoManager=new mi,this.qb=this.Tn=!1,this.N()},Pr.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=y.document.body);var e=b(\"div\");e.dir=\"rtl\",e.style.cssText=\"font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;\",e.textContent=\"A\",t.appendChild(e);var i=\"reverse\";0<e.scrollLeft?i=\"default\":(e.scrollLeft=1,0===e.scrollLeft&&(i=\"negative\")),t.removeChild(e),this.Zt=i},Pr.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=y.document.body);var e=0;if(Eo){var i=Ro;e=mr,null===i&&((i=Ro=b(\"p\")).style.width=\"100%\",i.style.height=\"200px\",i.style.boxSizing=\"content-box\",(e=mr=b(\"div\")).style.position=\"absolute\",e.style.visibility=\"hidden\",e.style.width=\"200px\",e.style.height=\"150px\",e.style.boxSizing=\"content-box\",e.appendChild(i)),e.style.overflow=\"hidden\",t.appendChild(e);var n=i.offsetWidth;e.style.overflow=\"scroll\",n===(i=i.offsetWidth)&&(i=e.clientWidth),t.removeChild(e),0!=(e=n-i)||E||(e=11)}this.ub=e,this.bx=!0},Pr.prototype.gb=function(t){t.classType===Pr&&(this.autoScale=t)},Pr.prototype.toString=function(t){void 0===t&&(t=0);var e=\"\";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram \"'+e+'\"',0>=t)return e;for(var i=this.Oa.iterator;i.next();)e+=\"\\n  \"+i.value.toString(t-1);return e},Pr.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},Pr.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})},Pr.prototype.computePixelRatio=function(){return null!==this.si?this.si:y.devicePixelRatio||1},Pr.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},Pr.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},Pr.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},Pr.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},Pr.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},Pr.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},Pr.prototype.doFocus=function(){this.focus()},Pr.prototype.focus=function(){if(this.Ca)if(this.scrollsPageOnFocus)this.Ca.focus();else{var t=y.scrollX||y.pageXOffset,e=y.scrollY||y.pageYOffset;this.Ca.focus(),y.scrollTo(t,e)}},Pr.prototype.lz=function(){this.C.S(\"GainedFocus\")},Pr.prototype.kz=function(){this.C.S(\"LostFocus\")},Pr.prototype.Gx=function(t){if(null!==this.Ca){var e=this.fu,i=this.du;this.Nr=!0;var n=this.documentBounds,r=this.viewportBounds,o=this.Fj,s=n.x-o.left,a=n.y-o.top,h=n.width+o.left+o.right,l=n.height+o.top+o.bottom,u=n.right+o.right;o=n.bottom+o.bottom;var c=r.x;n=r.y;var f=r.width,d=r.height,p=r.right,g=r.bottom;r=this.scale;var y=t.scrollLeft;if(this.Vn)switch(this.Zt){case\"negative\":y=y+t.scrollWidth-t.clientWidth;break;case\"reverse\":y=t.scrollWidth-y-t.clientWidth}var m=y;f<h||d<l?(y=gt.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.eu!==m&&(y.x=m/r+s,this.eu=m),this.allowVerticalScroll&&this.gu!==t.scrollTop&&(y.y=t.scrollTop/r+a,this.gu=t.scrollTop),this.position=y,gt.free(y),this.kj=this.Nr=!1):(y=gt.alloc(),t.Sy&&this.allowHorizontalScroll&&(s<c&&(this.position=y.h(m+s,this.position.y)),u>p&&(this.position=y.h(-(e.scrollWidth-this.ua)+m-this.ua/r+u,this.position.y))),t.Ty&&this.allowVerticalScroll&&(a<n&&(this.position=y.h(this.position.x,t.scrollTop+a)),o>g&&(this.position=y.h(this.position.x,-(e.scrollHeight-this.ta)+t.scrollTop-this.ta/r+o))),gt.free(y),eo(this),this.kj=this.Nr=!1,n=this.documentBounds,r=this.viewportBounds,u=n.right,p=r.right,o=n.bottom,g=r.bottom,s=n.x,c=r.x,a=n.y,n=r.y,f>=h&&s>=c&&u<=p&&(i.style.width=\"1px\"),d>=l&&a>=n&&o<=g&&(i.style.height=\"1px\"))}},Pr.prototype.computeBounds=function(t){return void 0===t&&(t=new Bt),Wr(this),Ir(this,t)},Pr.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var i=null;if(N(t))for(var n=0;n<t.length;n++){var r=t[n];!e&&r instanceof qu||(r.Ta(),null===i?i=r.actualBounds.copy():i.Qc(r.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof qu||(n.Ta(),null===i?i=n.actualBounds.copy():i.Qc(n.actualBounds));return null===i?new Bt(NaN,NaN,0,0):i},Pr.prototype.zoomToFit=function(){var t=this.Gj;this.Gj=Jo,this.scale=Rr(this,Go),t!==Jo&&(zr(this,!1),Er(this,this.documentBounds,this.ua/this.sa,this.ta/this.sa,this.Gk,!1)),this.Gj=t},(e=Pr.prototype).$A=function(t,e){void 0===e&&(e=Go);var i=t.width,n=t.height;if(!(0===i||0===n||isNaN(i)&&isNaN(n))){var r=1;if(e===Go||e===Xo)if(isNaN(i))r=this.viewportBounds.height*this.scale/n;else if(isNaN(n))r=this.viewportBounds.width*this.scale/i;else{r=this.ua;var o=this.ta;r=e===Xo?o/n>r/i?(o-(this.Ye?this.ub:0))/n:(r-(this.Sf?this.ub:0))/i:Math.min(o/n,r/i)}this.scale=r,this.position=new gt(t.x,t.y)}},e.ez=function(t,e){this.Ta();var i=this.documentBounds,n=this.viewportBounds;this.position=new gt(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},e.Xz=function(t){if(t instanceof Ds){this.dr=t;var e=gt.alloc();this.er=this.vq(t.da(ee,e)),gt.free(e)}else this.dr=null,this.er=at},e.Zl=function(t,e){if(void 0===e&&(e=!0),e){if((t=_r(this,t,(function(t){return t.part}),(function(t){return t.canSelect()})))instanceof Jl)return t}else if((t=_r(this,t,(function(t){return t.part})))instanceof Jl)return t;return null},e.Zb=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),Wr(this);for(var n=this.Oa.iteratorBackwards;n.next();){var r=n.value;if(r.visible&&null!==(r=r.Zb(t,e,i)))return r}return null},e.Kz=function(t,e,i){return void 0===e&&(e=!0),function(t,e,i,n,r){for(void 0===i&&(i=null),void 0===n&&(n=null),r instanceof J||r instanceof Q||(r=new Q),Wr(t),t=t.Oa.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.Hi(e,i,n,r)}return r}(this,t,(function(t){return t.part}),e?function(t){return t instanceof Jl&&t.canSelect()}:null,i)},e.Hi=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),n instanceof J||n instanceof Q||(n=new Q),Wr(this);for(var r=this.Oa.iteratorBackwards;r.next();){var o=r.value;o.visible&&o.Hi(t,e,i,n)}return n},e.Px=function(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i=!0),function(t,e,i,n,r){var o=null;for(void 0===o&&(o=null),void 0===i&&(i=null),void 0===n&&(n=!1),r instanceof J||r instanceof Q||(r=new Q),Wr(t),t=t.Oa.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.zf(e,o,i,n,r)}return r}(this,t,(function(t){return t instanceof Jl&&(!i||t.canSelect())}),e,n)},e.zf=function(t,e,i,n,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),r instanceof J||r instanceof Q||(r=new Q),Wr(this);for(var o=this.Oa.iteratorBackwards;o.next();){var s=o.value;s.visible&&s.zf(t,e,i,n,r)}return r},e.Qu=function(t,e,i,n,r,o){var s=new Q;Wr(this);for(var a=this.Oa.iteratorBackwards;a.next();){var h=a.value;h.visible&&h.Qu(t,e,i,n,s,r,o)}return s},e.Lz=function(t,e,i,n,r){return void 0===i&&(i=!0),void 0===n&&(n=!0),function(t,e,i,n,r,o){var s=null;for(void 0===s&&(s=null),void 0===n&&(n=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof J||r instanceof Q)&&(o=r),r=!0),o instanceof J||o instanceof Q||(o=new Q),Wr(t),t=t.Oa.iteratorBackwards;t.next();){var a=t.value;a.visible&&!a.isTemporary&&a.pg(e,i,s,n,r,o)}return o}(this,t,e,(function(t){return t instanceof Jl&&(!n||t.canSelect())}),i,r)},e.pg=function(t,e,i,n,r,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof J||r instanceof Q)&&(o=r),r=!0),o instanceof J||o instanceof Q||(o=new Q),Wr(this);for(var s=this.Oa.iteratorBackwards;s.next();){var a=s.value;a.visible&&a.pg(t,e,i,n,r,o)}return o},Pr.prototype.acceptEvent=function(t){return Vr(this,t,t instanceof MouseEvent)},Pr.prototype.nA=function(t){var e=this.C;if(!this.C.isEnabled)return!1;var i=Vr(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key=\"Backspace\";break;case 33:i.key=\"PageUp\";break;case 34:i.key=\"PageDown\";break;case 35:i.key=\"End\";break;case 36:i.key=\"Home\";break;case 37:i.key=\"Left\";break;case 38:i.key=\"Up\";break;case 39:i.key=\"Right\";break;case 40:i.key=\"Down\";break;case 45:i.key=\"Insert\";break;case 46:i.key=\"Del\";break;case 48:i.key=\"0\";break;case 187:case 61:case 107:i.key=\"Add\";break;case 189:case 173:case 109:i.key=\"Subtract\";break;case 27:i.key=\"Esc\"}return e.doKeyDown(),Xr(i,t)},Pr.prototype.oA=function(t){var e=this.C;if(!e.isEnabled)return!1;var i=Vr(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key=\"Backspace\";break;case 33:i.key=\"PageUp\";break;case 34:i.key=\"PageDown\";break;case 35:i.key=\"End\";break;case 36:i.key=\"Home\";break;case 37:i.key=\"Left\";break;case 38:i.key=\"Up\";break;case 39:i.key=\"Right\";break;case 40:i.key=\"Down\";break;case 45:i.key=\"Insert\";break;case 46:i.key=\"Del\"}return e.doKeyUp(),Xr(i,t)},Pr.prototype.zz=function(t){var e=this.C;if(!e.isEnabled)return!1;var i=Vr(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(i),Xr(i,t)},Pr.prototype.Az=function(t){var e=this.C;if(!e.isEnabled)return!1;var i=Vr(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(i),Xr(i,t)},Pr.prototype.getMouse=function(t){var e=this.Ca;if(null===e)return new gt(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.ua/i.width*i.left,t=t.clientY-this.ta/i.height*i.top,null!==this.vb?xt(new gt(e,t),this.vb):new gt(e,t)},Pr.prototype.Qa=function(){this.jj||(this.jj=!0,this.Fb(!0))},Pr.prototype.redraw=function(){this.qb||this.Wc||(this.N(),to(this),this.gd())},(e=Pr.prototype).mA=function(){return this.jg},e.uz=function(t){void 0===t&&(t=null);var e=this.animationManager,i=e.isEnabled;e.qc(),e.isEnabled=!1,Hr(this),this.Uf=!1,this.au=new gt(NaN,NaN),e.isEnabled=i,this.Wc=!0;var n=this;null!==t&&x((function(){n.Wc=!1,Kn(e,\"Model\"),t(n)}),1)},e.Fb=function(t){if(void 0===t&&(t=!1),!0!==this.jg&&!(this.qb||!1===t&&this.Wc)){this.jg=!0;var e=this;y.requestAnimationFrame((function(){e.jg&&e.gd()}))}},e.gd=function(){this.zn&&!this.jg||(this.zn&&(this.zn=!1),Hr(this))},e.Xv=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Mc()||i instanceof _u||(i.Ri()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)(i=t.value)instanceof _u&&i.isVisible()&&Zr(this,i);for(t.reset();t.next();)(i=t.value)instanceof qu&&i.isVisible()&&(i.Ri()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)(i=t.value)instanceof bu&&i.isVisible()&&(i.Ri()?(i.measure(1/0,1/0),i.arrange()):e.add(i))},e.Md=function(t,e,i,n){if(this.lj||this.animationManager.isAnimating)for(var r=0;r<e;r++)t[r].Md(i,n)},e.oc=function(t,e){if(null!==this.Ga){null===this.Ca&&w(\"No canvas specified\");var i=this.animationManager;if(!i.tb&&(!i.isAnimating||i.isTicking)){var n=new Date;if(io(this),\"0\"!==this.Ga.style.opacity){var r=t!==this.Vb,o=this.Oa.m,s=o.length,a=this;if(this.Md(o,s,a,a.viewportBounds),r)t.Hc(!0),eo(this);else if(!this.Vc&&void 0===e&&!i.isAnimating)return;s=this.ja;var h=this.sa,l=Math.round(s.x*h)/h,u=Math.round(s.y*h)/h;for((i=this.vb).reset(),1!==h&&i.scale(h),0===s.x&&0===s.y||i.translate(-l,-u),h=this.dc,t.setTransform(h,0,0,h,0,0),t.clearRect(0,0,this.ua,this.ta),1!==this.mb&&(t.globalAlpha=this.mb),$r(this,t),l=void 0!==e?function(i){if(i.visible&&0!==i.mb){var n=i.Ha.m,r=n.length;if(0!==r){var o=Mr(i,t),s=i.Jo;s.length=0;for(var h=a.scale,l=Bt.alloc(),u=0;u<r;u++){var c=n[u];e.contains(c)||i.Di(t,c,a,s,h,l,!0)}Bt.free(l),t.globalAlpha=o}}}:function(e){e.oc(t,a)},s=o.length,u=0;u<s;u++)t.setTransform(h,0,0,h,0,0),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),l(o[u]);if(o=!1,this.Zh?hs(this.Zh,this)&&(o=this.zt()):o=!0,o&&(Ye.prototype.Hd=Ye.prototype.yx),r?(this.Vb.Hc(!0),eo(this)):this.Vc=this.lj=!1,o=+new Date-+n,r=q&&q.Kx,n=this.Vw,r||null===this.si){for(n[this.Ar]=o,this.Ar=(this.Ar+1)%n.length,i=o=0;i<n.length;i++)o+=n[i];this.zr=o/n.length}if(1!==this.mb&&(t.globalAlpha=1),r)for(t.setTransform(1,0,0,1,0,0),r=0;r<n.length;r++)t.fillText(n[r].toString(),20,150+20*r)}}}},e.Ie=function(t){return this.hh[t]},e.wy=function(t,e){\"minDrawingLength\"===t&&(this.wr=e),this.hh[t]=e,this.redraw()},e.sy=function(){this.hh=new X,this.hh.drawShadows=!0,this.hh.textGreeking=!0,this.hh.viewportOptimizations=!E&&!z,this.hh.temporaryPixelRatio=!0,this.hh.pictureRatioOptimization=!0,this.wr=this.hh.minDrawingLength=1},e.am=function(t){return this.Pn[t]},e.OA=function(t,e){this.Pn[t]=e},e.qy=function(){this.Pn=new X,this.Pn.extraTouchArea=10,this.Pn.extraTouchThreshold=10,this.Pn.hasGestureZoom=!0},e.set=function(t){return Object.assign(this,t),this},e.wu=function(t){return this.xm(t)},e.xm=function(t){return Qr(this,t),this},e.Au=function(){if(0===this.undoManager.transactionLevel&&0!==this.Xh.count){for(;0<this.Xh.count;){var t=this.Xh;for(this.Xh=new pt,t=t.iterator;t.next();){var e=t.key;e.eq(t.value),e.fc(!1)}}this.N()}},e.N=function(t){if(void 0===t)this.Vc=!0,this.Fb();else{var e=this.viewportBounds;t.u()&&e.Lc(t)&&(this.Vc=!0,this.Fb())}this.S(\"InvalidateDraw\")},Pr.prototype.invalidateViewport=function(t,e){if(!0!==this.Vc){this.Vc=!0;var i=!0===this.Ie(\"temporaryPixelRatio\");if(!0===this.Ie(\"viewportOptimizations\")&&this.scrollMode!==$o&&this.Fj.Fi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,r=Math.max(t.x,e.x),o=Math.max(t.y,e.y);if(n=Bt.allocAt(r,o,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-r)*n,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-o)*n),!this.Zr&&0<n.width&&0<n.height){if(!(this.Wc||(this.jg=!1,null===this.Ga||(this.Wc=!0,this.Au(),this.documentBounds.u()||(r=Bt.alloc(),ko(this,this.computeBounds(r)),Bt.free(r)),r=this.Ca,null===r||r instanceof ua)))){var s=this.dc;o=this.ua*s;var a=this.ta*s,h=this.scale*s,l=Math.round(Math.round(e.x*h)-Math.round(t.x*h));e=Math.round(Math.round(e.y*h)-Math.round(t.y*h)),h=this.Iw,t=this.Ny,h.width!==o&&(h.width=o),h.height!==a&&(h.height=a),t.clearRect(0,0,o,a),h=190*s;var u=70*s,c=Math.max(l,0),f=Math.max(e,0),d=Math.floor(o-c),p=Math.floor(a-f);t.drawImage(r.La,c,f,d,p,0,0,d,p),hs(this.Zh,this)&&t.clearRect(0,0,h,u),r=A(),t=A(),p=Math.abs(l),d=Math.abs(e);var g=0===c?0:o-p;c=gt.allocAt(g,0),p=gt.allocAt(p+g,a),t.push(new Bt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y)));var y=this.vb;if(y.reset(),y.scale(s,s),1!==this.sa&&y.scale(this.sa),(0!==(s=this.ja).x||0!==s.y)&&isFinite(s.x)&&isFinite(s.y)&&y.translate(-s.x,-s.y),xt(c,y),xt(p,y),r.push(new Bt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),g=0===f?0:a-d,c.h(0,g),p.h(o,d+g),t.push(new Bt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),xt(c,y),xt(p,y),r.push(new Bt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),hs(this.Zh,this)&&(o=0<l?0:-l,a=0<e?0:-e,c.h(o,a),p.h(h+o,u+a),t.push(new Bt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))),xt(c,y),xt(p,y),r.push(new Bt(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y)))),gt.free(c),gt.free(p),Kr(this,!1,!0),null===this.Ga&&w(\"No div specified\"),null===this.Ca&&w(\"No canvas specified\"),!this.animationManager.tb&&(o=this.Vb,this.Vc)){for(io(this),a=this.dc,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,this.ua*a,this.ta*a),o.drawImage(this.Iw.La,0<l?0:Math.round(-l),0<e?0:Math.round(-e)),l=this.ja,s=this.sa,h=Math.round(l.x*s)/s,u=Math.round(l.y*s)/s,(e=this.vb).reset(),1!==s&&e.scale(s),0===l.x&&0===l.y||e.translate(-h,-u),o.save(),o.beginPath(),l=t.length,s=0;s<l;s++)0!==(h=t[s]).width&&0!==h.height&&o.rect(Math.floor(h.x),Math.floor(h.y),Math.ceil(h.width),Math.ceil(h.height));for(o.clip(),o.setTransform(1,0,0,1,0,0),o.scale(a,a),o.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),l=(e=this.Oa.m).length,this.Md(e,l,this,this.viewportBounds),$r(this,o),o.globalAlpha=this.mb,a=0;a<l;a++)if(h=r,(s=e[a]).visible&&0!==s.mb){u=Mr(s,o),(f=s.Jo).length=0,c=this.scale,d=Bt.alloc(),y=(p=s.Ha.m).length,g=h.length;for(var m=0;m<y;m++){var v=p[m],x=iu(v,v.actualBounds);t:{for(var b=2/c,k=4/c,M=0;M<g;M++){var S=h[M];if(0!==S.width&&0!==S.height&&x.av(S.x-b,S.y-b,S.width+k,S.height+k)){x=!0;break t}}x=!1}x&&s.Di(o,v,this,f,c,d,!0)}Bt.free(d),o.globalAlpha=u}o.restore(),o.Hc(!0),this.Zh&&hs(this.Zh,this)&&this.zt(),this.Vc=this.lj=!1,this.nq()}j(r),j(t),this.Wc=!1}}else this.gd();Bt.free(n),i&&(Lr(this),this.gd(),Ar(this,!0))}else i?(Lr(this),this.gd(),Ar(this,!0)):this.gd()}},(e=Pr.prototype).add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&w(\"Cannot add part \"+t.toString()+\" to \"+this.toString()+\". It is already a part of \"+e.toString()),null===(e=this.Xj(t.layerName))&&(e=this.Xj(\"\")),null===e&&w('Cannot add a Part when unable find a Layer named \"'+t.layerName+'\" and there is no default Layer'),t.layer!==e)){var i=e.Ni(99999999,t,t.diagram===this);0<=i&&this.Wa(pi,\"parts\",e,null,t,null,i),e.isTemporary||this.Qa(),t.B(1),null!==(i=t.layerChanged)&&i(t,null,e)}},e.Ni=function(t){this.partManager.Ni(t);var e=this;vh(t,(function(t){vo(e,t)})),(t instanceof bu||t instanceof _u&&null!==t.placeholder)&&t.s(),null!==t.data&&vh(t,(function(t){Vf(e.partManager,t)})),!0!==$s(t)&&!0!==lu(t)||this.te.add(t),au(t,!0,this),mu(t)?(t.actualBounds.u()&&this.N(iu(t,t.actualBounds)),this.Qa()):t.isVisible()&&t.actualBounds.u()&&this.N(iu(t,t.actualBounds)),this.Fb()},e.ec=function(t){t.Oj(),this.partManager.ec(t);var e=this;null!==t.data&&vh(t,(function(t){Yf(e.partManager,t,e)})),this.te.remove(t),mu(t)?(t.actualBounds.u()&&this.N(iu(t,t.actualBounds)),this.Qa()):t.isVisible()&&t.actualBounds.u()&&this.N(iu(t,t.actualBounds)),this.Fb()},e.remove=function(t){oo(this,t,!0)},e.Ps=function(t,e){if(void 0===e&&(e=!1),N(t))for(var i=t.length,n=0;n<i;n++){var r=t[n];e&&!r.canDelete()||this.remove(r)}else for((i=new Q).addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},e.Tj=function(t,e,i){return void 0===i&&(i=!1),this.partManager.Tj(t,e,i)},Pr.prototype.moveParts=function(t,e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=ho(this)),null!==this.toolManager){var r=new pt;if(null!==t)if(N(t))for(var o=0;o<t.length;o++)so(this,r,t[o],i,n);else for(t=t.iterator;t.next();)so(this,r,t.value,i,n);else{for(t=this.parts;t.next();)so(this,r,t.value,i,n);for(t=this.nodes;t.next();)so(this,r,t.value,i,n);for(t=this.links;t.next();)so(this,r,t.value,i,n)}ao(this,r,e,n,i)}},Pr.prototype.computeMove=function(t,e,i,n){if(void 0===n&&(n=new gt),n.assign(e),null===t)return n;var r=e,o=i.isGridSnapEnabled;o&&(i.isGridSnapRealtime||this.lastInput.up)&&lo(this,t,e,r=gt.alloc(),i),i=null!==t.dragComputation?t.dragComputation(t,e,r):r;var s=t.minLocation,a=s.x;isNaN(a)&&(a=o?Math.round(1e3*t.location.x)/1e3:t.location.x),s=s.y,isNaN(s)&&(s=o?Math.round(1e3*t.location.y)/1e3:t.location.y);var h=t.maxLocation,l=h.x;return isNaN(l)&&(l=o?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=o?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(a,Math.min(i.x,l)),Math.max(s,Math.min(i.y,h))),r!==e&&gt.free(r),n},(e=Pr.prototype).Ad=function(t,e,i){if(void 0===i)return new us(nt);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(n=!1),new us(n?new gt(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3):i.copy())},e.Sl=function(t){po(this,t,null),t.Ne(this);var e=this.Oa,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.J(i).isTemporary;)i--;return e.wb(i+1,t),null!==this.Wb&&this.Wa(pi,\"layers\",this,null,t,null,i+1),this.N(),this.Qa(),this},e.tx=function(t,e){po(this,t,e),t.Ne(this);var i=this.Oa,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.Wb&&this.Wa(gi,\"layers\",this,t,null,n,null));var r,o=i.count;for(r=0;r<o;r++)if(i.J(r)===e){i.wb(r,t);break}return null!==this.Wb&&this.Wa(pi,\"layers\",this,null,t,null,r),this.N(),0>n&&this.Qa(),this},e.Zy=function(t,e){po(this,t,e),t.Ne(this);var i=this.Oa,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.Wb&&this.Wa(gi,\"layers\",this,t,null,n,null));var r,o=i.count;for(r=0;r<o;r++)if(i.J(r)===e){i.wb(r+1,t);break}return null!==this.Wb&&this.Wa(pi,\"layers\",this,null,t,null,r+1),this.N(),0>n&&this.Qa(),this},e.GA=function(t){if(t.diagram!==this&&w(\"Cannot remove a Layer from another Diagram: \"+t+\" of \"+t.diagram),\"\"!==t.name){var e=this.Oa,i=e.indexOf(t);if(e.remove(t)){for(e=t.Ha.copy().iterator;e.next();){var n=e.value,r=n.layerName;r!==t.name?n.layerName=r:n.layerName=\"\"}null!==this.Wb&&this.Wa(gi,\"layers\",this,t,null,i,null),this.N(),this.Qa()}}},e.Xj=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},e.vx=function(t){return null===this.df&&(this.df=new J),this.df.add(t),this.model.yh(t),this},e.IA=function(t){null!==this.df&&(this.df.remove(t),0===this.df.count&&(this.df=null)),this.model.pk(t)},e.yh=function(t){return null===this.zg&&(this.zg=new J),this.zg.add(t),this},e.pk=function(t){null!==this.zg&&(this.zg.remove(t),0===this.zg.count&&(this.zg=null))},e.js=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Yu(t),t.change!==fi&&(this.isModified=!0),null!==this.zg)for(var e=this.zg,i=e.length,n=0;n<i;n++)e.J(n)(t)},e.Wa=function(t,e,i,n,r,o,s){void 0===o&&(o=null),void 0===s&&(s=null);var a=new ci;a.diagram=this,a.change=t,a.propertyName=e,a.object=i,a.oldValue=n,a.oldParam=o,a.newValue=r,a.newParam=s,this.js(a)},e.g=function(t,e,i,n,r){this.Wa(di,t,this,e,i,n,r)},Pr.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===di){var r=t.object;if(kd(r,t.propertyName,t.H(e)),r instanceof Ds){var o=r.part;null!==o&&o.Lb()}this.isModified=!0}else if(n===pi){var s=t.object,a=t.newParam,h=t.newValue;if(s instanceof fh)if(\"number\"==typeof a&&h instanceof Ds){e?s.ec(a):s.wb(a,h);var l=s.part;null!==l&&l.Lb()}else\"number\"==typeof a&&h instanceof Gh&&(h.isRow?Th(s,a,e?void 0:h):Lh(s,a,e?void 0:h));else if(s instanceof kr){var u=!0===t.oldParam;\"number\"==typeof a&&h instanceof Jl&&(e?(h.isSelected=!1,h.isHighlighted=!1,h.Lb(),s.ec(u?a:-1,h,u)):s.Ni(a,h,u))}else s instanceof Pr?\"number\"==typeof a&&h instanceof kr&&(e?this.Oa.eb(a):(h.Ne(this),this.Oa.wb(a,h))):w(\"unknown ChangedEvent.Insert object: \"+t.toString());this.isModified=!0}else if(n===gi){var c=t.object,f=t.oldParam,d=t.oldValue;if(c instanceof fh)\"number\"==typeof f&&d instanceof Ds?e?c.wb(f,d):c.ec(f):\"number\"==typeof f&&d instanceof Gh&&(d.isRow?Th(c,f,e?d:void 0):Lh(c,f,e?d:void 0));else if(c instanceof kr){var p=!0===t.newParam;\"number\"==typeof f&&d instanceof Jl&&(e?0>c.Ha.indexOf(d)&&c.Ni(f,d,p):(d.isSelected=!1,d.isHighlighted=!1,d.Lb(),c.ec(p?f:-1,d,p)))}else c instanceof Pr?\"number\"==typeof f&&d instanceof kr&&(e?(d.Ne(this),this.Oa.wb(f,d)):this.Oa.eb(f)):w(\"unknown ChangedEvent.Remove object: \"+t.toString());this.isModified=!0}else n!==fi&&w(\"unknown ChangedEvent: \"+t.toString())}finally{this.skipsModelSourceBindings=i}}},Pr.prototype.xa=function(t){return this.undoManager.xa(t)},Pr.prototype.Xa=function(t){return this.undoManager.Xa(t)},Pr.prototype.Hf=function(){return this.undoManager.Hf()},Pr.prototype.commit=function(t,e){void 0===e&&(e=\"\");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=\"\"),this.undoManager.xa(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Xa(e):this.undoManager.Hf(),this.skipsUndoManager=i}},Pr.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},Pr.prototype.yq=function(){this.partManager.yq()},Pr.prototype.onViewportBoundsChanged=function(t,e,i,n){if(!t.A(e)){void 0===n&&(n=!1),n||to(this),eo(this);var r=this.layout;null===r||!r.isViewportSized||this.autoScale!==Yo||n||t.width===e.width&&t.height===e.height||r.B(),r=this.currentTool,!0===this.cl&&r instanceof bi&&(this.lastInput.documentPoint=this.Xs(this.lastInput.viewPoint),wi(r,this)),this.qb||this.invalidateViewport(t,e),yo(this),this.dd.scale=i,this.dd.position.x=t.x,this.dd.position.y=t.y,this.dd.bounds.assign(t),this.dd.zx.width=Math.round(t.width*i),this.dd.zx.height=Math.round(t.height*i),this.dd.jy.width=this.ua,this.dd.jy.height=this.ta,this.dd.by=n,this.S(\"ViewportBoundsChanged\",this.dd,t),this.isVirtualized&&this.links.each((function(t){t.isAvoiding&&t.actualBounds.Lc(e)&&t.Va()}))}},Pr.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.S(\"ChangingSelection\",e);for(var i=e.ya(),n=i.length,r=0;r<n;r++)i[r].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.S(\"ChangedSelection\",e)}},Pr.prototype.select=function(t){null!==t&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.S(\"ChangingSelection\",this.selection),this.clearSelection(!0),t.isSelected=!0,this.S(\"ChangedSelection\",this.selection))},Pr.prototype.NA=function(t){if(this.S(\"ChangingSelection\",this.selection),this.clearSelection(!0),N(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof Jl||w(\"Diagram.selectCollection given something that is not a Part: \"+n),n.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof Jl||w(\"Diagram.selectCollection given something that is not a Part: \"+e),e.isSelected=!0;this.S(\"ChangedSelection\",this.selection)},Pr.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.ya(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},(e=Pr.prototype).gA=function(t){null!==t&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},e.hA=function(t){t=(new Q).addAll(t);for(var e=this.highlighteds.copy().oq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof Jl||w(\"Diagram.highlightCollection given something that is not a Part: \"+e),e.isHighlighted=!0},e.scroll=function(t,e,i){void 0===i&&(i=1);var n=\"up\"===e||\"down\"===e,r=0;if(\"pixel\"===t)r=i;else if(\"line\"===t)r=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(\"page\"===t)t=n?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(r=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(\"document\"===t)return r=this.documentBounds,i=this.viewportBounds,n=gt.alloc(),\"up\"===e?this.position=n.h(i.x,r.y):\"left\"===e?this.position=n.h(r.x,i.y):\"down\"===e?this.position=n.h(i.x,r.bottom-i.height):\"right\"===e&&(this.position=n.h(r.right-i.width,i.y)),void gt.free(n);w(\"scrolling unit must be 'pixel', 'line', 'page', or 'document', not: \"+t)}r/=this.scale,i=this.position.copy(),\"up\"===e?i.y=this.position.y-r:\"down\"===e?i.y=this.position.y+r:\"left\"===e?i.x=this.position.x-r:\"right\"===e?i.x=this.position.x+r:w(\"scrolling direction must be 'up', 'down', 'left', or 'right', not: \"+e),this.position=i},e.Fv=function(t){var e=this.viewportBounds;e.Ge(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},e.ks=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},e.vq=function(t){var e=this.vb;e.reset(),1!==this.sa&&e.scale(this.sa);var i=this.ja;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.vb)},e.WA=function(t){var e=this.vb,i=t.x,n=t.y,r=i+t.width,o=n+t.height,s=e.m11,a=e.m12,h=e.m21,l=e.m22,u=e.dx,c=e.dy,f=i*s+n*h+u;e=i*a+n*l+c;var d=r*s+n*h+u;return t=r*a+n*l+c,n=i*s+o*h+u,i=i*a+o*l+c,s=r*s+o*h+u,r=r*a+o*l+c,o=Math.min(f,d),f=Math.max(f,d),d=Math.min(e,t),e=Math.max(e,t),o=Math.min(o,n),f=Math.max(f,n),d=Math.min(d,i),e=Math.max(e,i),o=Math.min(o,s),f=Math.max(f,s),new Bt(o,d=Math.min(d,r),f-o,(e=Math.max(e,r))-d)},e.Xs=function(t){var e=this.vb;e.reset(),1!==this.sa&&e.scale(this.sa);var i=this.ja;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),xt(t.copy(),this.vb)},Pr.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===fi&&\"S\"===n[0])if(\"StartingFirstTransaction\"===n){var r=this;(t=this.toolManager).mouseDownTools.each((function(t){t.diagram=r})),t.mouseMoveTools.each((function(t){t.diagram=r})),t.mouseUpTools.each((function(t){t.diagram=r})),this.Wc||this.Uf||(this.Qk=!0,this.zn&&(this.jg=!0))}else\"StartingUndo\"===n||\"StartingRedo\"===n?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.qc(),this.S(\"ChangingSelection\",this.selection)):\"StartedTransaction\"===n&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.qc();else if(this.Z){this.Z=!1;try{if(\"\"===t.modelChange&&i===fi){\"FinishedUndo\"!==n&&\"FinishedRedo\"!==n||(this.S(\"ChangedSelection\",this.selection),Wr(this));var o=this.animationManager;\"RolledBackTransaction\"===n&&o.qc(),this.Qk=!0,this.gd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||Hn(o),\"CommittedTransaction\"===n&&this.undoManager.isJustDiscarded&&(this.se=Math.min(this.se,this.undoManager.historyIndex-1)),\"CommittedTransaction\"!==n&&\"RolledBackTransaction\"!==n||!this.undoManager.isPendingUnmodified||setTimeout((function(){e.isModified=!1}),1);var s=t.isTransactionFinished;if(s&&(mo(this),this.Gs.clear(),function(t){for(t=t.aj.iterator;t.next();)t.value.el=!1}(this.animationManager)),!this.St&&s&&this.lastInput.targetDiagram){this.St=!0;var a=this;x((function(){a.currentTool.standardMouseOver(),a.St=!1}),10)}}}finally{this.Z=!0}}}},Pr.prototype.Ld=function(){this.partManager.Ld()},Pr.prototype.Kj=function(t,e){this.Pd.Kj(t,e)},Pr.prototype.Mj=function(t,e){this.Pd.Mj(t,e)},Pr.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},Pr.prototype.Eb=function(t){return this.partManager.Eb(t)},Pr.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(e=Pr.prototype).yc=function(t){return this.partManager.yc(t)},e.Gi=function(t){return this.partManager.Gi(t)},e.xc=function(t){return this.partManager.xc(t)},e.qs=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.qs.apply(this.partManager,e instanceof Array?e:o(r(e)))},e.ps=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ps.apply(this.partManager,e instanceof Array?e:o(r(e)))},e.Ta=function(){if(this.jj){var t=Bt.alloc();ko(this,this.computeBounds(t)),Bt.free(t)}},e.Qz=function(){for(var t=new Q,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)(i=e.value).isTopLevel&&t.add(i);return t.iterator},e.Pz=function(){return this.wi.iterator},e.qA=function(t){Wr(this),t&&Mo(this,!0),this.Wc?Po(this,!1):(this.Qk=!0,Hr(this))},e.Wz=function(){for(var t=new J,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&null===i.Ii()&&t.add(i)}return t.iterator},e.Lj=function(t,e){return null!==(t=To(this,t))&&t.add(e),this},e.km=function(t,e){null!==(t=To(this,t))&&t.remove(e)},e.S=function(t,e,i){var n=To(this,t),r=new ui;if(r.diagram=this,null!==(t=Co(this,t))&&(r.name=t),void 0!==e&&(r.subject=e),void 0!==i&&(r.parameter=i),1===(e=n.length))n.J(0)(r);else if(0!==e)for(n=n.ya(),i=0;i<e;i++)(0,n[i])(r)},e.dk=function(t,e){return Ao(this,!1,null,e||null).dk(t.x,t.y,t.width,t.height)},Pr.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.jj?Ir(this,t):t.assign(this.documentBounds)},Pr.prototype.ms=function(t){this.Cq.assign(t),this.computeAutoScrollPosition(this.Cq).Ua(this.position)?this.tg():Fo(this)},Pr.prototype.tg=function(){-1!==this.zk&&(y.clearTimeout(this.zk),this.zk=-1)},Pr.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.Dq;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,r=this.scale;n=Bt.allocAt(0,0,n.width*r,n.height*r);var o=gt.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var s=Math.max(this.scrollHorizontalLineChange,1);s|=0,o.x-=s,t.x<n.x+i.left/2&&(o.x-=s),t.x<n.x+i.left/4&&(o.x-=4*s)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(s=Math.max(this.scrollHorizontalLineChange,1),s|=0,o.x+=s,t.x>n.x+n.width-i.right/2&&(o.x+=s),t.x>n.x+n.width-i.right/4&&(o.x+=4*s));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(s=Math.max(this.scrollVerticalLineChange,1),s|=0,o.y-=s,t.y<n.y+i.top/2&&(o.y-=s),t.y<n.y+i.top/4&&(o.y-=4*s)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(s=Math.max(this.scrollVerticalLineChange,1),s|=0,o.y+=s,t.y>n.y+n.height-i.bottom/2&&(o.y+=s),t.y>n.y+n.height-i.bottom/4&&(o.y+=4*s)),o.Ua(nt)||(e=new gt(e.x+o.x/r,e.y+o.y/r)),Bt.free(n),gt.free(o),e},(e=Pr.prototype).Is=function(){return null},e.kv=function(){return null},e.cz=function(t,e){this.Qy.add(t,e)},e.zu=function(t){(this.mx=t)||this.nodes.each((function(t){t instanceof _u&&(t.Zq=null)}))},e.sA=function(t){return Eo?(void 0===t&&(t={}),t.returnType=\"Image\",this.gy(t)):null},e.gy=function(t){return void 0===t&&(t={}),Bo(this,this.tA,t)},e.tA=function(t,e,i){var n=Io(i,t,\"canvas\",null);if(null===n)return null;var r=null;if(null!==(i=n.Y.canvas))switch(r=t.returnType,r=void 0===r?\"string\":r.toLowerCase(),r){case rs+\"data\":r=n.getImageData(0,0,i.width,i.height);break;case rs:(n=(t.document||document).createElement(\"img\")).src=i.toDataURL(t.type,t.details),r=n;break;case\"blob\":return\"function\"!=typeof e&&w('Error: Diagram.makeImageData called with \"returnType: toBlob\", but no required \"callback\" function property defined.'),\"function\"==typeof i.toBlob?(i.toBlob(e,t.type,t.details),\"toBlob\"):\"function\"==typeof i.msToBlob?(e(i.msToBlob()),\"msToBlob\"):(e(null),null);default:r=i.toDataURL(t.type,t.details)}return\"function\"==typeof e?(e(r),null):r},f.Object.defineProperties(Pr.prototype,{div:{get:function(){return this.Ga},set:function(t){if(this.Ga!==t){var e=this.Ga;null!==e?(e.C=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML=\"\",null!==this.Ca&&(e=this.Ca.La,this.removeEventListener(e,\"pointermove\",this.kk,!1),this.removeEventListener(e,\"pointerdown\",this.jk,!1),this.removeEventListener(e,\"pointerup\",this.mk,!1),this.removeEventListener(e,\"pointerout\",this.lk,!1),this.Ca.Ix()),this.xl&&(this.xl.disconnect(),this.xl=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each((function(t){t.cancelWaitAfter()})),e.mouseMoveTools.each((function(t){t.cancelWaitAfter()})),e.mouseUpTools.each((function(t){t.cancelWaitAfter()}))),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ca=null,this.removeEventListener(y,\"resize\",this.Zv,!1),this.removeEventListener(y,\"wheel\",this.gk,!0),vr===this&&(vr=null)):this.Uf=!1,this.Ga=null,null!==t&&((e=t.C)&&(e.div=null),ls(this,t),this.redraw())}}},xx:{get:function(){return this.zr}},Oi:{get:function(){return this.Uf}},draggedLink:{get:function(){return this.ru},set:function(t){this.ru!==t&&(this.ru=t,null!==t&&(this.Sv=t.fromPort,this.Yv=t.toPort))}},ky:{get:function(){return this.Sv},set:function(t){this.Sv=t}},ly:{get:function(){return this.Yv},set:function(t){this.Yv=t}},animationManager:{get:function(){return this.Pd}},undoManager:{get:function(){return this.Wb.undoManager}},skipsUndoManager:{get:function(){return this.kh},set:function(t){this.kh=t,this.Wb.skipsUndoManager=t}},delaysLayout:{get:function(){return this.xt},set:function(t){this.xt=t}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&M(t,\"0 <= value <= 1\",Pr,\"opacity\"),this.mb=t,this.g(\"opacity\",e,t),this.N())}},validCycle:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(this.dt=t,this.g(\"validCycle\",e,t))}},layers:{get:function(){return this.Oa.iterator}},isModelReadOnly:{get:function(){var t=this.Wb;return null!==t&&t.isReadOnly},set:function(t){var e=this.Wb;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Rg},set:function(t){var e=this.Rg;e!==t&&(this.Rg=t,this.g(\"isReadOnly\",e,t))}},isEnabled:{get:function(){return this.vd},set:function(t){var e=this.vd;e!==t&&(this.vd=t,this.g(\"isEnabled\",e,t))}},allowClipboard:{get:function(){return this.rk},set:function(t){var e=this.rk;e!==t&&(this.rk=t,this.g(\"allowClipboard\",e,t))}},allowCopy:{get:function(){return this.D},set:function(t){var e=this.D;e!==t&&(this.D=t,this.g(\"allowCopy\",e,t))}},allowDelete:{get:function(){return this.L},set:function(t){var e=this.L;e!==t&&(this.L=t,this.g(\"allowDelete\",e,t))}},allowDragOut:{get:function(){return this.sk},set:function(t){var e=this.sk;e!==t&&(this.sk=t,this.g(\"allowDragOut\",e,t))}},allowDrop:{get:function(){return this.Im},set:function(t){var e=this.Im;e!==t&&(this.Im=t,this.g(\"allowDrop\",e,t))}},allowTextEdit:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(this.Od=t,this.g(\"allowTextEdit\",e,t))}},allowGroup:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(this.wa=t,this.g(\"allowGroup\",e,t))}},allowUngroup:{get:function(){return this.ke},set:function(t){var e=this.ke;e!==t&&(this.ke=t,this.g(\"allowUngroup\",e,t))}},allowInsert:{get:function(){return this.jt},set:function(t){var e=this.jt;e!==t&&(this.jt=t,this.g(\"allowInsert\",e,t))}},allowLink:{get:function(){return this.Ba},set:function(t){var e=this.Ba;e!==t&&(this.Ba=t,this.g(\"allowLink\",e,t))}},allowRelink:{get:function(){return this.Qb},set:function(t){var e=this.Qb;e!==t&&(this.Qb=t,this.g(\"allowRelink\",e,t))}},allowMove:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(this.Ma=t,this.g(\"allowMove\",e,t))}},allowReshape:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(this.Gb=t,this.g(\"allowReshape\",e,t))}},allowResize:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(this.Rb=t,this.g(\"allowResize\",e,t))}},allowRotate:{get:function(){return this.rc},set:function(t){var e=this.rc;e!==t&&(this.rc=t,this.g(\"allowRotate\",e,t))}},allowSelect:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.g(\"allowSelect\",e,t))}},allowUndo:{get:function(){return this.kt},set:function(t){var e=this.kt;e!==t&&(this.kt=t,this.g(\"allowUndo\",e,t))}},allowZoom:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(this.nt=t,this.g(\"allowZoom\",e,t))}},hasVerticalScrollbar:{get:function(){return this.Nn},set:function(t){var e=this.Nn;e!==t&&(this.Nn=t,to(this),this.N(),this.g(\"hasVerticalScrollbar\",e,t),zr(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Mn},set:function(t){var e=this.Mn;e!==t&&(this.Mn=t,to(this),this.N(),this.g(\"hasHorizontalScrollbar\",e,t),zr(this,!1))}},allowHorizontalScroll:{get:function(){return this.it},set:function(t){var e=this.it;e!==t&&(this.it=t,this.g(\"allowHorizontalScroll\",e,t),zr(this,!1))}},allowVerticalScroll:{get:function(){return this.mt},set:function(t){var e=this.mt;e!==t&&(this.mt=t,this.g(\"allowVerticalScroll\",e,t),zr(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(0>t&&M(t,\">= 0\",Pr,\"scrollHorizontalLineChange\"),this.Zs=t,this.g(\"scrollHorizontalLineChange\",e,t))}},scrollVerticalLineChange:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(0>t&&M(t,\">= 0\",Pr,\"scrollVerticalLineChange\"),this.$s=t,this.g(\"scrollVerticalLineChange\",e,t))}},lastInput:{get:function(){return this.rj},set:function(t){this.rj=t}},previousInput:{get:function(){return this.gh},set:function(t){this.gh=t}},firstInput:{get:function(){return this.br},set:function(t){this.br=t}},currentCursor:{get:function(){return this.Ys},set:function(t){if(\"\"===t&&(t=this.Zi),this.Ys!==t){var e=this.Ca,i=this.Ga;if(null!==e&&null!==i){this.Ys=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor=\"-webkit-\"+t,i.style.cursor=\"-webkit-\"+t,e.style.cursor===n&&(e.style.cursor=\"-moz-\"+t,i.style.cursor=\"-moz-\"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Zi},set:function(t){\"\"===t&&(t=\"auto\");var e=this.Zi;e!==t&&(this.Zi=t,this.g(\"defaultCursor\",e,t))}},click:{get:function(){return this.Ag},set:function(t){var e=this.Ag;e!==t&&(this.Ag=t,this.g(\"click\",e,t))}},doubleClick:{get:function(){return this.Ig},set:function(t){var e=this.Ig;e!==t&&(this.Ig=t,this.g(\"doubleClick\",e,t))}},contextClick:{get:function(){return this.Cg},set:function(t){var e=this.Cg;e!==t&&(this.Cg=t,this.g(\"contextClick\",e,t))}},mouseOver:{get:function(){return this.ah},set:function(t){var e=this.ah;e!==t&&(this.ah=t,this.g(\"mouseOver\",e,t))}},mouseHover:{get:function(){return this.Zg},set:function(t){var e=this.Zg;e!==t&&(this.Zg=t,this.g(\"mouseHover\",e,t))}},mouseHold:{get:function(){return this.Yg},set:function(t){var e=this.Yg;e!==t&&(this.Yg=t,this.g(\"mouseHold\",e,t))}},mouseDragOver:{get:function(){return this.vv},set:function(t){var e=this.vv;e!==t&&(this.vv=t,this.g(\"mouseDragOver\",e,t))}},mouseDrop:{get:function(){return this.Wg},set:function(t){var e=this.Wg;e!==t&&(this.Wg=t,this.g(\"mouseDrop\",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.Su},set:function(t){var e=this.Su;e!==t&&(this.Su=t,this.g(\"handlesDragDropForTopLevelParts\",e,t))}},mouseEnter:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e!==t&&(this.Xg=t,this.g(\"mouseEnter\",e,t))}},mouseLeave:{get:function(){return this.$g},set:function(t){var e=this.$g;e!==t&&(this.$g=t,this.g(\"mouseLeave\",e,t))}},toolTip:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g(\"toolTip\",e,t))}},contextMenu:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g(\"contextMenu\",e,t))}},commandHandler:{get:function(){return this.gw},set:function(t){this.gw!==t&&(this.gw=t,t.Ne(this))}},toolManager:{get:function(){return this.qw},set:function(t){this.qw!==t&&(this.qw=t,t.diagram=this)}},defaultTool:{get:function(){return this.iw},set:function(t){var e=this.iw;e!==t&&(this.iw=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.hw},set:function(t){var e=this.hw;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.hw=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.ex}},maxSelectionCount:{get:function(){return this.rv},set:function(t){var e=this.rv;if(e!==t)if(0<=t&&!isNaN(t)){if(this.rv=t,this.g(\"maxSelectionCount\",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.S(\"ChangingSelection\",this.selection),e=this.selection.ya();for(var i=0;i<t;i++)e[i].isSelected=!1;this.S(\"ChangedSelection\",this.selection)}}else M(t,\">= 0\",Pr,\"maxSelectionCount\")}},nodeSelectionAdornmentTemplate:{get:function(){return this.Dv},set:function(t){var e=this.Dv;e!==t&&(this.Dv=t,this.g(\"nodeSelectionAdornmentTemplate\",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Ku},set:function(t){var e=this.Ku;e!==t&&(this.Ku=t,this.g(\"groupSelectionAdornmentTemplate\",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.mv},set:function(t){var e=this.mv;e!==t&&(this.mv=t,this.g(\"linkSelectionAdornmentTemplate\",e,t))}},highlighteds:{get:function(){return this.Nw}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.Tn&&this.se!==t.historyIndex:this.Tn},set:function(t){if(this.Tn!==t){this.Tn=t;var e=this.undoManager;!t&&e.isEnabled&&(this.se=e.historyIndex),t||mo(this)}}},model:{get:function(){return this.Wb},set:function(t){var e=this.Wb;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&w(\"Do not replace a Diagram.model while a transaction is in progress.\"),this.animationManager.qc(!0);var i=Cr(this,!0);this.Uf=!1,this.zn=!0,this.se=-2,this.jg=!1;var n=this.qb;this.qb=!0,Kn(this.animationManager,\"Model\"),e&&(null!==this.df&&this.df.each((function(t){e.pk(t)})),e.pk(this.nw)),this.Wb=t,this.partManager=function(t){return null!==(t=zo.get(t))?new t:new If}(this.Wb.type);for(var r=0;r<i.length;r++)this.add(i[r]);t.yh(this.mw),this.partManager.addAllModeledParts(),t.pk(this.mw),t.yh(this.nw),null!==this.df&&this.df.each((function(e){t.yh(e)})),this.qb=n,this.Qa(),this.qb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.lw},set:function(t){this.lw=t}},Gs:{get:function(){return this.Gy}},skipsModelSourceBindings:{get:function(){return this.pw},set:function(t){this.pw=t}},Vs:{get:function(){return this.hu},set:function(t){this.hu=t}},nodeTemplate:{get:function(){return this.j.H(\"\")},set:function(t){var e=this.j.H(\"\");e!==t&&(this.j.add(\"\",t),this.g(\"nodeTemplate\",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},nodeTemplateMap:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g(\"nodeTemplateMap\",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},groupTemplate:{get:function(){return this.Bc.H(\"\")},set:function(t){var e=this.Bc.H(\"\");e!==t&&(this.Bc.add(\"\",t),this.g(\"groupTemplate\",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},groupTemplateMap:{get:function(){return this.Bc},set:function(t){var e=this.Bc;e!==t&&(this.Bc=t,this.g(\"groupTemplateMap\",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},linkTemplate:{get:function(){return this.o.H(\"\")},set:function(t){var e=this.o.H(\"\");e!==t&&(this.o.add(\"\",t),this.g(\"linkTemplate\",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},linkTemplateMap:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(this.o=t,this.g(\"linkTemplateMap\",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},isMouseCaptured:{get:function(){return this.kw},set:function(t){var e=this.Ca;null!==e&&((e=e.La)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,\"pointermove\",this.kk,!1),this.removeEventListener(e,\"pointerdown\",this.jk,!1),this.removeEventListener(e,\"pointerup\",this.mk,!1),this.removeEventListener(e,\"pointerout\",this.lk,!1),this.addEventListener(y,\"pointermove\",this.kk,!0),this.addEventListener(y,\"pointerdown\",this.jk,!0),this.addEventListener(y,\"pointerup\",this.mk,!0),this.addEventListener(y,\"pointerout\",this.lk,!0),this.removeEventListener(e,\"wheel\",this.gk,!1),this.addEventListener(y,\"wheel\",this.gk,!0),this.addEventListener(y,\"selectstart\",this.preventDefault,!1)):(this.removeEventListener(y,\"pointermove\",this.kk,!0),this.removeEventListener(y,\"pointerdown\",this.jk,!0),this.removeEventListener(y,\"pointerup\",this.mk,!0),this.removeEventListener(y,\"pointerout\",this.lk,!0),this.addEventListener(e,\"pointermove\",this.kk,!1),this.addEventListener(e,\"pointerdown\",this.jk,!1),this.addEventListener(e,\"pointerup\",this.mk,!1),this.addEventListener(e,\"pointerout\",this.lk,!1),this.removeEventListener(y,\"wheel\",this.gk,!0),this.removeEventListener(y,\"selectstart\",this.preventDefault,!1),this.addEventListener(e,\"wheel\",this.gk,!1)),this.kw=t))}},position:{get:function(){return this.ja},set:function(t){var e=gt.alloc().assign(this.ja);if(!e.A(t)){var i=this.viewportBounds.copy();this.ja.assign(t),$n(this.animationManager,e,this.ja),this.qb||null===this.Ca&&!this.Fp.u()?wo(this):(this.qb=!0,t=this.scale,Er(this,this.Tq,this.ua/t,this.ta/t,this.Gk,!1),this.qb=!1),this.qb||this.onViewportBoundsChanged(i,this.viewportBounds,this.sa,!1)}gt.free(e)}},initialPosition:{get:function(){return this.Zu},set:function(t){this.Zu.A(t)||(this.Zu=t.I())}},initialScale:{get:function(){return this.fv},set:function(t){this.fv!==t&&(this.fv=t)}},grid:{get:function(){return null===this.Yd&&(this.Yd=Dr(this)),this.Yd},set:function(t){var e=this.Yd;if(e!==t){null===e&&(e=this.Yd=Dr(this)),t.type!==fh.Grid&&w(\"Diagram.grid must be a Panel of type Panel.Grid\");var i=e.panel;null!==i&&i.remove(e),this.Yd=t,t.name=\"GRID\",null!==i&&i.add(t),yo(this),this.N(),this.g(\"grid\",e,t)}}},viewportBounds:{get:function(){return this.ox}},viewSize:{get:function(){return this.Fp},set:function(t){var e=this.viewSize;e.A(t)||(this.Fp=t=t.I(),this.ta=this.ua=0,t.u()?(this.ua=t.width,this.ta=t.height):null!==this.Ga&&(this.ua=this.Ga.clientWidth||1,this.ta=this.Ga.clientHeight||1),wo(this),this.Qa(),this.g(\"viewSize\",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Fu},set:function(t){var e=this.Fu;e.A(t)||(-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||w(\"fixedBounds width/height must not be Infinity\"),this.Fu=t=t.I(),this.Qa(),this.g(\"fixedBounds\",e,t))}},scrollMargin:{get:function(){return this.Fj},set:function(t){\"number\"==typeof t&&(t=new Wt(t));var e=this.Fj;e.A(t)||(this.Fj=t=t.I(),this.g(\"scrollMargin\",e,t),this.nq())}},scrollMode:{get:function(){return this.Gj},set:function(t){var e=this.Gj;e!==t&&(this.Gj=t,t===Jo&&zr(this,!1),this.g(\"scrollMode\",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(this.at=t,this.g(\"scrollsPageOnFocus\",e,t))}},positionComputation:{get:function(){return this.cw},set:function(t){var e=this.cw;e!==t&&(this.cw=t,zr(this,!1),this.g(\"positionComputation\",e,t))}},scaleComputation:{get:function(){return this.dw},set:function(t){var e=this.dw;e!==t&&(this.dw=t,go(this,this.scale,this.scale),this.g(\"scaleComputation\",e,t))}},documentBounds:{get:function(){return this.Tq}},isVirtualized:{get:function(){return this.iv},set:function(t){var e=this.iv;e!==t&&(this.iv=t,this.g(\"isVirtualized\",e,t))}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&go(this,e,t)}},defaultScale:{get:function(){return this.Rq},set:function(t){this.Rq=t}},autoScale:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g(\"autoScale\",e,t),t!==Yo&&zr(this,!1))}},initialAutoScale:{get:function(){return this.Qg},set:function(t){var e=this.Qg;e!==t&&(this.Qg=t,this.g(\"initialAutoScale\",e,t))}},initialViewportSpot:{get:function(){return this.gv},set:function(t){var e=this.gv;e!==t&&(t.hb()||w(\"initialViewportSpot must be a specific Spot: \"+t),this.gv=t,this.g(\"initialViewportSpot\",e,t))}},initialDocumentSpot:{get:function(){return this.Xu},set:function(t){var e=this.Xu;e!==t&&(t.hb()||w(\"initialViewportSpot must be a specific Spot: \"+t),this.Xu=t,this.g(\"initialDocumentSpot\",e,t))}},minScale:{get:function(){return this.sv},set:function(t){var e=this.sv;e!==t&&(0<t?(this.sv=t,this.g(\"minScale\",e,t),t>this.scale&&(this.scale=t)):M(t,\"> 0\",Pr,\"minScale\"))}},maxScale:{get:function(){return this.ov},set:function(t){var e=this.ov;e!==t&&(0<t?(this.ov=t,this.g(\"maxScale\",e,t),t<this.scale&&(this.scale=t)):M(t,\"> 0\",Pr,\"maxScale\"))}},zoomPoint:{get:function(){return this.et},set:function(t){this.et.A(t)||(this.et=t=t.I())}},contentAlignment:{get:function(){return this.Gk},set:function(t){var e=this.Gk;e.A(t)||(this.Gk=t=t.I(),this.g(\"contentAlignment\",e,t),zr(this,!1))}},initialContentAlignment:{get:function(){return this.hr},set:function(t){var e=this.hr;e.A(t)||(this.hr=t=t.I(),this.g(\"initialContentAlignment\",e,t))}},padding:{get:function(){return this.nb},set:function(t){\"number\"==typeof t&&(t=new Wt(t));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.Qa(),this.g(\"padding\",e,t))}},partManager:{get:function(){return this.ow},set:function(t){var e=this.ow;e!==t&&(null!==t.diagram&&w(\"Cannot share PartManagers between Diagrams: \"+t.toString()),e&&e.Ne(null),this.ow=t,t.Ne(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(this.Dc=t,t.diagram=this,t.group=null,this.Oh=!0,this.g(\"layout\",e,t),this.Fb())}},isTreePathToChildren:{get:function(){return this.hv},set:function(t){var e=this.hv;if(e!==t&&(this.hv=t,this.g(\"isTreePathToChildren\",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Lu(t.value)}},treeCollapsePolicy:{get:function(){return this.bt},set:function(t){var e=this.bt;e!==t&&(t!==Qo&&t!==ts&&t!==es&&w(\"Unknown Diagram.treeCollapsePolicy: \"+t),this.bt=t,this.g(\"treeCollapsePolicy\",e,t))}},Ke:{get:function(){return this.jw},set:function(t){this.jw=t}},autoScrollInterval:{get:function(){return this.Bq},set:function(t){var e=this.Bq;e!==t&&(this.Bq=t,this.g(\"autoScrollInterval\",e,t))}},autoScrollRegion:{get:function(){return this.Dq},set:function(t){\"number\"==typeof t&&(t=new Wt(t));var e=this.Dq;e.A(t)||(this.Dq=t=t.I(),this.Qa(),this.g(\"autoScrollRegion\",e,t))}}}),f.Object.defineProperties(Pr,{licenseKey:{get:function(){return is.$b()},set:function(t){is.add(t)}},version:{get:function(){return ns}}}),Pr.prototype.makeImageData=Pr.prototype.gy,Pr.prototype.makeImage=Pr.prototype.sA,Pr.prototype.cacheGroupExternalLinks=Pr.prototype.zu,Pr.prototype.addRenderer=Pr.prototype.cz,Pr.prototype.makeSVG=Pr.prototype.kv,Pr.prototype.makeSvg=Pr.prototype.Is,Pr.prototype.stopAutoScroll=Pr.prototype.tg,Pr.prototype.doAutoScroll=Pr.prototype.ms,Pr.prototype.isUnoccupied=Pr.prototype.dk,Pr.prototype.raiseDiagramEvent=Pr.prototype.S,Pr.prototype.removeDiagramListener=Pr.prototype.km,Pr.prototype.addDiagramListener=Pr.prototype.Lj,Pr.prototype.findTreeRoots=Pr.prototype.Wz,Pr.prototype.layoutDiagram=Pr.prototype.qA,Pr.prototype.findTopLevelGroups=Pr.prototype.Pz,Pr.prototype.findTopLevelNodesAndLinks=Pr.prototype.Qz,Pr.prototype.ensureBounds=Pr.prototype.Ta,Pr.prototype.findLinksByExample=Pr.prototype.ps,Pr.prototype.findNodesByExample=Pr.prototype.qs,Pr.prototype.findLinkForData=Pr.prototype.xc,Pr.prototype.findNodeForData=Pr.prototype.Gi,Pr.prototype.findPartForData=Pr.prototype.yc,Pr.prototype.findLinkForKey=Pr.prototype.findLinkForKey,Pr.prototype.findNodeForKey=Pr.prototype.Eb,Pr.prototype.findPartForKey=Pr.prototype.findPartForKey,Pr.prototype.rebuildParts=Pr.prototype.Ld,Pr.prototype.transformViewToDoc=Pr.prototype.Xs,Pr.prototype.transformRectDocToView=Pr.prototype.WA,Pr.prototype.transformDocToView=Pr.prototype.vq,Pr.prototype.centerRect=Pr.prototype.ks,Pr.prototype.scrollToRect=Pr.prototype.Fv,Pr.prototype.scroll=Pr.prototype.scroll,Pr.prototype.highlightCollection=Pr.prototype.hA,Pr.prototype.highlight=Pr.prototype.gA,Pr.prototype.selectCollection=Pr.prototype.NA,Pr.prototype.select=Pr.prototype.select,Pr.prototype.updateAllRelationshipsFromData=Pr.prototype.yq,Pr.prototype.updateAllTargetBindings=Pr.prototype.updateAllTargetBindings,Pr.prototype.commit=Pr.prototype.commit,Pr.prototype.rollbackTransaction=Pr.prototype.Hf,Pr.prototype.commitTransaction=Pr.prototype.Xa,Pr.prototype.startTransaction=Pr.prototype.xa,Pr.prototype.raiseChanged=Pr.prototype.g,Pr.prototype.raiseChangedEvent=Pr.prototype.Wa,Pr.prototype.removeChangedListener=Pr.prototype.pk,Pr.prototype.addChangedListener=Pr.prototype.yh,Pr.prototype.removeModelChangedListener=Pr.prototype.IA,Pr.prototype.addModelChangedListener=Pr.prototype.vx,Pr.prototype.findLayer=Pr.prototype.Xj,Pr.prototype.removeLayer=Pr.prototype.GA,Pr.prototype.addLayerAfter=Pr.prototype.Zy,Pr.prototype.addLayerBefore=Pr.prototype.tx,Pr.prototype.addLayer=Pr.prototype.Sl,Pr.prototype.moveParts=Pr.prototype.moveParts,Pr.prototype.copyParts=Pr.prototype.Tj,Pr.prototype.removeParts=Pr.prototype.Ps,Pr.prototype.remove=Pr.prototype.remove,Pr.prototype.add=Pr.prototype.add,Pr.prototype.clearDelayedGeometries=Pr.prototype.Au,Pr.prototype.setProperties=Pr.prototype.xm,Pr.prototype.attach=Pr.prototype.wu,Pr.prototype.set=Pr.prototype.set,Pr.prototype.resetInputOptions=Pr.prototype.qy,Pr.prototype.setInputOption=Pr.prototype.OA,Pr.prototype.getInputOption=Pr.prototype.am,Pr.prototype.resetRenderingHints=Pr.prototype.sy,Pr.prototype.setRenderingHint=Pr.prototype.wy,Pr.prototype.getRenderingHint=Pr.prototype.Ie,Pr.prototype.maybeUpdate=Pr.prototype.gd,Pr.prototype.requestUpdate=Pr.prototype.Fb,Pr.prototype.delayInitialization=Pr.prototype.uz,Pr.prototype.isUpdateRequested=Pr.prototype.mA,Pr.prototype.invalidateDocumentBounds=Pr.prototype.Qa,Pr.prototype.findObjectsNear=Pr.prototype.pg,Pr.prototype.findPartsNear=Pr.prototype.Lz,Pr.prototype.findObjectsIn=Pr.prototype.zf,Pr.prototype.findPartsIn=Pr.prototype.Px,Pr.prototype.findObjectsAt=Pr.prototype.Hi,Pr.prototype.findPartsAt=Pr.prototype.Kz,Pr.prototype.findObjectAt=Pr.prototype.Zb,Pr.prototype.findPartAt=Pr.prototype.Zl,Pr.prototype.focusObject=Pr.prototype.Xz,Pr.prototype.alignDocument=Pr.prototype.ez,Pr.prototype.zoomToRect=Pr.prototype.$A,Pr.prototype.zoomToFit=Pr.prototype.zoomToFit,Pr.prototype.diagramScroll=Pr.prototype.Gx,Pr.prototype.focus=Pr.prototype.focus;var zo=new pt,Ro=null,Eo=void 0!==y.document,_o=null,Vo=\"\",Yo=new V(Pr,\"None\",0),Go=new V(Pr,\"Uniform\",1),Xo=new V(Pr,\"UniformToFill\",2),Uo=new V(Pr,\"CycleAll\",10),qo=new V(Pr,\"CycleNotDirected\",11),Ko=new V(Pr,\"CycleNotDirectedFast\",12),Ho=new V(Pr,\"CycleNotUndirected\",13),Wo=new V(Pr,\"CycleDestinationTree\",14),Zo=new V(Pr,\"CycleSourceTree\",15),Jo=new V(Pr,\"DocumentScroll\",1),$o=new V(Pr,\"InfiniteScroll\",2),Qo=new V(Pr,\"TreeParentCollapsed\",21),ts=new V(Pr,\"AllParentsCollapsed\",22),es=new V(Pr,\"AnyParentsCollapsed\",23),is=new J,ns=\"2.2.6\",rs=\"image\",os=null,ss=!1;function as(){this.Uy=null,this.j=\"zz@orderNum\",\"63ad05bbe23a1786468a4c741b6d2\"===this._tk?this.kd=this.j=!0:this.kd=null}function hs(t,e){if(e.Vb.setTransform(e.dc,0,0,e.dc,0,0),e.Vb.Ed(),null===t.kd)t:{e=\"f\";var i=y[I(\"76a715b2f73f148a\")][I(\"72ba13b5\")];if(t.kd=!0,Eo){var n=Pr[I(\"76a115b6ed251eaf4692\")];if(n)for(var r=is.iterator;r.next()&&!(6>(n=I(n=r.value).split(I(\"39e9\"))).length);){var o=I(n[1]).split(\".\");if(\"7da71ca0\"!==n[4])break;var s=I(m[I(\"6cae19\")]).split(\".\");if(o[0]>s[0]||o[0]===s[0]&&o[1]>=s[1]){var a=y[I(\"74a900bae4370f8b51\")][I(\"6fbb13a1c2311e8a57\")].toLowerCase();if(s=a[I(\"73a612b6fb191d\")](I(\"3aad1ab6e022098b4dc4\")),o=I(n[2]),-1<s&&(a=a[I(\"73a612b6fb191d\")](o.toLowerCase()+\"/\"),t.kd=!(-1<a&&a<s),!t.kd))break;for(s=i[I(\"76ad18b4f73e\")],a=i[I(\"73a612b6fb191d\")](I(\"35e7\"))+2;a<s;a++)e+=i[a];if(0>(s=e[I(\"73a612b6fb191d\")](o))&&o!==I(\"7da71ca0ad381e90\")&&(s=e[I(\"73a612b6fb191d\")](I(\"76a715b2ef3e149757\"))),0>s&&(s=e[I(\"73a612b6fb191d\")](I(\"76a715b2ef3e149757\"))),0>s&&(s=i[I(\"73a612b6fb191d\")](I(\"7baa19a6f76c1988428554\"))),t.kd=!(0<=s&&s<e[I(\"73a612b6fb191d\")](I(\"35\"))||-1===e[I(\"73a612b6fb191d\")](I(\"35\"))),!t.kd)break;if(i[I(\"73a612b6fb191d\")](I(\"7fb002b6ed25128b4da25b2e\"))&&i[I(\"73a612b6fb191d\")](I(\"75ba1beee63a1e875799507d\"))&&(t.kd=!(-1<i[I(\"73a612b6fb191d\")](o)),!t.kd))break;if(\"#\"===o[0]){s=y.document.createElement(\"div\");for(var h=n[0].replace(/[A-Za-z]/g,\"\");4>h.length;)h+=\"9\";if(a=h,h=h.substr(h.length-4),n=\"\",n+=[\"gsh\",\"gsf\"][parseInt(h.substr(0,1),10)%2],n+=[\"Header\",\"Background\",\"Display\",\"Feedback\"][parseInt(h.substr(0,1),10)%4],s[I(\"79a417a0f0181a8946\")]=n,y.document[I(\"78a712aa\")]){y.document[I(\"78a712aa\")][I(\"7bb806b6ed32388c4a875b\")](s),h=y.getComputedStyle(s).getPropertyValue(I(\"78a704b7e62456904c9b12701b6532a8\"));var l=y.getComputedStyle(s).getPropertyValue(I(\"75b817b0ea2202\"));if(y.document[I(\"78a712aa\")][I(\"68ad1bbcf533388c4a875b\")](s),h){if(s=y[I(\"77a902b0eb1b1e804a8a\")],l===\"0.\"+parseInt(a,10)%100||-1!==h.indexOf(parseInt(o[1]+o[2],16))&&-1!==h.indexOf(parseInt(o[3]+o[4],16))){t.kd=!1;break}if(s&&s(I(\"32ae19a1e0331fc94084537c067a67fa59f1386b89d006\")).matches)for(n=\".\"+n,o=0;o<document.styleSheets.length;o++)for(var u in s=document.styleSheets[o].rules||document.styleSheets[o].cssRules)if(n===s[u].selectorText){t.kd=!1;break t}}}else t.kd=null,t.kd=!1}}}else{for(u=i[I(\"76ad18b4f73e\")],r=i[I(\"73a612b6fb191d\")](I(\"35e7\"))+2;r<u;r++)e+=i[r];i=e[I(\"73a612b6fb191d\")](I(\"7da71ca0ad381e90\")),t.kd=!(0<=i&&i<e[I(\"73a612b6fb191d\")](I(\"35\")))}}}return 0<t.kd&&t!==t.Uy}function ls(t,e){if(Eo){if(null!=e||w(\"Diagram setup requires an argument DIV.\"),null!==t.Ga&&w(\"Diagram has already completed setup.\"),\"string\"==typeof e?t.Ga=y.document.getElementById(e):e instanceof HTMLDivElement?t.Ga=e:w(\"No DIV or DIV id supplied: \"+e),null===t.Ga&&w(\"Invalid DIV id; could not get element with id: \"+e),void 0!==t.Ga.C&&w(\"Invalid div id; div already has a Diagram associated with it.\"),!t.xl&&y.ResizeObserver){var i=v((function(){t.Fb()}),250);t.xl=new y.ResizeObserver((function(){i()})),t.xl.observe(t.Ga)}\"static\"===y.getComputedStyle(t.Ga,null).position&&(t.Ga.style.position=\"relative\");var n=\"rgba(2\"+(e=5)+\"5, 255, 255, 0)\";e--,t.Ga.style[\"-webkit-tap-highlight-color\"]=n,t.Ga.innerHTML=\"\",t.Ga.C=t,t.Ga.goDiagram=t,t.Ga.go=y.go;var r=t.Zr?new ua(t):new ma(t);if(void 0!==r.style&&(r.style.position=\"absolute\",r.style.top=\"0px\",r.style.left=\"0px\",\"rtl\"===y.getComputedStyle(t.Ga,null).getPropertyValue(\"direction\")&&(t.Vn=!0),r.style.zIndex=\"2\",r.style.userSelect=\"none\",r.style.MozUserSelect=\"none\",r.style.touchAction=\"none\"),t.Ca=r,t.Vb=r.context,n=t.Vb,t.dc=t.computePixelRatio(),t.viewSize.u()||(t.ua=t.Ga.clientWidth||1,t.ta=t.Ga.clientHeight||1),no(t,t.ua,t.ta),t.Ga.insertBefore(r.La,t.Ga.firstChild),(r=new ma(null)).width=1,r.height=1,t.Iw=r,t.Ny=r.context,Eo){r=b(\"div\");var o=b(\"div\");r.style.position=\"absolute\",r.style.overflow=\"auto\",r.style.width=t.ua+\"px\",r.style.height=t.ta+\"px\",r.style.zIndex=\"1\",o.style.position=\"absolute\",o.style.width=\"1px\",o.style.height=\"1px\",t.Ga.appendChild(r),r.appendChild(o),r.onscroll=Fr,r.addEventListener(\"pointerdown\",Br),r.C=t,r.Sy=!0,r.Ty=!0,t.fu=r,t.du=o}t.nq=v((function(){t.si=null,t.N()}),300),t.Zv=v((function(){jr(t)}),250),t.preventDefault=function(t){return t.preventDefault(),!1},t.gk=function(e){if(t.isEnabled){var i=Vr(t,e,!0);i.bubbles=!0;var n=0,r=0;i.delta=0,void 0!==e.deltaX?(0!==e.deltaX&&(n=0<e.deltaX?1:-1),0!==e.deltaY&&(r=0<e.deltaY?1:-1),i.delta=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-n:-r):void 0!==e.wheelDeltaX?(0!==e.wheelDeltaX&&(n=0<e.wheelDeltaX?-1:1),0!==e.wheelDeltaY&&(r=0<e.wheelDeltaY?-1:1),i.delta=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?-n:-r):void 0!==e.wheelDelta&&0!==e.wheelDelta&&(i.delta=0<e.wheelDelta?1:-1),t.doMouseWheel(),Xr(i,e)}},t.xA=function(e){t.isEnabled&&(t.cl=!1,Vr(t,e,!0),(e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())},t.jk=function(e){if(t.isEnabled){t.cl=!0;var i=t.Wt;void 0===i[e.pointerId]&&(i[e.pointerId]=e);var n=!1;if(null!==(i=t.ul)[0]&&i[0].pointerId===e.pointerId)i[0]=e;else if(null!==i[1]&&i[1].pointerId===e.pointerId)i[1]=e,n=!0;else if(null===i[0])i[0]=e;else{if(null!==i[1])return void e.preventDefault();i[1]=e,n=!0}(i=\"touch\"===e.pointerType||\"pen\"===e.pointerType)&&(t.ju=!1,t.Mt=!0);var r=n;n=Gr(t,e,!0,!1,!0,r),Ur(t,e,n),n.targetDiagram=Yr(e,e.target),n.targetObject=null,r||n.clone(t.br),r=t.Rw,i=i?25:10,e.timeStamp-t.Qw<t.Xy&&!(Math.abs(r.x-e.screenX)>i||Math.abs(r.y-e.screenY)>i)?t.rr++:t.rr=1,n.clickCount=t.rr,t.Qw=e.timeStamp,t.Rw.sg(e.screenX,e.screenY),t.doMouseDown(),1===e.button?e.preventDefault():Xr(n,e)}},t.kk=function(e){if(t.isEnabled){t.cl=!0;var i=t.ul;if(null!==i[0]&&i[0].pointerId===e.pointerId)i[0]=e;else{if(null!==i[1]&&i[1].pointerId===e.pointerId)return void(i[1]=e);if(null!==i[0])return;i[0]=e}if(i[0].pointerId===e.pointerId){i=Gr(t,e,!1,!1,!1,null!==i[1]);var n=y.document.elementFromPoint(e.clientX,e.clientY);null!==n&&void 0!==n.shadowRoot&&null!==n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(e.clientX,e.clientY));var r=t,o=e;n&&n.C&&(o=e,r=n.C),i.targetDiagram=r,Ur(t,o,i),i.targetObject=null,t.doMouseMove(),Xr(i,e)}}},t.mk=function(e){if(t.isEnabled){t.cl=!0;var i=\"touch\"===e.pointerType||\"pen\"===e.pointerType,n=t.Wt;if(i&&t.ju)delete n[e.pointerId],e.preventDefault();else if(null!==(n=t.ul)[0]&&n[0].pointerId===e.pointerId){n[0]=null,n=Gr(t,e,!1,!0,!0,!1);var r=y.document.elementFromPoint(e.clientX,e.clientY);null!==r&&void 0!==r.shadowRoot&&null!==r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(e.clientX,e.clientY)),null!==r&&r.C instanceof Pr&&r.C!==t&&Ur(r.C,e,n),null===r&&(r=e.target),Ur(t,e,n),n.clickCount=t.rr,n.targetDiagram=Yr(e,r),n.targetObject=null,t.doMouseUp(),Xr(n,e),i&&(t.Mt=!1)}else null!==n[1]&&n[1].pointerId===e.pointerId&&(n[1]=null)}},t.lk=function(e){if(t.isEnabled){t.cl=!1;var i=t.Wt;i[e.pointerId]&&delete i[e.pointerId],null!==(i=t.ul)[0]&&i[0].pointerId===e.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===e.pointerId&&(i[1]=null),\"touch\"!==e.pointerType&&\"pen\"!==e.pointerType&&((e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())}},t.zt=n.Y[\"d\"+ws[1]+ws[2]+\"wI\"+rs.slice(1,5)][\"b\"+Cd.slice(1,e)](n.Y,os,e,e),n.Hc(!0),function(t){var e=t.Ca.La;e instanceof HTMLCanvasElement&&(t.addEventListener(e,\"pointerdown\",t.jk,!1),t.addEventListener(e,\"pointermove\",t.kk,!1),t.addEventListener(e,\"pointerup\",t.mk,!1),t.addEventListener(e,\"pointerout\",t.lk,!1),t.addEventListener(e,\"pointerenter\",t.zz,!1),t.addEventListener(e,\"pointerleave\",t.Az,!1),t.addEventListener(e,\"wheel\",t.gk,!1),t.addEventListener(e,\"keydown\",t.nA,!1),t.addEventListener(e,\"keyup\",t.oA,!1),t.addEventListener(e,\"blur\",t.kz,!1),t.addEventListener(e,\"focus\",t.lz,!1),t.addEventListener(e,\"selectstart\",(function(t){return t.preventDefault(),!1}),!1),t.addEventListener(e,\"contextmenu\",(function(t){return t.preventDefault(),!1}),!1),t.addEventListener(y,\"resize\",t.Zv,!1),E&&t.addEventListener(e,\"touchstart\",(function(t){t.preventDefault()}),!1))}(t)}}function us(t){this.j=void 0===t?new gt:t,this.o=new gt}Pr.className=\"Diagram\",Pr.fromDiv=function(t){var e=t;return\"string\"==typeof t&&(e=y.document.getElementById(t)),e instanceof HTMLDivElement&&e.C instanceof Pr?e.C:null},Pr.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error(\"Used go.Diagram.inherit defining already defined class \\n\"+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},Pr.useDOM=function(t){Eo=!!t&&void 0!==y.document},Pr.isUsingDOM=function(){return Eo},Pr.None=Yo,Pr.Uniform=Go,Pr.UniformToFill=Xo,Pr.CycleAll=Uo,Pr.CycleNotDirected=qo,Pr.CycleNotDirectedFast=Ko,Pr.CycleNotUndirected=Ho,Pr.CycleDestinationTree=Wo,Pr.CycleSourceTree=Zo,Pr.DocumentScroll=Jo,Pr.InfiniteScroll=$o,Pr.TreeParentCollapsed=Qo,Pr.AllParentsCollapsed=ts,Pr.AnyParentsCollapsed=es,as.className=\"DiagramHelper\",f.Object.defineProperties(us.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var cs,fs,ds,ps,gs,ys,ms,vs,xs,bs,ws=\"DraggingInfo\";function ks(t,e,i){this.node=t,this.info=e,this.Wu=i}function Ms(){this.reset()}function Ss(t,e){if(\"string\"==typeof t||y.Element&&t instanceof Element)var i=Pr.call(this,t)||this;else i=Pr.call(this)||this,e=t;return Ps(i),e&&i.xm(e),i}function Ps(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=ie,t.layout=new Nf}function Ns(t,e){if(\"string\"==typeof t||y.Element&&t instanceof Element)var i=Pr.call(this,t)||this;else i=Pr.call(this)||this,e=t;var n=i;i.animationManager.isEnabled=!1,i.qb=!0,i.Ov=null,i.Mn=!1,i.Nn=!1,i.yu=!0,i.xu=!0,i.ct=0,i.$i=!1,i.El=null,i.wy(\"drawShadows\",!1),t=new Jl;var r=new Hh;return r.stroke=\"magenta\",r.strokeWidth=2,r.fill=\"transparent\",r.name=\"BOXSHAPE\",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName=\"BOXSHAPE\",t.locationObjectName=\"BOXSHAPE\",t.resizeObjectName=\"BOXSHAPE\",t.cursor=\"move\",t.add(r),i.Yi=t,i.allowCopy=!1,i.allowDelete=!1,i.allowSelect=!0,i.autoScrollRegion=new Wt(0,0,0,0),i.ja.h(0,0),i.toolManager.Za(\"Dragging\",new Ls,i.toolManager.mouseMoveTools),i.click=function(){var t=n.observed;if(null!==t){var e=t.viewportBounds,i=n.lastInput.documentPoint;t.position=new gt(i.x-e.width/2,i.y-e.height/2)}},i.uw=function(){n.Qa(),Ts(n)},i.tw=function(){null!==n.observed&&(n.Qa(),n.N())},i.ft=function(){1>n.updateDelay?n.N():n.$i||(n.$i=!0,setTimeout((function(){return n.redraw()}),n.updateDelay))},i.sw=function(){null!==n.observed&&Ts(n)},i.autoScale=Go,i.qb=!1,e&&Object.assign(i,e),i}function Cs(t){var e=t.observed;if(null!==e){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,r=e.grid;n&&null!==r&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(yo(e,r=Bt.alloc().assign(t.viewportBounds).Qc(e.viewportBounds)),Bt.free(r),Wr(e));var o=t.vb;o.reset(),1!==t.scale&&o.scale(t.scale),0===t.position.x&&0===t.position.y||o.translate(-t.position.x,-t.position.y),(r=t.Vb).scale(t.dc,t.dc),r.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),o=(e=e.Oa.m).length;for(var s=0;s<o;s++){var a=e[s],h=t;if(a.visible&&0!==a.opacity){var l=a.diagram.grid.part;if(!i&&a.isTemporary)n&&l.layer===a&&(a=Mr(a,r),l.oc(r,h),r.globalAlpha=a);else{for(var u=Mr(a,r),c=h.scale,f=Bt.alloc(),d=a.Ha.m,p=d.length,g=0;g<p;g++){var y=d[g];(n||y!==l)&&a.Di(r,y,h,null,c,f,!1)}Bt.free(f),r.globalAlpha=u}}}}}function Ts(t){var e=t.box;if(null!==e){var i=t.observed;if(null!==i){t.Vc=!0,i=i.viewportBounds;var n=e.selectionObject,r=jt.alloc();r.h(i.width,i.height),n.desiredSize=r,jt.free(r),t=2/t.scale,n instanceof Hh&&(n.strokeWidth=t),e.location=new gt(i.x-t/2,i.y-t/2),e.isSelected=!0}}}function Ls(){Ti.call(this),this.j=null}function As(){tt(this),this.C=vr,this.Ma=this.D=this.o=!0,this.L=this.wa=this.Qb=this.Ba=!1,this.ki=this.j=null,this.rc=1.05,this.Nt=NaN,this.Pw=null,this.qu=NaN,this.pu=qt,this.Gb=!0,this.dg=null,this.Rb=200}function js(t,e,i){if(e.isVisible())return i;if(e instanceof bu)js(t,e.adornedPart,i);else if(e instanceof qu){var n=e.fromNode;null!==n&&js(t,n,i),null!==(e=e.toNode)&&js(t,e,i)}else e instanceof wu&&(null!==(n=e.labeledLink)&&js(t,n,i),null!==(n=e.qg())&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),js(t,n,i))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),js(t,e,i));return i}function Os(t){var e=A();for(t=t.iterator;t.next();){var i=t.value;i instanceof qu||e.push(i)}t=new Q,i=e.length;for(var n=0;n<i;n++){for(var r=e[n],o=!0,s=0;s<i;s++)if(r.Jd(e[s])){o=!1;break}o&&t.add(r)}return j(e),t}function Ds(){tt(this),this.G=4225027,this.mb=1,this.bg=null,this.na=\"\",this.hd=this.Ub=null,this.ja=new gt(NaN,NaN).freeze(),this.Tc=Lt,this.Zf=Mt,this.Yf=Tt,this.vb=new Ye,this.Nh=new Ye,this.Bb=null,this.sa=this.Rk=1,this.zb=0,this.Ee=ps,this.Ug=$t,this.lc=new Bt(NaN,NaN,NaN,NaN).freeze(),this.xb=new Bt(NaN,NaN,NaN,NaN).freeze(),this.uc=new Bt(0,0,NaN,NaN).freeze(),this.P=this.Po=this.Qo=null,this.wk=this.yb=Pe,this.ap=0,this.bp=1,this.Bg=0,this.Ym=1,this.sp=null,this.gp=-1/0,this.zl=0,this.Al=nt,this.Bl=xc,this.Th=\"\",this.fb=this.O=null,this.Ck=-1,this.Dl=this.$a=this.Sh=this.Hl=null,this.Jr=fs,this.ep=this.wg=this.Bj=null}function Fs(t){null===t.O&&(t.O=new aa)}function Bs(t,e,i){var n=t.Ch();if(null!==n)for(var r=t.fb.iterator;r.next();){var o=r.value,s=null;if(null!==o.sourceName){if(null===(s=Nd(o,n,t)))continue;o.zq(t,s,i,null)}else if(o.isToModel){var a=e.diagram;null===a||a.skipsModelSourceBindings||o.zq(t,a.model.modelData,i,n)}else{if(null===(a=n.data))continue;var h=e.diagram;null===h||h.skipsModelSourceBindings||o.zq(t,a,i,n)}s===t&&null!==(a=n.os(o.Xi))&&o.Vv(a,s,i)}}function Is(t,e,i,n){return!1!==t.pickable&&(n.multiply(t.transform),i?t.Lc(e,n):t.Ah(e,n))}function zs(t,e,i,n,r){if(t.xb.h(e,i,n,r),!t.desiredSize.u()){var o=t.lc;e=(i=t.Ug).right+i.left;var s=i.top+i.bottom;switch(i=o.width+e,o=o.height+s,n+=e,r+=s,e=Ys(t,!0),i===n&&o===r&&(e=fs),e){case fs:(i>n||o>r)&&(Js(t,!0),t.measure(i>n?n:i,o>r?r:o,0,0));break;case cs:Js(t,!0),t.measure(n,r,0,0);break;case gs:Js(t,!0),t.measure(n,o,0,0);break;case ys:Js(t,!0),t.measure(i,r,0,0)}}}function Rs(t,e,i,n){var r=t.naturalBounds,o=0,s=0,a=r.width;r=r.height;var h=t.Mw();t instanceof Hh&&(o=(r=t.ma.bounds).x,s=r.y,a=r.width,r=r.height),Es(t,e,t.Ub,!0,!1,i,n),t.Ub instanceof wa&&t.Ub.type===za?(e.beginPath(),e.rect(o-h/2,s-h/2,a+h,r+h),e.yf(t.Ub)):e.fillRect(o-h/2,s-h/2,a+h,r+h)}function Es(t,e,i,n,r,o,s){if(null!==i){var a=1,h=1;if(\"string\"==typeof i)n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===Ba)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var l=0;if(t instanceof Hh&&(l=t.strokeWidth),a=o.width,h=o.height,r?(a=s.width,h=s.height):n||(a+=l,h+=l),(o=e instanceof va)&&i.ne&&(i.type===Ra||i.Fk===a&&i.st===h))var u=i.ne;else{var c=0,f=0,d=0,p=0,g=0,y=0;if(y=g=0,r?(g=s.x,y=s.y):n||(g-=l/2,y-=l/2),c=i.start.x*a+i.start.offsetX,f=i.start.y*h+i.start.offsetY,d=i.end.x*a+i.end.offsetX,p=i.end.y*h+i.end.offsetY,c+=g,d+=g,f+=y,p+=y,i.type===Ia)u=e.createLinearGradient(c,f,d,p);else if(i.type===za)y=isNaN(i.endRadius)?Math.max(a,h)/2:i.endRadius,isNaN(i.startRadius)?(g=0,y=Math.max(a,h)/2):g=i.startRadius,u=e.createRadialGradient(c,f,g,d,p,y);else if(i.type===Ra)try{u=e.createPattern(i.pattern,\"repeat\")}catch(t){u=null}if(i.type!==Ra&&null!==(r=i.colorStops))for(r=r.iterator;r.next();)u.addColorStop(r.key,r.value);if(o&&(i.ne=u,null!==u&&(i.Fk=a,i.st=h),null===u&&i.type===Ra&&-1!==i.Fk)){i.Fk=-1;var m=t.diagram;null!==m&&-1===i.Fk&&x((function(){m.redraw()}),600)}}n?e.fillStyle=u:e.strokeStyle=u}}}function _s(t){if(0!=(2048&t.G)==1){var e=t.vb;if(e.reset(),!t.xb.u()||!t.lc.u())return void Hs(t,!1);if(e.translate(t.xb.x-t.lc.x,t.xb.y-t.lc.y),1!==t.scale||0!==t.angle){var i=t.naturalBounds;t.mp(e,i.x,i.y,i.width,i.height)}Hs(t,!1),Ws(t,!0)}0!=(4096&t.G)==1&&(null===(e=t.panel)?(t.Nh.set(t.vb),t.Rk=t.scale,Ws(t,!1)):null!==e.fe&&((i=t.Nh).reset(),e.je()?i.multiply(e.Nh):null!==e.panel&&i.multiply(e.panel.Nh),i.multiply(t.vb),t.Rk=t.scale*e.Rk,Ws(t,!1)))}function Vs(t){if(!$s(t)){var e=t.panel;null!==e?e.s():t.Qi()&&null!==(e=t.diagram)&&(e.te.add(t),t instanceof wu&&t.rd(),e.Fb()),Qs(t,!0)}}function Ys(t,e){var i=t.stretch,n=t.panel;return null!==n&&n.type===fh.Table?Gs(t,n.getRowDefinition(t.row),n.getColumnDefinition(t.column),e):null!==n&&n.type===fh.Auto&&n.pb()===t?Xs(t,cs,e):i===ps?null!==n?n.type===fh.Spot&&n.pb()===t?Xs(t,cs,e):Xs(t,(i=n.defaultStretch)===ps?fs:i,e):Xs(t,fs,e):Xs(t,i,e)}function Gs(t,e,i,n){var r=t.stretch;if(r!==ps)return Xs(t,r,n);var o=r=null;switch(e.stretch){case ys:case cs:o=!0}switch(i.stretch){case gs:case cs:r=!0}return e=t.panel.defaultStretch,null===r&&(r=e===gs||e===cs),null===o&&(o=e===ys||e===cs),Xs(t,!0===r&&!0===o?cs:!0===r?gs:!0===o?ys:fs,n)}function Xs(t,e,i){if(i)return e;if(e===fs)return fs;if((i=t.desiredSize).u())return fs;if(t=t.angle,!isNaN(i.width))if(90!==t&&270!==t){if(e===gs)return fs;if(e===cs)return ys}else{if(e===ys)return fs;if(e===cs)return gs}if(!isNaN(i.height))if(90!==t&&270!==t){if(e===ys)return fs;if(e===cs)return gs}else{if(e===gs)return fs;if(e===cs)return ys}return e}function Us(t,e){t.G=e?512|t.G:-513&t.G}function qs(t){return 0!=(1024&t.G)}function Ks(t,e){t.G=e?1024|t.G:-1025&t.G}function Hs(t,e){t.G=e?2048|t.G:-2049&t.G}function Ws(t,e){t.G=e?4096|t.G:-4097&t.G}function Zs(t){return 0!=(8192&t.G)}function Js(t,e){t.G=e?8192|t.G:-8193&t.G}function $s(t){return 0!=(16384&t.G)}function Qs(t,e){t.G=e?16384|t.G:-16385&t.G}function ta(t){var e=t.part;if(e instanceof wu&&(null!==t.portId||t===e.port)){var i=e.diagram;null===i||i.undoManager.isUndoingRedoing||Su(e,t)}}function ea(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof fh?t instanceof wu?t.rd():t.Cm(t,(function(t){ta(t)})):ta(t))}function ia(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,r=null;if(\"function\"==typeof t)r=t;else if(\"string\"==typeof t){var o=sa.H(t);\"function\"==typeof o?P(n=o(i=C(arguments)))||w('GraphObject.make invoked object builder \"'+t+'\", but it did not return an Object'):r=y.go[t]}if(null===n&&(null!=r&&r.constructor||w(\"GraphObject.make requires a class function or GoJS class name or name of an object builder, not: \"+t),n=new r),r=1,n instanceof Pr&&1<i.length){o=n;var s=i[1];(\"string\"==typeof s||s instanceof HTMLDivElement)&&(ls(o,s),r++)}for(;r<i.length;r++)void 0===(o=i[r])?w(\"Undefined value at argument \"+r+\" for object being constructed by GraphObject.make: \"+n):na(n,o);return n}function na(t,e){if(\"string\"==typeof e)if(t instanceof rl)t.text=e;else if(t instanceof Hh)t.figure=e;else if(t instanceof Dl)t.source=e;else if(t instanceof fh)null!==(e=Yh.H(e))&&(t.type=e);else if(t instanceof wa){var i=Y(wa,e);null!==i?t.type=i:w(\"Unknown Brush type as an argument to GraphObject.make: \"+e)}else t instanceof Ue?null!==(e=Y(Ue,e))&&(t.type=e):t instanceof ti&&null!==(e=Y(ti,e))&&(t.type=e);else if(e instanceof Ds)t instanceof fh||w(\"A GraphObject can only be added to a Panel, not to: \"+t),t.add(e);else if(e instanceof Gh){var n;e.isRow&&\"function\"==typeof t.getRowDefinition?n=t.getRowDefinition(e.index):e.isRow||\"function\"!=typeof t.getColumnDefinition||(n=t.getColumnDefinition(e.index)),n instanceof Gh?(t=n,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.eg=null===e.separatorPadding?null:e.separatorPadding.I(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.Hj=null,e.separatorDashArray&&(t.Hj=C(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.fb=e.fb):w(\"A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: \"+t)}else if(e instanceof V)\"function\"==typeof t.gb&&t.gb(e);else if(e instanceof Za)t.type=e;else if(e instanceof Pd)t instanceof Ds||t instanceof Gh?t.bind(e):w(\"A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: \"+t);else if(e instanceof yr)t instanceof Ds?t.Rv(e):w(\"An AnimationTrigger can only be applied to a GraphObject, not to: \"+t);else if(e instanceof Qe)t instanceof Ue?t.figures.add(e):w(\"A PathFigure can only be added to a Geometry, not to: \"+t);else if(e instanceof ti)t instanceof Qe?t.segments.add(e):w(\"A PathSegment can only be added to a PathFigure, not to: \"+t);else if(e instanceof rf)t instanceof Pr||t instanceof _u?t.layout=e:w(\"A Layout can only be assigned to a Diagram or a Group, not to: \"+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)na(t,e[i]);else if(\"object\"==typeof e&&null!==e)if(t instanceof wa){for(var r in i=new X,e)n=parseFloat(r),isNaN(n)?i[r]=e[r]:t.addColorStop(n,e[r]);Qr(t,i)}else if(t instanceof Gh){for(i in void 0!==e.row?((null==(r=e.row)||1/0===r||isNaN(r)||0>r)&&w(\"Must specify non-negative integer row for RowColumnDefinition \"+e+\", not: \"+r),t.isRow=!0,t.index=r):void 0!==e.column&&((null==(r=e.column)||1/0===r||isNaN(r)||0>r)&&w(\"Must specify non-negative integer column for RowColumnDefinition \"+e+\", not: \"+r),t.isRow=!1,t.index=r),r=new X,e)\"row\"!==i&&\"column\"!==i&&(r[i]=e[i]);Qr(t,r)}else Qr(t,e);else w('Unknown initializer \"'+e+'\" for object being constructed by GraphObject.make: '+t)}function ra(t,e){sa.add(t,e)}function oa(t,e,i){void 0===i&&(i=null);var n=t[1];if(\"function\"==typeof i?i(n):\"string\"==typeof n)return t.splice(1,1),n;if(void 0===e)throw Error(\"no \"+(\"function\"==typeof i?\"satisfactory\":\"string\")+\" argument for GraphObject builder \"+t[0]);return e}us.className=\"DraggingInfo\",ks.className=\"DraggingNodeInfoPair\",Ms.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new jt(NaN,NaN).freeze(),this.gridSnapCellSpot=ee,this.gridSnapOrigin=new gt(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Ms.className=\"DraggingOptions\",c(Ss,Pr),Ss.prototype.reset=function(){Pr.prototype.reset.call(this),Ps(this)},Ss.className=\"Palette\",c(Ns,Pr),Ns.prototype.computePixelRatio=function(){return 1},Ns.prototype.redraw=function(){if(this.$i&&1<=this.updateDelay){this.$i=!1;var t=this.Ca,e=this.Vb;if(null!==t&&null!==e){if(io(this),null===this.El){var i=new ma(null);i.width=t.width,i.height=t.height,this.El=i}try{this.Ca=this.El,this.Vb=this.Ca.context,this.Vb.Hc(!0),this.Vb.setTransform(1,0,0,1,0,0),this.Vb.clearRect(0,0,this.Ca.width,this.Ca.height),Cs(this)}finally{this.Ca=t,this.Vb=e}}}Pr.prototype.redraw.call(this)},Ns.prototype.oc=function(){if(null===this.Ga&&w(\"No div specified\"),null===this.Ca&&w(\"No canvas specified\"),!(this.Ca instanceof ua)&&($l(this.box),this.Vc)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.Oi){io(this);var e=this.Ca;(t=this.Vb).Hc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?Cs(this):null!==this.El&&(t.drawImage(this.El.La,0,0),(e=this.vb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.dc,this.dc),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var i=(e=this.Oa.m).length,n=0;n<i;n++)e[n].oc(t,this);this.Vc=this.lj=!1}}},Ns.prototype.computeBounds=function(){var t=this.observed;if(null===t)return qt;var e=t.documentBounds.copy();return e.Qc(t.viewportBounds),e},Ns.prototype.invalidateViewport=function(){!0!==this.Vc&&(this.Vc=!0,this.Fb())},Ns.prototype.onViewportBoundsChanged=function(t,e,i,n){this.qb||(eo(this),this.N(),to(this),this.Qa(),Ts(this),this.dd.scale=i,this.dd.position.x=t.x,this.dd.position.y=t.y,this.dd.bounds.assign(t),this.dd.by=n,this.S(\"ViewportBoundsChanged\",this.dd,t))},f.Object.defineProperties(Ns.prototype,{observed:{get:function(){return this.Ov},set:function(t){var e=this.Ov;if(t instanceof Ns&&w(\"Overview.observed Diagram may not be an Overview itself: \"+t),e!==t){if(null!==e&&(this.remove(this.box),e.km(\"ViewportBoundsChanged\",this.uw),e.km(\"DocumentBoundsChanged\",this.tw),e.km(\"InvalidateDraw\",this.ft),e.km(\"AnimationFinished\",this.sw)),this.Ov=t,null!==t&&(t.Lj(\"ViewportBoundsChanged\",this.uw),t.Lj(\"DocumentBoundsChanged\",this.tw),t.Lj(\"InvalidateDraw\",this.ft),t.Lj(\"AnimationFinished\",this.sw),this.add(this.box)),this.Qa(),null===t){this.El=null;var i=this.Ca,n=this.Vb;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.ft(null),Ts(this),this.N();this.g(\"observed\",e,t)}}},box:{get:function(){return this.Yi},set:function(t){var e=this.Yi;e!==t&&(this.Yi=t,this.remove(e),this.add(this.Yi),Ts(this),this.g(\"box\",e,t))}},drawsTemporaryLayers:{get:function(){return this.yu},set:function(t){this.yu!==t&&(this.yu=t,this.redraw())}},drawsGrid:{get:function(){return this.xu},set:function(t){this.xu!==t&&(this.xu=t,this.redraw())}},updateDelay:{get:function(){return this.ct},set:function(t){0>t&&(t=0),this.ct!==t&&(this.ct=t)}}}),Ns.className=\"Overview\",c(Ls,Ti),Ls.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var i=t.lastInput;return!(!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(i=e.viewportBounds,this.j=new gt(i.width/2,i.height/2),t=t.firstInput.documentPoint,e.position=new gt(t.x-this.j.x,t.y-this.j.y)),0))},Ls.prototype.doActivate=function(){this.j=null,Ti.prototype.doActivate.call(this)},Ls.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},Ls.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var i=t.box;if(null!==i){if(null===this.j){var n=t.firstInput.documentPoint;i=i.location,this.j=new gt(n.x-i.x,n.y-i.y)}t=t.lastInput.documentPoint,e.position=new gt(t.x-this.j.x,t.y-this.j.y)}}},Ls.className=\"OverviewDraggingTool\",As.prototype.toString=function(){return\"CommandHandler\"},As.prototype.Ne=function(t){this.C=t},As.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=E?e.meta:e.control,n=e.shift,r=e.alt,o=e.key;!i||\"C\"!==o&&\"Insert\"!==o?i&&\"X\"===o||n&&\"Del\"===o?this.canCutSelection()&&this.cutSelection():i&&\"V\"===o||n&&\"Insert\"===o?this.canPasteSelection()&&this.pasteSelection():i&&\"Y\"===o||r&&n&&\"Backspace\"===o?this.canRedo()&&this.redo():i&&\"Z\"===o||r&&\"Backspace\"===o?this.canUndo()&&this.undo():\"Del\"===o||\"Backspace\"===o?this.canDeleteSelection()&&this.deleteSelection():i&&\"A\"===o?this.canSelectAll()&&this.selectAll():\"Esc\"===o?this.canStopCommand()&&this.stopCommand():\"Up\"===o?t.allowVerticalScroll&&(i?t.scroll(\"pixel\",\"up\"):t.scroll(\"line\",\"up\")):\"Down\"===o?t.allowVerticalScroll&&(i?t.scroll(\"pixel\",\"down\"):t.scroll(\"line\",\"down\")):\"Left\"===o?t.allowHorizontalScroll&&(i?t.scroll(\"pixel\",\"left\"):t.scroll(\"line\",\"left\")):\"Right\"===o?t.allowHorizontalScroll&&(i?t.scroll(\"pixel\",\"right\"):t.scroll(\"line\",\"right\")):\"PageUp\"===o?n&&t.allowHorizontalScroll?t.scroll(\"page\",\"left\"):t.allowVerticalScroll&&t.scroll(\"page\",\"up\"):\"PageDown\"===o?n&&t.allowHorizontalScroll?t.scroll(\"page\",\"right\"):t.allowVerticalScroll&&t.scroll(\"page\",\"down\"):\"Home\"===o?i&&t.allowVerticalScroll?t.scroll(\"document\",\"up\"):!i&&t.allowHorizontalScroll&&t.scroll(\"document\",\"left\"):\"End\"===o?i&&t.allowVerticalScroll?t.scroll(\"document\",\"down\"):!i&&t.allowHorizontalScroll&&t.scroll(\"document\",\"right\"):\" \"===o?this.canScrollToPart()&&this.scrollToPart():\"Subtract\"===o?this.canDecreaseZoom()&&this.decreaseZoom():\"Add\"===o?this.canIncreaseZoom()&&this.increaseZoom():i&&\"0\"===o?this.canResetZoom()&&this.resetZoom():n&&\"Z\"===o?this.canZoomToFit()&&this.zoomToFit():i&&!n&&\"G\"===o?this.canGroupSelection()&&this.groupSelection():i&&n&&\"G\"===o?this.canUngroupSelection()&&this.ungroupSelection():\"F2\"===o||e.event&&\"F2\"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():\"ContextMenu\"===o||e.event&&\"ContextMenu\"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},As.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},As.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof bi&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},As.prototype.canStopCommand=function(){return!0},As.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor=\"wait\",t.S(\"ChangingSelection\",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.S(\"ChangedSelection\",t.selection),t.currentCursor=\"\"}},As.prototype.canSelectAll=function(){return this.diagram.allowSelect},As.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor=\"wait\",t.S(\"ChangingSelection\",t.selection),t.xa(\"Delete\"),t.S(\"SelectionDeleting\",t.selection);for(var e=new Q,i=t.selection.iterator;i.next();)vu(e,i.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,(function(t){return t.canDelete()}));t.Ps(e,!0),t.S(\"SelectionDeleted\",e)}finally{t.Xa(\"Delete\"),t.S(\"ChangedSelection\",t.selection),t.currentCursor=\"\"}},As.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},As.prototype.copySelection=function(){var t=this.diagram,e=new Q;for(t=t.selection.iterator;t.next();)vu(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,(function(t){return t.canCopy()}));this.copyToClipboard(e)},As.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},As.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},As.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},As.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(null===t)_o=null,Vo=\"\";else{i=e.model;var n=!1,r=!1,o=null;try{i.dm()&&(n=i.Sj,i.Sj=this.copiesParentKey),i.bk()&&(r=i.Rj,i.Rj=this.copiesGroupKey),o=e.Tj(t,null,!0)}finally{i.dm()&&(i.Sj=n),i.bk()&&(i.Rj=r),(i=new J).addAll(o),_o=i,Vo=e.model.dataFormat}}e.S(\"ClipboardChanged\",i)},As.prototype.pasteFromClipboard=function(){var t=new Q,e=_o;if(null===e)return t;var i=this.diagram;if(Vo!==i.model.dataFormat)return t;var n=i.model,r=!1,o=!1,s=null;try{n.dm()&&(r=n.Sj,n.Sj=this.copiesParentKey),n.bk()&&(o=n.Rj,n.Rj=this.copiesGroupKey),s=i.Tj(e,i,!1)}finally{for(n.dm()&&(n.Sj=r),n.bk()&&(n.Rj=o),e=s.iterator;e.next();)i=e.value,n=e.key,i.location.u()||(n.location.u()?i.location=n.location:!i.position.u()&&n.position.u()&&(i.position=n.position)),t.add(i)}return t},As.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor=\"wait\",e.S(\"ChangingSelection\",e.selection),e.xa(\"Paste\");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(null!==t){var r=e.computePartsBounds(e.selection);r.u()&&ao(e,this.computeEffectiveCollection(e.selection,e.on),new gt(t.x-r.centerX,t.y-r.centerY),e.on,!1)}e.S(\"ClipboardPasted\",i)}finally{e.Xa(\"Paste\"),e.S(\"ChangedSelection\",e.selection),e.currentCursor=\"\"}},As.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===_o||0===_o.count||Vo!==t.model.dataFormat)},As.prototype.undo=function(){this.diagram.undoManager.undo()},As.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},As.prototype.redo=function(){this.diagram.undoManager.redo()},As.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},As.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Yo&&((t=e.scale*t)<e.minScale||t>e.maxScale||(e.scale=t))},As.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===Yo&&!((t=e.scale*t)<e.minScale||t>e.maxScale)&&e.allowZoom},As.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Yo&&((t=e.scale*t)<e.minScale||t>e.maxScale||(e.scale=t))},As.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===Yo&&!((t=e.scale*t)<e.minScale||t>e.maxScale)&&e.allowZoom},As.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},As.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},As.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.qc(),t.redraw();var i=t.position,n=t.scale;Kn(e,\"Zoom To Fit\"),this.isZoomToFitRestoreEnabled&&n===this.qu&&!isNaN(this.Nt)&&t.documentBounds.A(this.pu)?(t.scale=this.Nt,t.position=this.Pw,this.qu=NaN,this.pu=qt):(this.Nt=n,this.Pw=i.copy(),t.zoomToFit(),this.qu=t.scale,this.pu=t.documentBounds.copy()),Hn(e)},As.prototype.canZoomToFit=function(){return this.diagram.allowZoom},As.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Ta(),null===t){try{null!==this.dg&&(this.dg.next()?t=this.dg.value:this.dg=null)}catch(t){this.dg=null}null===t&&(0<e.highlighteds.count?this.dg=e.highlighteds.iterator:0<e.selection.count&&(this.dg=e.selection.iterator),null!==this.dg&&this.dg.next()&&(t=this.dg.value))}if(null!==t){var i=e.animationManager;Kn(i,\"Scroll To Part\");var n=this.scrollToPartPause;if(0<n){var r=js(this,t,[t]);if(1===r.length)e.xa(),e.ks(t.actualBounds),e.Xa(\"Scroll To Part\");else{var o=function(){e.xa();for(var t=r.pop();0<r.length&&t instanceof wu&&t.isTreeExpanded&&(!(t instanceof _u)||t.isSubGraphExpanded);)t=r.pop();0<r.length?(t instanceof Jl&&e.Fv(t.actualBounds),t instanceof wu&&!t.isTreeExpanded&&(t.isTreeExpanded=!0),t instanceof _u&&!t.isSubGraphExpanded&&(t.isSubGraphExpanded=!0)):(t instanceof Jl&&e.ks(t.actualBounds),e.km(\"LayoutCompleted\",s)),e.Xa(\"Scroll To Part\")},s=function(){x(o,(i.isEnabled?i.duration:0)+n)};e.Lj(\"LayoutCompleted\",s),o()}}else{var a=e.position.copy();e.ks(t.actualBounds),a.Ua(e.position)&&i.qc()}}},As.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof Jl)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},As.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa(\"Collapse Tree\"),Kn(e.animationManager,\"Collapse Tree\");var i=new J;if(null!==t&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof wu&&r.isTreeExpanded&&(r.collapseTree(),i.add(r))}e.S(\"TreeCollapsed\",i)}finally{e.Xa(\"Collapse Tree\")}},As.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof wu&&t.isTreeExpanded))return!1;if(0<t.Xp().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof wu&&e.isTreeExpanded&&0<e.Xp().count)return!0;return!1},As.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa(\"Expand Tree\"),Kn(e.animationManager,\"Expand Tree\");var i=new J;if(null===t||t.isTreeExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof wu&&!r.isTreeExpanded&&(r.expandTree(),i.add(r))}}else t.expandTree(),i.add(t);e.S(\"TreeExpanded\",i)}finally{e.Xa(\"Expand Tree\")}},As.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof wu)||t.isTreeExpanded)return!1;if(0<t.Xp().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof wu&&!e.isTreeExpanded&&0<e.Xp().count)return!0;return!1},As.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.ck()){var i=this.archetypeGroupData;if(null!==i){var n=null;try{t.currentCursor=\"wait\",t.S(\"ChangingSelection\",t.selection),t.xa(\"Group\");for(var r=new J,o=t.selection.iterator;o.next();){var s=o.value;s.Mc()&&s.canGroup()&&r.add(s)}for(var a=new J,h=r.iterator;h.next();){var l=h.value;o=!1;for(var u=r.iterator;u.next();)if(l.Jd(u.value)){o=!0;break}o||a.add(l)}if(0<a.count){var c=a.first().containingGroup;if(null!==c)for(;null!==c;){r=!1;for(var f=a.iterator;f.next();)if(!f.value.Jd(c)){r=!0;break}if(!r)break;c=c.containingGroup}if(i instanceof _u)jh(i),null!==(n=i.copy())&&t.add(n);else if(e.dv(i)){var d=e.copyNodeData(i);P(d)&&(e.sf(d),n=t.Gi(d))}if(null!==n){null!==c&&this.isValidMember(c,n)&&(n.containingGroup=c);for(var p=a.iterator;p.next();){var g=p.value;this.isValidMember(n,g)&&(g.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.S(\"SelectionGrouped\",n)}finally{t.Xa(\"Group\"),t.S(\"ChangedSelection\",t.selection),t.currentCursor=\"\"}}}},As.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.ck()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Mc()&&e.canGroup())return!0}return!1},As.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof qu)return!1;if(null!==t){if(t===e||t.Jd(e))return!1;var i=t.memberValidation;if(null!==i&&!i(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(i=this.memberValidation)||i(t,e)},As.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.model;if(i.ck())try{e.currentCursor=\"wait\",e.S(\"ChangingSelection\",e.selection),e.xa(\"Ungroup\");var n=new J;if(null!==t)n.add(t);else for(var r=e.selection.iterator;r.next();){var o=r.value;o instanceof _u&&o.canUngroup()&&n.add(o)}var s=new J;if(0<n.count){e.clearSelection(!0);for(var a=n.iterator;a.next();){var h=a.value;h.expandSubGraph();var l=h.containingGroup,u=null!==l&&null!==l.data?i.pa(l.data):void 0;s.addAll(h.memberParts);for(var c=s.iterator;c.next();){var f=c.value;if(f.isSelected=!0,!(f instanceof qu)){var d=f.data;null!==d?i.tq(d,u):f.containingGroup=l}}e.remove(h)}}e.S(\"SelectionUngrouped\",n,s)}finally{e.Xa(\"Ungroup\"),e.S(\"ChangedSelection\",e.selection),e.currentCursor=\"\"}},As.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.ck())return!1;if(null!==t){if(!(t instanceof _u))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof _u&&e.canUngroup())return!0;return!1},As.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=Os(t).iterator;t.next();){var n=t.value;null!==n.containingGroup&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},As.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa(\"Collapse SubGraph\"),Kn(e.animationManager,\"Collapse SubGraph\");var i=new J;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof _u&&r.isSubGraphExpanded&&(r.collapseSubGraph(),i.add(r))}e.S(\"SubGraphCollapsed\",i)}finally{e.Xa(\"Collapse SubGraph\")}},As.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof _u&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof _u&&e.isSubGraphExpanded)return!0;return!1},As.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa(\"Expand SubGraph\"),Kn(e.animationManager,\"Expand SubGraph\");var i=new J;if(null===t||t.isSubGraphExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof _u&&!r.isSubGraphExpanded&&(r.expandSubGraph(),i.add(r))}}else t.expandSubGraph(),i.add(t);e.S(\"SubGraphExpanded\",i)}finally{e.Xa(\"Expand SubGraph\")}},As.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof _u&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof _u&&!e.isSubGraphExpanded)return!0;return!1},As.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.toolManager.findTool(\"TextEditing\");if(null!==i){if(null===t){t=null;for(var n=e.selection.iterator;n.next();){var r=n.value;if(r.canEdit()){t=r;break}}if(null===t)return;t=t.Yl((function(t){return t instanceof rl&&t.editable}))}null!==t&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},As.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool(\"TextEditing\"))return!1;if(null!==t){if(!(t instanceof rl))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.Yl((function(t){return t instanceof rl&&t.editable}))))return!0;return!1},As.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool(\"ContextMenu\");if(null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=i.findObjectWithContextMenu(t)))){var n=e.lastInput,r=null;t instanceof Ds?r=t.da(oe):e.viewportBounds.$(n.documentPoint)||(r=new gt((r=e.viewportBounds).x+r.width/2,r.y+r.height/2)),null!==r&&(n.viewPoint=e.vq(r),n.documentPoint=r,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,Pn(i,!1,t)}},As.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool(\"ContextMenu\");return null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==i.findObjectWithContextMenu(t))},As.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool(\"Dragging\"),r=i.currentTool===n;if(void 0===e&&(e=r?n.dragOptions:i.on),n=new pt,null===t)return n;for(var o=t.iterator;o.next();)so(i,n,o.value,r,e);if(null!==i.draggedLink&&e.dragsLink)return n;for(o=t.iterator;o.next();)(t=o.value)instanceof qu&&((null===(e=t.fromNode)||n.contains(e))&&(null===(e=t.toNode)||n.contains(e))||n.remove(t));return n},f.Object.defineProperties(As.prototype,{diagram:{get:function(){return this.C}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.D},set:function(t){this.D=t}},deletesConnectedLinks:{get:function(){return this.Ma},set:function(t){this.Ma=t}},copiesTree:{get:function(){return this.Ba},set:function(t){this.Ba=t}},deletesTree:{get:function(){return this.Qb},set:function(t){this.Qb=t}},copiesParentKey:{get:function(){return this.wa},set:function(t){this.wa=t}},copiesGroupKey:{get:function(){return this.L},set:function(t){this.L=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.ki},set:function(t){this.ki=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.rc},set:function(t){1<t||w(\"zoomFactor must be larger than 1.0, not: \"+t),this.rc=t}},isZoomToFitRestoreEnabled:{get:function(){return this.Gb},set:function(t){this.Gb=t}},scrollToPartPause:{get:function(){return this.Rb},set:function(t){this.Rb=t}}}),As.className=\"CommandHandler\",Tr=function(){return new As},Ds.prototype.cloneProtected=function(t){t.G=6144|this.G,t.mb=this.mb,t.na=this.na,t.Ub=this.Ub,t.hd=this.hd,t.wg=this.wg,t.ja.assign(this.ja),t.Tc=this.Tc.I(),t.Zf=this.Zf.I(),t.Yf=this.Yf.I(),null!==this.Bb?t.Bb=this.Bb.copy():t.Bb=null,t.sa=this.sa,t.zb=this.zb,t.Ee=this.Ee,t.Ug=this.Ug.I(),t.lc.assign(this.lc),t.xb.assign(this.xb),t.uc.assign(this.uc),t.Po=this.Po,null!==this.P&&(t.P=this.P.copy()),t.yb=this.yb.I(),t.wk=this.wk.I(),t.ap=this.ap,t.bp=this.bp,t.Bg=this.Bg,t.Ym=this.Ym,t.sp=this.sp,t.gp=this.gp,t.zl=this.zl,t.Al=this.Al.I(),t.Bl=this.Bl,t.Th=this.Th,null!==this.O&&(t.O=this.O.copy()),t.fb=this.fb,t.Ck=this.Ck,null!==this.Sh&&(t.Sh=C(this.Sh)),null!==this.$a&&(t.$a=this.$a.copy()),t.Dl=this.Dl},Ds.prototype.sx=function(t){var e=this.Sh;if(N(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.Sh=e=[];e.push(t)},Ds.prototype.wf=function(t){t.Qo=null,t.Bj=null,t.s()},Ds.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.Sh)for(var e=0;e<this.Sh.length;e++){var i=this.Sh[e];t[i]=this[i]}return t},Ds.prototype.copy=function(){return this.clone()},(e=Ds.prototype).gb=function(t){t.classType===qu?0===t.name.indexOf(\"Orient\")?this.segmentOrientation=t:w(\"Unknown Link enum value for GraphObject.segmentOrientation property: \"+t):t.classType===Ds&&(this.stretch=t)},e.toString=function(){return O(this.constructor)+\"#\"+it(this)},e.Kc=function(){if(null===this.P){var t=new nf;t.Og=te,t.th=te,t.Mg=10,t.rh=10,t.Ng=0,t.sh=0,this.P=t}},e.Wa=function(t,e,i,n,r,o,s){var a=this.part;if(null!==a&&(a.nk(t,e,i,n,r,o,s),i===this&&t===di&&qs(this)&&Bs(this,a,e),o=this.diagram,null===this.wg||null===o||!o.Oi||o.undoManager.isUndoingRedoing||o.animationManager.Tm||null!==(t=this.wg.get(e))&&o.animationManager.isEnabled&&!o.animationManager.isTicking&&(null===this.ep&&(this.ep=new pt),s=0===o.undoManager.transactionLevel,t.startCondition===br?s=!0:t.startCondition===wr&&(s=!1),s?(function(t,e){null!==(t=t.yk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,o=new ar),null!==(s=this.ep.get(t))&&s.stop(),this.ep.add(t,o),o.nu=this,o.kx=t,o.add(this,e,n,r),o.start()):(Kn(o.animationManager,\"Trigger\"),o.animationManager.defaultAnimation.add(this,e,n,r))),this instanceof fh&&i===a&&0!=(16777216&a.G)&&null!==a.data))for(n=(i=this.T.m).length,r=0;r<n;r++)(a=i[r])instanceof fh&&vh(a,(function(t){null!==t.data&&0!=(16777216&t.G)&&t.Fa(e)}))},e.os=function(t){return this.Ck===t?this:null},e.g=function(t,e,i){this.Wa(di,t,this,e,i)},e.xe=function(t,e,i,n){var r=this.lc;if(r.h(t,e,i,n),1!==this.sa||0!==this.zb){null===this.Bb&&(this.Bb=new Ye);var o=this.Bb;o.reset(),this.mp(o,t,e,i,n),o.wq(r)}},e.Ox=function(t,e,i){if(!1===this.pickable)return!1;var n=this.naturalBounds;return e=t.xf(e),i?bt(t.x,t.y,0,0,0,n.height)<=e||bt(t.x,t.y,0,n.height,n.width,n.height)<=e||bt(t.x,t.y,n.width,n.height,n.width,0)<=e||bt(t.x,t.y,n.width,0,0,0)<=e:t.pd(0,0)<=e&&t.pd(0,n.height)<=e&&t.pd(n.width,0)<=e&&t.pd(n.width,n.height)<=e},e.je=function(){return!0},e.$=function(t){var e=gt.alloc();e.assign(t),this.transform.Aa(e);var i=this.actualBounds;if(!i.u())return gt.free(e),!1;var n=this.diagram;if(null!==n&&n.Mt){var r=n.am(\"extraTouchThreshold\"),o=n.am(\"extraTouchArea\"),s=o/2,a=this.naturalBounds,h=1/(n=this.Af()*n.scale);if(a.width*n<r&&a.height*n<r)return t=Xt(i.x-s*h,i.y-s*h,i.width+o*h,i.height+o*h,e.x,e.y),gt.free(e),t}return r=!1,(this instanceof bu||this instanceof Hh?Xt(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.$(e))&&(r=!(this.$a&&!this.$a.$(e))&&(!(null===this.hd||!i.$(e))||!(null===this.Ub||!this.uc.$(t))||this.Bh(t))),gt.free(e),r},e.Bh=function(t){var e=this.naturalBounds;return Xt(0,0,e.width,e.height,t.x,t.y)},e.Ge=function(t){if(0===this.angle)return this.actualBounds.Ge(t);var e=this.naturalBounds;e=Bt.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,r=gt.allocAt(t.x,t.y);return e.$(i.Hd(r))&&(r.h(t.x,t.bottom),e.$(i.Hd(r))&&(r.h(t.right,t.bottom),e.$(i.Hd(r))&&(r.h(t.right,t.y),e.$(i.Hd(r))&&(n=!0)))),gt.free(r),Bt.free(e),n},e.Ah=function(t,e){if(void 0===e)return t.Ge(this.actualBounds);var i=this.naturalBounds,n=!1,r=gt.allocAt(0,0);return t.$(e.Aa(r))&&(r.h(0,i.height),t.$(e.Aa(r))&&(r.h(i.width,i.height),t.$(e.Aa(r))&&(r.h(i.width,0),t.$(e.Aa(r))&&(n=!0)))),gt.free(r),n},e.Lc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Lc(this.actualBounds);var i=this.naturalBounds,n=gt.allocAt(0,0),r=gt.allocAt(0,i.height),o=gt.allocAt(i.width,i.height),s=gt.allocAt(i.width,0),a=!1;if(t.$(e.Aa(n))||t.$(e.Aa(r))||t.$(e.Aa(o))||t.$(e.Aa(s)))a=!0;else{i=Bt.allocAt(0,0,i.width,i.height);var h=gt.allocAt(t.x,t.y);i.$(e.Hd(h))?a=!0:(h.h(t.x,t.bottom),i.$(e.Hd(h))?a=!0:(h.h(t.right,t.bottom),i.$(e.Hd(h))?a=!0:(h.h(t.right,t.y),i.$(e.Hd(h))&&(a=!0)))),gt.free(h),Bt.free(i),!a&&(Xe.ys(t,n,r)||Xe.ys(t,r,o)||Xe.ys(t,o,s)||Xe.ys(t,s,n))&&(a=!0)}return gt.free(n),gt.free(r),gt.free(o),gt.free(s),a},e.da=function(t,e){if(void 0===e&&(e=new gt),t instanceof ze){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.fe.Aa(e),e},e.Li=function(t){void 0===t&&(t=new Bt);var e=this.naturalBounds,i=this.fe,n=gt.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Gt(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Gt(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Gt(t,n.x,n.y,0,0),gt.free(n),t},e.Ki=function(){var t=this.fe;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},e.Af=function(){if(0!=(4096&this.G)==0)return this.Rk;var t=this.sa;return null!==this.panel?t*this.panel.Af():t},e.us=function(t,e){return void 0===e&&(e=new gt),e.assign(t),this.fe.Hd(e),e},e.vs=function(t,e,i){return this.Zj(t.x,t.y,e.x,e.y,i)},e.Zj=function(t,e,i,n,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),a=o.m22*s,h=-o.m12*s,l=-o.m21*s,u=o.m11*s,c=s*(o.m21*o.dy-o.m22*o.dx),f=s*(o.m12*o.dx-o.m11*o.dy);return null!==this.areaBackground?(o=this.actualBounds,Xe.Cf(o.left,o.top,o.right,o.bottom,t,e,i,n,r)):(s=t*a+e*l+c,t=t*h+e*u+f,e=i*a+n*l+c,i=i*h+n*u+f,r.h(0,0),n=this.naturalBounds,i=Xe.Cf(0,0,n.width,n.height,s,t,e,i,r),r.transform(o),i)},Ds.prototype.measure=function(t,e,i,n){if(!1!==Zs(this)){var r=this.Ug,o=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-o,0),e=Math.max(e-r,0),i=Math.max((i||0)-o,0),n=Math.max((n||0)-r,0),o=this.angle,r=this.desiredSize;var s=0;this instanceof Hh&&(s=this.strokeWidth),90===o||270===o?(t=isFinite(r.height)?r.height+s:t,e=isFinite(r.width)?r.width+s:e):(t=isFinite(r.width)?r.width+s:t,e=isFinite(r.height)?r.height+s:e),r=i||0,s=n||0;var a=this instanceof fh;switch(Ys(this,!0)){case fs:s=r=0,a&&(e=t=1/0);break;case cs:isFinite(t)&&t>i&&(r=t),isFinite(e)&&e>n&&(s=e);break;case gs:isFinite(t)&&t>i&&(r=t),s=0,a&&(e=1/0);break;case ys:isFinite(e)&&e>n&&(s=e),r=0,a&&(t=1/0)}a=this.maxSize;var h=this.minSize;r>a.width&&h.width<a.width&&(r=a.width),s>a.height&&h.height<a.height&&(s=a.height),i=Math.max(r/this.scale,h.width),n=Math.max(s/this.scale,h.height),a.width<i&&(i=Math.min(h.width,i)),a.height<n&&(n=Math.min(h.height,n)),t=Math.min(a.width,t),e=Math.min(a.height,e),t=Math.max(i,t),e=Math.max(n,e),90!==o&&270!==o||(o=t,t=e,e=o,o=i,i=n,n=o),this.lc.ea(),this.gm(t,e,i,n),this.lc.freeze(),this.lc.u()||w(\"Non-real measuredBounds has been set. Object \"+this+\", measuredBounds: \"+this.lc.toString()),Js(this,!1)}},Ds.prototype.gm=function(){},Ds.prototype.Qi=function(){return!1},Ds.prototype.arrange=function(t,e,i,n,r){this.bl();var o=Bt.alloc();o.assign(this.xb),this.xb.ea(),!1===$s(this)?this.xb.h(t,e,i,n):this.zh(t,e,i,n),this.xb.freeze(),this.$a=void 0===r?null:r,i=!1,void 0!==r?i=!0:(null===(r=this.panel)||r.type!==fh.TableRow&&r.type!==fh.TableColumn||(r=r.panel),null!==r&&(r=r.uc,n=this.measuredBounds,null!==this.areaBackground&&(n=this.xb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=r.width+.05&&0<=e+.05&&i<=r.height+.05),this instanceof rl&&(t=this.naturalBounds,this.vr>t.height||this.sb>t.width))&&(i=!0)),this.G=i?256|this.G:-257&this.G,this.xb.u()||w(\"Non-real actualBounds has been set. Object \"+this+\", actualBounds: \"+this.xb.toString()),this.hm(o,this.xb),Qs(this,!1),Bt.free(o)},(e=Ds.prototype).zh=function(){},e.hm=function(t,e){var i=this.part;null!==i&&null!==i.diagram&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||cu(i,!0),this.N(),Et(t,e)||(i.Gh(),this.Eo(i)))},e.Eo=function(t){null!==this.portId&&(cu(t,!0),t instanceof wu&&Su(t,this))},e.oc=function(t,e){if(this.visible){var i=this.opacity;if(0!==i){var n=this instanceof fh&&(this.type===fh.TableRow||this.type===fh.TableColumn),r=this.xb;if(n||0!==r.width&&0!==r.height&&!isNaN(r.x)&&!isNaN(r.y)){var o=1;if(1!==i&&(o=t.globalAlpha,t.globalAlpha=o*i),n){r=this.xb,n=this.uc;var s=this.hd,a=this.Ub;null===s&&null===a||t.Ed(),null!==s&&(Es(this,t,s,!0,!0,n,r),s instanceof wa&&s.type===za?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.yf(s)):t.fillRect(r.x,r.y,r.width,r.height)),null!==a&&(Es(this,t,a,!0,!1,n,r),a instanceof wa&&a.type===za?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.yf(a)):t.fillRect(r.x,r.y,r.width,r.height)),this.Ei(t,e)}else if(!this.Jx(t,e)){this instanceof qu&&this.fk(!1),n=this.transform,s=this.panel,0!=(4096&this.G)==1&&_s(this);var h=this.part;a=!1;var l,u=0;if(h&&e.Ie(\"drawShadows\")&&(a=h.isShadowed)){var c=h.shadowOffset;u=Math.max(c.y,c.x)*e.scale*e.dc}if(c=this.Qi(),!(l=e.nj||!c)){var f,d=this.naturalBounds,p=(l=this.Nh).m11,g=l.m21,y=l.dx,m=l.m12,v=l.m22,x=l.dy,b=f=0;l=f*p+b*g+y;var w=f*m+b*v+x,k=(f=d.width+u)*p+(b=0)*g+y;f=f*m+b*v+x,b=Math.min(l,k);var M=Math.min(w,f),S=Math.max(l+0,k)-b,P=Math.max(w+0,f)-M;l=b,w=M,k=(f=d.width+u)*p+(b=d.height+u)*g+y,f=f*m+b*v+x,b=Math.min(l,k),M=Math.min(w,f),S=Math.max(l+S,k)-b,P=Math.max(w+P,f)-M,l=b,w=M,k=(f=0)*p+(b=d.height+u)*g+y,f=f*m+b*v+x,b=Math.min(l,k),M=Math.min(w,f),S=Math.max(l+S,k)-b,P=Math.max(w+P,f)-M,l=b,w=M,d=(u=e.viewportBounds).x,p=u.y,l=!(l>u.width+d||d>S+l||w>u.height+p||p>P+w)}if(l){if(l=0!=(256&this.G),t.clipInsteadOfFill&&(l=!1),this instanceof rl&&(t.font=this.font),l){if(w=s.je()?s.naturalBounds:s.actualBounds,null!==this.$a?(S=(d=this.$a).x,P=d.y,u=d.width,d=d.height):(S=Math.max(r.x,w.x),P=Math.max(r.y,w.y),u=Math.min(r.right,w.right)-S,d=Math.min(r.bottom,w.bottom)-P),S>r.width+r.x||r.x>w.width+w.x)return void(1!==i&&(t.globalAlpha=o));t.save(),t.beginPath(),t.rect(S,P,u,d),t.clip()}if(c){if(!h.isVisible())return void(1!==i&&(t.globalAlpha=o));a&&(w=h.shadowOffset,t.Mv(w.x*e.scale*e.dc,w.y*e.scale*e.dc,h.shadowBlur),ya(t),t.shadowColor=h.shadowColor)}a&&!0===this.shadowVisible?ya(t):a&&!1===this.shadowVisible&&ga(t),h=this.naturalBounds,null!==this.hd&&(t.Ed(),Es(this,t,this.hd,!0,!0,h,r),this.hd instanceof wa&&this.hd.type===za?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.yf(this.hd)):t.fillRect(r.x,r.y,r.width,r.height)),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),a&&(null!==s&&0!=(512&s.G)||null!==s&&(s.type===fh.Auto||s.type===fh.Spot)&&s.pb()!==this)&&null===this.shadowVisible&&ga(t),null!==this.Ub&&(t.Ed(),Rs(this,t,h,r)),a&&(null!==this.Ub||null!==this.hd||null!==s&&0!=(512&s.G)||null!==s&&(s.type===fh.Auto||s.type===fh.Spot)&&s.pb()!==this)?(Us(this,!0),null===this.shadowVisible&&ga(t)):Us(this,!1),this.Ei(t,e),a&&0!=(512&this.G)==1&&ya(t),c&&a&&ga(t),l&&(t.restore(),t.Hc(this instanceof fh)),n.Bs()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))}}1!==i&&(t.globalAlpha=o)}}}},e.Jx=function(){return!1},e.Ei=function(){},e.rg=function(t){if(t instanceof fh)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},e.Ff=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.Ff()},e.Ef=function(){for(var t=this instanceof fh?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},e.mp=function(t,e,i,n,r){if(1!==this.sa&&t.scale(this.sa),0!==this.zb){var o=gt.alloc();o.Ui(e,i,n,r,oe),t.rotate(this.zb,o.x,o.y),gt.free(o)}},e.s=function(t){if(!Zs(this)){void 0===t&&(t=!1),Js(this,!0),Qs(this,!0);var e=this.panel;null===e||t||e.s()}},e.ak=function(){Zs(this)||(Js(this,!0),Qs(this,!0))},e.bl=function(){0!=(2048&this.G)==0&&(Hs(this,!0),Ws(this,!0))},e.bv=function(){Ws(this,!0)},e.N=function(){var t=this.part;null!==t&&t.N()},e.Si=function(t){this.bg=t},e.Us=function(){},e.Jv=function(t){return this.ja=t,Vs(this),!0},e.wm=function(t,e){this.ja.x===t&&this.ja.y===e||(this.ja.h(t,e),this.bl())},e.Mw=function(){return 0},e.bind=function(t,e,i,n){var r=null;return(r=\"string\"==typeof t?new Pd(t,e,i,n):t).od=this,null!==(t=this.Ch())&&Ah(t)&&w(\"Cannot add a Binding to a template that has already been copied: \"+r),null===this.fb&&(this.fb=new J),this.fb.add(r),this},e.set=function(t){return Object.assign(this,t),this},e.wu=function(t){return na(this,t),this},e.apply=function(t){return t(this),this},e.xm=function(t){return Qr(this,t),this},e.Oz=function(){return this.Ch()},e.Ch=function(){for(var t=this instanceof fh?this:this.panel;null!==t;){if(null!==t.Qh)return t;t=t.panel}return null},e.Rv=function(t){return t.od=this,null===this.wg&&(this.wg=new pt),this.wg.add(t.propertyName,t),this},f.Object.defineProperties(Ds.prototype,{shadowVisible:{get:function(){return this.Dl},set:function(t){var e=this.Dl;e!==t&&(this.Dl=t,this.N(),this.g(\"shadowVisible\",e,t))}},enabledChanged:{get:function(){return null!==this.O?this.O.un:null},set:function(t){Fs(this);var e=this.O.un;e!==t&&(this.O.un=t,this.g(\"enabledChanged\",e,t))}},segmentOrientation:{get:function(){return this.Bl},set:function(t){var e=this.Bl;e!==t&&(this.Bl=t,this.s(),this.g(\"segmentOrientation\",e,t),t===xc&&(this.angle=0))}},segmentIndex:{get:function(){return this.gp},set:function(t){t=Math.round(t);var e=this.gp;e!==t&&(this.gp=t,this.s(),this.g(\"segmentIndex\",e,t))}},segmentFraction:{get:function(){return this.zl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.zl;e!==t&&(this.zl=t,this.s(),this.g(\"segmentFraction\",e,t))}},segmentOffset:{get:function(){return this.Al},set:function(t){var e=this.Al;e.A(t)||(this.Al=t=t.I(),this.s(),this.g(\"segmentOffset\",e,t))}},stretch:{get:function(){return this.Ee},set:function(t){var e=this.Ee;e!==t&&(this.Ee=t,this.s(),this.g(\"stretch\",e,t))}},name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,null!==this.part&&(this.part.li=null),this.g(\"name\",e,t))}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&M(t,\"0 <= value <= 1\",Ds,\"opacity\"),this.mb=t,this.g(\"opacity\",e,t),t=this.diagram,e=this.part,null!==t&&null!==e&&t.N(iu(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.G)},set:function(t){var e=0!=(1&this.G);e!==t&&(this.G^=1,this.g(\"visible\",e,t),null!==(e=this.panel)?e.s():this.Qi()&&this.Ob(t),this.N(),ea(this))}},pickable:{get:function(){return 0!=(2&this.G)},set:function(t){var e=0!=(2&this.G);e!==t&&(this.G^=2,this.g(\"pickable\",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.G)},set:function(t){var e=0!=(4&this.G);e!==t&&(this.G^=4,this.g(\"fromLinkableDuplicates\",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.G)},set:function(t){var e=0!=(8&this.G);e!==t&&(this.G^=8,this.g(\"fromLinkableSelfNode\",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.G)},set:function(t){var e=0!=(16&this.G);e!==t&&(this.G^=16,this.g(\"toLinkableDuplicates\",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.G)},set:function(t){var e=0!=(32&this.G);e!==t&&(this.G^=32,this.g(\"toLinkableSelfNode\",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.G)},set:function(t){var e=0!=(64&this.G);e!==t&&(this.G^=64,this.s(),this.g(\"isPanelMain\",e,t))}},isActionable:{get:function(){return 0!=(128&this.G)},set:function(t){var e=0!=(128&this.G);e!==t&&(this.G^=128,this.g(\"isActionable\",e,t))}},areaBackground:{get:function(){return this.hd},set:function(t){var e=this.hd;e!==t&&(null!==t&&Da(t,\"GraphObject.areaBackground\"),t instanceof wa&&t.freeze(),this.hd=t,this.N(),this.g(\"areaBackground\",e,t))}},background:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==t&&(null!==t&&Da(t,\"GraphObject.background\"),t instanceof wa&&t.freeze(),this.Ub=t,this.N(),this.g(\"background\",e,t))}},part:{get:function(){if(this.Qi())return this;if(null!==this.Bj)return this.Bj;var t;for(t=this.panel;t;){if(t instanceof Jl)return this.Bj=t;t=t.panel}return null}},svg:{get:function(){return this.Zr},set:function(t){this.Zr=t}},panel:{get:function(){return this.bg}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.ja},set:function(t){var e=t.x,i=t.y,n=this.ja,r=n.x;n=n.y,(r===e||isNaN(r)&&isNaN(e))&&(n===i||isNaN(n)&&isNaN(i))?this.Us():(t=t.copy(),this.Jv(t,r,n)&&this.g(\"position\",new gt(r,n),t))}},actualBounds:{get:function(){return this.xb}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&(0>=t&&w(\"GraphObject.scale for \"+this+\" must be greater than zero, not: \"+t),this.sa=t,this.s(),this.g(\"scale\",e,t))}},angle:{get:function(){return this.zb},set:function(t){var e=this.zb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.zb=t,ea(this),this.s(),this.g(\"angle\",e,t)))}},desiredSize:{get:function(){return this.Tc},set:function(t){var e=t.width,i=t.height,n=this.Tc,r=n.width,o=n.height;(r===e||isNaN(r)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))||(this.Tc=t=t.I(),this.s(),this instanceof Hh&&this.fc(),this.g(\"desiredSize\",n,t),qs(this)&&null!==(t=this.part)&&(Bs(this,t,\"width\"),Bs(this,t,\"height\")))}},width:{get:function(){return this.Tc.width},set:function(t){var e=this.Tc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Tc,this.Tc=t=new jt(t,this.Tc.height).freeze(),this.s(),this instanceof Hh&&this.fc(),this.g(\"desiredSize\",e,t),qs(this)&&null!==(t=this.part)&&Bs(this,t,\"width\"))}},height:{get:function(){return this.Tc.height},set:function(t){var e=this.Tc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Tc,this.Tc=t=new jt(this.Tc.width,t).freeze(),this.s(),this instanceof Hh&&this.fc(),this.g(\"desiredSize\",e,t),qs(this)&&null!==(t=this.part)&&Bs(this,t,\"height\"))}},minSize:{get:function(){return this.Zf},set:function(t){var e=this.Zf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Zf=t,this.s(),this.g(\"minSize\",e,t))}},maxSize:{get:function(){return this.Yf},set:function(t){var e=this.Yf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Yf=t,this.s(),this.g(\"maxSize\",e,t))}},measuredBounds:{get:function(){return this.lc}},naturalBounds:{get:function(){return this.uc}},margin:{get:function(){return this.Ug},set:function(t){\"number\"==typeof t&&(t=new Wt(t));var e=this.Ug;e.A(t)||(this.Ug=t=t.I(),this.s(),this.g(\"margin\",e,t))}},transform:{get:function(){return 0!=(2048&this.G)==1&&_s(this),this.vb}},fe:{get:function(){return 0!=(4096&this.G)==1&&_s(this),this.Nh}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.A(t)||(t.zc()&&!t.Mb()&&w(\"GraphObject.alignment for \"+this+\" must be a real Spot or Spot.Default, not: \"+t),this.yb=t=t.I(),Vs(this),this.g(\"alignment\",e,t))}},column:{get:function(){return this.Bg},set:function(t){t=Math.round(t);var e=this.Bg;e!==t&&(0>t&&M(t,\">= 0\",Ds,\"column\"),this.Bg=t,this.s(),this.g(\"column\",e,t))}},columnSpan:{get:function(){return this.Ym},set:function(t){t=Math.round(t);var e=this.Ym;e!==t&&(1>t&&M(t,\">= 1\",Ds,\"columnSpan\"),this.Ym=t,this.s(),this.g(\"columnSpan\",e,t))}},row:{get:function(){return this.ap},set:function(t){t=Math.round(t);var e=this.ap;e!==t&&(0>t&&M(t,\">= 0\",Ds,\"row\"),this.ap=t,this.s(),this.g(\"row\",e,t))}},rowSpan:{get:function(){return this.bp},set:function(t){t=Math.round(t);var e=this.bp;e!==t&&(1>t&&M(t,\">= 1\",Ds,\"rowSpan\"),this.bp=t,this.s(),this.g(\"rowSpan\",e,t))}},spanAllocation:{get:function(){return this.sp},set:function(t){var e=this.sp;e!==t&&(this.sp=t,this.s(),this.g(\"spanAllocation\",e,t))}},alignmentFocus:{get:function(){return this.wk},set:function(t){var e=this.wk;e.A(t)||(this.wk=t=t.I(),this.s(),this.g(\"alignmentFocus\",e,t))}},portId:{get:function(){return this.Po},set:function(t){var e=this.Po;if(e!==t){var i=this.part;null===i||i instanceof wu||w(\"Cannot set portID on a Link: \"+t),null!==e&&null!==i&&Ou(i,this),this.Po=t,null!==t&&null!==i&&(i.Je=!0,ju(i,this)),this.g(\"portId\",e,t)}}},toSpot:{get:function(){return null!==this.P?this.P.th:te},set:function(t){this.Kc();var e=this.P.th;e.A(t)||(t=t.I(),this.P.th=t,this.g(\"toSpot\",e,t),ta(this))}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.rh:10},set:function(t){this.Kc();var e=this.P.rh;e!==t&&(0>t&&M(t,\">= 0\",Ds,\"toEndSegmentLength\"),this.P.rh=t,this.g(\"toEndSegmentLength\",e,t),ta(this))}},toShortLength:{get:function(){return null!==this.P?this.P.sh:0},set:function(t){this.Kc();var e=this.P.sh;e!==t&&(this.P.sh=t,this.g(\"toShortLength\",e,t),ta(this))}},toLinkable:{get:function(){return null!==this.P?this.P.Ap:null},set:function(t){this.Kc();var e=this.P.Ap;e!==t&&(this.P.Ap=t,this.g(\"toLinkable\",e,t))}},toMaxLinks:{get:function(){return null!==this.P?this.P.Bp:1/0},set:function(t){this.Kc();var e=this.P.Bp;e!==t&&(0>t&&M(t,\">= 0\",Ds,\"toMaxLinks\"),this.P.Bp=t,this.g(\"toMaxLinks\",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Og:te},set:function(t){this.Kc();var e=this.P.Og;e.A(t)||(t=t.I(),this.P.Og=t,this.g(\"fromSpot\",e,t),ta(this))}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Mg:10},set:function(t){this.Kc();var e=this.P.Mg;e!==t&&(0>t&&M(t,\">= 0\",Ds,\"fromEndSegmentLength\"),this.P.Mg=t,this.g(\"fromEndSegmentLength\",e,t),ta(this))}},fromShortLength:{get:function(){return null!==this.P?this.P.Ng:0},set:function(t){this.Kc();var e=this.P.Ng;e!==t&&(this.P.Ng=t,this.g(\"fromShortLength\",e,t),ta(this))}},fromLinkable:{get:function(){return null!==this.P?this.P.An:null},set:function(t){this.Kc();var e=this.P.An;e!==t&&(this.P.An=t,this.g(\"fromLinkable\",e,t))}},fromMaxLinks:{get:function(){return null!==this.P?this.P.Bn:1/0},set:function(t){this.Kc();var e=this.P.Bn;e!==t&&(0>t&&M(t,\">= 0\",Ds,\"fromMaxLinks\"),this.P.Bn=t,this.g(\"fromMaxLinks\",e,t))}},cursor:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g(\"cursor\",e,t))}},click:{get:function(){return null!==this.O?this.O.Ag:null},set:function(t){Fs(this);var e=this.O.Ag;e!==t&&(this.O.Ag=t,this.g(\"click\",e,t))}},doubleClick:{get:function(){return null!==this.O?this.O.Ig:null},set:function(t){Fs(this);var e=this.O.Ig;e!==t&&(this.O.Ig=t,this.g(\"doubleClick\",e,t))}},contextClick:{get:function(){return null!==this.O?this.O.Cg:null},set:function(t){Fs(this);var e=this.O.Cg;e!==t&&(this.O.Cg=t,this.g(\"contextClick\",e,t))}},mouseEnter:{get:function(){return null!==this.O?this.O.Xg:null},set:function(t){Fs(this);var e=this.O.Xg;e!==t&&(this.O.Xg=t,this.g(\"mouseEnter\",e,t))}},mouseLeave:{get:function(){return null!==this.O?this.O.$g:null},set:function(t){Fs(this);var e=this.O.$g;e!==t&&(this.O.$g=t,this.g(\"mouseLeave\",e,t))}},mouseOver:{get:function(){return null!==this.O?this.O.ah:null},set:function(t){Fs(this);var e=this.O.ah;e!==t&&(this.O.ah=t,this.g(\"mouseOver\",e,t))}},mouseHover:{get:function(){return null!==this.O?this.O.Zg:null},set:function(t){Fs(this);var e=this.O.Zg;e!==t&&(this.O.Zg=t,this.g(\"mouseHover\",e,t))}},mouseHold:{get:function(){return null!==this.O?this.O.Yg:null},set:function(t){Fs(this);var e=this.O.Yg;e!==t&&(this.O.Yg=t,this.g(\"mouseHold\",e,t))}},mouseDragEnter:{get:function(){return null!==this.O?this.O.vo:null},set:function(t){Fs(this);var e=this.O.vo;e!==t&&(this.O.vo=t,this.g(\"mouseDragEnter\",e,t))}},mouseDragLeave:{get:function(){return null!==this.O?this.O.wo:null},set:function(t){Fs(this);var e=this.O.wo;e!==t&&(this.O.wo=t,this.g(\"mouseDragLeave\",e,t))}},mouseDrop:{get:function(){return null!==this.O?this.O.Wg:null},set:function(t){Fs(this);var e=this.O.Wg;e!==t&&(this.O.Wg=t,this.g(\"mouseDrop\",e,t))}},actionDown:{get:function(){return null!==this.O?this.O.Km:null},set:function(t){Fs(this);var e=this.O.Km;e!==t&&(this.O.Km=t,this.g(\"actionDown\",e,t))}},actionMove:{get:function(){return null!==this.O?this.O.Lm:null},set:function(t){Fs(this);var e=this.O.Lm;e!==t&&(this.O.Lm=t,this.g(\"actionMove\",e,t))}},actionUp:{get:function(){return null!==this.O?this.O.Mm:null},set:function(t){Fs(this);var e=this.O.Mm;e!==t&&(this.O.Mm=t,this.g(\"actionUp\",e,t))}},actionCancel:{get:function(){return null!==this.O?this.O.Jm:null},set:function(t){Fs(this);var e=this.O.Jm;e!==t&&(this.O.Jm=t,this.g(\"actionCancel\",e,t))}},toolTip:{get:function(){return null!==this.O?this.O.uh:null},set:function(t){Fs(this);var e=this.O.uh;e!==t&&(this.O.uh=t,this.g(\"toolTip\",e,t))}},contextMenu:{get:function(){return null!==this.O?this.O.Dg:null},set:function(t){Fs(this);var e=this.O.Dg;e!==t&&(this.O.Dg=t,this.g(\"contextMenu\",e,t))}}}),Ds.prototype.trigger=Ds.prototype.Rv,Ds.prototype.findBindingPanel=Ds.prototype.Ch,Ds.prototype.findTemplateBinder=Ds.prototype.Oz,Ds.prototype.setProperties=Ds.prototype.xm,Ds.prototype.apply=Ds.prototype.apply,Ds.prototype.attach=Ds.prototype.wu,Ds.prototype.set=Ds.prototype.set,Ds.prototype.isEnabledObject=Ds.prototype.Ef,Ds.prototype.isVisibleObject=Ds.prototype.Ff,Ds.prototype.isContainedBy=Ds.prototype.rg,Ds.prototype.getNearestIntersectionPoint=Ds.prototype.vs,Ds.prototype.getLocalPoint=Ds.prototype.us,Ds.prototype.getDocumentScale=Ds.prototype.Af,Ds.prototype.getDocumentAngle=Ds.prototype.Ki,Ds.prototype.getDocumentBounds=Ds.prototype.Li,Ds.prototype.getDocumentPoint=Ds.prototype.da,Ds.prototype.intersectsRect=Ds.prototype.Lc,Ds.prototype.containedInRect=Ds.prototype.Ah,Ds.prototype.containsRect=Ds.prototype.Ge,Ds.prototype.containsPoint=Ds.prototype.$,Ds.prototype.raiseChanged=Ds.prototype.g,Ds.prototype.raiseChangedEvent=Ds.prototype.Wa,Ds.prototype.addCopyProperty=Ds.prototype.sx;var sa=null;function aa(){this.un=this.Dg=this.uh=this.Jm=this.Mm=this.Lm=this.Km=this.Wg=this.wo=this.vo=this.Yg=this.Zg=this.ah=this.$g=this.Xg=this.Cg=this.Ig=this.Ag=null}function ha(){this.Na=[1,0,0,1,0,0]}function la(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Bx=[],this.pattern=null}function ua(t,e){this.ownerDocument=t=void 0===e?y.document:e,this.yA=\"http://www.w3.org/2000/svg\",void 0!==t&&(this.La=this.Pb(\"svg\",{width:\"1px\",height:\"1px\",viewBox:\"0 0 1 1\"}),this.La.setAttributeNS(\"http://www.w3.org/2000/xmlns/\",\"xmlns\",\"http://www.w3.org/2000/svg\"),this.La.setAttributeNS(\"http://www.w3.org/2000/xmlns/\",\"xmlns:xlink\",\"http://www.w3.org/1999/xlink\")),this.Tp=null,this.context=new ca(this)}function ca(t){this.Ws=t,this.svg=t.La,this.stack=[],this.fd=[],this.fillStyle=\"#000000\",this.font=\"10px sans-serif\",this.globalAlpha=1,this.lineCap=\"butt\",this.lineDashOffset=0,this.lineJoin=\"miter\",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor=\"rgba(0, 0, 0, 0)\",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle=\"#000000\",this.textAlign=\"start\",this.clipInsteadOfFill=!1,this.gg=this.Sr=this.Rr=0,this.Es=null,this.path=[],this.Ht=!1,this.mh=null,this.nh=0,this.He=new ha,pa(this,1,0,0,1,0,0);var e=ht++,i=this.Pb(\"clipPath\",{id:\"mainClip\"+e});i.appendChild(this.Pb(\"rect\",{x:0,y:0,width:t.width,height:t.height})),this.Tw=i,this.Ws.La.appendChild(i),this.fd[0].setAttributeNS(null,\"clip-path\",\"url(#mainClip\"+e+\")\"),this.AA={}}function fa(t,e,i,n,r){1!==t.globalAlpha&&(i.opacity=t.globalAlpha),\"fill\"===e?(t.fillStyle instanceof la?i.fill=da(t,t.fillStyle):/^rgba\\(/.test(t.fillStyle)?(t=/^\\s*rgba\\s*\\(([^,\\s]+)\\s*,\\s*([^,\\s]+)\\s*,\\s*([^,\\s]+)\\s*,\\s*([^,\\s]+)\\)\\s*$/i.exec(t.fillStyle),i.fill=\"rgb(\"+t[1]+\",\"+t[2]+\",\"+t[3]+\")\",i[\"fill-opacity\"]=t[4]):i.fill=t.fillStyle,i.stroke=\"none\"):\"stroke\"===e&&(i.fill=\"none\",t.strokeStyle instanceof la?i.stroke=da(t,t.strokeStyle):/^rgba\\(/.test(t.strokeStyle)?(e=/^\\s*rgba\\s*\\(([^,\\s]+)\\s*,\\s*([^,\\s]+)\\s*,\\s*([^,\\s]+)\\s*,\\s*([^,\\s]+)\\)\\s*$/i.exec(t.strokeStyle),i.stroke=\"rgb(\"+e[1]+\",\"+e[2]+\",\"+e[3]+\")\",i[\"stroke-opacity\"]=e[4]):i.stroke=t.strokeStyle,i[\"stroke-width\"]=t.lineWidth,i[\"stroke-linecap\"]=t.lineCap,i[\"stroke-linejoin\"]=t.lineJoin,i[\"stroke-miterlimit\"]=t.miterLimit),n=\"matrix(\"+(n=n.Na)[0]+\", \"+n[1]+\", \"+n[2]+\", \"+n[3]+\", \"+n[4]+\", \"+n[5]+\")\",void 0!==r&&(n+=r),i.transform=n}function da(t,e){var i=\"GRAD\"+ht++;if(\"linear\"===e.type)var n=t.Pb(\"linearGradient\",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:i,gradientUnits:\"userSpaceOnUse\"});else{if(\"radial\"!==e.type)throw Error(\"invalid gradient\");n=t.Pb(\"radialGradient\",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:i})}var r=e.Bx;e=r.length;for(var o=[],s=0;s<e;s++){var a=r[s],h=a.color;a={offset:a.offset,\"stop-color\":h},/^rgba\\(/.test(h)&&(h=/^\\s*rgba\\s*\\(([^,\\s]+)\\s*,\\s*([^,\\s]+)\\s*,\\s*([^,\\s]+)\\s*,\\s*([^,\\s]+)\\)\\s*$/i.exec(h),a[\"stop-color\"]=\"rgb(\"+h[1]+\",\"+h[2]+\",\"+h[3]+\")\",a[\"stop-opacity\"]=h[4]),o.push(a)}for(o.sort((function(t,e){return t.offset>e.offset?1:-1})),r=0;r<e;r++)n.appendChild(t.Pb(\"stop\",o[r]));return t.svg.appendChild(n),\"url(#\"+i+\")\"}function pa(t,e,i,n,r,o,s){var a=new ha;a.Na=[e,i,n,r,o,s],fa(t,\"g\",e={},a),a=t.addElement(\"g\",e),t.fd.push(a)}function ga(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function ya(t){t.shadowOffsetX=t.Rr,t.shadowOffsetY=t.Sr,t.shadowBlur=t.gg}function ma(t,e){this.ownerDocument=e=void 0===e?y.document:e,this.Tp=null,(e=e.createElement(\"canvas\")).tabIndex=0,this.La=e,this.La.innerHTML=\"This text is displayed if your browser does not support the Canvas HTML element.\",this.context=new va(e),e.C=t}function va(t){t.getContext&&t.getContext(\"2d\")||w(\"Browser does not support HTML Canvas Element\"),this.Y=t.getContext(\"2d\"),this.pt=this.rt=this.qt=\"\",this.Xm=!1,this.gg=this.Sr=this.Rr=0,this.Ul=new Ye}Ds.className=\"GraphObject\",sa=new pt,ra(\"Button\",(function(){function t(t,e){return null!==t.diagram.Zb(t.documentPoint,(function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t}),(function(t){return t===e}))}var e=ia(fh,fh.Auto,{isActionable:!0,enabledChanged:function(t,e){if(t instanceof fh){var i=t.Ya(\"ButtonBorder\");null!==i&&(i.fill=e?t._buttonFillNormal:t._buttonFillDisabled)}},cursor:\"pointer\",_buttonFillNormal:\"#F5F5F5\",_buttonStrokeNormal:\"#BDBDBD\",_buttonFillOver:\"#E0E0E0\",_buttonStrokeOver:\"#9E9E9E\",_buttonFillPressed:\"#BDBDBD\",_buttonStrokePressed:\"#9E9E9E\",_buttonFillDisabled:\"#E5E5E5\"},ia(Hh,{name:\"ButtonBorder\",figure:\"RoundedRectangle\",spot1:new ze(0,0,2.76142374915397,2.761423749153969),spot2:new ze(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:\"#F5F5F5\",stroke:\"#BDBDBD\"}));return e.mouseEnter=function(t,e){if(e.Ef()&&e instanceof fh&&(t=e.Ya(\"ButtonBorder\"))instanceof Hh){var i=e._buttonFillOver;e._buttonFillNormal=t.fill,t.fill=i,i=e._buttonStrokeOver,e._buttonStrokeNormal=t.stroke,t.stroke=i}},e.mouseLeave=function(t,e){e.Ef()&&e instanceof fh&&(t=e.Ya(\"ButtonBorder\"))instanceof Hh&&(t.fill=e._buttonFillNormal,t.stroke=e._buttonStrokeNormal)},e.actionDown=function(t,e){if(e.Ef()&&e instanceof fh&&null!==e._buttonFillPressed&&0===t.button){var i=e.Ya(\"ButtonBorder\");if(i instanceof Hh){var n=(t=t.diagram).skipsUndoManager;t.skipsUndoManager=!0;var r=e._buttonFillPressed;e._buttonFillOver=i.fill,i.fill=r,r=e._buttonStrokePressed,e._buttonStrokeOver=i.stroke,i.stroke=r,t.skipsUndoManager=n}}},e.actionUp=function(e,i){if(i.Ef()&&i instanceof fh&&null!==i._buttonFillPressed&&0===e.button){var n=i.Ya(\"ButtonBorder\");if(n instanceof Hh){var r=e.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,t(e,i)?(n.fill=i._buttonFillOver,n.stroke=i._buttonStrokeOver):(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionCancel=function(e,i){if(i.Ef()&&i instanceof fh&&null!==i._buttonFillPressed){var n=i.Ya(\"ButtonBorder\");if(n instanceof Hh){var r=e.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,t(e,i)?(n.fill=i._buttonFillOver,n.stroke=i._buttonStrokeOver):(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionMove=function(e,i){if(i.Ef()&&i instanceof fh&&null!==i._buttonFillPressed){var n=e.diagram;if(0===n.firstInput.button&&(n.currentTool.standardMouseOver(),t(e,i)&&(e=i.Ya(\"ButtonBorder\"))instanceof Hh)){var r=n.skipsUndoManager;n.skipsUndoManager=!0;var o=i._buttonFillPressed;e.fill!==o&&(e.fill=o),o=i._buttonStrokePressed,e.stroke!==o&&(e.stroke=o),n.skipsUndoManager=r}}},e})),ra(\"TreeExpanderButton\",(function(){var t=ia(\"Button\",{_treeExpandedFigure:\"MinusLine\",_treeCollapsedFigure:\"PlusLine\"},ia(Hh,{name:\"ButtonIcon\",figure:\"MinusLine\",stroke:\"#424242\",strokeWidth:2,desiredSize:Nt},new Pd(\"figure\",\"isTreeExpanded\",(function(t,e){return e=e.panel,t?e._treeExpandedFigure:e._treeCollapsedFigure})).jq()),{visible:!1},new Pd(\"visible\",\"isTreeLeaf\",(function(t){return!t})).jq());return t.click=function(t,e){if((e=e.part)instanceof bu&&(e=e.adornedPart),e instanceof wu){var i=e.diagram;if(null!==i){if(i=i.commandHandler,e.isTreeExpanded){if(!i.canCollapseTree(e))return}else if(!i.canExpandTree(e))return;t.handled=!0,e.isTreeExpanded?i.collapseTree(e):i.expandTree(e)}}},t})),ra(\"SubGraphExpanderButton\",(function(){var t=ia(\"Button\",{_subGraphExpandedFigure:\"MinusLine\",_subGraphCollapsedFigure:\"PlusLine\"},ia(Hh,{name:\"ButtonIcon\",figure:\"MinusLine\",stroke:\"#424242\",strokeWidth:2,desiredSize:Nt},new Pd(\"figure\",\"isSubGraphExpanded\",(function(t,e){return e=e.panel,t?e._subGraphExpandedFigure:e._subGraphCollapsedFigure})).jq()));return t.click=function(t,e){if((e=e.part)instanceof bu&&(e=e.adornedPart),e instanceof _u){var i=e.diagram;if(null!==i){if(i=i.commandHandler,e.isSubGraphExpanded){if(!i.canCollapseSubGraph(e))return}else if(!i.canExpandSubGraph(e))return;t.handled=!0,e.isSubGraphExpanded?i.collapseSubGraph(e):i.expandSubGraph(e)}}},t})),ra(\"ToolTip\",(function(){return ia(bu,fh.Auto,{isShadowed:!0,shadowColor:\"rgba(0, 0, 0, .4)\",shadowOffset:new gt(0,3),shadowBlur:5},ia(Hh,{name:\"Border\",figure:\"RoundedRectangle\",parameter1:1,parameter2:1,fill:\"#F5F5F5\",stroke:\"#F0F0F0\",spot1:new ze(0,0,4,6),spot2:new ze(1,1,-4,-4)}))})),ra(\"ContextMenu\",(function(){return ia(bu,fh.Vertical,{background:\"#F5F5F5\",isShadowed:!0,shadowColor:\"rgba(0, 0, 0, .4)\",shadowOffset:new gt(0,3),shadowBlur:5},new Pd(\"background\",\"\",(function(t){return null!==t.adornedPart&&null!==t.placeholder?null:\"#F5F5F5\"})))})),ra(\"ContextMenuButton\",(function(){var t=ia(\"Button\");t.stretch=gs;var e=t.Ya(\"ButtonBorder\");return e instanceof Hh&&(e.figure=\"Rectangle\",e.strokeWidth=0,e.spot1=new ze(0,0,2,3),e.spot2=new ze(1,1,-2,-2)),t})),ra(\"PanelExpanderButton\",(function(t){var e=oa(t,\"COLLAPSIBLE\"),i=ia(\"Button\",{_buttonExpandedFigure:\"M0 0 M0 6 L4 2 8 6 M8 8\",_buttonCollapsedFigure:\"M0 0 M0 2 L4 6 8 2 M8 8\",_buttonFillNormal:\"rgba(0, 0, 0, 0)\",_buttonStrokeNormal:null,_buttonFillOver:\"rgba(0, 0, 0, .2)\",_buttonStrokeOver:null,_buttonFillPressed:\"rgba(0, 0, 0, .4)\",_buttonStrokePressed:null},ia(Hh,{name:\"ButtonIcon\",strokeWidth:2},new Pd(\"geometryString\",\"visible\",(function(t){return t?i._buttonExpandedFigure:i._buttonCollapsedFigure})).jq(e)));return(t=i.Ya(\"ButtonBorder\"))instanceof Hh&&(t.stroke=null,t.fill=\"rgba(0, 0, 0, 0)\"),i.click=function(t,i){var n=i.diagram;if(null!==n&&!n.isReadOnly){var r=i.Ch();null===r&&(r=i.part),null!==r&&null!==(i=r.Ya(e))&&(t.handled=!0,n.xa(\"Collapse/Expand Panel\"),i.visible=!i.visible,n.Xa(\"Collapse/Expand Panel\"))}},i})),ra(\"CheckBoxButton\",(function(t){var e=oa(t);return(t=ia(\"Button\",{desiredSize:new jt(14,14)},ia(Hh,{name:\"ButtonIcon\",geometryString:\"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2\",strokeWidth:2,stretch:cs,geometryStretch:ds,visible:!1},\"\"!==e?new Pd(\"visible\",e).hy():[]))).click=function(t,i){if(i instanceof fh){var n=t.diagram;if(!(null===n||n.isReadOnly||\"\"!==e&&n.model.isReadOnly)){t.handled=!0;var r=i.Ya(\"ButtonIcon\");n.xa(\"checkbox\"),r.visible=!r.visible,\"function\"==typeof i._doClick&&i._doClick(t,i),n.Xa(\"checkbox\")}}},t})),ra(\"CheckBox\",(function(t){t=ia(\"CheckBoxButton\",t=oa(t),{name:\"Button\",isActionable:!1,margin:new Wt(0,1,0,0)});var e=ia(fh,\"Horizontal\",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e})),Ds.None=fs=new V(Ds,\"None\",0),Ds.Default=ps=new V(Ds,\"Default\",0),Ds.Vertical=ys=new V(Ds,\"Vertical\",4),Ds.Horizontal=gs=new V(Ds,\"Horizontal\",5),Ds.Fill=cs=new V(Ds,\"Fill\",3),Ds.Uniform=ds=new V(Ds,\"Uniform\",1),Ds.UniformToFill=ms=new V(Ds,\"UniformToFill\",2),Ds.FlipVertical=vs=new V(Ds,\"FlipVertical\",1),Ds.FlipHorizontal=xs=new V(Ds,\"FlipHorizontal\",2),Ds.FlipBoth=bs=new V(Ds,\"FlipBoth\",3),Ds.make=ia,Ds.getBuilders=function(){var t,e=new pt;for(t in sa)if(t!==t.toLowerCase()){var i=sa.H(t);\"function\"==typeof i&&e.add(t,i)}return e.freeze(),e},Ds.defineBuilder=ra,Ds.takeBuilderArgument=oa,aa.prototype.copy=function(){var t=new aa;return t.Ag=this.Ag,t.Ig=this.Ig,t.Cg=this.Cg,t.Xg=this.Xg,t.$g=this.$g,t.ah=this.ah,t.Zg=this.Zg,t.Yg=this.Yg,t.vo=this.vo,t.wo=this.wo,t.Wg=this.Wg,t.Km=this.Km,t.Lm=this.Lm,t.Mm=this.Mm,t.Jm=this.Jm,t.uh=this.uh,t.Dg=this.Dg,t.un=this.un,t},aa.className=\"GraphObjectEventHandlers\",ha.prototype.copy=function(){var t=new ha;return t.Na[0]=this.Na[0],t.Na[1]=this.Na[1],t.Na[2]=this.Na[2],t.Na[3]=this.Na[3],t.Na[4]=this.Na[4],t.Na[5]=this.Na[5],t},ha.prototype.translate=function(t,e){this.Na[4]+=this.Na[0]*t+this.Na[2]*e,this.Na[5]+=this.Na[1]*t+this.Na[3]*e},ha.prototype.scale=function(t,e){this.Na[0]*=t,this.Na[1]*=t,this.Na[2]*=e,this.Na[3]*=e},ha.className=\"STransform\",la.prototype.addColorStop=function(t,e){this.Bx.push({offset:t,color:e})},la.className=\"SGradient\",ua.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.style.width=i+\"px\",this.style.height=n+\"px\",this.La.setAttributeNS(null,\"width\",i+\"px\"),this.La.setAttributeNS(null,\"height\",n+\"px\"),this.La.setAttributeNS(null,\"viewBox\",\"0 0 \"+i+\" \"+n),this.context.Tw.firstElementChild.setAttributeNS(null,\"width\",i+\"px\"),this.context.Tw.firstElementChild.setAttributeNS(null,\"height\",n+\"px\"),!0)},ua.prototype.Pb=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.yA,t),P(e))for(var n in e)t.setAttributeNS(\"href\"===n?\"http://www.w3.org/1999/xlink\":\"\",n,e[n]);return void 0!==i&&(t.textContent=i),t},ua.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},ua.prototype.focus=function(){this.La.focus()},ua.prototype.Ix=function(){this.ownerDocument=null},f.Object.defineProperties(ua.prototype,{width:{get:function(){return this.La.width.baseVal.value},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height.baseVal.value},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),ua.className=\"SVGSurface\",(e=ca.prototype).arc=function(t,e,i,n,r,o,s,a){var h=2*Math.PI,l=h-1e-6,u=i*Math.cos(n),c=i*Math.sin(n),f=t+u,d=e+c,p=o?0:1;n=o?n-r:r-n,(1e-6<Math.abs(s-f)||1e-6<Math.abs(a-d))&&this.path.push([\"L\",f,+d]),0>n&&(n=n%h+h),n>l?(this.path.push([\"A\",i,i,0,1,p,t-u,e-c]),this.path.push([\"A\",i,i,0,1,p,f,d])):1e-6<n&&this.path.push([\"A\",i,i,0,+(n>=Math.PI),p,t+i*Math.cos(r),e+i*Math.sin(r)])},e.beginPath=function(){this.path=[]},e.bezierCurveTo=function(t,e,i,n,r,o){this.path.push([\"C\",t,e,i,n,r,o])},e.clearRect=function(){},e.clip=function(){this.addPath(\"clipPath\",this.path,this.He)},e.closePath=function(){this.path.push([\"z\"])},e.createLinearGradient=function(t,e,i,n){var r=new la(\"linear\");return r.x1=t,r.y1=e,r.x2=i,r.y2=n,r},e.createPattern=function(t){var e=\"\";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute(\"src\"));var i=this.AA;if(i[e])return\"url(#\"+i[e]+\")\";var n=\"PATTERN\"+ht++,r={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.Pb(\"pattern\",{width:t.width,height:t.height,id:n,patternUnits:\"userSpaceOnUse\"})).appendChild(this.Pb(rs,r)),this.svg.appendChild(t),i[e]=n,\"url(#\"+n+\")\"},e.createRadialGradient=function(t,e,i,n,r,o){var s=new la(\"radial\");return s.x1=t,s.y1=e,s.r1=i,s.x2=n,s.y2=r,s.r2=o,s},e.drawImage=function(t,e,i,n,r,o,s,a,h){var l=\"\";t instanceof HTMLCanvasElement&&(l=t.toDataURL()),t instanceof HTMLImageElement&&(l=t.getAttribute(\"src\"));var u=t instanceof HTMLImageElement?t.naturalWidth:t.width,c=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===n&&(o=e,s=i,a=n=u,h=r=c),n=n||0,r=r||0,o=o||0,s=s||0,a=a||0,h=h||0,t={x:0,y:0,width:u||n,height:c||r,href:l},Xe.aa(n,a)&&Xe.aa(r,h)?-1===l.toLowerCase().indexOf(\".svg\")&&-1===l.toLowerCase().indexOf(\"data:image/svg\")&&(t.preserveAspectRatio=\"xMidYMid slice\"):t.preserveAspectRatio=\"none\",l=\"\",h/=r,0===o&&0===s||(l+=\" translate(\"+o+\", \"+s+\")\"),1==(a/=n)&&1===h||(l+=\" scale(\"+a+\", \"+h+\")\"),0===e&&0===i||(l+=\" translate(\"+-e+\", \"+-i+\")\"),0===e&&0===i&&n===u&&r===c||(o=\"CLIP\"+ht++,(s=this.Pb(\"clipPath\",{id:o})).appendChild(this.Pb(\"rect\",{x:e,y:i,width:n,height:r})),this.svg.appendChild(s),t[\"clip-path\"]=\"url(#\"+o+\")\"),fa(this,rs,t,this.He,l),this.addElement(rs,t)},e.fill=function(){this.addPath(\"fill\",this.path,this.He)},e.yf=function(){this.clipInsteadOfFill?this.clip():this.fill()},e.fillRect=function(t,e,i,n){fa(this,\"fill\",t={x:(t=[t,e,i,n])[0],y:t[1],width:t[2],height:t[3]},this.He),this.addElement(\"rect\",t)},e.fillText=function(t,e,i){t=[t,e,i],\"left\"===(e=this.textAlign)?e=\"start\":\"right\"===e?e=\"end\":\"center\"===e&&(e=\"middle\"),fa(this,\"fill\",e={x:t[1],y:t[2],style:\"font: \"+this.font,\"text-anchor\":e},this.He),this.addElement(\"text\",e,t[0])},e.lineTo=function(t,e){this.path.push([\"L\",t,e])},e.moveTo=function(t,e){this.path.push([\"M\",t,e])},e.quadraticCurveTo=function(t,e,i,n){this.path.push([\"Q\",t,e,i,n])},e.rect=function(t,e,i,n){this.path.push([\"M\",t,e],[\"L\",t+i,e],[\"L\",t+i,e+n],[\"L\",t,e+n],[\"z\"])},e.restore=function(){this.He=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},e.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.He.copy())},e.setTransform=function(t,e,i,n,r,o){1===t&&0===e&&0===i&&1===n&&0===r&&0===o||pa(this,t,e,i,n,r,o)},e.scale=function(t,e){this.He.scale(t,e)},e.translate=function(t,e){this.He.translate(t,e)},e.transform=function(){},e.Ed=function(){},e.stroke=function(){this.addPath(\"stroke\",this.path,this.He)},e.Wi=function(){this.clipInsteadOfFill||this.stroke()},e.Pb=function(t,e,i){return this.Ws.Pb(t,e,i)},e.addElement=function(t,e,i){return t=this.Pb(t,e,i),0<this.fd.length?this.fd[this.fd.length-1].appendChild(t):this.svg.appendChild(t),this.Es=t},e.addPath=function(t,e,i){for(var n=[],r=0;r<e.length;r++){var o=C(e[r]),s=[o.shift()];if(\"A\"===s[0])s.push(o.shift()+\",\"+o.shift(),o.shift(),o.shift()+\",\"+o.shift(),o.shift()+\",\"+o.shift());else for(;o.length;)s.push(o.shift()+\",\"+o.shift());n.push(s.join(\" \"))}e={d:n.join(\" \")},\"stroke\"===t&&this.Ht&&(e[\"stroke-dasharray\"]=this.mh.toString(),e[\"stroke-dashoffset\"]=this.nh),fa(this,t,e,i),\"clipPath\"===t?(t=\"CLIP\"+ht++,(i=this.Pb(\"clipPath\",{id:t})).appendChild(this.Pb(\"path\",e)),this.svg.appendChild(i),0<this.fd.length&&this.fd[this.fd.length-1].setAttributeNS(null,\"clip-path\",\"url(#\"+t+\")\")):this.addElement(\"path\",e)},e.zm=function(t){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var e=\"SHADOW\"+ht++,i=this.addElement(\"filter\",{id:e,x:\"-100%\",y:\"-100%\",width:\"300%\",height:\"300%\"},null),n=t.computePixelRatio();t=this.Pb(\"feGaussianBlur\",{in:\"SourceAlpha\",result:\"blur\",stdDeviation:this.shadowBlur/2/n});var r=this.Pb(\"feFlood\",{in:\"blur\",result:\"flood\",\"flood-color\":this.shadowColor}),o=this.Pb(\"feComposite\",{in:\"flood\",in2:\"blur\",operator:\"in\",result:\"comp\"});n=this.Pb(\"feOffset\",{in:\"comp\",result:\"offsetBlur\",dx:this.shadowOffsetX/n,dy:this.shadowOffsetY/n});var s=this.Pb(\"feMerge\",{});s.appendChild(this.Pb(\"feMergeNode\",{in:\"offsetBlur\"})),s.appendChild(this.Pb(\"feMergeNode\",{in:\"SourceGraphic\"})),i.appendChild(t),i.appendChild(r),i.appendChild(o),i.appendChild(n),i.appendChild(s),0<this.fd.length&&this.fd[this.fd.length-1].setAttributeNS(null,\"filter\",\"url(#\"+e+\")\")}},e.Mv=function(t,e,i){this.Rr=t,this.Sr=e,this.gg=i},e.ns=function(t,e){this.Ht=!0,this.mh=t,this.nh=e},e.ls=function(){this.Ht=!1},e.Hc=function(){},e.vy=function(){},ca.prototype.rotate=function(){},ca.prototype.getImageData=function(){return null},ca.prototype.measureText=function(){return null},ca.className=\"SVGContext\",Pr.prototype.Is=function(t){var e=new ua(this,y.document);void 0===t&&(t=new X);var i=this;return Bo(this,(function(t,n){return t=null!==(t=Io(i,t,\"SVG\",e))?t.svg:null,\"function\"==typeof n?(n(t),null):t}),t)},Pr.prototype.makeSvg=Pr.prototype.Is,Pr.prototype.kv=function(t){return this.Is(t)},Pr.prototype.makeSVG=Pr.prototype.kv,Ds.prototype.Jx=function(t,e){if(!(t instanceof ca))return!1;var i=null,n=t.Es,r=this.transform,o=this.panel;0!=(4096&this.G)==1&&_s(this);var s=this.xb,a=0!=(256&this.G);t.clipInsteadOfFill&&(a=!1);var h=!1;if(this instanceof rl&&(t.font=this.font),a){if(h=o.je()?o.naturalBounds:o.actualBounds,null!==this.$a){var l=this.$a,u=l.x,c=l.y,f=l.width;l=l.height}else u=Math.max(s.x,h.x),c=Math.max(s.y,h.y),f=Math.min(s.right,h.right)-u,l=Math.min(s.bottom,h.bottom)-c;if(u>s.width+s.x||s.x>h.width+h.x||c>s.height+s.y||s.y>h.height+h.y)return!0;h=!0,pa(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(u,c,f,l),t.clip()}return this.Qi()&&!this.isVisible()||(t.He.Na=[1,0,0,1,0,0],(this instanceof rl&&1<this.lineCount||this instanceof Hh&&1<this.geometry.figures.length)&&pa(t,1,0,0,1,0,0),u=!1,this.Qi()&&this.isShadowed&&e.Ie(\"drawShadows\")&&(c=this.shadowOffset,t.Mv(c.x*e.scale*e.dc,c.y*e.scale*e.dc,this.shadowBlur),ya(t),t.shadowColor=this.shadowColor),c=!1,this.part&&e.Ie(\"drawShadows\")&&(c=this.part.isShadowed),t.clipInsteadOfFill&&(c=!1),!0===this.shadowVisible?(ya(t),!1===u&&c&&(pa(t,1,0,0,1,0,0),t.zm(e),u=!0)):!1===this.shadowVisible&&ga(t),f=this.naturalBounds,null!==this.areaBackground&&(Es(this,t,this.areaBackground,!0,!0,f,s),!1===u&&c&&(pa(t,1,0,0,1,0,0),t.zm(e),u=!0),this.areaBackground instanceof wa&&this.areaBackground.type===za?(t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.yf(this.areaBackground)):t.fillRect(s.x,s.y,s.width,s.height)),l=!1,this instanceof fh?pa(t,r.m11,r.m12,r.m21,r.m22,r.dx,r.dy):(t.He.Na=[r.m11,r.m12,r.m21,r.m22,r.dx,r.dy],!1===u&&c&&(l=!0)),null!==this.background&&(!1===u&&c&&(pa(t,1,0,0,1,0,0),t.zm(e),u=!0),Rs(this,t,f,s)),c&&(null!==this.background||null!==this.areaBackground||null!==o&&0!=(512&o.G)||null!==o&&(o.type===fh.Auto||o.type===fh.Spot)&&o.pb()!==this)?(Us(this,!0),null===this.shadowVisible&&ga(t),l=!1):Us(this,!1),l&&!1===u&&(pa(t,1,0,0,1,0,0),t.zm(e),u=!0),this.Ei(t,e),c&&0!=(512&this.G)==1&&ya(t),this.Qi()&&c&&ga(t),a&&(t.restore(),h&&t.fd.pop()),this instanceof fh&&(i=t.fd.pop()),!0===u&&t.fd.pop(),(this instanceof rl&&1<this.lineCount||this instanceof Hh&&1<this.geometry.figures.length)&&(i=t.fd.pop()),null!==t.Ws.Tp&&(null===i&&(n===t.Es?(pa(t,1,0,0,1,0,0),i=t.fd.pop()):i=t.Es),t.Ws.Tp(this,i)),this.svg=i),!0},ma.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+\"px\",this.style.height=n+\"px\",!0)},ma.prototype.toDataURL=function(t,e){return this.La.toDataURL(t,e)},ma.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},ma.prototype.focus=function(){this.La.focus()},ma.prototype.Ix=function(){this.ownerDocument=this.La.C=null},f.Object.defineProperties(ma.prototype,{width:{get:function(){return this.La.width},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),ma.className=\"CanvasSurface\",(e=va.prototype).vy=function(t){this.Y.imageSmoothingEnabled=t},e.arc=function(t,e,i,n,r,o){this.Y.arc(t,e,i,n,r,o)},e.beginPath=function(){this.Y.beginPath()},e.bezierCurveTo=function(t,e,i,n,r,o){this.Y.bezierCurveTo(t,e,i,n,r,o)},e.clearRect=function(t,e,i,n){this.Ed(),this.Y.clearRect(t,e,i,n)},e.clip=function(){this.Y.clip()},e.closePath=function(){this.Y.closePath()},e.createLinearGradient=function(t,e,i,n){return this.Y.createLinearGradient(t,e,i,n)},e.createPattern=function(t,e){return this.Y.createPattern(t,e)},e.createRadialGradient=function(t,e,i,n,r,o){return this.Y.createRadialGradient(t,e,i,n,r,o)},e.drawImage=function(t,e,i,n,r,o,s,a,h){void 0===n?this.Y.drawImage(t,e,i):this.Y.drawImage(t,e,i,n,r,o,s,a,h)},e.fill=function(){this.Y.fill()},e.fillRect=function(t,e,i,n){this.Y.fillRect(t,e,i,n)},e.fillText=function(t,e,i){this.Y.fillText(t,e,i)},e.getImageData=function(t,e,i,n){return this.Y.getImageData(t,e,i,n)},e.lineTo=function(t,e){this.Y.lineTo(t,e)},e.measureText=function(t){return this.Y.measureText(t)},e.moveTo=function(t,e){this.Y.moveTo(t,e)},e.quadraticCurveTo=function(t,e,i,n){this.Y.quadraticCurveTo(t,e,i,n)},e.rect=function(t,e,i,n){this.Y.rect(t,e,i,n)},e.restore=function(){this.Y.restore()},e.save=function(){this.Ed(),this.Y.save()},va.prototype.rotate=function(t){this.Ul.rotate(57.2958*t,0,0)},(e=va.prototype).setTransform=function(t,e,i,n,r,o){this.Ul.setTransform(t,e,i,n,r,o)},e.scale=function(t,e){this.Ul.scale(t,e)},e.translate=function(t,e){this.Ul.translate(t,e)},e.stroke=function(){this.Y.stroke()},e.transform=function(t,e,i,n,r,o){if(1!==t||0!==e||0!==i||1!==n||0!==r||0!==o){var s=this.Ul,a=s.m11*t+s.m21*e;t=s.m12*t+s.m22*e,e=s.m11*i+s.m21*n,i=s.m12*i+s.m22*n,s.dx=s.m11*r+s.m21*o+s.dx,s.dy=s.m12*r+s.m22*o+s.dy,s.m11=a,s.m12=t,s.m21=e,s.m22=i}},e.Ed=function(){var t=this.Ul;this.Y.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},e.yf=function(t){if(t instanceof wa&&t.type===za){var e=t.Fk;(t=t.st)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.Xm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.Xm?this.clip():this.fill()},e.Wi=function(){this.Xm||this.stroke()},e.Mv=function(t,e,i){this.Rr=t,this.Sr=e,this.gg=i},e.ns=function(t,e){var i=this.Y;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)},e.ls=function(){var t=this.Y;void 0!==t.setLineDash&&(t.setLineDash(xa),t.lineDashOffset=0)},e.Hc=function(t){t&&(this.qt=\"\"),this.pt=this.rt=\"\"},f.Object.defineProperties(va.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.pt!==t&&(this.pt=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.qt!==t&&(this.qt=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.rt!==t&&(this.rt=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.Xm},set:function(t){this.Xm=t}}});var xa=Object.freeze([]);function ba(){this.L=this.o=this.D=this.j=0}function wa(t,e){Wa||(Fa(),Wa=!0),tt(this),this.v=!1,void 0===t?(this.ha=Ba,this.Ek=\"black\"):\"string\"==typeof t?(this.ha=Ba,this.Ek=t):(this.ha=t,this.Ek=\"black\"),(t=this.ha)===Ia?(this.Cd=ie,this.Sk=he):this.Sk=this.Cd=t===za?oe:te,this.Vr=0,this.Wq=NaN,this.ne=this.Hr=this.me=null,this.st=this.Fk=0,e&&Object.assign(this,e)}function ka(t,e,i){return e=void 0===e||\"number\"!=typeof e?.2:e,i=void 0===i?Ea:i,Ca(t),Na(e,i)}function Ma(t,e,i){return e=void 0===e||\"number\"!=typeof e?.2:e,i=void 0===i?Ea:i,Ca(t),Na(-e,i)}function Sa(t,e,i){Ca(t),t=Ua.j;var n=Ua.D,r=Ua.o,o=Ua.L;return Ca(e),void 0===i&&(i=.5),\"rgba(\"+Math.round((Ua.j-t)*i+t)+\", \"+Math.round((Ua.D-n)*i+n)+\", \"+Math.round((Ua.o-r)*i+r)+\", \"+Math.round((Ua.L-o)*i+o)+\")\"}function Pa(t){return!!t&&(t instanceof wa?t.ay():(Ca(t),128>(299*Ua.j+587*Ua.D+114*Ua.o)/1e3))}function Na(t,e){switch(e){case Ea:e=100*La(Ua.j);var i=100*La(Ua.D),n=100*La(Ua.o);return Ka.j=.4124564*e+.3575761*i+.1804375*n,Ka.D=.2126729*e+.7151522*i+.072175*n,Ka.o=.0193339*e+.119192*i+.9503041*n,Ka.L=Ua.L,e=ja(Ka.j/Ga[0]),i=ja(Ka.D/Ga[1]),n=ja(Ka.o/Ga[2]),Ha.j=116*i-16,Ha.D=500*(e-i),Ha.o=200*(i-n),Ha.L=Ka.L,Ha.j=Math.min(100,Math.max(0,Ha.j+100*t)),e=(t=(Ha.j+16)/116)-Ha.o/200,Ka.j=Ga[0]*Oa(Ha.D/500+t),Ka.D=Ga[1]*(Ha.j>Ya*Va?Math.pow(t,3):Ha.j/Ya),Ka.o=Ga[2]*Oa(e),Ka.L=Ha.L,t=-.969266*Ka.j+1.8760108*Ka.D+.041556*Ka.o,e=.0556434*Ka.j+-.2040259*Ka.D+1.0572252*Ka.o,Ua.j=255*Aa((3.2404542*Ka.j+-1.5371385*Ka.D+-.4985314*Ka.o)/100),Ua.D=255*Aa(t/100),Ua.o=255*Aa(e/100),Ua.L=Ka.L,Ua.j=Math.round(Ua.j),255<Ua.j?Ua.j=255:0>Ua.j&&(Ua.j=0),Ua.D=Math.round(Ua.D),255<Ua.D?Ua.D=255:0>Ua.D&&(Ua.D=0),Ua.o=Math.round(Ua.o),255<Ua.o?Ua.o=255:0>Ua.o&&(Ua.o=0),\"rgba(\"+Ua.j+\", \"+Ua.D+\", \"+Ua.o+\", \"+Ua.L+\")\";case _a:return Ta(),qa.o=Math.min(100,Math.max(0,qa.o+100*t)),\"hsla(\"+qa.j+\", \"+qa.D+\"%, \"+qa.o+\"%, \"+qa.L+\")\";default:w(\"Unknown color space: \"+e)}}function Ca(t){Wa||(Fa(),Wa=!0);var e=Xa;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle=\"#000000\";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Ua.j=t[0],Ua.D=t[1],Ua.o=t[2],Ua.L=t[3]/255):(e.fillStyle=\"#FFFFFF\",e.fillStyle=t,Ua.j=0,Ua.D=0,Ua.o=0,Ua.L=1)}}function Ta(){var t=Ua.j/255,e=Ua.D/255,i=Ua.o/255,n=Math.max(t,e,i),r=Math.min(t,e,i),o=n-r;if(r=(n+r)/2,0===o)var s=t=0;else{switch(n){case t:s=(e-i)/o%6;break;case e:s=(i-t)/o+2;break;case i:s=(t-e)/o+4}0>(s*=60)&&(s+=360),t=o/(1-Math.abs(2*r-1))}qa.j=Math.round(s),qa.D=Math.round(100*t),qa.o=Math.round(100*r),qa.L=Ua.L}function La(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Aa(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function ja(t){return t>Va?Math.pow(t,1/3):(Ya*t+16)/116}function Oa(t){var e=t*t*t;return e>Va?e:(116*t-16)/Ya}function Da(t,e){\"string\"!=typeof t&&(t instanceof wa||w(\"Value for \"+e+\" must be a color string or a Brush, not \"+t))}function Fa(){Xa=Eo?new ma(null).context:null}va.className=\"CanvasSurfaceContext\",ba.className=\"ColorNumbers\",wa.prototype.copy=function(){var t=new wa;return t.ha=this.ha,t.Ek=this.Ek,t.Cd=this.Cd.I(),t.Sk=this.Sk.I(),t.Vr=this.Vr,t.Wq=this.Wq,null!==this.me&&(t.me=this.me.copy()),t.Hr=this.Hr,t},(e=wa.prototype).freeze=function(){return this.v=!0,null!==this.me&&this.me.freeze(),this},e.ea=function(){return Object.isFrozen(this)&&w(\"cannot thaw constant: \"+this),this.v=!1,null!==this.me&&this.me.ea(),this},e.gb=function(t){t.classType===wa&&(this.type=t)},e.toString=function(){var t=\"Brush(\";if(this.type===Ba)t+=this.color;else if(t=this.type===Ia?t+\"Linear \":this.type===za?t+\"Radial \":this.type===Ra?t+\"Pattern \":t+\"(unknown) \",t+=this.start+\" \"+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=\" \"+e.key+\":\"+e.value;return t+\")\"},e.addColorStop=function(t,e){return this.v&&k(this),(\"number\"!=typeof t||!isFinite(t)||1<t||0>t)&&M(t,\"0 <= loc <= 1\",wa,\"addColorStop:loc\"),null===this.me&&(this.me=new pt),this.me.add(t,e),this.ha===Ba&&(this.type=Ia),this.ne=null,this},e.rA=function(t,e){if(this.v&&k(this),t=void 0===t||\"number\"!=typeof t?.2:t,e=void 0===e?Ea:e,this.type===Ba)Ca(this.color),this.color=Na(t,e);else if((this.type===Ia||this.type===za)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)Ca(i.value),this.addColorStop(i.key,Na(t,e));return this},e.sz=function(t,e){if(this.v&&k(this),t=void 0===t||\"number\"!=typeof t?.2:t,e=void 0===e?Ea:e,this.type===Ba)Ca(this.color),this.color=Na(-t,e);else if((this.type===Ia||this.type===za)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)Ca(i.value),this.addColorStop(i.key,Na(-t,e));return this},e.ay=function(){if(this.type===Ba)return Pa(this.color);if((this.type===Ia||this.type===za)&&null!==this.colorStops){var t=this.colorStops;if(this.type===za)return Pa(t.first().value);if(null!==t.get(.5))return Pa(t.get(.5));if(2===t.count)return Pa(Sa((t=t.ya())[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,r=1,o=1;e.next();){var s=e.key,a=Math.abs(.5-e.key);r>o&&a<r?(i=s,r=a):o>=r&&a<o&&(n=s,o=a)}return i>n&&(o=i,i=n,n=o,o=r),r=n-i,Pa(Sa(t.get(i),t.get(n),1-o/r))}return!1},f.Object.defineProperties(wa.prototype,{type:{get:function(){return this.ha},set:function(t){this.v&&k(this,t),this.ha=t,this.start.zc()&&(t===Ia?this.start=ie:t===za&&(this.start=oe)),this.end.zc()&&(t===Ia?this.end=he:t===za&&(this.end=oe)),this.ne=null}},color:{get:function(){return this.Ek},set:function(t){this.v&&k(this,t),this.Ek=t,this.ne=null}},start:{get:function(){return this.Cd},set:function(t){this.v&&k(this,t),this.Cd=t.I(),this.ne=null}},end:{get:function(){return this.Sk},set:function(t){this.v&&k(this,t),this.Sk=t.I(),this.ne=null}},startRadius:{get:function(){return this.Vr},set:function(t){this.v&&k(this,t),0>t&&M(t,\">= zero\",wa,\"startRadius\"),this.Vr=t,this.ne=null}},endRadius:{get:function(){return this.Wq},set:function(t){this.v&&k(this,t),0>t&&M(t,\">= zero\",wa,\"endRadius\"),this.Wq=t,this.ne=null}},colorStops:{get:function(){return this.me},set:function(t){this.v&&k(this,t),this.me=t,this.ne=null}},pattern:{get:function(){return this.Hr},set:function(t){this.v&&k(this,t),this.Hr=t,this.ne=null}}}),wa.prototype.isDark=wa.prototype.ay,wa.prototype.darkenBy=wa.prototype.sz,wa.prototype.lightenBy=wa.prototype.rA,wa.prototype.addColorStop=wa.prototype.addColorStop;var Ba,Ia,za,Ra,Ea,_a,Va=216/24389,Ya=24389/27,Ga=[95.047,100,108.883],Xa=null,Ua=new ba,qa=new ba,Ka=new ba,Ha=new ba,Wa=!1;function Za(){this.na=\"Base\"}function Ja(){this.na=\"Base\"}function $a(){this.na=\"Base\"}function Qa(){this.na=\"Base\"}function th(){this.na=\"Base\"}function eh(t,e,i){var n=null;if(t instanceof fh&&\"\"!==t.Re&&(n=t.Ya(t.Re))===t&&(n=null),null!==n)for(i&&t.arrange(0,0,e.width,e.height),e.assign(n.actualBounds),n=n.panel;n!==t;)n.transform.wq(e),n=n.panel}function ih(){this.na=\"Base\"}function nh(){this.na=\"Base\",this.name=\"Table\"}function rh(){this.na=\"Base\"}function oh(){this.na=\"Base\"}function sh(){this.na=\"Base\"}function ah(){this.na=\"Base\"}function hh(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var r=0;r<e;r++)if(t%n[r]===i)return!1;return!0}function lh(){this.na=\"Base\"}function uh(t,e,i,n){if(!1!==Zs(n)){var r=n.strokeWidth;0===r&&t instanceof bu&&t.type===fh.Link&&t.adornedObject instanceof Hh&&(r=t.adornedObject.strokeWidth),r*=n.sa,t instanceof qu&&null!==t.ma?(t=t.ma.bounds,n.xe(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof bu&&null!==t.adornedPart.ma?(t=t.adornedPart.ma.bounds,n.xe(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):n.xe(-r/2,-r/2,e+r,i+r),Js(n,!1)}}function ch(){this.na=\"Base\"}function fh(t,e){if(Ds.call(this),this.ha=null,void 0===t)this.ha=fh.Position;else if(\"string\"==typeof t){var i=Yh.H(t);null!==i&&(this.ha=i)}else t instanceof Za?this.ha=t:t&&(this.ha=fh.Position,e=t);null===this.ha&&w(\"Panel type not specified or PanelLayout not loaded: \"+t),this.T=new J,this.nb=$t,this.ha===fh.Grid&&(this.G|=1048576),this.ln=Pe,this.Of=ps,this.ha===fh.Table&&dh(this),this.Gp=ds,this.Jn=Ct,this.Kn=nt,this.Gn=0,this.Fn=100,this.In=10,this.Hn=0,this.Qh=this.jb=this.Rf=this.Pg=this.ij=null,this.ao=NaN,this.ve=this.ci=null,this.fl=\"category\",this.$d=null,this.ig=new Bt(NaN,NaN,NaN,NaN),this.qh=this.cp=this.ph=null,this.Re=\"\",e&&Object.assign(this,e)}function dh(t){t.dj=$t,t.Gg=1,t.Wh=null,t.Vh=null,t.Fg=1,t.Eg=null,t.Uh=null,t.ob=[],t.ib=[],t.Dj=Kh,t.cj=Kh,t.vi=0,t.gi=0}function ph(t,e,i,n){for(var r=n.length,o=t.actualBounds,s=t.naturalBounds,a=!0,h=0;h<r;h++){var l=n[h];if(void 0!==l)if(a)a=!1;else if(0!==l.actual){if(i){if(l.position>o.height)continue}else if(l.position>o.width)continue;var u=l.separatorStrokeWidth;isNaN(u)&&(u=i?t.Gg:t.Fg);var c=l.separatorStroke;if(null===c&&(c=i?t.Wh:t.Eg),0!==u&&null!==c){Es(t,e,c,!1,!1,s,o),c=!1;var f=l.separatorDashArray;null===f&&(f=i?t.Vh:t.Uh),null!==f&&(c=!0,e.ns(f,0)),e.beginPath(),f=l.position+u,i?f>o.height&&(u-=f-o.height):f>o.width&&(u-=f-o.width),l=l.position+u/2,e.lineWidth=u,u=t.nb,i?(l+=u.top,f=o.width-u.right,e.moveTo(u.left,l),e.lineTo(f,l)):(l+=u.left,f=o.height-u.bottom,e.moveTo(l,u.top),e.lineTo(l,f)),e.stroke(),c&&e.ls()}}}}function gh(t,e,i,n,r){for(var o=n.length,s=t.actualBounds,a=t.naturalBounds,h=0;h<o;h++){var l=n[h];if(void 0!==l&&null!==l.background&&l.coversSeparators!==r&&0!==l.actual){var u=i?s.height:s.width;if(!(l.position>u)){var c=l.Ic(),f=l.separatorStrokeWidth;isNaN(f)&&(f=i?t.Gg:t.Fg);var d=l.separatorStroke;null===d&&(d=i?t.Wh:t.Eg),null===d&&(f=0),c-=f,(f=l.position+f)+(c+=l.actual)>u&&(c=u-f),0>=c||(u=t.nb,Es(t,e,l.background,!0,!1,a,s),i?e.fillRect(u.left,f+u.top,s.width-(u.left+u.right),c):e.fillRect(f+u.left,u.top,c,s.height-(u.top+u.bottom)))}}}}function yh(t){return\"LineV\"===t||\"BarV\"===t}function mh(t){return null!==t.part?t.part.locationObject:null}function vh(t,e){xh(t,t,e)}function xh(t,e,i){i(e);for(var n=(e=e.T.m).length,r=0;r<n;r++){var o=e[r];o instanceof fh&&xh(t,o,i)}}function bh(t,e){wh(t,t,e)}function wh(t,e,i){if(i(e),e instanceof fh)for(var n=(e=e.T.m).length,r=0;r<n;r++)wh(t,e[r],i)}function kh(t,e,i){if(i(e))return e;if(e instanceof fh)for(var n=(e=e.T.m).length,r=0;r<n;r++){var o=kh(t,e[r],i);if(null!==o)return o}return null}function Mh(t){for(var e=(t=t.T.m).length,i=0,n=0;n<e;n++){var r=t[n];r instanceof fh?i=Math.max(i,Mh(r)):r instanceof Hh&&(i=Math.max(i,r.hg/2*r.Ij*r.Af()))}return i}function Sh(t,e,i,n){for(var r=t.T.m,o=r.length;o--;){var s=r[o];if(s.visible){var a=s.actualBounds,h=t.naturalBounds;a.x>h.width||a.y>h.height||0>a.x+a.width||0>a.y+a.height||(s instanceof fh&&Sh(s,e,i,n),null!==e&&(s=e(s)),null===s||null!==i&&!i(s)||n.add(s))}}}function Ph(t){var e=null;return t instanceof Hh&&((e=t.spot1)===Pe&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=ee),e}function Nh(t){var e=null;return t instanceof Hh&&((e=t.spot2)===Pe&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=le),e}function Ch(t,e){t.G=e?16777216|t.G:-16777217&t.G}function Th(t,e,i){var n=t.ob;if(n&&!(0>e)){if(n[e]=i instanceof Gh?i:void 0,!i)for(e=n.length-1;0<=e&&void 0===n[e--];)n.length--;t.s()}}function Lh(t,e,i){var n=t.ib;if(n&&!(0>e)){if(n[e]=i instanceof Gh?i:void 0,!i)for(e=n.length-1;0<=e&&void 0===n[e--];)n.length--;t.s()}}function Ah(t){return null!==(t=t.Qh)&&t.v}function jh(t){var e=t.Qh;if(null===e)null!==t.data&&w(\"Template cannot have .data be non-null: \"+t),t.Qh=e=new J;else if(e.v)return;var i=new J;Ch(t,!1),t.Cm(t,(function(t,n){var r=n.fb;if(null!==r)for(Ks(n,!1),r=r.iterator;r.next();){var o=r.value;o.mode===Ld&&Ks(n,!0);var s=o.sourceName;null!==s&&(\"/\"===s&&Ch(t,!0),null!==(s=Nd(o,t,n))&&(i.add(s),null===s.Hl&&(s.Hl=new J),s.Hl.add(o))),e.add(o)}if(n instanceof fh&&n.type===fh.Table){if(0<n.ob.length)for(r=(t=n.ob).length,o=0;o<r;o++)if(void 0!==(s=t[o])&&null!==s.fb)for(var a=s.fb.iterator;a.next();){var h=a.value;h.od=s,h.xp=2,h.Nl=s.index,e.add(h)}if(0<n.ib.length)for(t=(n=n.ib).length,r=0;r<t;r++)if(void 0!==(o=n[r])&&null!==o.fb)for(s=o.fb.iterator;s.next();)(a=s.value).od=o,a.xp=1,a.Nl=o.index,e.add(a)}}));for(var n=i.iterator;n.next();){var r=n.value;if(null!==r.Hl){Ks(r,!0);for(var o=r.Hl.iterator;o.next();){var s=o.value;null===r.fb&&(r.fb=new J),r.fb.add(s)}}r.Hl=null}for(n=e.iterator;n.next();)if(null!==(o=(r=n.value).od)){r.od=null;var a=r.targetProperty,h=a.indexOf(\".\");0<h&&o instanceof fh&&(s=a.substring(0,h),a=a.substr(h+1),null!==(h=o.Ya(s))?(o=h,r.targetProperty=a):S('Warning: unable to find GraphObject named \"'+s+'\" for Binding: '+r.toString())),o instanceof Gh?(s=it(o.panel),r.Xi=void 0===s?-1:s,o.panel.Ck=r.Xi):o instanceof Ds?(s=it(o),r.Xi=void 0===s?-1:s,o.Ck=r.Xi):w(\"Unknown type of binding target: \"+o)}e.freeze(),t instanceof Jl&&t.Mc()&&t.Ta()}function Oh(t){if(t.type===fh.Spot||t.type===fh.Auto)return Math.min(t.T.length,1);if(t.type===fh.Link){for(var e=(t=t.T).length,i=0;i<e;i++){var n=t.J(i);if(!(n instanceof Hh&&n.isPanelMain))break}return i}return t.type===fh.Table&&0<t.T.length&&(t=t.T.J(0)).isPanelMain&&t instanceof fh&&(t.type===fh.TableRow||t.type===fh.TableColumn)?1:0}function Dh(t,e){var i=Oh(t);if(null===e||0===e.length)for(;t.T.length>i;)t.ec(t.T.length-1,!1);else if(t.T.length<=i){i=e.length;for(var n=0;n<i;n++)Fh(t,e[n],n,!0)}else{n=i;for(var r=0;r<e.length;r++,n++){var o=e[r],s=n<t.T.length?t.T.J(n):null;if(s instanceof fh){if(s.data!==o){var a=Ih(t,s.data),h=Ih(t,o),l=h!==a;l||(a=zh(t,a),l=zh(t,h)!==a),l?(t.ec(n,!1),Fh(t,o,r,!1)):s.data=o}}else Fh(t,o,r,!1)}for(;n<t.T.length;)t.ec(n,!1);t.ph=null,Bh(t,i,0),Zs(t)||t.s(),t.Rf=null,t.Ef()||Rh(t,t,!1),null!==(e=t.part)&&(e.li=null,e.Xf=NaN,t.Je&&e instanceof wu&&(e.Je=!0),e.Je&&e instanceof wu&&(e.nc=null))}}function Fh(t,e,i,n){if(!(null==e||0>i)){var r=Ih(t,e);if(null!==(r=zh(t,r))){if(jh(r),0!=(16777216&(r=r.copy()).G)){var o=t.Ch();null!==o&&Ch(o,!0)}\"object\"==typeof e&&(null===t.$d&&(t.$d=new pt),t.$d.add(e,r)),o=i+Oh(t),t.wb(o,r),n&&(r.jb=e,Bh(t,o,i),r.jb=null),r.data=e}}}function Bh(t,e,i){for(t=t.T;e<t.length;){var n=t.J(e);if(n instanceof fh){var r=e,o=i;n.type===fh.TableRow?n.row=r:n.type===fh.TableColumn&&(n.column=r),n.itemIndex=o}e++,i++}}function Ih(t,e){if(null===e)return\"\";if(\"function\"==typeof(t=t.fl))t=t(e);else{if(\"string\"!=typeof t||\"object\"!=typeof e)return\"\";if(\"\"===t)return\"\";t=wd(e,t)}return void 0===t?\"\":\"string\"==typeof t?t:void w(\"Panel.getCategoryForItemData found a non-string category for \"+e+\": \"+t)}function zh(t,e){var i=t.itemTemplateMap,n=null;return null!==i&&(n=i.H(e)),null===n&&(null!==i&&(n=i.H(\"\")),null===n&&(_h||(_h=!0,S('No item template Panel found for category \"'+e+'\" on '+t),S(\"  Using default item template.\"),t=new fh,(e=new rl).bind(new Pd(\"text\",\"\",D)),t.add(e),Vh=t),n=Vh)),n}function Rh(t,e,i){var n=e.enabledChanged;if(null!==n&&n(e,i),e instanceof fh){n=(e=e.T.m).length;for(var r=0;r<n;r++){var o=e[r];i&&o instanceof fh&&!o.isEnabled||Rh(t,o,i)}}}function Eh(t,e){e.name=t,Yh.add(t,e)}wa.className=\"Brush\",wa.Solid=Ba=new V(wa,\"Solid\",0),wa.Linear=Ia=new V(wa,\"Linear\",1),wa.Radial=za=new V(wa,\"Radial\",2),wa.Pattern=Ra=new V(wa,\"Pattern\",4),wa.Lab=Ea=new V(wa,\"Lab\",5),wa.HSL=_a=new V(wa,\"HSL\",6),wa.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e=\"0\"+e),2>n.length&&(n=\"0\"+n),2>t.length&&(t=\"0\"+t),\"#\"+e+n+t},wa.isValidColor=function(t){if(\"black\"===t)return!0;if(\"\"===t)return!1;Wa||(Fa(),Wa=!0);var e=Xa;if(null===e)return!0;e.fillStyle=\"#000000\";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i||(e.fillStyle=\"#FFFFFF\",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},wa.lighten=function(t){return ka(t)},wa.lightenBy=ka,wa.darken=function(t){return Ma(t)},wa.darkenBy=Ma,wa.mix=Sa,wa.isDark=Pa,Za.prototype.measure=function(){},Za.prototype.uA=function(t,e,i,n,r){t.measure(e,i,n,r)},Za.prototype.arrange=function(){},Za.prototype.gz=function(t,e,i,n,r,o){t.arrange(e,i,n,r,o)},Za.prototype.EA=function(t){t.ak()},Za.prototype.oc=function(){},f.Object.defineProperties(Za.prototype,{name:{get:function(){return this.na},set:function(t){this.na=t}},classType:{get:function(){return fh}}}),Za.prototype.remeasureObject=Za.prototype.EA,Za.prototype.arrangeElement=Za.prototype.gz,Za.prototype.measureElement=Za.prototype.uA,Za.className=\"PanelLayout\",c(Ja,Za),Ja.prototype.measure=function(t,e,i,n,r,o,s){var a=n.length;t=mh(t);for(var h=0;h<a;h++){var l=n[h];if(l.visible||l===t){var u=l.margin,c=u.right+u.left;u=u.top+u.bottom,l.measure(e,i,o,s);var f=l.measuredBounds;c=Math.max(f.width+c,0),u=Math.max(f.height+u,0),f=l.position.x;var d=l.position.y;isFinite(f)||(f=0),isFinite(d)||(d=0),l instanceof Hh&&l.isGeometryPositioned&&(f-=l=l.strokeWidth/2,d-=l),Gt(r,f,d,c,u)}}},Ja.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding;for(t=i.x-r.left,i=i.y-r.top,r=0;r<n;r++){var o=e[r],s=o.measuredBounds,a=o.margin,h=o.position.x,l=o.position.y;if(h=isNaN(h)?-t:h-t,l=isNaN(l)?-i:l-i,o instanceof Hh&&o.isGeometryPositioned){var u=o.strokeWidth/2;h-=u,l-=u}o.visible&&o.arrange(h+a.left,l+a.top,s.width,s.height)}},c($a,Za),$a.prototype.measure=function(t,e,i,n,r,o,s){var a=n.length;e=A(),o=mh(t);for(var h=0;h<a;h++){var l=n[h];if(l.visible||l===o){var u=Ys(l,!1);if(u!==fs&&u!==gs)e.push(l);else{l.measure(1/0,i,0,s),u=l.margin,l=l.measuredBounds;var c=Math.max(l.height+u.top+u.bottom,0);r.width+=Math.max(l.width+u.right+u.left,0),r.height=Math.max(r.height,c)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):0!==r.height&&(i=Math.min(r.height,t.maxSize.height)),t=0;t<n;t++)((h=e[t]).visible||h===o)&&(a=(u=h.margin).right+u.left,u=u.top+u.bottom,h.measure(1/0,i,0,s),h=h.measuredBounds,u=Math.max(h.height+u,0),r.width+=Math.max(h.width+a,0),r.height=Math.max(r.height,u));j(e)},$a.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.top,s=t.isOpposite,a=s?i.width:r.left,h=0;h<n;h++){var l=o,u=e[h];if(u.visible){var c=u.measuredBounds,f=u.margin,d=f.top+f.bottom,p=o+r.bottom,g=c.height,y=Ys(u,!1);(isNaN(u.desiredSize.height)&&y===cs||y===ys)&&(g=Math.max(i.height-d-p,0)),d=g+d+p,(p=u.alignment).Mb()&&(p=t.defaultAlignment),p.hb()||(p=oe),s&&(a-=c.width+f.left+f.right),u.arrange(a+p.offsetX+f.left,l+p.offsetY+f.top+(i.height*p.y-d*p.y),c.width,g),s||(a+=c.width+f.left+f.right)}}},c(Qa,Za),Qa.prototype.measure=function(t,e,i,n,r,o){var s=n.length;i=A();for(var a=mh(t),h=0;h<s;h++){var l=n[h];if(l.visible||l===a){var u=Ys(l,!1);if(u!==fs&&u!==ys)i.push(l);else{var c=l.margin;u=c.right+c.left,c=c.top+c.bottom,l.measure(e,1/0,o,0),l=l.measuredBounds,It(r,Math.max(r.width,Math.max(l.width+u,0)),r.height+Math.max(l.height+c,0))}}}if(0!==(n=i.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==r.width&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<n;t++)((h=i[t]).visible||h===a)&&(s=(l=h.margin).right+l.left,l=l.top+l.bottom,h.measure(e,1/0,o,0),h=h.measuredBounds,l=Math.max(h.height+l,0),r.width=Math.max(r.width,Math.max(h.width+s,0)),r.height+=l);j(i)}},Qa.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.left,s=t.isOpposite,a=s?i.height:r.top,h=0;h<n;h++){var l=o,u=e[h];if(u.visible){var c=u.measuredBounds,f=u.margin,d=f.left+f.right,p=o+r.right,g=c.width,y=Ys(u,!1);(isNaN(u.desiredSize.width)&&y===cs||y===gs)&&(g=Math.max(i.width-d-p,0)),d=g+d+p,(p=u.alignment).Mb()&&(p=t.defaultAlignment),p.hb()||(p=oe),s&&(a-=c.height+f.bottom+f.top),u.arrange(l+p.offsetX+f.left+(i.width*p.x-d*p.x),a+p.offsetY+f.top,g,c.height),s||(a+=c.height+f.bottom+f.top)}}},c(th,Za),th.prototype.measure=function(t,e,i,n,r,o,s){var a=n.length,h=t.pb(),l=h.margin,u=l.right+l.left,c=l.top+l.bottom;h.measure(e,i,o,s);var f=h.measuredBounds;o=f.width,s=f.height;var d=Math.max(o+u,0),p=Math.max(s+c,0),g=t.isClipping,y=Bt.allocAt(-l.left,-l.top,d,p),m=Bt.allocAt(0,0,o,s);eh(h,m,!0),o=m.width,s=m.height;for(var v=!0,x=mh(t),b=0;b<a;b++){var w=n[b],k=e,M=i;if(w!==h&&(w.visible||w===x)){switch(d=(l=w.margin).right+l.left,p=l.top+l.bottom,f=Ys(w,!1)){case cs:k=o,M=s;break;case gs:k=o;break;case ys:M=s}w.measure(k,M,0,0),f=w.measuredBounds,d=Math.max(f.width+d,0),p=Math.max(f.height+p,0),(k=w.alignment).Mb()&&(k=t.defaultAlignment),k.hb()||(k=oe);var S=w.alignmentFocus;S.Mb()&&(S=oe),M=null,w instanceof fh&&\"\"!==w.Re&&(M=w.Ya(w.Re))===w&&(M=null);var P=m.x,N=m.y;if(null!==M){for(w.arrange(0,0,f.width,f.height),l=M.actualBounds,l=gt.allocAt(l.x+(S.x*l.width-S.offsetX),l.y+(S.y*l.height-S.offsetY)),M=M.panel;M!==w;)M.transform.Aa(l),M=M.panel;P+=k.x*o+k.offsetX-l.x,N+=k.y*s+k.offsetY-l.y,gt.free(l)}else P+=k.x*o+k.offsetX-(S.x*f.width+S.offsetX)-l.left,N+=k.y*s+k.offsetY-(S.y*f.height+S.offsetY)-l.top;v?(v=!1,r.h(P,N,d,p)):Gt(r,P,N,d,p)}}switch(v?r.assign(y):g?r.$u(m.x,m.y,m.width,m.height):Gt(r,y.x,y.y,y.width,y.height),Bt.free(y),Bt.free(m),(f=h.stretch)===ps&&(f=Ys(h,!1)),f){case fs:return;case cs:if(!isFinite(e)&&!isFinite(i))return;break;case gs:if(!isFinite(e))return;break;case ys:if(!isFinite(i))return}for(o=(f=h.measuredBounds).width,s=f.height,d=Math.max(o+u,0),p=Math.max(s+c,0),l=h.margin,eh(h,m=Bt.allocAt(-l.left,-l.top,d,p),!0),o=m.width,s=m.height,e=0;e<a;e++)(i=n[e])===h||!i.visible&&i!==x||(d=(l=i.margin).right+l.left,p=l.top+l.bottom,f=i.measuredBounds,d=Math.max(f.width+d,0),p=Math.max(f.height+p,0),(u=i.alignment).Mb()&&(u=t.defaultAlignment),u.hb()||(u=oe),(i=i.alignmentFocus).Mb()&&(i=oe),v?(v=!1,r.h(u.x*o+u.offsetX-(i.x*f.width+i.offsetX)-l.left,u.y*s+u.offsetY-(i.y*f.height+i.offsetY)-l.top,d,p)):Gt(r,u.x*o+u.offsetX-(i.x*f.width+i.offsetX)-l.left,u.y*s+u.offsetY-(i.y*f.height+i.offsetY)-l.top,d,p));v?r.assign(y):g?r.$u(m.x,m.y,m.width,m.height):Gt(r,y.x,y.y,y.width,y.height),Bt.free(m)},th.prototype.arrange=function(t,e,i){var n=e.length,r=t.pb(),o=r.measuredBounds,s=o.width,a=o.height,h=t.padding;o=h.left,h=h.top;var l=o-i.x,u=h-i.y;for(r.arrange(l,u,s,a),eh(r,s=Bt.allocAt(0,0,s,a),!1),a=0;a<n;a++){var c=e[a];if(c!==r){var f=(l=c.measuredBounds).width,d=l.height;(u=c.alignment).Mb()&&(u=t.defaultAlignment),u.hb()||(u=oe);var p=c.alignmentFocus;if(p.Mb()&&(p=oe),l=null,c instanceof fh&&\"\"!==c.Re&&(l=c.Ya(c.Re))===c&&(l=null),null!==l){var g=l.actualBounds;for(p=gt.allocAt(g.x+(p.x*g.width-p.offsetX),g.y+(p.y*g.height-p.offsetY)),l=l.panel;l!==c;)l.transform.Aa(p),l=l.panel;l=u.x*s.width+u.offsetX-p.x,u=u.y*s.height+u.offsetY-p.y,gt.free(p)}else l=u.x*s.width+u.offsetX-(p.x*f+p.offsetX),u=u.y*s.height+u.offsetY-(p.y*d+p.offsetY);l+=s.x-i.x,u+=s.y-i.y,c.visible&&c.arrange(o+l,h+u,f,d)}}Bt.free(s)},c(ih,Za),ih.prototype.measure=function(t,e,i,n,r,o,s){var a=n.length,h=t.pb(),l=h.margin,u=e,c=i,f=l.right+l.left,d=l.top+l.bottom;h.measure(e,i,o,s),l=h.measuredBounds;var p=0,g=null;h instanceof Hh&&(p=(g=h).strokeWidth*g.scale);var y=Math.max(l.width+f,0);l=Math.max(l.height+d,0);var m=Ph(h),v=m.x*y+m.offsetX;m=m.y*l+m.offsetY;var x=Nh(h),b=x.x*y+x.offsetX;for(x=x.y*l+x.offsetY,isFinite(e)&&(u=Math.max(Math.abs(v-b)-p,0)),isFinite(i)&&(c=Math.max(Math.abs(m-x)-p,0)),(p=jt.alloc()).h(0,0),t=mh(t),x=0;x<a;x++)(m=n[x])===h||!m.visible&&m!==t||(y=(l=m.margin).right+l.left,v=l.top+l.bottom,m.measure(u,c,0,0),l=m.measuredBounds,y=Math.max(l.width+y,0),l=Math.max(l.height+v,0),p.h(Math.max(y,p.width),Math.max(l,p.height)));if(1===a)r.width=y,r.height=l,jt.free(p);else{switch(m=Ph(h),a=n=0,(x=Nh(h)).x!==m.x&&x.y!==m.y&&(n=p.width/Math.abs(x.x-m.x),a=p.height/Math.abs(x.y-m.y)),jt.free(p),p=0,null!==g&&(p=g.strokeWidth*g.scale,Zh(g)===ds&&(n=a=Math.max(n,a))),n+=Math.abs(m.offsetX)+Math.abs(x.offsetX)+p,a+=Math.abs(m.offsetY)+Math.abs(x.offsetY)+p,(g=h.stretch)===ps&&(g=Ys(h,!1)),g){case fs:s=o=0;break;case cs:isFinite(e)&&(n=e),isFinite(i)&&(a=i);break;case gs:isFinite(e)&&(n=e),s=0;break;case ys:o=0,isFinite(i)&&(a=i)}h.ak(),h.measure(n,a,o,s),r.width=h.measuredBounds.width+f,r.height=h.measuredBounds.height+d}},ih.prototype.arrange=function(t,e){var i=e.length,n=t.pb(),r=n.measuredBounds,o=Bt.alloc();o.h(0,0,1,1);var s=n.margin,a=s.left;s=s.top;var h=t.padding,l=h.left;h=h.top,n.arrange(l+a,h+s,r.width,r.height);var u=Ph(n),c=Nh(n),f=u.y*r.height+u.offsetY,d=c.x*r.width+c.offsetX;for(c=c.y*r.height+c.offsetY,o.x=u.x*r.width+u.offsetX,o.y=f,Gt(o,d,c,0,0),o.x+=a+l,o.y+=s+h,r=0;r<i;r++)(a=e[r])!==n&&(l=a.measuredBounds,s=a.margin,h=Math.max(l.width+s.right+s.left,0),u=Math.max(l.height+s.top+s.bottom,0),(f=a.alignment).Mb()&&(f=t.defaultAlignment),f.hb()||(f=oe),h=o.width*f.x+f.offsetX-h*f.x+s.left+o.x,s=o.height*f.y+f.offsetY-u*f.y+s.top+o.y,a.visible&&(Xt(o.x,o.y,o.width,o.height,h,s,l.width,l.height)?a.arrange(h,s,l.width,l.height):a.arrange(h,s,l.width,l.height,new Bt(o.x,o.y,o.width,o.height))));Bt.free(o)},c(nh,Za),nh.prototype.measure=function(t,e,i,n,r){for(var o=n.length,s=A(),a=A(),h=0;h<o;h++){var l=n[h],u=l instanceof fh?l:null;if(null===u||u.type!==fh.TableRow&&u.type!==fh.TableColumn||!l.visible)s.push(l);else{a.push(u);for(var c=u.T.m,f=c.length,d=0;d<f;d++){var p=c[d];u.type===fh.TableRow?p.row=l.row:u.type===fh.TableColumn&&(p.column=l.column),s.push(p)}}}0===(o=s.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var g=[],y=0;y<o;y++){var m=s[y];Js(m,!0),Qs(m,!0),g[m.row]||(g[m.row]=[]),g[m.row][m.column]||(g[m.row][m.column]=[]),g[m.row][m.column].push(m)}j(s);var v=A(),x=A(),b=A(),w={count:0},k={count:0},M=e,S=i,P=t.ob;o=P.length;for(var N=0;N<o;N++){var C=P[N];void 0!==C&&(C.actual=0)}o=(P=t.ib).length;for(var T=0;T<o;T++)void 0!==(C=P[T])&&(C.actual=0);for(var L=g.length,O=0,D=0;D<L;D++)g[D]&&(O=Math.max(O,g[D].length));var F=Math.min(t.topIndex,L-1),B=Math.min(t.leftIndex,O-1),I=0;L=g.length;for(var z=mh(t),R=0;R<L;R++)if(g[R]){O=g[R].length;var E=t.getRowDefinition(R);E.actual=0;for(var _=E.cc=0;_<O;_++)if(g[R][_]){var V=t.getColumnDefinition(_);void 0===v[_]&&(V.actual=0,V.cc=0,v[_]=!0);for(var Y=g[R][_],G=Y.length,X=0;X<G;X++){var U=Y[X];if(U.visible||U===z){var q=1<U.rowSpan||1<U.columnSpan;q&&(R<F||_<B||x.push(U));var K=U.margin,H=K.right+K.left,W=K.top+K.bottom,Z=Gs(U,E,V,!1),J=U.desiredSize,$=!isNaN(J.height),Q=!isNaN(J.width)&&$;if(q||Z===fs||Q||R<F||_<B||(void 0!==w[_]||Z!==cs&&Z!==gs||(w[_]=-1,w.count++),void 0!==k[R]||Z!==cs&&Z!==ys||(k[R]=-1,k.count++),b.push(U)),U.measure(1/0,1/0,0,0),!(R<F||_<B)){var tt=U.measuredBounds,et=Math.max(tt.width+H,0),it=Math.max(tt.height+W,0);if(1===U.rowSpan&&(Z===fs||Z===gs)){var nt=(C=t.getRowDefinition(R)).Ic();(I=Math.max(it-C.actual,0))+nt>S&&(I=Math.max(S-nt,0));var rt=0===C.la;C.cc=C.cc+I,C.actual=C.la+I,S=Math.max(S-(I+(rt?nt:0)),0)}if(1===U.columnSpan&&(Z===fs||Z===ys)){var ot=(C=t.getColumnDefinition(_)).Ic();(I=Math.max(et-C.actual,0))+ot>M&&(I=Math.max(M-ot,0));var st=0===C.la;C.cc=C.cc+I,C.actual=C.la+I,M=Math.max(M-(I+(st?ot:0)),0)}q&&U.ak()}}}}}j(v);var at=0,ht=0;o=t.columnCount;for(var lt=0;lt<o;lt++){var ut=t.ib[lt];void 0!==ut&&(at+=ut.cc,0!==ut.cc&&(at+=ut.Ic()))}o=t.rowCount;for(var ct=0;ct<o;ct++){var ft=t.ob[ct];void 0!==ft&&(ht+=ft.cc,0!==ft.cc&&(ht+=ft.Ic()))}M=Math.max(e-at,0);var dt=S=Math.max(i-ht,0),pt=M;o=b.length;for(var gt=0;gt<o;gt++){var yt=b[gt],mt=t.getRowDefinition(yt.row),vt=t.getColumnDefinition(yt.column),xt=yt.measuredBounds,bt=yt.margin,wt=bt.right+bt.left,kt=bt.top+bt.bottom;w[yt.column]=0===vt.cc&&void 0!==w[yt.column]?Math.max(xt.width+wt,w[yt.column]):null,k[yt.row]=0===mt.cc&&void 0!==k[yt.row]?Math.max(xt.height+kt,k[yt.row]):null}var Mt,St=0,Pt=0;for(Mt in k)\"count\"!==Mt&&(St+=k[Mt]);for(Mt in w)\"count\"!==Mt&&(Pt+=w[Mt]);for(var Nt=jt.alloc(),Ct=0;Ct<o;Ct++){var Tt=b[Ct];if(Tt.visible||Tt===z){var Lt=t.getRowDefinition(Tt.row),At=t.getColumnDefinition(Tt.column),Ot=0;isFinite(At.width)?Ot=At.width:(Ot=isFinite(M)&&null!==w[Tt.column]?0===Pt?At.actual+M:w[Tt.column]/Pt*pt:null!==w[Tt.column]?M:At.actual||M,Ot=Math.max(0,Ot-At.Ic()));var Dt=0;switch(isFinite(Lt.height)?Dt=Lt.height:(Dt=isFinite(S)&&null!==k[Tt.row]?0===St?Lt.actual+S:k[Tt.row]/St*dt:null!==k[Tt.row]?S:Lt.actual||S,Dt=Math.max(0,Dt-Lt.Ic())),Nt.h(Math.max(At.minimum,Math.min(Ot,At.maximum)),Math.max(Lt.minimum,Math.min(Dt,Lt.maximum))),Z=Gs(Tt,Lt,At,!1)){case gs:Nt.height=Math.max(Nt.height,Lt.actual+S);break;case ys:Nt.width=Math.max(Nt.width,At.actual+M)}var Ft=Tt.margin,Bt=Ft.right+Ft.left,It=Ft.top+Ft.bottom;Tt.ak(),Tt.measure(Nt.width,Nt.height,At.minimum,Lt.minimum);var zt=Tt.measuredBounds,Rt=Math.max(zt.width+Bt,0),Et=Math.max(zt.height+It,0);isFinite(M)&&(Rt=Math.min(Rt,Nt.width)),isFinite(S)&&(Et=Math.min(Et,Nt.height));var _t=0;_t=Lt.actual,Lt.actual=Math.max(Lt.actual,Et),Lt.cc=Math.max(Lt.cc,Et),I=Lt.actual-_t,S=Math.max(S-I,0),null===k[Tt.row]&&(dt=Math.max(dt-I,0)),_t=At.actual,At.actual=Math.max(At.actual,Rt),At.cc=Math.max(At.cc,Rt),I=At.actual-_t,M=Math.max(M-I,0),null===w[Tt.column]&&(pt=Math.max(pt-I,0))}}j(b);var Vt=jt.alloc(),Yt=A(),Gt=A();if(0!==(o=x.length))for(var Xt=0;Xt<L;Xt++)if(g[Xt]){O=g[Xt].length;var Ut=t.getRowDefinition(Xt);Yt[Xt]=Ut.actual;for(var qt=0;qt<O;qt++)if(g[Xt][qt]){var Kt=t.getColumnDefinition(qt);Gt[qt]=Kt.actual}}for(var Ht=0;Ht<o;Ht++){var Wt=x[Ht];if(Wt.visible||Wt===z){var Zt=t.getRowDefinition(Wt.row),Jt=t.getColumnDefinition(Wt.column);switch(Nt.h(Math.max(Jt.minimum,Math.min(e,Jt.maximum)),Math.max(Zt.minimum,Math.min(i,Zt.maximum))),Z=Gs(Wt,Zt,Jt,!1)){case cs:0!==Gt[Jt.index]&&(Nt.width=Math.min(Nt.width,Gt[Jt.index])),0!==Yt[Zt.index]&&(Nt.height=Math.min(Nt.height,Yt[Zt.index]));break;case gs:0!==Gt[Jt.index]&&(Nt.width=Math.min(Nt.width,Gt[Jt.index]));break;case ys:0!==Yt[Zt.index]&&(Nt.height=Math.min(Nt.height,Yt[Zt.index]))}isFinite(Jt.width)&&(Nt.width=Jt.width),isFinite(Zt.height)&&(Nt.height=Zt.height),Vt.h(0,0);for(var $t=Jt.minimum,Qt=Zt.minimum,te=1;te<Wt.rowSpan&&!(Wt.row+te>=t.rowCount);te++)C=t.getRowDefinition(Wt.row+te),I=0,I=Z===cs||Z===ys?Math.max(C.minimum,0===Yt[Wt.row+te]?C.maximum:Math.min(Yt[Wt.row+te],C.maximum)):Math.max(C.minimum,isNaN(C.Bd)?C.maximum:Math.min(C.Bd,C.maximum)),Vt.height+=I,Qt+=C.minimum;for(var ee=1;ee<Wt.columnSpan&&!(Wt.column+ee>=t.columnCount);ee++)C=t.getColumnDefinition(Wt.column+ee),I=0,I=Z===cs||Z===gs?Math.max(C.minimum,0===Gt[Wt.column+ee]?C.maximum:Math.min(Gt[Wt.column+ee],C.maximum)):Math.max(C.minimum,isNaN(C.Bd)?C.maximum:Math.min(C.Bd,C.maximum)),Vt.width+=I,$t+=C.minimum;Nt.width+=Vt.width,Nt.height+=Vt.height;var ie=Wt.margin,ne=ie.right+ie.left,re=ie.top+ie.bottom;Wt.measure(Nt.width,Nt.height,$t,Qt);for(var oe=Wt.measuredBounds,se=Math.max(oe.width+ne,0),ae=Math.max(oe.height+re,0),he=0,le=0;le<Wt.rowSpan&&!(Wt.row+le>=t.rowCount);le++)he+=(C=t.getRowDefinition(Wt.row+le)).total||0;if(he<ae){var ue=ae-he,ce=ae-he;if(null!==Wt.spanAllocation)for(var fe=Wt.spanAllocation,de=0;de<Wt.rowSpan&&!(0>=ue)&&!(Wt.row+de>=t.rowCount);de++){var pe=(C=t.getRowDefinition(Wt.row+de)).la||0,ge=fe(Wt,C,ce);C.actual=Math.min(C.maximum,pe+ge),C.la!==pe&&(ue-=C.la-pe)}for(;0<ue;){var ye=C.la||0;if(isNaN(C.height)&&C.maximum>ye&&(C.actual=Math.min(C.maximum,ye+ue),C.la!==ye&&(ue-=C.la-ye)),0===C.index)break;C=t.getRowDefinition(C.index-1)}}for(var me=0,ve=0;ve<Wt.columnSpan&&!(Wt.column+ve>=t.columnCount);ve++)me+=(C=t.getColumnDefinition(Wt.column+ve)).total||0;if(me<se){var xe=se-me,be=se-me;if(null!==Wt.spanAllocation)for(var we=Wt.spanAllocation,ke=0;ke<Wt.columnSpan&&!(0>=xe)&&!(Wt.column+ke>=t.columnCount);ke++){var Me=(C=t.getColumnDefinition(Wt.column+ke)).la||0,Se=we(Wt,C,be);C.actual=Math.min(C.maximum,Me+Se),C.la!==Me&&(xe-=C.la-Me)}for(;0<xe;){var Pe=C.la||0;if(isNaN(C.width)&&C.maximum>Pe&&(C.actual=Math.min(C.maximum,Pe+xe),C.la!==Pe&&(xe-=C.la-Pe)),0===C.index)break;C=t.getColumnDefinition(C.index-1)}}}}j(x),jt.free(Vt),jt.free(Nt),void 0!==Yt&&j(Yt),void 0!==Gt&&j(Gt);var Ne=0,Ce=0,Te=t.desiredSize,Le=t.maxSize;Z=Ys(t,!0);var Ae=ht=at=0,je=0;o=t.columnCount;for(var Oe=0;Oe<o;Oe++)void 0!==t.ib[Oe]&&(C=t.getColumnDefinition(Oe),isFinite(C.width)?(Ae+=C.width,Ae+=C.Ic()):Xh(C)===qh?(Ae+=C.la,Ae+=C.Ic()):0!==C.la&&(at+=C.la,at+=C.Ic()));Ne=isFinite(Te.width)?Math.min(Te.width,Le.width):Z!==fs&&isFinite(e)?e:at,Ne=Math.max(Ne,t.minSize.width),Ne=Math.max(Ne-Ae,0);for(var De=0===at?1:Math.max(Ne/at,1),Fe=0;Fe<o;Fe++)void 0!==t.ib[Fe]&&(C=t.getColumnDefinition(Fe),isFinite(C.width)||Xh(C)===qh||(C.actual=C.la*De),C.position=r.width,0!==C.la&&(r.width+=C.la,r.width+=C.Ic()));o=t.rowCount;for(var Be=0;Be<o;Be++)void 0!==t.ob[Be]&&(C=t.getRowDefinition(Be),isFinite(C.height)?(je+=C.height,je+=C.Ic()):Xh(C)===qh?(je+=C.la,je+=C.Ic()):0!==C.la&&(ht+=C.la,0!==C.la&&(ht+=C.Ic())));Ce=isFinite(Te.height)?Math.min(Te.height,Le.height):Z!==fs&&isFinite(i)?i:ht,Ce=Math.max(Ce,t.minSize.height),Ce=Math.max(Ce-je,0);for(var Ie=0===ht?1:Math.max(Ce/ht,1),ze=0;ze<o;ze++)void 0!==t.ob[ze]&&(C=t.getRowDefinition(ze),isFinite(C.height)||Xh(C)===qh||(C.actual=C.la*Ie),C.position=r.height,0!==C.la&&(r.height+=C.la,0!==C.la&&(r.height+=C.Ic())));o=a.length;for(var Re=0;Re<o;Re++){var Ee=a[Re],_e=0,Ve=0;Ee.type===fh.TableRow?(_e=r.width,Ve=(C=t.getRowDefinition(Ee.row)).actual):(_e=(C=t.getColumnDefinition(Ee.column)).actual,Ve=r.height),Ee.measuredBounds.h(0,0,_e,Ve),Js(Ee,!1),g[Ee.row]||(g[Ee.row]=[]),g[Ee.row][Ee.column]||(g[Ee.row][Ee.column]=[]),g[Ee.row][Ee.column].push(Ee)}j(a),t.cp=g},nh.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding,o=r.left;r=r.top;for(var s,a,h=t.cp,l=h.length,u=0,c=0;c<l;c++)h[c]&&(u=Math.max(u,h[c].length));for(c=Math.min(t.topIndex,l-1);c!==l&&(void 0===t.ob[c]||0===t.ob[c].la);)c++;for(c=Math.min(c,l-1),c=-t.ob[c].position,s=Math.min(t.leftIndex,u-1);s!==u&&(void 0===t.ib[s]||0===t.ib[s].la);)s++;s=Math.min(s,u-1);for(var f=-t.ib[s].position,d=jt.alloc(),p=0;p<l;p++)if(h[p]){u=h[p].length;var g=t.getRowDefinition(p);a=g.position+c+r,0!==g.la&&(a+=g.Cu());for(var y=0;y<u;y++)if(h[p][y]){var m=t.getColumnDefinition(y);s=m.position+f+o,0!==m.la&&(s+=m.Cu());for(var v=h[p][y],x=v.length,b=0;b<x;b++){var w=v[b],k=w.measuredBounds,M=w instanceof fh?w:null;if(null===M||M.type!==fh.TableRow&&M.type!==fh.TableColumn){d.h(0,0);for(var S=1;S<w.rowSpan&&!(p+S>=t.rowCount);S++)M=t.getRowDefinition(p+S),d.height+=M.total;for(S=1;S<w.columnSpan&&!(y+S>=t.columnCount);S++)M=t.getColumnDefinition(y+S),d.width+=M.total;var P=m.la+d.width,N=g.la+d.height;S=s,M=a;var C=P,T=N,L=s,A=a,j=P,O=N;s+P>i.width&&(j=Math.max(i.width-s,0)),a+N>i.height&&(O=Math.max(i.height-a,0));var D=w.alignment;if(D.Mb()){(D=t.defaultAlignment).hb()||(D=oe);var F=D.x,B=D.y,I=D.offsetX;D=D.offsetY;var z=m.alignment,R=g.alignment;z.hb()&&(F=z.x,I=z.offsetX),R.hb()&&(B=R.y,D=R.offsetY)}else F=D.x,B=D.y,I=D.offsetX,D=D.offsetY;(isNaN(F)||isNaN(B))&&(B=F=.5,D=I=0),z=k.width,R=k.height;var E=w.margin,_=E.left+E.right,V=E.top+E.bottom,Y=Gs(w,g,m,!1);!isNaN(w.desiredSize.width)||Y!==cs&&Y!==gs||(z=Math.max(P-_,0)),!isNaN(w.desiredSize.height)||Y!==cs&&Y!==ys||(R=Math.max(N-V,0)),P=w.maxSize,N=w.minSize,z=Math.min(P.width,z),R=Math.min(P.height,R),z=Math.max(N.width,z),P=(R=Math.max(N.height,R))+V,S+=C*F-(z+_)*F+I+E.left,M+=T*B-P*B+D+E.top,w.visible&&(Xt(L,A,j,O,S,M,k.width,k.height)?w.arrange(S,M,z,R):w.arrange(S,M,z,R,new Bt(L,A,j,O)))}else w.bl(),w.actualBounds.ea(),C=w.actualBounds,S=Bt.allocAt(C.x,C.y,C.width,C.height),C.x=M.type===fh.TableRow?o:s,C.y=M.type===fh.TableColumn?r:a,C.width=k.width,C.height=k.height,w.actualBounds.freeze(),Qs(w,!1),Et(S,C)||null!==(k=w.part)&&(k.Gh(),w.Eo(k)),Bt.free(S)}}}for(jt.free(d),t=0;t<n;t++)null===(o=(i=e[t])instanceof fh?i:null)||o.type!==fh.TableRow&&o.type!==fh.TableColumn||(o=i.actualBounds,i.naturalBounds.ea(),i.naturalBounds.h(0,0,o.width,o.height),i.naturalBounds.freeze())},c(rh,Za),rh.prototype.measure=function(){},rh.prototype.arrange=function(){},c(oh,Za),oh.prototype.measure=function(){},oh.prototype.arrange=function(){},c(sh,Za),sh.prototype.measure=function(t,e,i,n,r,o,s){1<n.length&&w(\"Viewbox Panel cannot contain more than one GraphObject.\"),(n=n[0]).sa=1,n.ak(),n.measure(1/0,1/0,o,s);var a=n.measuredBounds,h=n.margin,l=h.right+h.left;if(h=h.top+h.bottom,isFinite(e)||isFinite(i)){var u=n.scale,c=a.width;a=a.height;var f=Math.max(e-l,0),d=Math.max(i-h,0),p=1;t.viewboxStretch===ds?0!==c&&0!==a&&(p=Math.min(f/c,d/a)):0!==c&&0!==a&&(p=Math.max(f/c,d/a)),0===p&&(p=1e-4),n.sa*=p,u!==n.scale&&(Js(n,!0),n.measure(1/0,1/0,o,s))}a=n.measuredBounds,r.width=isFinite(e)?e:Math.max(a.width+l,0),r.height=isFinite(i)?i:Math.max(a.height+h,0)},sh.prototype.arrange=function(t,e,i){var n=(e=e[0]).measuredBounds,r=e.margin,o=Math.max(n.width+(r.right+r.left),0);r=Math.max(n.height+(r.top+r.bottom),0);var s=e.alignment;s.Mb()&&(s=t.defaultAlignment),s.hb()||(s=oe),e.arrange(i.width*s.x-o*s.x+s.offsetX,i.height*s.y-r*s.y+s.offsetY,n.width,n.height)},c(ah,Za),ah.prototype.measure=function(){},ah.prototype.arrange=function(){},ah.prototype.oc=function(t,e,i){0>=(i=t.Af()*i.scale)&&(i=1);var n=t.gridCellSize,r=n.width;n=n.height;var o=t.naturalBounds,s=t.actualBounds,a=o.width,h=o.height,l=Math.ceil(a/r),u=Math.ceil(h/n),c=t.gridOrigin,f=c.x;c=c.y,e.save(),e.beginPath(),e.rect(0,0,a,h),e.clip();for(var d=[],p=t.T.m,g=p.length,y=0;y<g;y++){var m=p[y],v=[];if(d.push(v),m.visible){var x=m.interval;if(!(0>x)){m=yh(m.figure);for(var b=0;b<g;b++)if(b!==y){var w=p[b];w.visible&&yh(w.figure)===m&&(w=w.interval)>x&&v.push(w)}}}}for(g=(p=t.T.m).length,y=0;y<g;y++){var k=p[y];if(k.visible&&(v=k.interval||1,!(2>r*(m=Math.abs(v))*i))){if(x=k.segmentIndex,isFinite(x)&&!isNaN(x)||(x=0),0>x&&(x=m-Math.min(-x,m)),x=Math.round(x%m),b=1,1!==(m=k.opacity)){if(0===m)continue;b=e.globalAlpha,e.globalAlpha=b*m}w=d[y];var M=!1,S=k.strokeDashArray;if(null!==S&&(M=!0,e.ns(S,k.strokeDashOffset)),\"LineV\"===k.figure&&null!==k.stroke&&0<k.strokeWidth){for(e.lineWidth=k.strokeWidth,Es(t,e,k.stroke,!1,!1,o,s),e.beginPath(),S=k=Math.floor((f-r)/r);S<=k+l;S++){var P=S*r+f;0<=P&&P<=a&&hh(S,v,x,w)&&(e.moveTo(P,0),e.lineTo(P,h))}e.stroke()}else if(\"LineH\"===k.figure&&null!==k.stroke&&0<k.strokeWidth){for(e.lineWidth=k.strokeWidth,Es(t,e,k.stroke,!1,!1,o,s),e.beginPath(),S=k=Math.floor((c-n)/n);S<=k+u;S++)0<=(P=S*n+c)&&P<=h&&hh(S,v,x,w)&&(e.moveTo(0,P),e.lineTo(a,P));e.stroke()}else if(\"BarV\"===k.figure&&null!==k.fill)for(Es(t,e,k.fill,!0,!1,o,s),k=k.width,isNaN(k)&&(k=r),P=S=Math.floor((f-r)/r);P<=S+l;P++){var N=P*r+f;0<=N+k&&N<=a&&hh(P,v,x,w)&&e.fillRect(N,0,k,h)}else if(\"BarH\"===k.figure&&null!==k.fill)for(Es(t,e,k.fill,!0,!1,o,s),k=k.height,isNaN(k)&&(k=n),P=S=Math.floor((c-n)/n);P<=S+u;P++)0<=(N=P*n+c)+k&&N<=h&&hh(P,v,x,w)&&e.fillRect(0,N,a,k);M&&e.ls(),1!==m&&(e.globalAlpha=b)}}e.restore(),e.Hc(!1)},c(lh,Za),lh.prototype.measure=function(t,e,i,n,r){if(i=n.length,t instanceof bu||t instanceof qu){var o=null,s=null;if(t instanceof qu&&(o=t),t instanceof bu&&(o=(s=t).adornedPart,null===t.j&&(t.j=[])),o instanceof qu){var a=o;if(0===i)It(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var h=t instanceof bu?null:o.path,l=o.routeBounds;(e=t.ig).h(0,0,l.width,l.height);var u=a.points,c=o.pointsCount;null!==s?s.fk(!1):null!==o&&o.fk(!1);var f=l.width,d=l.height;t.location.h(l.x,l.y);var p=t.j;p.length=0,null!==h&&(uh(t,f,d,h),s=h.measuredBounds,e.Qc(s),p.push(s)),s=Ye.alloc();for(var g=gt.alloc(),y=gt.alloc(),m=0;m<i;m++){var v=n[m];if(v!==h)if(v.isPanelMain&&v instanceof Hh){uh(t,f,d,v);var x=v.measuredBounds;e.Qc(x),p.push(x)}else if(2>c)v.measure(1/0,1/0,0,0),x=v.measuredBounds,e.Qc(x),p.push(x);else{var b=v.segmentIndex,w=v.segmentFraction,k=v.alignmentFocus;k.zc()&&(k=oe);var M=v.segmentOrientation,S=v.segmentOffset;if(isNaN(b)){var P=a.ma;x=A(),P.Uu(w,x);var N=gt.allocAt(x[0],x[1]);if(N.add(a.i(0)),(P.type===Ue.j||null!==(P=P.figures.first()))&&N.offset(-P.startX,-P.startY),P=x[2],M!==xc){var C=a.computeAngle(v,M,P);v.zb=C}C=N.x-l.x;var T=N.y-l.y;gt.free(N),j(x)}else if(b<-c||b>=c)x=gt.alloc(),a.ug(),a.computeMidPoint(x),P=a.midAngle,M!==xc&&(C=a.computeAngle(v,M,P),v.zb=C),C=x.x-l.x,T=x.y-l.y,gt.free(x);else{if(C=0,0<=b?(T=u.J(b),x=b<c-1?u.J(b+1):T):(C=c+b,T=u.J(C),x=0<C?u.J(C-1):T),T.Ua(x)){0<=b?(P=0<b?u.J(b-1):T,C=b<c-2?u.J(b+2):x):(P=C<c-1?u.J(C+1):T,C=1<C?u.J(C-2):x),N=P.xf(T);var L=x.xf(C);P=N>L+10?0<=b?P.Pa(T):T.Pa(P):L>N+10?0<=b?x.Pa(C):C.Pa(x):0<=b?P.Pa(C):C.Pa(P)}else P=0<=b?T.Pa(x):x.Pa(T);M!==xc&&(C=a.computeAngle(v,M,P),v.zb=C),C=T.x+(x.x-T.x)*w-l.x,T=T.y+(x.y-T.y)*w-l.y}v.measure(1/0,1/0,0,0),x=v.measuredBounds,N=v.naturalBounds;var O=0;v instanceof Hh&&(O=v.strokeWidth),L=N.width+O;var D=N.height+O;s.reset(),s.translate(-x.x,-x.y),s.scale(v.scale,v.scale),s.rotate(M===xc?v.angle:P,L/2,D/2),M!==Cc&&M!==jc||s.rotate(90,L/2,D/2),M!==Tc&&M!==Oc||s.rotate(-90,L/2,D/2),M===Dc&&(45<P&&135>P||225<P&&315>P)&&s.rotate(-P,L/2,D/2),N=new Bt(0,0,L,D),g.Ti(N,k),s.Aa(g),k=-g.x+O/2*v.scale,v=-g.y+O/2*v.scale,y.assign(S),O=isNaN(S.x);var F=isNaN(S.y);if(O||F){L=L/2+3,D=D/2+3;var B=45<=P&&135>=P,I=225<=P&&315>=P;M===xc&&(B||I)?(y.x=F?L:S.y,y.y=O?D:S.x,B?0<=b||isNaN(b)&&.5>w||!O||(y.y=-D):I&&((0<=b||isNaN(b)&&.5>w)&&O&&(y.y=-D),F&&(y.x=-L))):(O&&(y.x=0<=b||isNaN(b)&&.5>w?L:-L),F&&(y.y=-D),y.rotate(P))}else y.rotate(P);C+=y.x,T+=y.y,N.set(x),N.h(C+k,T+v,x.width,x.height),p.push(N),e.Qc(N)}}if(null!==o)for(n=o.labelNodes;n.next();)n.value.measure(1/0,1/0);t.ig=e,(t=t.location).h(t.x+e.x,t.y+e.y),It(r,e.width||0,e.height||0),Ye.free(s),gt.free(g),gt.free(y)}}}},lh.prototype.arrange=function(t,e){var i=e.length;if(t instanceof bu||t instanceof qu){var n=t,r=null;t instanceof bu&&(n=(r=t).adornedPart);var o=t instanceof bu?null:n.path,s=t.j;if(0!==s.length){var a=0;if(null!==o&&a<s.length){var h=s[a];a++,o.arrange(h.x-t.ig.x,h.y-t.ig.y,h.width,h.height)}for(h=0;h<i;h++){var l=e[h];if(l!==o&&a<s.length){var u=s[a];a++,l.arrange(u.x-t.ig.x,u.y-t.ig.y,u.width,u.height)}}}if(2<=(i=(e=n.points).count)&&t instanceof qu)for(o=t.labelNodes;o.next();){var c=t;a=(s=o.value).segmentIndex,h=s.segmentFraction;var f=s.alignmentFocus;if(l=s.segmentOrientation,u=s.segmentOffset,isNaN(a)){var d=c.ma,p=A();d.Uu(h,p);var g=gt.allocAt(p[0],p[1]);g.add(c.i(0)),d.type===Ue.j||(d=d.figures.first()),g.offset(-d.startX,-d.startY),d=p[2],l!==xc&&(c=c.computeAngle(s,l,d),s.angle=c),c=g.x;var y=g.y;gt.free(g),j(p)}else if(a<-i||a>=i)y=p=gt.alloc(),(d=c).ug(),d.computeMidPoint(y),d=c.midAngle,l!==xc&&(c=c.computeAngle(s,l,d),s.angle=c),c=p.x,y=p.y,gt.free(p);else{if(g=0,0<=a?(p=e.m[a],y=a<i-1?e.m[a+1]:p):(g=i+a,p=e.m[g],y=0<g?e.m[g-1]:p),p.Ua(y)){0<=a?(d=0<a?e.m[a-1]:p,g=a<i-2?e.m[a+2]:y):(d=g<i-1?e.m[g+1]:p,g=1<g?e.m[g-2]:y);var m=d.xf(p),v=y.xf(g);d=m>v+10?0<=a?d.Pa(p):p.Pa(d):v>m+10?0<=a?y.Pa(g):g.Pa(y):0<=a?d.Pa(g):g.Pa(d)}else d=0<=a?p.Pa(y):y.Pa(p);l!==xc&&(c=c.computeAngle(s,l,d),s.angle=c),c=p.x+(y.x-p.x)*h,y=p.y+(y.y-p.y)*h}if(f.Ds())s.location=new gt(c,y);else{f.zc()&&(f=oe),(p=Ye.alloc()).reset(),p.scale(s.scale,s.scale),p.rotate(s.angle,0,0);var x=s.naturalBounds;g=Bt.allocAt(0,0,x.width,x.height),(m=gt.alloc()).Ti(g,f),p.Aa(m),f=-m.x,v=-m.y;var b=x.width,w=x.height;(x=gt.alloc()).assign(u);var k=isNaN(u.x),M=isNaN(u.y);if(k||M){b=b/2+3,w=w/2+3;var S=45<=d&&135>=d,P=225<=d&&315>=d;l===xc&&(S||P)?(x.x=M?b:u.y,x.y=k?w:u.x,S?0<=a||isNaN(a)&&.5>h||!k||(x.y=-w):P&&((0<=a||isNaN(a)&&.5>h)&&k&&(x.y=-w),M&&(x.x=-b))):(k&&(x.x=0<=a||isNaN(a)&&.5>h?b:-b),M&&(x.y=-w),x.rotate(d))}else x.rotate(d);c+=x.x,y+=x.y,p.wq(g),f+=g.x,v+=g.y,a=gt.allocAt(c+f,y+v),s.move(a),gt.free(a),gt.free(x),gt.free(m),Bt.free(g),Ye.free(p)}}null!==r?r.fk(!1):n.fk(!1)}},c(ch,Za),ch.prototype.measure=function(t,e,i,n,r,o,s){var a=t.pb();t.Pg=[];var h=a.margin,l=h.right+h.left,u=h.top+h.bottom;a.measure(e,i,o,s);var c=a.measuredBounds,f=new Bt(-h.left,-h.top,Math.max(c.width+l,0),Math.max(c.height+u,0));t.Pg.push(f),r.assign(f);for(var d=a.geometry,p=a.strokeWidth,g=d.flattenedSegments,y=d.flattenedLengths,m=d.flattenedTotalLength,v=g.length,x=0,b=0,w=A(),k=0;k<v;k++){var M=g[k],S=[];b=x=0;for(var P=M.length,N=0;N<P;N+=2){var C=M[N],T=M[N+1];if(0!==N){var L=180*Math.atan2(T-b,C-x)/Math.PI;0>L&&(L+=360),S.push(L)}x=C,b=T}w.push(S)}if(null===t.Rf){for(var O=[],D=t.T.m,F=D.length,B=0;B<F;B++){var I=D[B],z=[];if(O.push(z),I.visible){var R=I.interval;if(!(0>R))for(var E=0;E<F;E++)if(E!==B){var _=D[E];if(_.visible&&I.constructor===_.constructor){var V=_.interval;V>R&&z.push(V)}}}}t.Rf=O}var Y=t.Rf,G=t.T.m,X=G.length,U=0,q=0,K=m;t.ij=[];for(var H,W=0;W<X;W++){var Z=G[W];if(H=[],Z.visible&&Z!==a){var J=Math.abs(Z.interval),$=t.graduatedTickUnit;if(!(2>$*J*m/t.graduatedRange)){var Q=y[0][0],tt=0,et=0;q=m*Z.graduatedStart-1e-4,K=m*Z.graduatedEnd+1e-4;var it=$*J,nt=t.graduatedTickBase;if(nt<t.graduatedMin){var rt=(t.graduatedMin-nt)/it;nt+=(rt=0==rt%1?rt:Math.floor(rt+1))*it}else nt>t.graduatedMin+it&&(nt-=Math.floor((nt-t.graduatedMin)/it)*it);for(var ot=Y[W],st=nt,at=1;nt<t.graduatedMax+5e-8;at++){t:{for(var ht=ot.length,lt=0;lt<ht;lt++)if(Xe.aa((nt-t.graduatedTickBase)%(ot[lt]*t.graduatedTickUnit),0)){var ut=!1;break t}ut=!0}if(ut&&(null===Z.graduatedSkip||!Z.graduatedSkip(nt))&&((U=(nt-t.graduatedMin)*m/t.graduatedRange)>m&&(U=m),q<=U&&U<=K)){for(var ct=w[tt][et],ft=y[tt][et];tt<y.length;){for(;U>Q&&et<y[tt].length-1;)et++,ct=w[tt][et],Q+=ft=y[tt][et];if(U<=Q)break;et=0,ct=w[++tt][et],Q+=ft=y[tt][et]}var dt=g[tt],pt=dt[2*et],yt=dt[2*et+1],mt=(U-(Q-ft))/ft,vt=new gt(pt+(dt[2*et+2]-pt)*mt+p/2-d.bounds.x,yt+(dt[2*et+3]-yt)*mt+p/2-d.bounds.y);vt.scale(a.scale,a.scale);var xt=ct,bt=w[tt];if(1e-4>mt?0<et?xt=bt[et-1]:Xe.aa(dt[0],dt[dt.length-2])&&Xe.aa(dt[1],dt[dt.length-1])&&(xt=bt[bt.length-1]):.9999<mt&&(et+1<bt.length?xt=bt[et+1]:Xe.aa(dt[0],dt[dt.length-2])&&Xe.aa(dt[1],dt[dt.length-1])&&(xt=bt[0])),ct!==xt&&(180<Math.abs(ct-xt)&&(ct<xt?ct+=360:xt+=360),ct=(ct+xt)/2%360),Z instanceof rl){var wt=\"\";\"\"!==(wt=null!==Z.graduatedFunction?null!=(wt=Z.graduatedFunction(nt))?wt.toString():\"\":(+nt.toFixed(2)).toString())&&H.push({jm:vt,angle:ct,text:wt})}else H.push({jm:vt,angle:ct})}nt=st+at*it}}}t.ij.push(H)}j(w);var kt=t.ij;if(null!==kt)for(var Mt=n.length,St=0;St<Mt;St++){var Pt=n[St],Nt=kt[St];if(Pt.visible&&Pt!==a&&0!==Nt.length){if(Pt instanceof Hh){var Ct=t,Tt=r,Lt=Pt.alignmentFocus;Lt.zc()&&(Lt=ie);var At=Pt.angle;Pt.zb=0,Pt.measure(1/0,1/0,0,0),Pt.zb=At;var jt=Pt.measuredBounds,Ot=jt.width,Dt=jt.height,Ft=Bt.allocAt(0,0,Ot,Dt),It=gt.alloc();It.Ti(Ft,Lt),Bt.free(Ft);for(var zt=-It.x,Rt=-It.y,Et=new Bt,_t=Nt.length,Vt=0;Vt<_t;Vt++)for(var Yt=Nt[Vt],Xt=Yt.jm.x,Ut=Yt.jm.y,qt=Yt.angle,Kt=0;4>Kt;Kt++){switch(Kt){case 0:It.h(zt,Rt);break;case 1:It.h(zt+Ot,Rt);break;case 2:It.h(zt,Rt+Dt);break;case 3:It.h(zt+Ot,Rt+Dt)}It.rotate(qt+Pt.angle),It.offset(Xt,Ut),0===Vt&&0===Kt?Et.h(It.x,It.y,0,0):Et.Oe(It),It.offset(-Xt,-Ut),It.rotate(-qt-Pt.angle)}gt.free(It),null!==Ct.Pg&&Ct.Pg.push(Et),Gt(Tt,Et.x,Et.y,Et.width,Et.height)}else if(Pt instanceof rl){var Ht=t,Wt=r;null===Ht.qh&&(Ht.qh=new rl);var Zt=Ht.qh;ol(Zt,Pt);var Jt=Pt.alignmentFocus;Jt.zc()&&(Jt=ie);for(var $t=Pt.segmentOrientation,Qt=Pt.segmentOffset,te=new Bt,ee=0,ne=0,re=0,oe=0,se=0,ae=Nt.length,he=0;he<ae;he++){var le=Nt[he];ee=le.jm.x,ne=le.jm.y,re=le.angle,se=oe=Pt.angle,$t!==xc&&(se=$t===Nc||$t===Ac?re+Pt.angle:re,oe=qu.computeAngle($t,se)),Zt.zb=oe,Zt.text=le.text||\"\",Zt.measure(1/0,1/0,0,0);var ue=Zt.measuredBounds,ce=Zt.naturalBounds,fe=ce.width,de=ce.height,pe=Ye.alloc();pe.reset(),pe.translate(-ue.x,-ue.y),pe.scale(Zt.scale,Zt.scale),pe.rotate(se,fe/2,de/2),$t!==Cc&&$t!==jc||pe.rotate(90,fe/2,de/2),$t!==Tc&&$t!==Oc||pe.rotate(-90,fe/2,de/2),$t===Dc&&(45<re&&135>re||225<re&&315>re)&&pe.rotate(-re,fe/2,de/2);var ge=Bt.allocAt(0,0,fe,de),ye=gt.alloc();ye.Ti(ge,Jt),pe.Aa(ye);var me=-ye.x,ve=-ye.y,xe=gt.alloc();xe.assign(Qt),isNaN(xe.x)&&(xe.x=fe/2+3),isNaN(xe.y)&&(xe.y=-(de/2+3)),xe.rotate(re);var be=new Bt(ee+=xe.x+me,ne+=xe.y+ve,ue.width,ue.height),we=new Bt(ue.x,ue.y,ue.width,ue.height),ke=new Bt(ce.x,ce.y,ce.width,ce.height);le.pA=oe,le.lineCount=Zt.lineCount,le.lines=[Zt.sb,Zt.ei,Zt.re,Zt.Ce,Zt.Cc,Zt.Sb,Zt.pe],le.actualBounds=be,le.measuredBounds=we,le.naturalBounds=ke,0===he?te.assign(be):te.Qc(be),gt.free(xe),gt.free(ye),Bt.free(ge),Ye.free(pe)}null!==Ht.Pg&&Ht.Pg.push(te),Gt(Wt,te.x,te.y,te.width,te.height)}Js(Pt,!1)}}},ch.prototype.arrange=function(t,e,i){if(null!==t.Pg){var n=t.pb(),r=t.ij;if(null!==r){var o=t.Pg,s=0,a=o[s];s++,null!==n&&n.arrange(a.x-i.x,a.y-i.y,a.width,a.height);for(var h=e.length,l=0;l<h;l++){var u=e[l];a=r[l],u.visible&&u!==n&&0!==a.length&&(a=o[s],s++,u.arrange(a.x-i.x,a.y-i.y,a.width,a.height))}t.Pg=null}}},ch.prototype.oc=function(t,e,i){var n=i.nj;i.nj=!0;var r=t.naturalBounds,o=r.width;r=r.height,e.save(),e.beginPath(),e.rect(-1,-1,o+1,r+1),e.clip(),(o=t.pb()).oc(e,i),0>=(r=t.Af()*i.scale)&&(r=1);for(var s=o.actualBounds,a=t.T.m,h=t.ij,l=a.length,u=0;u<l;u++){var c=a[u],f=h[u],d=f.length;if(c.visible&&c!==o&&0!==f.length)if(c instanceof Hh){if(!(2>t.graduatedTickUnit*c.interval*o.geometry.flattenedTotalLength/t.graduatedRange*r)){var p=c.measuredBounds,g=c.strokeWidth*c.scale,y=c.alignmentFocus;y.zc()&&(y=ie);for(var m=0;m<d;m++){var v=f[m].jm,x=f[m].angle,b=y,w=c.vb;w.reset(),w.translate(v.x+s.x,v.y+s.y),w.rotate(x+c.angle,0,0),w.translate(-p.width*b.x+b.offsetX+g/2,-p.height*b.y+b.offsetY+g/2),w.scale(c.scale,c.scale),Hs(c,!1),c.Nh.set(c.vb),c.Rk=c.scale,Ws(c,!1),c.oc(e,i),c.vb.reset()}}}else if(c instanceof rl)for(null===t.qh&&(t.qh=new rl),ol(p=t.qh,c),c=0;c<d;c++)(g=f[c]).actualBounds&&g.measuredBounds&&g.naturalBounds&&(p.Xb=g.text||\"\",p.zb=g.pA||0,p.Xc=g.lineCount||0,void 0!==(y=g.lines)&&(p.sb=y[0],p.ei=y[1],p.re=y[2],p.Ce=y[3],p.Cc=y[4],p.Sb=y[5],p.pe=y[6]),g.naturalBounds&&(p.uc=g.naturalBounds),g.actualBounds&&(y=g.actualBounds,p.arrange(y.x,y.y,y.width,y.height)),y=g.actualBounds,p.arrange(y.x,y.y,y.width,y.height),m=g.measuredBounds,g=g.naturalBounds,(v=p.vb).reset(),v.translate(y.x+s.x,y.y+s.y),v.translate(-m.x,-m.y),p.mp(v,g.x,g.y,g.width,g.height),Hs(p,!1),p.Nh.set(p.vb),p.Rk=p.scale,Ws(p,!1),p.oc(e,i))}i.nj=n,e.restore(),e.Hc(!0)},c(fh,Ds),fh.prototype.cloneProtected=function(t){if(Ds.prototype.cloneProtected.call(this,t),t.ha=this.ha,t.nb=this.nb.I(),t.ln=this.ln.I(),t.Of=this.Of,t.ha===fh.Table){t.dj=this.dj.I(),t.Gg=this.Gg,t.Wh=this.Wh,t.Vh=this.Vh,t.Fg=this.Fg,t.Eg=this.Eg,t.Uh=this.Uh;var e=[];if(0<this.ob.length)for(var i=this.ob,n=i.length,r=0;r<n;r++)if(void 0!==i[r]){var o=i[r].copy();o.Si(t),e[r]=o}if(t.ob=e,e=[],0<this.ib.length)for(n=(i=this.ib).length,r=0;r<n;r++)void 0!==i[r]&&((o=i[r].copy()).Si(t),e[r]=o);t.ib=e,t.Dj=this.Dj,t.cj=this.cj,t.vi=this.vi,t.gi=this.gi}t.Gp=this.Gp,t.Jn=this.Jn.I(),t.Kn=this.Kn.I(),t.Gn=this.Gn,t.Fn=this.Fn,t.In=this.In,t.Hn=this.Hn,t.ij=this.ij,t.Rf=this.Rf,t.jb=this.jb,t.Qh=this.Qh,t.ao=this.ao,t.ci=this.ci,t.ve=this.ve,t.fl=this.fl,t.ig.assign(this.ig),t.Re=this.Re,null!==this.cp&&(t.cp=this.cp)},fh.prototype.wf=function(t){Ds.prototype.wf.call(this,t),t.T=this.T;for(var e=t.T.m,i=e.length,n=0;n<i;n++)e[n].bg=t;t.ph=null},fh.prototype.copy=function(){var t=Ds.prototype.copy.call(this);if(null!==t){for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n].copy();r.Si(t),r.Bj=null;var o=t.T,s=o.count;if(o.wb(s,r),null!==(o=t.part)){o.li=null,null!==r.portId&&o instanceof wu&&(o.Je=!0);var a=t.diagram;null!==a&&a.undoManager.isUndoingRedoing||o.Wa(pi,\"elements\",t,null,r,null,s)}}return t}return null},(e=fh.prototype).toString=function(){return\"Panel(\"+this.type.name+\")#\"+it(this)},e.Eo=function(t){Ds.prototype.Eo.call(this,t);for(var e=this.T.m,i=e.length,n=0;n<i;n++)e[n].Eo(t)},e.Ei=function(t,e){if(this.ha===fh.Grid)t.Ed(),this.ha.oc(this,t,e);else if(this.ha===fh.Graduated)t.Ed(),this.ha.oc(this,t,e);else{this.ha===fh.Table&&(t.Ed(),t.lineCap=\"butt\",gh(this,t,!0,this.ob,!0),gh(this,t,!1,this.ib,!0),ph(this,t,!0,this.ob),ph(this,t,!1,this.ib),gh(this,t,!0,this.ob,!1),gh(this,t,!1,this.ib,!1));var i=this.isClipping&&this.ha===fh.Spot;i&&t.save();for(var n=this.pb(),r=this.T.m,o=r.length,s=0;s<o;s++){var a=r[s];i&&a===n&&(t.clipInsteadOfFill=!0),a.oc(t,e),i&&a===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.Hc(!0))}},e.Zj=function(t,e,i,n,r){var o=this.je(),s=this.transform,a=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*a,l=-s.m12*a,u=-s.m21*a,c=s.m11*a,f=a*(s.m21*s.dy-s.m22*s.dx),d=a*(s.m12*s.dx-s.m11*s.dy);if(null!==this.areaBackground)return s=this.actualBounds,Xe.Cf(s.left,s.top,s.right,s.bottom,t,e,i,n,r);if(null!==this.background)return o=t*h+e*u+f,a=t*l+e*c+d,t=i*h+n*u+f,h=i*l+n*c+d,r.h(0,0),i=this.naturalBounds,o=Xe.Cf(0,0,i.width,i.height,o,a,t,h,r),r.transform(s),o;o||(h=1,u=l=0,c=1,d=f=0),a=t*h+e*u+f,t=t*l+e*c+d,h=i*h+n*u+f,i=i*l+n*c+d,r.h(h,i),n=(h-a)*(h-a)+(i-t)*(i-t),l=!1,d=(c=this.T.m).length,u=gt.alloc(),f=null,e=1/0;var p=null,g=this.isClipping&&this.ha===fh.Spot;g&&(p=gt.alloc(),(l=(f=this.pb()).Zj(a,t,h,i,p))&&(e=(a-p.x)*(a-p.x)+(t-p.y)*(t-p.y)));for(var y=0;y<d;y++){var m=c[y];m.visible&&m!==f&&m.Zj(a,t,h,i,u)&&(l=!0,(m=(a-u.x)*(a-u.x)+(t-u.y)*(t-u.y))<n&&(n=m,r.set(u)))}return g&&(e>n&&r.set(p),gt.free(p)),gt.free(u),o&&r.transform(s),l},e.s=function(t){if(!Zs(this)){Ds.prototype.s.call(this,t),t=null,this.ha!==fh.Auto&&this.ha!==fh.Link||(t=this.pb());for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];if((r===t||r.isPanelMain)&&r.s(!0),!r.desiredSize.u()){var o=Ys(r,!1);(r instanceof Uu||r instanceof fh||r instanceof rl||o!==fs)&&r.s(!0)}}}},e.ak=function(){if(!Zs(this)){Js(this,!0),Qs(this,!0);for(var t=this.T.m,e=t.length,i=0;i<e;i++)t[i].ak()}},e.bl=function(){if(0!=(2048&this.G)==0){Hs(this,!0),Ws(this,!0);for(var t=this.T.m,e=t.length,i=0;i<e;i++)t[i].bv()}},e.bv=function(){Ws(this,!0);for(var t=this.T.m,e=t.length,i=0;i<e;i++)t[i].bv()},e.gm=function(t,e,i,n){var r=this.ig;r.h(0,0,0,0);var o=this.desiredSize,s=this.minSize;void 0===i&&(i=s.width,n=s.height),i=Math.max(i,s.width),n=Math.max(n,s.height);var a=this.maxSize;isNaN(o.width)||(t=Math.min(o.width,a.width)),isNaN(o.height)||(e=Math.min(o.height,a.height)),t=Math.max(i,t),e=Math.max(n,e);var h=this.nb;t=Math.max(t-h.left-h.right,0),e=Math.max(e-h.top-h.bottom,0);var l=this.T.m;0!==l.length&&this.ha.measure(this,t,e,l,r,i,n),t=r.width+h.left+h.right,h=r.height+h.top+h.bottom,isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(h=o.height),t=Math.min(a.width,t),h=Math.min(a.height,h),t=Math.max(s.width,t),h=Math.max(s.height,h),It(r,t=Math.max(i,t),h=Math.max(n,h)),It(this.naturalBounds,t,h),this.xe(0,0,t,h)},e.pb=function(){if(null===this.ph){var t=this.T.m,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(!0===n.isPanelMain)return this.ph=n}this.ph=t[0]}return this.ph},e.zh=function(t,e,i,n){var r=this.T.m;if(this.actualBounds.h(t,e,i,n),0!==r.length){if(!this.desiredSize.u()){t=Ys(this,!0);var o=this.measuredBounds;e=o.width,o=o.height;var s=this.Ug,a=s.left+s.right;switch(s=s.top+s.bottom,e===i&&o===n&&(t=fs),t){case fs:(e>i||o>n)&&(this.s(),this.measure(e>i?i:e,o>n?n:o,0,0));break;case cs:this.s(!0),this.measure(i+a,n+s,0,0);break;case gs:this.s(!0),this.measure(i+a,o+s,0,0);break;case ys:this.s(!0),this.measure(e+a,n+s,0,0)}}this.ha.arrange(this,r,this.ig)}},e.Bh=function(t){var e=this.naturalBounds,i=mh(this);if(Xt(0,0,e.width,e.height,t.x,t.y)){for(var n=(e=this.T.m).length,r=gt.allocAt(0,0);n--;){var o=e[n];if((o.visible||o===i)&&(xt(r.set(t),o.transform),o.$(r)))return gt.free(r),!0}return gt.free(r),null!==this.Ub||null!==this.hd}return!1},e.os=function(t){if(this.Ck===t)return this;for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n].os(t);if(null!==r)return r}return null},e.Cm=function(t,e){if(e(this,t),t instanceof fh)for(var i=(t=t.T.m).length,n=0;n<i;n++)this.Cm(t[n],e)},e.Yl=function(t){return kh(this,this,t)},e.Ya=function(t){if(this.name===t)return this;var e=this.T.m,i=e.length;null===this.ci&&null===this.ve||(i=Oh(this));for(var n=0;n<i;n++){var r=e[n];if(r instanceof fh){var o=r.Ya(t);if(null!==o)return o}if(r.name===t)return r}return null},e.je=function(){return!(this.type===fh.TableRow||this.type===fh.TableColumn)},e.Zb=function(t,e,i){if(!1===this.pickable)return null;if(void 0===e&&(e=null),void 0===i&&(i=null),$s(this))return null;var n=this.naturalBounds,r=1/this.Af(),o=this.je(),s=o?t:xt(gt.allocAt(t.x,t.y),this.transform),a=this.diagram,h=10,l=5;if(null!==a&&(l=(h=a.am(\"extraTouchArea\"))/2),Xt(-l*r,-l*r,n.width+h*r,n.height+h*r,s.x,s.y)){if(!this.isAtomic){var u=(r=this.T.m).length;if(a=gt.alloc(),l=(h=this.isClipping&&this.ha===fh.Spot)?this.pb():null,h&&(l.je()?xt(a.set(t),l.transform):a.set(t),!l.$(a)))return gt.free(a),o||gt.free(s),null;for(var c=mh(this);u--;){var f=r[u];if((f.visible||f===c)&&(f.je()?xt(a.set(t),f.transform):a.set(t),!h||f!==l)){var d=null;if(f instanceof fh?d=f.Zb(a,e,i):!0===f.pickable&&f.$(a)&&(d=f),null!==d&&(null!==e&&(d=e(d)),null!==d&&(null===i||i(d))))return gt.free(a),o||gt.free(s),d}}gt.free(a)}return null===this.background&&null===this.areaBackground?(o||gt.free(s),null):(t=Xt(0,0,n.width,n.height,s.x,s.y)?this:null,o||gt.free(s),t)}return o||gt.free(s),null},e.Hi=function(t,e,i,n){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var r=this.naturalBounds,o=this.je(),s=o?t:xt(gt.allocAt(t.x,t.y),this.transform);if(r=Xt(0,0,r.width,r.height,s.x,s.y),this.type===fh.TableRow||this.type===fh.TableColumn||r){if(!this.isAtomic){for(var a=this.T.m,h=a.length,l=gt.alloc(),u=mh(this);h--;){var c=a[h];if(c.visible||c===u){c.je()?xt(l.set(t),c.transform):l.set(t);var f=c;(null!==(c=c instanceof fh?c:null)?c.Hi(l,e,i,n):f.$(l))&&!1!==f.pickable&&(null!==e&&(f=e(f)),null===f||null!==i&&!i(f)||n.add(f))}}gt.free(l)}return o||gt.free(s),r&&(null!==this.background||null!==this.areaBackground)}return o||gt.free(s),!1},e.zf=function(t,e,i,n,r,o){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var s=o;if(void 0===o&&(s=Ye.alloc()).reset(),s.multiply(this.transform),this.Ah(t,s))return Sh(this,e,i,r),void 0===o&&Ye.free(s),!0;if(this.Lc(t,s)){if(!this.isAtomic)for(var a=mh(this),h=this.T.m,l=h.length;l--;){var u=h[l];if(u.visible||u===a){var c=u.actualBounds,f=this.naturalBounds;c.x>f.width||c.y>f.height||0>c.x+c.width||0>c.y+c.height||(c=u,u=u instanceof fh?u:null,(f=Ye.alloc()).set(s),(null!==u?u.zf(t,e,i,n,r,f):Is(c,t,n,f))&&(null!==e&&(c=e(c)),null===c||null!==i&&!i(c)||r.add(c)),Ye.free(f))}}return void 0===o&&Ye.free(s),n}return void 0===o&&Ye.free(s),!1},e.pg=function(t,e,i,n,r,o){if(!1===this.pickable)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var s=this.naturalBounds,a=this.je(),h=a?t:xt(gt.allocAt(t.x,t.y),this.transform),l=a?e:xt(gt.allocAt(e.x,e.y),this.transform),u=h.xf(l),c=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height||bt(h.x,h.y,0,0,0,s.height)<=u||bt(h.x,h.y,0,s.height,s.width,s.height)<=u||bt(h.x,h.y,s.width,s.height,s.width,0)<=u||bt(h.x,h.y,s.width,0,0,0)<=u;if(s=h.pd(0,0)<=u&&h.pd(0,s.height)<=u&&h.pd(s.width,0)<=u&&h.pd(s.width,s.height)<=u,a||(gt.free(h),gt.free(l)),c){if(!this.isAtomic){h=gt.alloc(),l=gt.alloc(),u=mh(this);for(var f=this.T.m,d=f.length;d--;){var p=f[d];if(p.visible||p===u){var g=p.actualBounds,y=this.naturalBounds;a&&(g.x>y.width||g.y>y.height||0>g.x+g.width||0>g.y+g.height)||(p.je()?(g=p.transform,xt(h.set(t),g),xt(l.set(e),g)):(h.set(t),l.set(e)),g=p,(null!==(p=p instanceof fh?p:null)?p.pg(h,l,i,n,r,o):g.Ox(h,l,r))&&(null!==i&&(g=i(g)),null===g||null!==n&&!n(g)||o.add(g)))}}gt.free(h),gt.free(l)}return r?c:s}return!1},e.add=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];for(i=0;i<e.length;i++)this.wb(this.T.count,e[i]);return this},e.J=function(t){return this.T.J(t)},e.wb=function(t,e){e instanceof Jl&&w(\"Cannot add a Part to a Panel: \"+e+\"; use a Panel instead\"),(this===e||this.rg(e))&&(this===e&&w(\"Cannot make a Panel contain itself: \"+this.toString()),w(\"Cannot make a Panel indirectly contain itself: \"+this.toString()+\" already contains \"+e.toString()));var i=e.panel;if(null!==i&&i!==this&&w(\"Cannot add a GraphObject that already belongs to another Panel to this Panel: \"+e.toString()+\", already contained by \"+i.toString()+\", cannot be shared by this Panel: \"+this.toString()),this.ha!==fh.Grid||e instanceof Hh||w(\"Can only add Shapes to a Grid Panel, not: \"+e),this.ha!==fh.Graduated||e instanceof Hh||e instanceof rl||w(\"Can only add Shapes or TextBlocks to a Graduated Panel, not: \"+e),e.Si(this),e.Bj=null,null!==this.itemArray){var n=e.data;null!==n&&\"object\"==typeof n&&(null===this.$d&&(this.$d=new pt),this.$d.add(n,e))}var r=this.T;if(n=-1,i===this){for(var o=-1,s=this.T.m,a=s.length,h=0;h<a;h++)if(s[h]===e){o=h;break}if(-1!==o){if(o===t||o+1>=r.count&&t>=r.count)return;r.eb(o),n=o}else w(\"element \"+e.toString()+\" has panel \"+i.toString()+\" but is not contained by it.\")}(0>t||t>r.count)&&(t=r.count),r.wb(t,e),(0===t||e.isPanelMain)&&(this.ph=null),Zs(this)||this.s(),e.s(!1),(null!==e.portId||e instanceof fh&&!0===e.Je)&&(this.Je=!0),this.Rf=null,this.Ef()||Rh(this,e,!1),null!==(i=this.part)&&(i.li=null,i.Xf=NaN,this.Je&&i instanceof wu&&(i.Je=!0),i.Je&&i instanceof wu&&(i.nc=null),null!==(r=this.diagram)&&r.undoManager.isUndoingRedoing||(-1!==n&&i.Wa(gi,\"elements\",this,e,null,n,null),i.Wa(pi,\"elements\",this,null,e,null,t)))},e.remove=function(t){for(var e=this.T.m,i=e.length,n=-1,r=0;r<i;r++)if(e[r]===t){n=r;break}-1!==n&&this.ec(n,!0)},e.eb=function(t){0<=t&&this.ec(t,!0)},e.ec=function(t,e){var i=this.T,n=i.J(t);if(n.Bj=null,n.Si(null),null!==this.$d){var r=n.data;\"object\"==typeof r&&this.$d.remove(r)}i.eb(t),Js(this,!1),this.s(),this.ph===n&&(this.ph=null),this.Rf=null;var o=this.part;null!==o&&(o.li=null,o.Xf=NaN,o.Lb(),o instanceof wu&&(n instanceof fh?n.Cm(n,(function(t,i){Ou(o,i,e)})):Ou(o,n,e)),null!==(i=this.diagram)&&i.undoManager.isUndoingRedoing||o.Wa(gi,\"elements\",this,n,null,t,null))},fh.prototype.getRowDefinition=function(t){0>t&&M(t,\">= 0\",fh,\"getRowDefinition:idx\"),t=Math.round(t);var e=this.ob;if(void 0===e)return null;if(void 0===e[t]){var i=new Gh;i.Si(this),i.isRow=!0,i.index=t,e[t]=i,this.Wa(pi,\"rowdefs\",this,null,i,null,t)}return e[t]},fh.prototype.KA=function(t){0>t&&M(t,\">= 0\",fh,\"removeRowDefinition:idx\"),t=Math.round(t);var e=this.ob;if(void 0!==e){var i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&void 0===e[n--];)e.length--;this.Wa(gi,\"rowdefs\",this,i,null,t,null),this.s()}}},fh.prototype.getColumnDefinition=function(t){0>t&&M(t,\">= 0\",fh,\"getColumnDefinition:idx\"),t=Math.round(t);var e=this.ib;if(void 0===e)return null;if(void 0===e[t]){var i=new Gh;i.Si(this),i.isRow=!1,i.index=t,e[t]=i,this.Wa(pi,\"coldefs\",this,null,i,null,t)}return e[t]},(e=fh.prototype).FA=function(t){0>t&&M(t,\">= 0\",fh,\"removeColumnDefinition:idx\"),t=Math.round(t);var e=this.ib;if(void 0!==e){var i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&void 0===e[n--];)e.length--;this.Wa(gi,\"coldefs\",this,i,null,t,null),this.s()}}},e.Mz=function(t){if(0>t||this.type!==fh.Table)return-1;for(var e=0,i=this.ob,n=i.length,r=this.vi;r<n;r++){var o=i[r];if(void 0!==o&&t<(e+=o.total))break}return r},e.Ez=function(t){if(0>t||this.type!==fh.Table)return-1;for(var e=0,i=this.ib,n=i.length,r=this.gi;r<n;r++){var o=i[r];if(void 0!==o&&t<(e+=o.total))break}return r},e.cA=function(t,e){if(void 0===e&&(e=new gt(NaN,NaN)),this.type!==fh.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.pb();return i.geometry.Tu((t-this.graduatedMin)/this.graduatedRange,e),i.transform.Aa(e)},e.dA=function(t){if(this.type!==fh.Graduated)return NaN;var e=this.pb();return e.transform.Hd(t),e.geometry.Sx(t)*this.graduatedRange+this.graduatedMin},e.qz=function(t){void 0===t&&(t=!1);var e=this.copy();return bh(e,(function(t){t instanceof fh&&(t.Qh=null,t.jb=null);var e=t.fb;null!==e&&(t.fb=null,e.each((function(e){t.bind(e.copy())}))),null!==(e=t.wg)&&(t.wg=null,e.each((function(e){t.Rv(e.value.copy())})))})),t&&jh(e),e},e.Fa=function(t){var e=this.Qh;if(null!==e)for(void 0===t&&(t=\"\"),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((\"\"===t||\"\"===n||n===t)&&(n=i.targetProperty,null!==i.converter||\"\"!==n)){n=this.data;var r=i.sourceName;if(null!==r){if(\"\"===r)n=this;else if(\"/\"===r)n=this;else if(\".\"===r)n=this;else if(\"..\"===r)n=this;else if(null===(n=this.Ya(r)))continue}else if(i.isToModel){if(null===(n=this.diagram))continue;n=n.model.modelData}var o=this,s=i.Xi;if(-1!==s){if(null===(o=this.os(s)))continue}else null!==i.od&&(o=i.od);if(\"/\"===r?n=o.part:\".\"===r?n=o:\"..\"===r&&(n=o.panel),0!==(r=i.xp)){if(!(o instanceof fh))continue;1===r?o=o.getColumnDefinition(i.Nl):2===r&&(o=o.getRowDefinition(i.Nl))}void 0!==o&&i.Vv(o,n)}}},e.Nx=function(t){return null==t||null===this.$d?null:this.$d.H(t)},e.xv=function(){for(var t=Oh(this);this.T.length>t;)this.ec(this.T.length-1,!1);Dh(this,this.itemArray)},f.Object.defineProperties(fh.prototype,{type:{get:function(){return this.ha},set:function(t){var e=this.ha;e!==t&&(this.ha=t,this.ha===fh.Grid?this.isAtomic=!0:this.ha===fh.Table&&dh(this),this.s(),this.g(\"type\",e,t))}},elements:{get:function(){return this.T.iterator}},naturalBounds:{get:function(){return this.uc}},padding:{get:function(){return this.nb},set:function(t){\"number\"==typeof t?(0>t&&M(t,\">= 0\",fh,\"padding\"),t=new Wt(t)):(0>t.left&&M(t.left,\">= 0\",fh,\"padding:value.left\"),0>t.right&&M(t.right,\">= 0\",fh,\"padding:value.right\"),0>t.top&&M(t.top,\">= 0\",fh,\"padding:value.top\"),0>t.bottom&&M(t.bottom,\">= 0\",fh,\"padding:value.bottom\"));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.s(),this.g(\"padding\",e,t))}},defaultAlignment:{get:function(){return this.ln},set:function(t){var e=this.ln;e.A(t)||(this.ln=t=t.I(),this.s(),this.g(\"defaultAlignment\",e,t))}},defaultStretch:{get:function(){return this.Of},set:function(t){var e=this.Of;e!==t&&(this.Of=t,this.s(),this.g(\"defaultStretch\",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.dj?$t:this.dj},set:function(t){if(void 0!==this.dj){\"number\"==typeof t&&(t=new Wt(t));var e=this.dj;e.A(t)||(this.dj=t=t.I(),this.s(),this.g(\"defaultSeparatorPadding\",e,t))}}},defaultRowSeparatorStroke:{get:function(){return void 0===this.Wh?null:this.Wh},set:function(t){var e=this.Wh;e!==t&&(null===t||\"string\"==typeof t||t instanceof wa)&&(t instanceof wa&&t.freeze(),this.Wh=t,this.N(),this.g(\"defaultRowSeparatorStroke\",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Gg?1:this.Gg},set:function(t){if(void 0!==this.Gg){var e=this.Gg;e!==t&&isFinite(t)&&0<=t&&(this.Gg=t,this.s(),this.g(\"defaultRowSeparatorStrokeWidth\",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.Vh?null:this.Vh},set:function(t){if(void 0!==this.Vh){var e=this.Vh;if(e!==t){if(null!==t){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];\"number\"==typeof o&&0<=o&&isFinite(o)||w(\"defaultRowSeparatorDashArray value \"+o+\" at index \"+r+\" must be a positive number or zero.\"),n+=o}if(0===n){if(null===e)return;t=null}}this.Vh=t,this.N(),this.g(\"defaultRowSeparatorDashArray\",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.Eg?null:this.Eg},set:function(t){if(void 0!==this.Eg){var e=this.Eg;e!==t&&(null===t||\"string\"==typeof t||t instanceof wa)&&(t instanceof wa&&t.freeze(),this.Eg=t,this.N(),this.g(\"defaultColumnSeparatorStroke\",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Fg?1:this.Fg},set:function(t){if(void 0!==this.Fg){var e=this.Fg;e!==t&&isFinite(t)&&0<=t&&(this.Fg=t,this.s(),this.g(\"defaultColumnSeparatorStrokeWidth\",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.Uh?null:this.Uh},set:function(t){if(void 0!==this.Uh){var e=this.Uh;if(e!==t){if(null!==t){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];\"number\"==typeof o&&0<=o&&isFinite(o)||w(\"defaultColumnSeparatorDashArray value \"+o+\" at index \"+r+\" must be a positive number or zero.\"),n+=o}if(0===n){if(null===e)return;t=null}}this.Uh=t,this.N(),this.g(\"defaultColumnSeparatorDashArray\",e,t)}}}},viewboxStretch:{get:function(){return this.Gp},set:function(t){var e=this.Gp;e!==t&&(this.Gp=t,this.s(),this.g(\"viewboxStretch\",e,t))}},gridCellSize:{get:function(){return this.Jn},set:function(t){var e=this.Jn;if(!e.A(t)){t.u()&&0!==t.width&&0!==t.height||w(\"Invalid Panel.gridCellSize: \"+t),this.Jn=t.I();var i=this.diagram;null!==i&&this===i.grid&&yo(i),this.N(),this.g(\"gridCellSize\",e,t)}}},gridOrigin:{get:function(){return this.Kn},set:function(t){var e=this.Kn;if(!e.A(t)){t.u()||w(\"Invalid Panel.gridOrigin: \"+t),this.Kn=t.I();var i=this.diagram;null!==i&&this===i.grid&&yo(i),this.N(),this.g(\"gridOrigin\",e,t)}}},graduatedMin:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.s(),this.g(\"graduatedMin\",e,t),qs(this)&&null!==(t=this.part)&&Bs(this,t,\"graduatedRange\"))}},graduatedMax:{get:function(){return this.Fn},set:function(t){var e=this.Fn;e!==t&&(this.Fn=t,this.s(),this.g(\"graduatedMax\",e,t),qs(this)&&null!==(t=this.part)&&Bs(this,t,\"graduatedRange\"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&0<t&&(this.In=t,this.s(),this.g(\"graduatedTickUnit\",e,t))}},graduatedTickBase:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e!==t&&(this.Hn=t,this.s(),this.g(\"graduatedTickBase\",e,t))}},Je:{get:function(){return 0!=(8388608&this.G)},set:function(t){0!=(8388608&this.G)!==t&&(this.G^=8388608)}},rowCount:{get:function(){return void 0===this.ob?0:this.ob.length}},columnCount:{get:function(){return void 0===this.ib?0:this.ib.length}},rowSizing:{get:function(){return void 0===this.Dj?Kh:this.Dj},set:function(t){if(void 0!==this.Dj){var e=this.Dj;e!==t&&(this.Dj=t,this.s(),this.g(\"rowSizing\",e,t))}}},columnSizing:{get:function(){return void 0===this.cj?Kh:this.cj},set:function(t){if(void 0!==this.cj){var e=this.cj;e!==t&&(this.cj=t,this.s(),this.g(\"columnSizing\",e,t))}}},topIndex:{get:function(){return void 0===this.vi?0:this.vi},set:function(t){if(void 0!==this.vi){var e=this.vi;e!==t&&((!isFinite(t)||0>t)&&w(\"Panel.topIndex must be greater than zero and a real number, not: \"+t),this.vi=t,this.s(),this.g(\"topIndex\",e,t))}}},leftIndex:{get:function(){return void 0===this.gi?0:this.gi},set:function(t){if(void 0!==this.gi){var e=this.gi;e!==t&&((!isFinite(t)||0>t)&&w(\"Panel.leftIndex must be greater than zero and a real number, not: \"+t),this.gi=t,this.s(),this.g(\"leftIndex\",e,t))}}},data:{get:function(){return this.jb},set:function(t){var e=this.jb;if(e!==t){var i=this instanceof Jl&&!(this instanceof bu);jh(this),this.jb=t;var n=this.diagram;null!==n&&(i?(i=n.partManager,this instanceof qu?(null!==e&&i.Ue.remove(e),null!==t&&i.Ue.add(t,this)):this instanceof Jl&&(null!==e&&i.Ve.remove(e),null!==t&&i.Ve.add(t,this))):null!==(i=this.panel)&&null!==i.$d&&(null!==e&&i.$d.remove(e),null!==t&&i.$d.add(t,this))),this.g(\"data\",e,t),null!==n&&n.undoManager.isUndoingRedoing||null!==t&&this.Fa()}}},itemIndex:{get:function(){return this.ao},set:function(t){var e=this.ao;e!==t&&(this.ao=t,this.g(\"itemIndex\",e,t))}},itemArray:{get:function(){return this.ci},set:function(t){var e=this.ci;if(e!==t||null!==t&&function(t,e){for(var i=(t=t.T.m).length,n=e.length,r=0,o=null;r<i&&!((o=t[r])instanceof fh&&null!==o.data);)o=t[++r];if(i-r!==n)return!0;if(null===o)return 0<n;for(var s=0;r<i&&s<n;){if(!((o=t[r])instanceof fh)||o.data!==e[s])return!0;r++,s++}return!1}(this,t)){var i=this.diagram;e!==t&&(null!==i&&null!==e&&Yf(i.partManager,this,i),this.ci=t,null!==i&&null!==t&&Vf(i.partManager,this)),this.g(\"itemArray\",e,t),null!==i&&i.undoManager.isUndoingRedoing||Dh(this,t)}}},itemTemplate:{get:function(){return null===this.ve?null:this.ve.H(\"\")},set:function(t){if(null===this.ve){if(null===t)return;this.ve=new pt}var e=this.ve.H(\"\");e!==t&&((t instanceof Jl||t.isPanelMain)&&w(\"Panel.itemTemplate must not be a Part or be Panel.isPanelMain: \"+t),this.ve.add(\"\",t),this.g(\"itemTemplate\",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.xv())}},itemTemplateMap:{get:function(){return this.ve},set:function(t){var e=this.ve;if(e!==t){for(var i=t.iterator;i.next(););this.ve=t,this.g(\"itemTemplateMap\",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.xv()}}},itemCategoryProperty:{get:function(){return this.fl},set:function(t){var e=this.fl;e!==t&&(this.fl=t,this.g(\"itemCategoryProperty\",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.G)},set:function(t){var e=0!=(1048576&this.G);e!==t&&(this.G^=1048576,this.g(\"isAtomic\",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.G)},set:function(t){var e=0!=(2097152&this.G);e!==t&&(this.G^=2097152,this instanceof _u&&(this.$a=null),this.s(),this.g(\"isClipping\",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.G)},set:function(t){var e=0!=(33554432&this.G);e!==t&&(this.G^=33554432,this.s(),this.g(\"isOpposite\",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.G)},set:function(t){var e=0!=(4194304&this.G);if(e!==t){var i=null===this.panel||this.panel.Ef();this.G^=4194304,this.g(\"isEnabled\",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||i&&Rh(this,this,t)}}},alignmentFocusName:{get:function(){return this.Re},set:function(t){var e=this.Re;e!==t&&(this.Re=t,this.s(),this.g(\"alignmentFocusName\",e,t))}}}),f.Object.defineProperties(fh,{Position:{get:function(){return Yh.H(\"Position\")}},Horizontal:{get:function(){return Yh.H(\"Horizontal\")}},Vertical:{get:function(){return Yh.H(\"Vertical\")}},Spot:{get:function(){return Yh.H(\"Spot\")}},Auto:{get:function(){return Yh.H(\"Auto\")}},Table:{get:function(){return Yh.H(\"Table\")}},Viewbox:{get:function(){return Yh.H(\"Viewbox\")}},TableRow:{get:function(){return Yh.H(\"TableRow\")}},TableColumn:{get:function(){return Yh.H(\"TableColumn\")}},Link:{get:function(){return Yh.H(\"Link\")}},Grid:{get:function(){return Yh.H(\"Grid\")}},Graduated:{get:function(){return Yh.H(\"Graduated\")}}}),fh.prototype.rebuildItemElements=fh.prototype.xv,fh.prototype.findItemPanelForData=fh.prototype.Nx,fh.prototype.updateTargetBindings=fh.prototype.Fa,fh.prototype.copyTemplate=fh.prototype.qz,fh.prototype.graduatedValueForPoint=fh.prototype.dA,fh.prototype.graduatedPointForValue=fh.prototype.cA,fh.prototype.findColumnForLocalX=fh.prototype.Ez,fh.prototype.findRowForLocalY=fh.prototype.Mz,fh.prototype.removeColumnDefinition=fh.prototype.FA,fh.prototype.removeRowDefinition=fh.prototype.KA,fh.prototype.removeAt=fh.prototype.eb,fh.prototype.remove=fh.prototype.remove,fh.prototype.insertAt=fh.prototype.wb,fh.prototype.elt=fh.prototype.J,fh.prototype.add=fh.prototype.add,fh.prototype.findObject=fh.prototype.Ya,fh.prototype.findInVisualTree=fh.prototype.Yl,fh.prototype.walkVisualTreeFrom=fh.prototype.Cm,fh.prototype.findMainElement=fh.prototype.pb;var _h=!1,Vh=null,Yh=new pt;function Gh(){tt(this),this.bg=null,this.nr=!0,this.Ra=0,this.Bd=NaN,this.wj=0,this.vj=1/0,this.yb=Pe,this.ja=this.cc=this.la=0,this.fb=null,this.pp=Uh,this.Ee=ps,this.kp=this.eg=null,this.lp=NaN,this.Ub=this.Hj=null,this.gn=!1}function Xh(t){if(t.sizing===Uh){var e=t.bg;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}fh.className=\"Panel\",fh.definePanelLayout=Eh,Eh(\"Position\",new Ja),Eh(\"Vertical\",new Qa),Eh(\"Auto\",new ih),Eh(\"Link\",new lh),Gh.prototype.copy=function(){var t=new Gh;return t.nr=this.nr,t.Ra=this.Ra,t.Bd=this.Bd,t.wj=this.wj,t.vj=this.vj,t.yb=this.yb,t.la=this.la,t.cc=this.cc,t.ja=this.ja,t.Ee=this.Ee,t.pp=this.pp,null===this.eg?t.eg=null:t.eg=this.eg.I(),t.kp=this.kp,t.lp=this.lp,t.Hj=null,null!==this.Hj&&(t.separatorDashArray=C(this.separatorDashArray)),t.Ub=this.Ub,t.gn=this.gn,t.fb=this.fb,t},(e=Gh.prototype).gb=function(t){t.classType===Gh&&(this.sizing=t)},e.toString=function(){return\"RowColumnDefinition \"+(this.isRow?\"(Row \":\"(Column \")+this.index+\") #\"+it(this)},e.Si=function(t){this.bg=t},e.Cu=function(){var t=0,e=0,i=this.bg,n=this.isRow;if(null!==i&&i.type===fh.Table)for(var r=n?i.ob.length:i.ib.length,o=0;o<r;o++){var s=n?i.ob[o]:i.ib[o];if(void 0!==s){e=s.index;break}}if(this.index!==e&&(null===(e=this.separatorStroke)&&null!==i&&(e=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),null!==e&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==i?this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:0))),null===(e=this.eg)){if(null===i)return t;e=i.defaultSeparatorPadding}return t+(this.isRow?e.top:e.left)},e.Ic=function(){var t=0,e=this.bg,i=0,n=this.isRow;if(null!==e&&e.type===fh.Table)for(var r=n?e.ob.length:e.ib.length,o=0;o<r;o++){var s=n?e.ob[o]:e.ib[o];if(void 0!==s){i=s.index;break}}if(this.index!==i&&(null===(i=this.separatorStroke)&&null!==e&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==i&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(n=this.eg)){if(null===e)return t;n=e.defaultSeparatorPadding}return t+(this.isRow?n.top+n.bottom:n.left+n.right)},e.Db=function(t,e,i){var n=this.bg;if(null!==n&&(n.Wa(di,t,this,e,i,void 0,void 0),null!==this.fb&&null!==(e=n.diagram)&&!e.skipsModelSourceBindings&&null!==(n=n.Ch())&&null!==(e=n.data)))for(i=this.fb.iterator;i.next();)i.value.zq(this,e,t,n)},e.bind=function(t,e,i,n){var r=null;return(r=\"string\"==typeof t?new Pd(t,e,i,n):t).od=this,null!==(t=this.panel)&&null!==(e=t.Ch())&&Ah(e)&&w(\"Cannot add a Binding to a RowColumnDefinition that is already frozen: \"+r+\" on \"+t),null===this.fb&&(this.fb=new J),this.fb.add(r),this},f.Object.defineProperties(Gh.prototype,{panel:{get:function(){return this.bg}},isRow:{get:function(){return this.nr},set:function(t){this.nr=t}},index:{get:function(){return this.Ra},set:function(t){this.Ra=t}},height:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t&&M(t,\">= 0\",Gh,\"height\"),this.Bd=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Db(\"height\",e,t))}},width:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t&&M(t,\">= 0\",Gh,\"width\"),this.Bd=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Db(\"width\",e,t))}},minimum:{get:function(){return this.wj},set:function(t){var e=this.wj;e!==t&&((0>t||!isFinite(t))&&M(t,\">= 0\",Gh,\"minimum\"),this.wj=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Db(\"minimum\",e,t))}},maximum:{get:function(){return this.vj},set:function(t){var e=this.vj;e!==t&&(0>t&&M(t,\">= 0\",Gh,\"maximum\"),this.vj=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Db(\"maximum\",e,t))}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.A(t)||(this.yb=t.I(),null!==this.panel&&this.panel.s(),this.Db(\"alignment\",e,t))}},stretch:{get:function(){return this.Ee},set:function(t){var e=this.Ee;e!==t&&(this.Ee=t,null!==this.panel&&this.panel.s(),this.Db(\"stretch\",e,t))}},separatorPadding:{get:function(){return this.eg},set:function(t){\"number\"==typeof t&&(t=new Wt(t));var e=this.eg;null!==t&&null!==e&&e.A(t)||(null!==t&&(t=t.I()),this.eg=t,null!==this.panel&&this.panel.s(),this.Db(\"separatorPadding\",e,t))}},separatorStroke:{get:function(){return this.kp},set:function(t){var e=this.kp;e!==t&&(null!==t&&Da(t,\"RowColumnDefinition.separatorStroke\"),t instanceof wa&&t.freeze(),this.kp=t,null!==this.panel&&this.panel.s(),this.Db(\"separatorStroke\",e,t))}},separatorStrokeWidth:{get:function(){return this.lp},set:function(t){var e=this.lp;e!==t&&(this.lp=t,null!==this.panel&&this.panel.s(),this.Db(\"separatorStrokeWidth\",e,t))}},separatorDashArray:{get:function(){return this.Hj},set:function(t){var e=this.Hj;if(e!==t){if(null!==t){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];\"number\"==typeof o&&0<=o&&isFinite(o)||w(\"separatorDashArray value \"+o+\" at index \"+r+\" must be a positive number or zero.\"),n+=o}if(0===n){if(null===e)return;t=null}}this.Hj=t,null!==this.panel&&this.panel.N(),this.Db(\"separatorDashArray\",e,t)}}},background:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==t&&(null!==t&&Da(t,\"RowColumnDefinition.background\"),t instanceof wa&&t.freeze(),this.Ub=t,null!==this.panel&&this.panel.N(),this.Db(\"background\",e,t))}},coversSeparators:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,null!==this.panel&&this.panel.N(),this.Db(\"coversSeparators\",e,t))}},sizing:{get:function(){return this.pp},set:function(t){var e=this.pp;e!==t&&(this.pp=t,null!==this.panel&&this.panel.s(),this.Db(\"sizing\",e,t))}},actual:{get:function(){return this.la},set:function(t){this.la=isNaN(this.Bd)?Math.max(Math.min(this.vj,t),this.wj):Math.max(Math.min(this.vj,this.Bd),this.wj)}},measured:{get:function(){return this.cc},set:function(t){this.cc=t}},total:{get:function(){return this.la+this.Ic()}},position:{get:function(){return this.ja},set:function(t){this.ja=t}}}),Gh.prototype.computeEffectiveSpacing=Gh.prototype.Ic,Gh.prototype.computeEffectiveSpacingTop=Gh.prototype.Cu;var Uh=new V(Gh,\"Default\",0),qh=new V(Gh,\"None\",1),Kh=new V(Gh,\"ProportionalExtra\",2);function Hh(t,e){Ds.call(this),this.Dd=this.ma=null,this.wn=\"None\",this.Dn=ps,this.Gc=this.Tk=\"black\",this.hg=1,this.Jl=\"butt\",this.Kl=\"miter\",this.Ij=10,this.mh=null,this.nh=0,this.nf=this.mf=Pe,this.Lo=this.Ko=NaN,this.Sn=!1,this.No=null,this.Uk=this.Ql=\"None\",this.Zd=1,this.Xd=0,this.Vd=1,this.Wd=null,\"string\"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Wh(t,e,i,n){var r=i.length;if(!(4>r)){var o=n.measuredBounds,s=Math.max(1,o.width);o=o.height;for(var a,h,l,u,c,f,d=i[0],p=i[1],g=0,y=A(),m=2;m<r;m+=2)0==(l=(a=i[m])-d)&&(l=.001),u=(d=(h=i[m+1])-p)/l,c=Math.atan2(d,l),f=Math.sqrt(l*l+d*d),y.push([l,c,u,f]),g+=f,d=a,p=h;d=i[0],p=i[1],l=n.measuredBounds.width,n instanceof Hh&&(l-=n.strokeWidth),1>l&&(l=1),r=i=l,h=0!=(a=s/2),l=(f=y[m=0])[0],c=f[1],u=f[2],f=f[3];for(var v=0;.1<=g;){if(0===v&&(h?(r=i,r-=a,g-=a,h=!1):r=i,0===r&&(r=1)),r>g)return void j(y);r>f?(v=r-f,r=f):v=0;var x=Math.sqrt(r*r/(1+u*u));if(0>l&&(x=-x),d+=x,p+=u*x,t.translate(d,p),t.rotate(c),t.translate(-s/2,-o/2),0===v&&n.Ei(t,e),t.translate(s/2,o/2),t.rotate(-c),t.translate(-d,-p),g-=r,f-=r,0!==v){if(++m===y.length)return void j(y);l=(f=y[m])[0],c=f[1],u=f[2],f=f[3],r=v}}j(y)}}function Zh(t){var e=t.geometryStretch;return null!==t.Dd?e===ps?cs:e:e===ps?nl[t.figure].defaultStretch:e}function Jh(t,e,i,n,r){return(e=(t=i.x-t)*t+(e=i.y-e)*e)<n?(r.x=i.x,r.y=i.y,e):n}function $h(t,e,i,n,r,o,s,a,h){var l=!1,u=(r-s)*(e-n)-(o-a)*(t-i);return 0!==u&&(h.x=((r*a-o*s)*(t-i)-(r-s)*(t*n-e*i))/u,h.y=((r*a-o*s)*(e-n)-(o-a)*(t*n-e*i))/u,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(h.y>t||Xe.aa(h.y,t))&&(h.y<e||Xe.aa(h.y,e))&&(l=!0)):(e=t<i?t:i,t=t<i?i:t,(h.x>e||Xe.aa(h.x,e))&&(h.x<t||Xe.aa(h.x,t))&&(l=!0)),l)}function Qh(t,e,i,n){if(!t.vs(e,i,n))return!1;t=e.x,e=e.y;var r=i.x,o=i.y;return i=n.x,n=n.y,t===r?(e<o?(t=e,e=o):t=o,n>=t&&n<=e):(t<r?(n=t,t=r):n=r,i>=n&&i<=t)}function tl(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Nc,\"None\"!==t.Ql?(t.segmentIndex=-1,t.alignmentFocus=Oe):\"None\"!==t.Uk&&(t.segmentIndex=0,t.alignmentFocus=new ze(1-Oe.x,Oe.y)))}function el(t){var e=il[t];if(void 0===e){var i=t.toLowerCase();if(\"none\"===i)return\"None\";if(void 0===(e=il[i])){var n,r=null;for(n in Xe.Gm)if(n.toLowerCase()===i){r=n;break}if(null!==r)return t=Ue.parse(Xe.Gm[r],!1),il[r]=t,i!==r&&(il[i]=r),r}}return\"string\"==typeof e?e:e instanceof Ue?t:null}Gh.className=\"RowColumnDefinition\",Gh.Default=Uh,Gh.None=qh,Gh.ProportionalExtra=Kh,c(Hh,Ds),Hh.prototype.cloneProtected=function(t){Ds.prototype.cloneProtected.call(this,t),t.ma=this.ma,t.wn=this.wn,t.Dn=this.Dn,t.Dd=this.Dd,t.Tk=this.Tk,t.Gc=this.Gc,t.hg=this.hg,t.Jl=this.Jl,t.Kl=this.Kl,t.Ij=this.Ij,null!==this.mh&&(t.mh=C(this.mh)),t.nh=this.nh,t.mf=this.mf.I(),t.nf=this.nf.I(),t.Ko=this.Ko,t.Lo=this.Lo,t.Sn=this.Sn,t.No=this.No,t.Ql=this.Ql,t.Uk=this.Uk,t.Zd=this.Zd,t.Xd=this.Xd,t.Vd=this.Vd,t.Wd=this.Wd},(e=Hh.prototype).gb=function(t){t===fs||t===ds||t===ms||t===ps?this.geometryStretch=t:Ds.prototype.gb.call(this,t)},e.toString=function(){return\"Shape(\"+(\"None\"!==this.figure?this.figure:\"None\"!==this.toArrow?this.toArrow:this.fromArrow)+\")#\"+it(this)},e.Ei=function(t,e){var i=this.Gc,n=this.Tk;if(null!==i||null!==n){var r=this.ma;if(null!==r){t.Ed();var o=this.actualBounds,s=this.naturalBounds;null!==n&&Es(this,t,n,!0,!1,s,o);var a=this.part,h=this.hg;if(null===i||0!==h||null===a||!this.isPanelMain&&a.pb()!==this||(h=a.type===fh.Link&&a instanceof bu&&\"Selection\"===a.category&&a.adornedObject instanceof Hh&&a.adornedPart.pb()===a.adornedObject?a.adornedObject.strokeWidth:0),0===h&&(i=null),null!==i&&0!==h&&(Es(this,t,i,!1,!1,s,o),t.lineWidth=h,t.lineJoin=this.Kl,t.lineCap=this.Jl,t.miterLimit=this.Ij),o=!1,a&&e.Ie(\"drawShadows\")&&(o=a.isShadowed),a=!0,null===i||null!==n&&\"transparent\"!==n||(a=!1),s=!1,null!==(h=this.strokeDashArray)&&(s=!0,t.ns(h,this.nh)),r.type===Ue.j)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),null!==i&&t.Wi();else if(r.type===Ue.D){var l=r.startX;h=r.startY;var u=r.endX,c=r.endY;r=Math.min(l,u);var f=Math.min(h,c);l=Math.abs(u-l),h=Math.abs(c-h),t.beginPath(),t.rect(r,f,l,h),null!==n&&t.yf(n),null!==i&&(a&&o&&ga(t),0!==l&&0!==h||(t.beginPath(),t.rect(r,f,Math.max(l,.1),Math.max(h,.1))),t.Wi(),a&&o&&ya(t))}else if(r.type===Ue.L)l=r.startX,h=r.startY,u=r.endX,c=r.endY,r=Math.abs(u-l)/2,f=Math.abs(c-h)/2,l=Math.min(l,u)+r,h=Math.min(h,c)+f,t.beginPath(),t.moveTo(l,h-f),t.bezierCurveTo(l+Xe.vg*r,h-f,l+r,h-Xe.vg*f,l+r,h),t.bezierCurveTo(l+r,h+Xe.vg*f,l+Xe.vg*r,h+f,l,h+f),t.bezierCurveTo(l-Xe.vg*r,h+f,l-r,h+Xe.vg*f,l-r,h),t.bezierCurveTo(l-r,h-Xe.vg*f,l-Xe.vg*r,h-f,l,h-f),t.closePath(),null!==n&&t.yf(n),null!==i&&(a&&o?(ga(t),t.Wi(),ya(t)):t.Wi());else if(r.type===Ue.o)for(h=(r=r.figures).length,f=0;f<h;f++){l=r.m[f],t.beginPath(),t.moveTo(l.startX,l.startY),c=(u=l.segments.m).length;for(var d=null,p=0;p<c;p++){var g=u[p];switch(g.type){case ni:t.moveTo(g.endX,g.endY);break;case ri:t.lineTo(g.endX,g.endY);break;case oi:t.bezierCurveTo(g.point1X,g.point1Y,g.point2X,g.point2Y,g.endX,g.endY);break;case si:t.quadraticCurveTo(g.point1X,g.point1Y,g.endX,g.endY);break;case ai:if(g.radiusX===g.radiusY){var y=Math.PI/180;t.arc(g.point1X,g.point1Y,g.radiusX,g.startAngle*y,(g.startAngle+g.sweepAngle)*y,0>g.sweepAngle,null!==d?d.endX:l.startX,null!==d?d.endY:l.startY)}else if(0===(y=(d=ei(g,l)).length))t.lineTo(g.centerX,g.centerY);else for(var m=0;m<y;m++){var v=d[m];0===m&&t.lineTo(v[0],v[1]),t.bezierCurveTo(v[2],v[3],v[4],v[5],v[6],v[7])}break;case hi:if(m=y=0,null!==d&&d.type===ai){if(0===(v=(d=ei(d,l)).length)){t.lineTo(g.endX,g.endY);break}null!==(d=d[v-1]||null)&&(y=d[6],m=d[7])}else y=null!==d?d.endX:l.startX,m=null!==d?d.endY:l.startY;if(0===(y=(d=ii(g,l,y,m)).length)){t.lineTo(g.endX,g.endY);break}for(m=0;m<y;m++)v=d[m],t.bezierCurveTo(v[2],v[3],v[4],v[5],v[6],v[7]);break;default:w(\"Segment not of valid type: \"+g.type)}g.isClosed&&t.closePath(),d=g}u=l.isFilled,o?l.isShadowed?(!0===u&&\"transparent\"!==n&&null!==n&&t.yf(n),null!==i&&(u&&a&&ga(t),t.Wi(),u&&a&&ya(t))):(ga(t),u&&\"transparent\"!==n&&null!==n&&t.yf(n),null!==i&&t.Wi(),ya(t)):(u&&null!==n&&t.yf(n),null!==i&&t.Wi())}if(s&&t.ls(),null!==this.pathPattern){if((i=this.pathPattern).measure(1/0,1/0),n=i.measuredBounds,i.arrange(0,0,n.width,n.height),o=this.geometry,t.save(),t.beginPath(),n=A(),o.type===Ue.j)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.endY),Wh(t,e,n,i);else if(o.type===Ue.o)for(o=o.figures.iterator;o.next();){for(a=o.value,n.length=0,n.push(a.startX),n.push(a.startY),h=s=a.startX,f=r=a.startY,u=(l=a.segments.m).length,c=0;c<u;c++){switch((p=l[c]).type){case ni:Wh(t,e,n,i),n.length=0,n.push(p.endX),n.push(p.endY),h=s=p.endX,f=r=p.endY;break;case ri:n.push(p.endX),n.push(p.endY),s=p.endX,r=p.endY;break;case oi:Xe.Fe(s,r,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.5,n),s=p.endX,r=p.endY;break;case si:Xe.kq(s,r,p.point1X,p.point1Y,p.endX,p.endY,.5,n),s=p.endX,r=p.endY;break;case ai:if(0===(d=(g=ei(p,a)).length)){n.push(p.centerX),n.push(p.centerY),s=p.centerX,r=p.centerY;break}for(y=0;y<d;y++)m=g[y],Xe.Fe(s,r,m[2],m[3],m[4],m[5],m[6],m[7],.5,n),s=m[6],r=m[7];break;case hi:if(0===(d=(g=ii(p,a,s,r)).length)){n.push(p.endX),n.push(p.endY),s=p.endX,r=p.endY;break}for(y=0;y<d;y++)m=g[y],Xe.Fe(s,r,m[2],m[3],m[4],m[5],m[6],m[7],.5,n),s=m[6],r=m[7];break;default:w(\"Segment not of valid type: \"+p.type)}p.isClosed&&(n.push(h),n.push(f),Wh(t,e,n,i))}Wh(t,e,n,i)}else if(o.type===Ue.D)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.startY),n.push(o.endX),n.push(o.endY),n.push(o.startX),n.push(o.endY),n.push(o.startX),n.push(o.startY),Wh(t,e,n,i);else if(o.type===Ue.L){if((r=new Qe).startX=o.endX,r.startY=(o.startY+o.endY)/2,(s=new ti(ai)).startAngle=0,s.sweepAngle=360,s.centerX=(o.startX+o.endX)/2,s.centerY=(o.startY+o.endY)/2,s.radiusX=Math.abs(o.startX-o.endX)/2,s.radiusY=Math.abs(o.startY-o.endY)/2,r.add(s),0===(a=(o=ei(s,r)).length))n.push(s.centerX),n.push(s.centerY);else for(s=r.startX,r=r.startY,h=0;h<a;h++)f=o[h],Xe.Fe(s,r,f[2],f[3],f[4],f[5],f[6],f[7],.5,n),s=f[6],r=f[7];Wh(t,e,n,i)}j(n),t.restore(),t.Hc(!1)}}}},e.da=function(t,e){if(void 0===e&&(e=new gt),t instanceof ze){t.zc()&&w(\"getDocumentPoint Spot must be a real, specific Spot, not: \"+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.fe.Aa(e),e},e.Li=function(t){void 0===t&&(t=new Bt);var e=this.naturalBounds,i=this.fe;e=Bt.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Jc(n/2,n/2),n=gt.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Gt(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Gt(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Gt(t,n.x,n.y,0,0),Bt.free(e),gt.free(n),t},e.Bh=function(t,e){var i=this.geometry;if(null===i||null===this.fill&&null===this.stroke)return!1;var n=i.bounds,r=this.strokeWidth/2;i.type!==Ue.j||e||(r+=2);var o=Bt.alloc();if(o.assign(n),o.Jc(r+2,r+2),!o.$(t))return Bt.free(o),!1;if(n=r+1e-4,i.type===Ue.j)return null!==this.stroke&&(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),!(0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n)&&(Bt.free(o),Xe.Nb(i.startX,i.startY,i.endX,i.endY,r,t.x,t.y)));if(i.type===Ue.D){e=i.startX;var s=i.startY,a=i.endX;if(i=i.endY,o.x=Math.min(e,a),o.y=Math.min(s,i),o.width=Math.abs(a-e),o.height=Math.abs(i-s),null===this.fill){if(o.Jc(-n,-n),o.$(t))return Bt.free(o),!1;o.Jc(n,n)}return null!==this.stroke&&o.Jc(r,r),t=o.$(t),Bt.free(o),t}if(i.type===Ue.L){s=i.startX,r=i.startY,a=i.endX;var h=i.endY;if(i=Math.min(s,a),e=Math.min(r,h),s=Math.abs(a-s)/2,r=Math.abs(h-r)/2,i=t.x-(i+s),e=t.y-(e+r),null===this.fill){if(r-=n,0>=(s-=n)||0>=r||1>=i*i/(s*s)+e*e/(r*r))return Bt.free(o),!1;s+=n,r+=n}return null!==this.stroke&&(s+=n,r+=n),Bt.free(o),!(0>=s||0>=r)&&1>=i*i/(s*s)+e*e/(r*r)}if(i.type===Ue.o)return Bt.free(o),null===this.fill?Ze(i,t.x,t.y,r):He(i,t,r,1<this.strokeWidth,e);w(\"Unknown Geometry type: \"+i.type)},e.gm=function(t,e,i,n){var r=this.desiredSize,o=this.hg;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Dd)var s=this.geometry.bounds;else{var a=this.figure,h=nl[a];if(void 0===h){var l=Xe.Qe[a];\"string\"==typeof l&&(l=Xe.Qe[l]),\"function\"==typeof l?(h=l(null,100,100),nl[a]=h):w(\"Unsupported Figure: \"+a)}s=h.bounds}a=s.width,h=s.height,l=s.width;var u=s.height;switch(Ys(this,!0)){case fs:n=i=0;break;case cs:l=Math.max(t-o,0),u=Math.max(e-o,0);break;case gs:l=Math.max(t-o,0),n=0;break;case ys:i=0,u=Math.max(e-o,0)}switch(isFinite(r.width)&&(l=r.width),isFinite(r.height)&&(u=r.height),r=this.maxSize,s=this.minSize,i=Math.max(i-o,s.width),n=Math.max(n-o,s.height),l=Math.min(r.width,l),u=Math.min(r.height,u),l=isFinite(l)?Math.max(i,l):Math.max(a,i),u=isFinite(u)?Math.max(n,u):Math.max(h,n),i=Zh(this)){case fs:break;case cs:a=l,h=u;break;case ds:i=Math.min(l/a,u/h),isFinite(i)||(i=1),a*=i,h*=i;break;default:w(i+\" is not a valid geometryStretch.\")}null!==this.Dd?(0===a&&(a=.001),0===h&&(h=.001),n=a/(r=(i=null!==this.Dd?this.Dd:this.ma).bounds).width,r=h/r.height,isFinite(n)||(n=1),isFinite(r)||(r=1),this.ma=1===n&&1===r?i:i.copy().scale(n,r)):null!==this.ma&&Xe.aa(this.ma.al,t-o)&&Xe.aa(this.ma.$k,e-o)||(this.ma=Hh.makeGeometry(this,a,h)),s=this.ma.bounds,1/0===t||1/0===e?this.xe(s.x-o/2,s.y-o/2,0===t&&0===a?0:s.width+o,0===e&&0===h?0:s.height+o):this.xe(-o/2,-o/2,l+o,u+o)},e.zh=function(t,e,i,n){zs(this,t,e,i,n)},e.vs=function(t,e,i){return this.Zj(t.x,t.y,e.x,e.y,i)},e.Zj=function(t,e,i,n,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),a=o.m22*s,h=-o.m12*s,l=-o.m21*s,u=o.m11*s,c=s*(o.m21*o.dy-o.m22*o.dx),f=s*(o.m12*o.dx-o.m11*o.dy);o=t*a+e*l+c,s=t*h+e*u+f,a=i*a+n*l+c,h=i*h+n*u+f,c=this.hg/2,null===(l=this.ma)&&(this.measure(1/0,1/0),l=this.ma);var d=l.bounds;if(u=!1,l.type===Ue.j)if(1.5>=this.strokeWidth)u=Xe.Le(l.startX,l.startY,l.endX,l.endY,o,s,a,h,r);else{if(l.startX===l.endX?(n=c,u=0):(e=(l.endY-l.startY)/(l.endX-l.startX),n=(u=c/Math.sqrt(1+e*e))*e),e=A(),t=new gt,Xe.Le(l.startX+n,l.startY+u,l.endX+n,l.endY+u,o,s,a,h,t)&&e.push(t),t=new gt,Xe.Le(l.startX-n,l.startY-u,l.endX-n,l.endY-u,o,s,a,h,t)&&e.push(t),t=new gt,Xe.Le(l.startX+n,l.startY+u,l.startX-n,l.startY-u,o,s,a,h,t)&&e.push(t),t=new gt,Xe.Le(l.endX+n,l.endY+u,l.endX-n,l.endY-u,o,s,a,h,t)&&e.push(t),0===(a=e.length))return j(e),!1;for(u=!0,h=1/0,n=0;n<a;n++)(i=((t=e[n]).x-o)*(t.x-o)+(t.y-s)*(t.y-s))<h&&(h=i,r.x=t.x,r.y=t.y);j(e)}else if(l.type===Ue.D)u=Xe.Cf(d.x-c,d.y-c,d.x+d.width+c,d.y+d.height+c,o,s,a,h,r);else if(l.type===Ue.L){t:if(0===(e=Bt.allocAt(d.x,d.y,d.width,d.height).Jc(c,c)).width)u=Xe.Le(e.x,e.y,e.x,e.y+e.height,o,s,a,h,r);else if(0===e.height)u=Xe.Le(e.x,e.y,e.x+e.width,e.y,o,s,a,h,r);else{if(t=e.width/2,l=e.height/2,n=e.x+t,u=e.y+l,i=9999,o!==a&&(i=(s-h)/(o-a)),9999>Math.abs(i)){if(0>t*t*i*i+l*l-(h=s-u-i*(o-n))*h){r.x=NaN,r.y=NaN,u=!1;break t}a=(-t*t*i*h+t*l*(c=Math.sqrt(t*t*i*i+l*l-h*h)))/(l*l+t*t*i*i)+n,t=(-t*t*i*h-t*l*c)/(l*l+t*t*i*i)+n,l=i*(a-n)+h+u,h=i*(t-n)+h+u,Math.abs((o-a)*(o-a))+Math.abs((s-l)*(s-l))<Math.abs((o-t)*(o-t))+Math.abs((s-h)*(s-h))?(r.x=a,r.y=l):(r.x=t,r.y=h)}else{if(a=l*l,0>(a-=a/(t*t)*(h=o-n)*h)){r.x=NaN,r.y=NaN,u=!1;break t}a=u+(h=Math.sqrt(a)),h=u-h,Math.abs(a-s)<Math.abs(h-s)?(r.x=o,r.y=a):(r.x=o,r.y=h)}u=!0}Bt.free(e)}else if(l.type===Ue.o){f=gt.alloc();var p=a-o,g=h-s,y=p*p+g*g,m=o,v=s;if(0<y&&d.contains(m,v)&&(f.x=m,f.y=v,this.$(f)))for(0!==p&&.5>Math.abs(p)?(g*=.5/p,p=.5):0!==g&&.5>Math.abs(g)&&(p*=.5/g,g=.5),m-=p,v-=g;d.contains(m,v);)m-=p,v-=g;for(r.x=a,r.y=h,g=0;g<l.figures.count;g++)for(var x=l.figures.m[g],b=x.isFilled?m:o,k=x.isFilled?v:s,M=x.segments,S=d=x.startX,P=p=x.startY,N=0;N<M.count;N++){var C=M.m[N],T=C.type,L=C.endX,O=C.endY,D=!1;switch(T){case ni:S=L,P=O;break;case ri:D=$h(d,p,L,O,b,k,a,h,f);break;case oi:D=Xe.Np(d,p,C.point1X,C.point1Y,C.point2X,C.point2Y,L,O,b,k,a,h,.6,f);break;case si:D=Xe.Np(d,p,d+2/3*(C.point1X-d),p+2/3*(C.point1Y-p),L+2/3*(C.point1X-L),O+2/3*(C.point1Y-O),L,O,b,k,a,h,.6,f);break;case ai:case hi:var F=(T=C.type===ai?ei(C,x):ii(C,x,d,p)).length;if(0===F){D=$h(d,p,C.type===ai?C.centerX:C.endX,C.type===ai?C.centerY:C.endY,b,k,a,h,f);break}for(O=null,L=0;L<F;L++){if(O=T[L],0===L&&$h(d,p,O[0],O[1],b,k,a,h,f)){var B=Jh(b,k,f,y,r);B<y&&(y=B,u=!0)}Xe.Np(O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7],b,k,a,h,.6,f)&&(B=Jh(b,k,f,y,r))<y&&(y=B,u=!0)}L=O[6],O=O[7];break;default:w(\"Unknown Segment type: \"+T)}d=L,p=O,D&&(D=Jh(b,k,f,y,r))<y&&(y=D,u=!0),C.isClosed&&$h(d,p,L=S,O=P,b,k,a,h,f)&&(C=Jh(b,k,f,y,r))<y&&(y=C,u=!0)}o=i-t,s=n-e,0!==(a=Math.sqrt(o*o+s*s))&&(o/=a,s/=a),r.x-=o*c,r.y-=s*c,gt.free(f)}else w(\"Unknown Geometry type: \"+l.type);return!!u&&(this.transform.Aa(r),!0)},e.Ah=function(t,e){if(void 0===e)return t.Ge(this.actualBounds);var i=this.ma;null===i&&(this.measure(1/0,1/0),i=this.ma),i=i.bounds;var n=this.strokeWidth/2,r=!1,o=gt.alloc();return o.h(i.x-n,i.y-n),t.$(e.Aa(o))&&(o.h(i.x-n,i.bottom+n),t.$(e.Aa(o))&&(o.h(i.right+n,i.bottom+n),t.$(e.Aa(o))&&(o.h(i.right+n,i.y-n),t.$(e.Aa(o))&&(r=!0)))),gt.free(o),r},e.Lc=function(t,e){if(this.Ah(t,e)||void 0===e&&(e=this.transform,t.Ge(this.actualBounds)))return!0;var i=Ye.alloc();i.set(e),i.As();var n=t.left,r=t.right,o=t.top;t=t.bottom;var s=gt.alloc();if(s.h(n,o),i.Aa(s),this.Bh(s,!0))return gt.free(s),!0;if(s.h(r,o),i.Aa(s),this.Bh(s,!0))return gt.free(s),!0;if(s.h(n,t),i.Aa(s),this.Bh(s,!0))return gt.free(s),!0;if(s.h(r,t),i.Aa(s),this.Bh(s,!0))return gt.free(s),!0;var a=gt.alloc(),h=gt.alloc();return i.set(e),i.lv(this.transform),i.As(),a.x=r,a.y=o,a.transform(i),s.x=n,s.y=o,s.transform(i),e=!1,Qh(this,s,a,h)?e=!0:(s.x=r,s.y=t,s.transform(i),Qh(this,s,a,h)?e=!0:(a.x=n,a.y=t,a.transform(i),Qh(this,s,a,h)?e=!0:(s.x=n,s.y=o,s.transform(i),Qh(this,s,a,h)&&(e=!0)))),gt.free(s),Ye.free(i),gt.free(a),gt.free(h),e},e.Ox=function(t,e,i){function n(t,e){for(var i=t.length,n=0;n<i;n+=2)if(e.pd(t[n],t[n+1])>r)return!0;return!1}if(i&&null!==this.fill&&this.Bh(t,!0))return!0;var r=t.xf(e),o=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),null===(e=this.ma)&&(this.measure(1/0,1/0),null===(e=this.ma)))return!1;if(!i){var s=e.bounds,a=s.x,h=s.y,l=s.x+s.width;if(s=s.y+s.height,wt(t.x,t.y,a,h)<=r&&wt(t.x,t.y,l,h)<=r&&wt(t.x,t.y,a,s)<=r&&wt(t.x,t.y,l,s)<=r)return!0}if(a=e.startX,h=e.startY,l=e.endX,s=e.endY,e.type===Ue.j){if(i=(a-l)*(t.x-l)+(h-s)*(t.y-s),bt(t.x,t.y,a,h,l,s)<=(0<=(l-a)*(t.x-a)+(s-h)*(t.y-h)&&0<=i?r:o))return!0}else{if(e.type===Ue.D)return e=!1,i&&(e=bt(t.x,t.y,a,h,a,s)<=r||bt(t.x,t.y,a,h,l,h)<=r||bt(t.x,t.y,l,h,l,s)<=r||bt(t.x,t.y,a,s,l,s)<=r),e;if(e.type===Ue.L){e=t.x-(a+l)/2,o=t.y-(h+s)/2;var u=Math.abs(l-a)/2,c=Math.abs(s-h)/2;if(0===u||0===c)return bt(t.x,t.y,a,h,l,s)<=r;if(!i)return!(wt(e,o,-u,0)>=r||wt(e,o,0,-c)>=r||wt(e,o,0,c)>=r||wt(e,o,u,0)>=r);if((t=Xe.xz(u,c,e,o))*t<=r)return!0}else if(e.type===Ue.o){if(o=(l=e.bounds).x,a=l.y,h=l.x+l.width,l=l.y+l.height,t.x>h&&t.x<o&&t.y>l&&t.y<a&&bt(t.x,t.y,o,a,o,l)>r&&bt(t.x,t.y,o,a,h,a)>r&&bt(t.x,t.y,h,l,o,l)>r&&bt(t.x,t.y,h,l,h,a)>r)return!1;if(o=Math.sqrt(r),!i){for(i=e.figures,e=0;e<i.count;e++){if(s=(o=i.m[e]).startX,u=o.startY,t.pd(s,u)>r)return!1;for(h=(a=o.segments.m).length,l=0;l<h;l++)switch(c=a[l],c.type){case ni:case ri:if(s=c.endX,u=c.endY,t.pd(s,u)>r)return!1;break;case oi:var f=A();if(Xe.Fe(s,u,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.8,f),s=n(f,t),j(f),s)return!1;if(s=c.endX,u=c.endY,t.pd(s,u)>r)return!1;break;case si:if(f=A(),Xe.kq(s,u,c.point1X,c.point1Y,c.endX,c.endY,.8,f),s=n(f,t),j(f),s)return!1;if(s=c.endX,u=c.endY,t.pd(s,u)>r)return!1;break;case ai:case hi:var d=(f=c.type===ai?ei(c,o):ii(c,o,s,u)).length;if(0===d){if(s=c.type===ai?c.centerX:c.endX,u=c.type===ai?c.centerY:c.endY,t.pd(s,u)>r)return!1;break}c=null;for(var p=A(),g=0;g<d;g++)if(c=f[g],p.length=0,Xe.Fe(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.8,p),n(p,t))return j(p),!1;j(p),null!==c&&(s=c[6],u=c[7]);break;default:w(\"Unknown Segment type: \"+c.type)}}return!0}if(null===this.fill?Ze(e,t.x,t.y,o):He(e,t,o,!0,!1))return!0}}return!1},e.fc=function(){this.ma=null},e.Mw=function(){return this.hg},Hh.makeGeometry=function(t,e,i){if(\"None\"!==t.toArrow)var n=il[t.toArrow];else\"None\"!==t.fromArrow?n=il[t.fromArrow]:(\"string\"==typeof(n=Xe.Qe[t.figure])&&(n=Xe.Qe[n]),void 0===n&&w(\"Unknown Shape.figure: \"+t.figure),(n=n(t,e,i)).al=e,n.$k=i);if(null===n){var r=Xe.Qe.Rectangle;\"function\"==typeof r&&(n=r(t,e,i))}return n},f.Object.defineProperties(Hh.prototype,{geometry:{get:function(){return null!==this.ma?this.ma:this.Dd},set:function(t){var e=this.ma,i=this.Dd;if(e!==t){this.Dd=this.ma=null!==t?t.freeze():null;var n=this.part;null!==n&&(n.Xf=NaN),this.s(),this.g(\"geometry\",e||i,t),qs(this)&&null!==(t=this.part)&&Bs(this,t,\"geometryString\")}}},geometryString:{get:function(){return null===this.geometry?\"\":this.geometry.toString()},set:function(t){var e=(t=Ue.parse(t)).normalize();this.geometry=t,this.position=t=gt.allocAt(-e.x,-e.y),gt.free(t)}},isGeometryPositioned:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.s(),this.g(\"isGeometryPositioned\",e,t))}},fill:{get:function(){return this.Tk},set:function(t){var e=this.Tk;e!==t&&(null!==t&&Da(t,\"Shape.fill\"),t instanceof wa&&t.freeze(),this.Tk=t,this.N(),this.g(\"fill\",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&Da(t,\"Shape.stroke\"),t instanceof wa&&t.freeze(),this.Gc=t,this.N(),this.g(\"stroke\",e,t))}},strokeWidth:{get:function(){return this.hg},set:function(t){var e=this.hg;if(e!==t)if(0<=t){this.hg=t,this.s();var i=this.part;null!==i&&(i.Xf=NaN),this.g(\"strokeWidth\",e,t)}else M(t,\"value >= 0\",Hh,\"strokeWidth:value\")}},strokeCap:{get:function(){return this.Jl},set:function(t){var e=this.Jl;e!==t&&(\"string\"!=typeof t||\"butt\"!==t&&\"round\"!==t&&\"square\"!==t?M(t,'\"butt\", \"round\", or \"square\"',Hh,\"strokeCap\"):(this.Jl=t,this.N(),this.g(\"strokeCap\",e,t)))}},strokeJoin:{get:function(){return this.Kl},set:function(t){var e=this.Kl;e!==t&&(\"string\"!=typeof t||\"miter\"!==t&&\"bevel\"!==t&&\"round\"!==t?M(t,'\"miter\", \"bevel\", or \"round\"',Hh,\"strokeJoin\"):(this.Kl=t,this.N(),this.g(\"strokeJoin\",e,t)))}},strokeMiterLimit:{get:function(){return this.Ij},set:function(t){var e=this.Ij;if(e!==t&&1<=t){this.Ij=t,this.N();var i=this.part;null!==i&&(i.Xf=NaN),this.g(\"strokeMiterLimit\",e,t)}}},strokeDashArray:{get:function(){return this.mh},set:function(t){var e=this.mh;if(e!==t){if(null!==t){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];0<=o&&isFinite(o)||w(\"strokeDashArray:value \"+o+\" at index \"+r+\" must be a positive number or zero.\"),n+=o}if(0===n){if(null===e)return;t=null}}this.mh=t,this.N(),this.g(\"strokeDashArray\",e,t)}}},strokeDashOffset:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&0<=t&&(this.nh=t,this.N(),this.g(\"strokeDashOffset\",e,t))}},figure:{get:function(){return this.wn},set:function(t){var e=this.wn;if(e!==t){var i=Xe.Qe[t];\"function\"==typeof i?i=t:(i=Xe.Qe[t.toLowerCase()])||w(\"Unknown Shape.figure: \"+t),e!==i&&(null!==(t=this.part)&&(t.Xf=NaN),this.wn=i,this.Dd=null,this.fc(),this.s(),this.g(\"figure\",e,i))}}},toArrow:{get:function(){return this.Ql},set:function(t){var e=this.Ql;if(!0===t?t=\"Standard\":!1===t&&(t=\"\"),e!==t){var i=el(t);null===i?w(\"Unknown Shape.toArrow: \"+t):e!==i&&(this.Ql=i,this.Dd=null,this.fc(),this.s(),tl(this),this.g(\"toArrow\",e,i))}}},fromArrow:{get:function(){return this.Uk},set:function(t){var e=this.Uk;if(!0===t?t=\"Standard\":!1===t&&(t=\"\"),e!==t){var i=el(t);null===i?w(\"Unknown Shape.fromArrow: \"+t):e!==i&&(this.Uk=i,this.Dd=null,this.fc(),this.s(),tl(this),this.g(\"fromArrow\",e,i))}}},spot1:{get:function(){return this.mf},set:function(t){var e=this.mf;e.A(t)||(this.mf=t=t.I(),this.s(),this.g(\"spot1\",e,t))}},spot2:{get:function(){return this.nf},set:function(t){var e=this.nf;e.A(t)||(this.nf=t=t.I(),this.s(),this.g(\"spot2\",e,t))}},parameter1:{get:function(){return this.Ko},set:function(t){var e=this.Ko;e!==t&&(this.Ko=t,this.fc(),this.s(),this.g(\"parameter1\",e,t))}},parameter2:{get:function(){return this.Lo},set:function(t){var e=this.Lo;e!==t&&(this.Lo=t,this.fc(),this.s(),this.g(\"parameter2\",e,t))}},naturalBounds:{get:function(){var t=this.desiredSize;return t.u()||null===this.ma?new Bt(0,0,t.width,t.height):(this.uc.assign(this.ma.bounds),this.uc)}},pathPattern:{get:function(){return this.No},set:function(t){var e=this.No;e!==t&&(this.No=t,this.N(),this.g(\"pathPattern\",e,t))}},geometryStretch:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.s(),this.g(\"geometryStretch\",e,t))}},interval:{get:function(){return this.Zd},set:function(t){var e=this.Zd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Zd=t;var i=this.diagram;null!==i&&this.panel===i.grid&&yo(i),this.s(),null!==(i=this.panel)&&(i.Rf=null),this.g(\"interval\",e,t)}}},graduatedStart:{get:function(){return this.Xd},set:function(t){var e=this.Xd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Xd=t,this.s(),this.g(\"graduatedStart\",e,t))}},graduatedEnd:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Vd=t,this.s(),this.g(\"graduatedEnd\",e,t))}},graduatedSkip:{get:function(){return this.Wd},set:function(t){var e=this.Wd;e!==t&&(this.Wd=t,this.s(),this.g(\"graduatedSkip\",e,t))}}}),Hh.prototype.intersectsRect=Hh.prototype.Lc,Hh.prototype.containedInRect=Hh.prototype.Ah,Hh.prototype.getNearestIntersectionPoint=Hh.prototype.vs,Hh.prototype.getDocumentBounds=Hh.prototype.Li,Hh.prototype.getDocumentPoint=Hh.prototype.da;var il=new X,nl=new X;function rl(t,e){return Ds.call(this),Ol||(jl=Eo?new ma(null).context:null,Ol=!0),this.Xb=\"\",this.Gc=\"black\",this.qe=\"13px sans-serif\",this.ti=\"start\",this.Ud=fs,this.Ai=Te,this.oj=!0,this.ai=this.bi=!1,this.$f=bl,this.lg=vl,this.vr=this.sb=this.Xc=0,this.Pt=this.Qt=null,this.tn=!1,this.md=this.Wm=this.yp=this.ui=this.zp=null,this.lf=this.kf=0,this.Yh=kl,this.we=1/0,this.ei=0,this.re=null,this.Ce=0,this.pe=this.Sb=this.Cc=null,this.Zd=1,this.Xd=0,this.Vd=1,this.Wd=this.hj=null,\"string\"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}function ol(t,e){t.G=6144|e.G,t.mb=e.opacity,t.Ub=e.background,t.hd=e.areaBackground,t.Tc=e.desiredSize.I(),t.Zf=e.minSize.I(),t.Yf=e.maxSize.I(),null!==e.Bb?t.Bb=e.Bb.copy():t.Bb=null,t.sa=e.scale,t.zb=e.angle,t.Ee=e.stretch,t.Ug=e.margin.I(),t.yb=e.alignment.I(),t.wk=e.alignmentFocus.I(),t.zl=e.segmentFraction,t.Al=e.segmentOffset.I(),t.Bl=e.segmentOrientation,null!==e.$a&&(t.$a=e.$a.copy()),t.Dl=e.shadowVisible,e instanceof rl&&(t.Xb=e.Xb,t.Gc=e.Gc,t.qe=e.qe,t.ti=e.ti,t.Ud=e.Ud,t.Ai=e.Ai,t.oj=e.oj,t.bi=e.bi,t.ai=e.ai,t.$f=e.$f,t.lg=e.lg,t.re=null,t.kf=e.kf,t.lf=e.lf,t.we=e.we,t.ei=e.ei,t.Zd=e.Zd,t.Xd=e.Xd,t.Vd=e.Vd,t.hj=e.hj,t.Wd=e.Wd)}function sl(t,e,i){null===t.pe?(t.pe=e,t.sb=i):(null!==t.Sb&&null!==t.Cc||(t.Sb=[],t.Cc=[],t.Sb.push(t.pe),t.Cc.push(t.sb)),t.Sb.push(e),t.Cc.push(i))}function al(t,e,i,n){var r=t.Yh===kl;r&&(e=e.trim());var o=0,s=t.qe,a=t.kf+t.lf;a=Math.max(0,ul(t)+a);var h=t.$f===wl?cl(s):0;if(t.Xc>=t.we)null!==n&&n.h(0,a);else if(s=e,t.lg===yl){t.Ce=1;var l=ll(e);if(0===h||l<=i)t.sb=Math.max(t.sb,l),sl(t,e,t.sb),null!==n&&n.h(l,a);else{for(l=ll((o=hl(t,s))+(e=hl(t,s=s.substr(o.length))));0<e.length&&l<=i;)l=(o+=e)+(e=hl(t,s=s.substr(e.length))),r&&(l=l.trim()),l=ll(l);for(r&&(e=e.trim()),o+=e,i=Math.max(1,i-h);ll(o)>i&&1<o.length;)o=o.substr(0,o.length-1);var u=ll(o+=Ll);t.sb=u,sl(t,o,u),null!==n&&n.h(u,a)}}else{for(h=0,0===s.length&&(h=1,sl(t,s,0));0<s.length;){for(e=hl(t,s),s=s.substr(e.length);ll(e)>i;){var c=1;for(l=ll(e.substr(0,c)),u=0;l<=i;)c++,u=l,l=ll(e.substr(0,c));if(1===c){var f=l;o=Math.max(o,l)}else f=u,o=Math.max(o,u);if(1>--c&&(c=1),sl(t,e.substr(0,c),f),h++,e=e.substr(c),t.Xc+h>t.we)break}for(l=ll(e+(u=hl(t,s)));0<u.length&&l<=i;)l=(e+=u)+(u=hl(t,s=s.substr(u.length))),r&&(l=l.trim()),l=ll(l);if(r&&(e=e.trim()),\"\"!==e&&(\"?\"===e[e.length-1]&&(e=e.substring(0,e.length-1)+\"?\"),0===u.length?(c=l,o=Math.max(o,l)):(c=u=ll(e),o=Math.max(o,u)),sl(t,e,c),h++,t.Xc+h>t.we))break}t.Ce=Math.min(t.we,h),t.sb=Math.max(t.sb,o),null!==n&&n.h(t.sb,a*t.Ce)}}function hl(t,e){if(t.lg===xl)return e.substr(0,1);for(var i=e.length,n=0,r=Sl;n<i&&!r.test(e.charAt(n));)n++;for(t.Yh===Ml&&(i=Math.min(i,n+1));n<i&&r.test(e.charAt(n));)n++;return n>=e.length?e:e.substr(0,n)}function ll(t){return null===jl?8*t.length:jl.measureText(t).width}function ul(t){if(null!==t.re)return t.re;var e=t.qe;if(null===jl){var i=16;return t.re=i}return void 0!==Pl[e]&&5e3>Nl?i=Pl[e]:(i=1.3*jl.measureText(\"M\").width,Pl[e]=i,Nl++),t.re=i}function cl(t){if(null===jl)return 6;if(void 0!==Cl[t]&&5e3>Tl)var e=Cl[t];else e=jl.measureText(Ll).width,Cl[t]=e,Tl++;return e}function fl(t,e){var i=t.Xb.replace(/\\r\\n/g,\"\\n\").replace(/\\r/g,\"\\n\"),n=t.kf+t.lf;if(n=Math.max(0,ul(t)+n),0===i.length)return t.sb=0,t.Xc=1,n;if(!t.isMultiline){var r=i.indexOf(\"\\n\",0);0<=r&&(i=i.substr(0,r))}r=0;for(var o,s=t.Xc=0,a=!1;!a;){if(-1===(o=i.indexOf(\"\\n\",s))&&(o=i.length,a=!0),s<=o){if(s=i.substr(s,o-s),t.lg!==yl){t.Ce=0;var h=jt.alloc();al(t,s,e,h),r+=h.height,jt.free(h),t.Xc+=t.Ce}else al(t,s,e,null),r+=n,t.Xc++;t.Xc===t.we&&(a=!0)}s=o+1}return t.vr=r}Hh.className=\"Shape\",Hh.getFigureGenerators=function(){var t,e=new pt;for(t in Xe.Qe)t!==t.toLowerCase()&&e.add(t,Xe.Qe[t]);return e.freeze(),e},Hh.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=Xe.Qe;n[t]=e,n[i]=t},Hh.getArrowheadGeometries=function(){var t=new pt;for(n in Xe.Gm)if(void 0===il[n]){var e=Ue.parse(Xe.Gm[n],!1);il[n]=e,(e=n.toLowerCase())!==n&&(il[e]=n)}for(var i in il)if(i!==i.toLowerCase()){var n=il[i];n instanceof Ue&&t.add(i,n)}return t.freeze(),t},Hh.defineArrowheadGeometry=function(t,e){var i;i=\"string\"==typeof e?Ue.parse(e,!1):e,\"none\"!==(e=t.toLowerCase())&&t!==e||w(\"Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: \"+t);var n=il;n[t]=i,n[e]=t},c(rl,Ds),rl.prototype.cloneProtected=function(t){Ds.prototype.cloneProtected.call(this,t),t.Xb=this.Xb,t.Gc=this.Gc,t.qe=this.qe,t.ti=this.ti,t.Ud=this.Ud,t.Ai=this.Ai,t.oj=this.oj,t.bi=this.bi,t.ai=this.ai,t.$f=this.$f,t.lg=this.lg,t.Xc=this.Xc,t.vr=this.vr,t.sb=this.sb,t.Qt=this.Qt,t.Pt=this.Pt,t.tn=this.tn,t.zp=this.zp,t.ui=this.ui,t.yp=this.yp,t.Wm=this.Wm,t.md=this.md,t.kf=this.kf,t.lf=this.lf,t.Yh=this.Yh,t.we=this.we,t.re=this.re,t.Ce=this.Ce,t.Cc=this.Cc,t.Sb=this.Sb,t.pe=this.pe,t.ei=this.ei,t.Zd=this.Zd,t.Xd=this.Xd,t.Vd=this.Vd,t.hj=this.hj,t.Wd=this.Wd},(e=rl.prototype).gb=function(t){t.classType===rl?this.wrap=t:Ds.prototype.gb.call(this,t)},e.toString=function(){return 22<this.Xb.length?'TextBlock(\"'+this.Xb.substring(0,20)+'\"...)':'TextBlock(\"'+this.Xb+'\")'},e.s=function(){Ds.prototype.s.call(this),this.Pt=this.Qt=null},e.Ei=function(t,e){if(null!==this.Gc&&0!==this.Xb.length&&null!==this.qe){var i=this.naturalBounds,n=this.actualBounds,r=i.width,o=i.height,s=ul(this),a=t.textAlign=this.ti,h=e.Vn;\"start\"===a?a=h?\"right\":\"left\":\"end\"===a&&(a=h?\"left\":\"right\"),h=this.bi;var l=this.ai;Es(this,t,this.Gc,!0,!1,i,n),(h||l)&&Es(this,t,this.Gc,!1,!1,i,n),n=0,i=!1;var u=this.fe,c=u.dx-(s*u.m21+u.dx);u=u.dy-(s*u.m22+u.dy);var f=e.scale;switch(8>(c*c+u*u)*f*f&&(i=!0),e.Vb!==t&&(i=!1),!1===e.Ie(\"textGreeking\")&&(i=!1),e=this.kf,c=this.lf,this.flip){case xs:t.translate(r,0),t.scale(-1,1);break;case vs:t.translate(0,o),t.scale(1,-1);break;case bs:t.translate(r,o),t.scale(-1,-1)}if(t.Ed(),o>(f=(e+s+c)*(u=this.Xc))&&(n=(n=this.Ai).y*o-n.y*f+n.offsetY),1===u&&null!==this.pe)(c=this.sb)>r&&(c=r),this.Di(this.pe,t,0,n+e,r,s,c,i,a,h,l);else if(null!==this.Cc&&null!==this.Sb)for(f=0;f<u;f++){var d=this.Cc[f];d>r&&(d=r),n+=e,this.Di(this.Sb[f],t,0,n,r,s,d,i,a,h,l),n+=s+c}switch(this.flip){case xs:t.scale(-1,1),t.translate(-r,0);break;case vs:t.scale(1,-1),t.translate(0,-o);break;case bs:t.scale(-1,-1),t.translate(-r,-o)}}},e.Di=function(t,e,i,n,r,o,s,a,h,l,u){var c=0;a?(\"left\"===h?c=0:\"right\"===h?c=r-s:\"center\"===h&&(c=(r-s)/2),e.fillRect(i+c,n+.25*o,s,1)):(\"left\"===h?c=0:\"right\"===h?c=r:\"center\"===h&&(c=r/2),r=null!==pl?pl(this,o):.75*o,e.fillText(t,i+c,n+r),0==(t=o/20|0)&&(t=1),\"right\"===h?c-=s:\"center\"===h&&(c-=s/2),l&&(h=null!==gl?gl(this,o):.8*o,e.beginPath(),e.lineWidth=t,e.moveTo(i+c,n+h),e.lineTo(i+c+s,n+h),e.stroke()),u&&(e.beginPath(),e.lineWidth=t,n=n+o-o/2.2|0,0!=t%2&&(n+=.5),e.moveTo(i+c,n),e.lineTo(i+c+s,n),e.stroke()))},e.gm=function(t,e,i,n){this.ei=t;var r,o=this.qe;if(null!==jl&&Al!==o&&(Al=jl.font=o),this.sb=this.Ce=0,this.pe=this.Sb=this.Cc=this.re=null,isNaN(this.desiredSize.width)){if(0===(o=this.Xb.replace(/\\r\\n/g,\"\\n\").replace(/\\r/g,\"\\n\")).length)o=0;else if(this.isMultiline){for(var s=r=0,a=!1;!a;){var h=o.indexOf(\"\\n\",s);-1===h&&(h=o.length,a=!0),s=o.substr(s,h-s),this.Yh===kl&&(s=s.trim()),r=Math.max(r,ll(s)),s=h+1}o=r}else 0<=(r=o.indexOf(\"\\n\",0))&&(o=o.substr(0,r)),o=ll(o);o=Math.min(o,t/this.scale),o=Math.max(8,o)}else o=this.desiredSize.width;if(null!==this.panel&&(o=Math.min(o,this.panel.maxSize.width)),r=fl(this,o),a=r=isNaN(this.desiredSize.height)?Math.min(r,e/this.scale):this.desiredSize.height,0!==this.sb&&null!==this.Cc&&null!==this.Sb&&this.$f===wl&&(e=this.qe,e=this.$f===wl?cl(e):0,h=this.kf+this.lf,h=Math.max(0,ul(this)+h),!((a=Math.min(this.maxLines-1,Math.max(Math.floor(a/h+.01)-1,0)))+1>=this.Sb.length))){for(h=this.Sb[a],e=Math.max(1,t-e);ll(h)>e&&1<h.length;)h=h.substr(0,h.length-1);e=ll(h+=Ll),this.Sb[a]=h,this.Sb=this.Sb.slice(0,a+1),this.Cc[a]=e,this.Cc=this.Cc.slice(0,a+1),this.Ce=this.Sb.length,this.sb=Math.max(this.sb,e),this.Xc=this.Ce,1===this.Xc&&(this.pe=this.Sb[0])}(this.wrap===ml||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.sb:Math.min(t,this.sb),isNaN(this.desiredSize.width)&&(o=Math.max(8,o))),o=Math.max(i,o),r=Math.max(n,r),It(this.uc,o,r),this.xe(0,0,o,r)},e.zh=function(t,e,i,n){zs(this,t,e,i,n)},f.Object.defineProperties(rl.prototype,{font:{get:function(){return this.qe},set:function(t){var e=this.qe;e!==t&&(this.qe=t,this.re=null,this.s(),this.g(\"font\",e,t))}},text:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==(t=null!=t?t.toString():\"\")&&(this.Xb=t,this.s(),this.g(\"text\",e,t))}},textAlign:{get:function(){return this.ti},set:function(t){var e=this.ti;e===t||\"start\"!==t&&\"end\"!==t&&\"left\"!==t&&\"right\"!==t&&\"center\"!==t||(this.ti=t,this.N(),this.g(\"textAlign\",e,t))}},flip:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(this.Ud=t,this.N(),this.g(\"flip\",e,t))}},verticalAlignment:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e.A(t)||(this.Ai=t=t.I(),Vs(this),this.g(\"verticalAlignment\",e,t))}},naturalBounds:{get:function(){if(!this.uc.u()){var t=jt.alloc();al(this,this.Xb,999999,t);var e=t.width;jt.free(t),t=fl(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),It(this.uc,e,t)}return this.uc}},isMultiline:{get:function(){return this.oj},set:function(t){var e=this.oj;e!==t&&(this.oj=t,this.s(),this.g(\"isMultiline\",e,t))}},isUnderline:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.N(),this.g(\"isUnderline\",e,t))}},isStrikethrough:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.N(),this.g(\"isStrikethrough\",e,t))}},wrap:{get:function(){return this.lg},set:function(t){var e=this.lg;e!==t&&(this.lg=t,this.s(),this.g(\"wrap\",e,t))}},overflow:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.s(),this.g(\"overflow\",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&Da(t,\"TextBlock.stroke\"),t instanceof wa&&t.freeze(),this.Gc=t,this.N(),this.g(\"stroke\",e,t))}},lineCount:{get:function(){return this.Xc}},lineHeight:{get:function(){return ul(this)}},editable:{get:function(){return this.tn},set:function(t){var e=this.tn;e!==t&&(this.tn=t,this.g(\"editable\",e,t))}},textEditor:{get:function(){return this.zp},set:function(t){var e=this.zp;e!==t&&(this.zp=t,this.g(\"textEditor\",e,t))}},errorFunction:{get:function(){return this.md},set:function(t){var e=this.md;e!==t&&(this.md=t,this.g(\"errorFunction\",e,t))}},interval:{get:function(){return this.Zd},set:function(t){var e=this.Zd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Zd=t,this.s();var i=this.panel;null!==i&&(i.Rf=null),this.g(\"interval\",e,t)}}},graduatedStart:{get:function(){return this.Xd},set:function(t){var e=this.Xd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Xd=t,this.s(),this.g(\"graduatedStart\",e,t))}},graduatedEnd:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Vd=t,this.s(),this.g(\"graduatedEnd\",e,t))}},graduatedFunction:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&(this.hj=t,this.s(),this.g(\"graduatedFunction\",e,t))}},graduatedSkip:{get:function(){return this.Wd},set:function(t){var e=this.Wd;e!==t&&(this.Wd=t,this.s(),this.g(\"graduatedSkip\",e,t))}},textValidation:{get:function(){return this.ui},set:function(t){var e=this.ui;e!==t&&(this.ui=t,this.g(\"textValidation\",e,t))}},textEdited:{get:function(){return this.yp},set:function(t){var e=this.yp;e!==t&&(this.yp=t,this.g(\"textEdited\",e,t))}},spacingAbove:{get:function(){return this.kf},set:function(t){var e=this.kf;e!==t&&(this.kf=t,this.s(),this.g(\"spacingAbove\",e,t))}},spacingBelow:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.s(),this.g(\"spacingBelow\",e,t))}},formatting:{get:function(){return this.Yh},set:function(t){var e=this.Yh;e!==t&&(this.Yh=t,this.s(),this.g(\"formatting\",e,t))}},maxLines:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(0>=(t=Math.floor(t))&&M(t,\"> 0\",rl,\"maxLines\"),this.we=t,this.s(),this.g(\"maxLines\",e,t))}},metrics:{get:function(){return{arrSize:null!==this.Cc?this.Cc:[this.sb],arrText:null!==this.Sb?this.Sb:[this.pe],maxLineWidth:this.sb,fontHeight:this.re}}},choices:{get:function(){return this.Wm},set:function(t){var e=this.Wm;e!==t&&(this.Wm=t,this.g(\"choices\",e,t))}}});var dl,pl=null,gl=null,yl=new V(rl,\"None\",0),ml=new V(rl,\"WrapFit\",1),vl=new V(rl,\"WrapDesiredSize\",2),xl=new V(rl,\"WrapBreakAll\",3),bl=new V(rl,\"OverflowClip\",0),wl=new V(rl,\"OverflowEllipsis\",1),kl=new V(rl,\"FormatTrim\",0),Ml=new V(rl,\"FormatNone\",0),Sl=/[ \\u200b\\u00ad]/,Pl=new X,Nl=0,Cl=new X,Tl=0,Ll=\"...\",Al=\"\",jl=null,Ol=!1;function Dl(t,e){Ds.call(this),this.Lg=null,this.rp=\"\",this.lh=Kt,this.Wk=cs,this.oh=this.md=null,this.Vk=oe,this.Ud=fs,this.Ml=null,this.Rn=!1,this.ar=!0,this.kl=!1,this.Fl=null,\"string\"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Fl(t){void 0===t&&(t=\"\"),\"\"!==t?dl[t]&&(delete dl[t],zl--):(dl=new X,zl=0)}function Bl(t,e){e.Py||(e.ur=function(i){e.lr=!0,e.Ln=!1;var n=e.Hg.copy();if(null!=n){for(n=n.iterator;n.next();){var r=n.value,o=e.getAttribute(\"src\")||\"\",s=r.eh.H(o);if(null!==s)for(var a=s.length,h=0;h<a;h++)o=s[h],r.Oo.add(o),r.Fb(),e.En&&(void 0===e.bu&&(e.bu=i),null!==o.oh&&o.oh(o,i))}e.Hg.clear()}t.desiredSize.u()||(Js(t,!1),t.s())},e.Xq=function(t){e.Ln=t;var i=e.Hg.copy();if(null!=i){for(i=i.iterator;i.next();){var n=i.value,r=e.getAttribute(\"src\")||\"\",o=n.eh.H(r);if(null!==o){n=o.length,r=A();for(var s=0;s<n;s++)r.push(o[s]);if(e.En)for(s=0;s<n;s++)null!==(o=r[s]).md&&o.md(o,t);j(r)}}e.Hg.clear()}},e.addEventListener(\"load\",e.ur),e.addEventListener(\"error\",e.Xq),e.Py=!0)}function Il(t){t.ur&&t.removeEventListener(\"load\",t.ur),t.Xq&&t.removeEventListener(\"error\",t.Xq),delete t.ur,delete t.Xq}rl.className=\"TextBlock\",rl.getEllipsis=function(){return Ll},rl.setEllipsis=function(t){Ll=t,Cl=new X,Tl=0},rl.getBaseline=function(){return pl},rl.setBaseline=function(t){pl=t},rl.getUnderline=function(){return gl},rl.setUnderline=function(t){gl=t},rl.isValidFont=function(t){if(Ol||(jl=Eo?new ma(null).context:null,Ol=!0),null===jl)return!0;var e=jl.font;if(t===e||\"10px sans-serif\"===t)return!0;jl.font=\"10px sans-serif\",jl.font=t;var i=jl.font;if(\"10px sans-serif\"!==i)return jl.font=e,!0;jl.font=\"19px serif\";var n=jl.font;return jl.font=t,i=jl.font,jl.font=e,i!==n},rl.None=yl,rl.WrapFit=ml,rl.WrapDesiredSize=vl,rl.WrapBreakAll=xl,rl.OverflowClip=bl,rl.OverflowEllipsis=wl,c(Dl,Ds),Dl.prototype.cloneProtected=function(t){Ds.prototype.cloneProtected.call(this,t),t.element=this.Lg,t.rp=this.rp,t.lh=this.lh.I(),t.Wk=this.Wk,t.Ud=this.Ud,t.md=this.md,t.oh=this.oh,t.Vk=this.Vk.I(),t.ar=this.ar,t.Fl=this.Fl},Dl.prototype.gb=function(t){t===fs||t===ds||t===ms?this.imageStretch=t:Ds.prototype.gb.call(this,t)},Dl.prototype.toString=function(){return\"Picture(\"+this.source+\")#\"+it(this)},Dl.prototype.DA=function(){if(\"\"!==this.source){Fl(this.source);var t=this.source;this.source=\"\",this.source=t}},Dl.prototype.redraw=function(){this.N()},Dl.prototype.Ei=function(t,e){var i=this.Lg;if(null!==i){var n=i.getAttribute(\"src\");if(!(i instanceof HTMLImageElement&&(null===n||\"\"===n)||i.Ln instanceof Event&&t instanceof va)){n=this.naturalBounds;var r=0,o=0,s=this.Rn,a=s?+i.width:i.naturalWidth;if(s=s?+i.height:i.naturalHeight,void 0===a&&i.videoWidth&&(a=i.videoWidth),void 0===s&&i.videoHeight&&(s=i.videoHeight),a=a||n.width,s=s||n.height,0!==a&&0!==s){var h=a,l=s;this.sourceRect.u()&&(r=this.lh.x,o=this.lh.y,a=this.lh.width,s=this.lh.height);var u=a,c=s,f=this.Wk,d=this.Vk;switch(f){case fs:if(this.sourceRect.u())break;u>=n.width&&(r=r+d.offsetX+(u*d.x-n.width*d.x)),c>=n.height&&(o=o+d.offsetY+(c*d.y-n.height*d.y)),a=Math.min(n.width,u),s=Math.min(n.height,c);break;case cs:u=n.width,c=n.height;break;case ds:case ms:f===ds?(u*=f=Math.min(n.height/c,n.width/u),c*=f):f===ms&&(c*=f=Math.max(n.height/c,n.width/u),(u*=f)>=n.width&&(r=(r+d.offsetX+(u*d.x-n.width*d.x)/u)*a),c>=n.height&&(o=(o+d.offsetY+(c*d.y-n.height*d.y)/c)*s),a*=1/(u/n.width),s*=1/(c/n.height),u=n.width,c=n.height)}var p=u*(f=this.Af()*e.scale)*c*f,g=a*s/p,y=i.__goCache;f=null;var m=Rl;if(i.lr&&void 0!==y&&4<p&&g>m*m)for(null===y.Ci&&(_l(y,4,h,l,i),_l(y,16,h,l,i)),l=(h=y.Ci).length,p=0;p<l&&h[p].ratio*h[p].ratio<g;p++)f=h[p];if(!e.qn){if(null===this.Ml)if(null===this.Lg)this.Ml=!1;else{(h=new ma(null).context).drawImage(this.Lg,0,0);try{h.getImageData(0,0,1,1).data[3]&&(this.Ml=!1),this.Ml=!1}catch(t){this.Ml=!0}}if(this.Ml)return}switch(h=0,u<n.width&&(h=d.offsetX+(n.width*d.x-u*d.x)),l=0,c<n.height&&(l=d.offsetY+(n.height*d.y-c*d.y)),this.flip){case xs:t.translate(Math.min(n.width,u),0),t.scale(-1,1);break;case vs:t.translate(0,Math.min(n.height,c)),t.scale(1,-1);break;case bs:t.translate(Math.min(n.width,u),Math.min(n.height,c)),t.scale(-1,-1)}if(t.Ed(),e.Ie(\"pictureRatioOptimization\")&&!e.nj&&void 0!==y&&null!==f&&1!==f.ratio){t.save(),e=f.ratio;try{t.drawImage(f.source,r/e,o/e,Math.min(f.source.width,a/e),Math.min(f.source.height,s/e),h,l,Math.min(n.width,u),Math.min(n.height,c))}catch(t){this.ar=!1}t.restore()}else try{t.drawImage(i,r,o,a,s,h,l,Math.min(n.width,u),Math.min(n.height,c))}catch(t){this.ar=!1}switch(this.flip){case xs:t.scale(-1,1),t.translate(-Math.min(n.width,u),0);break;case vs:t.scale(1,-1),t.translate(0,-Math.min(n.height,c));break;case bs:t.scale(-1,-1),t.translate(-Math.min(n.width,u),-Math.min(n.height,c))}}}}},Dl.prototype.gm=function(t,e,i,n){var r=this.desiredSize,o=Ys(this,!0),s=this.Lg,a=this.Rn;(a||!this.kl&&s&&s.complete)&&(this.kl=!0),null===s&&(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)),isFinite(r.width)||o===cs||o===gs?(isFinite(t)||(this.sourceRect.u()?t=this.sourceRect.width:null!==s&&(t=a?+s.width:s.naturalWidth)),i=0):null!==s&&!1!==this.kl&&(t=this.sourceRect.u()?this.sourceRect.width:a?+s.width:s.naturalWidth),isFinite(r.height)||o===cs||o===ys?(isFinite(e)||(this.sourceRect.u()?e=this.sourceRect.height:null!==s&&(e=a?+s.height:s.naturalHeight)),n=0):null!==s&&!1!==this.kl&&(e=this.sourceRect.u()?this.sourceRect.height:a?+s.height:s.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,o=this.minSize,i=Math.max(i||0,o.width),n=Math.max(n||0,o.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(i,t),e=Math.max(n,e),null===s||s.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),It(this.uc,t,e),this.xe(0,0,t,e)},Dl.prototype.zh=function(t,e,i,n){zs(this,t,e,i,n)},f.Object.defineProperties(Dl.prototype,{element:{get:function(){return this.Lg},set:function(t){var e=this.Lg;if(e!==t){this.Rn=t instanceof HTMLCanvasElement;var i=t instanceof HTMLImageElement;e instanceof HTMLImageElement&&Il(e),null===t||i||t instanceof HTMLVideoElement||this.Rn||w(\"Picture.element must be an instance of Image, Canvas, or Video, not: \"+t);var n=this.diagram;null!==n&&bo(n,this),this.Lg=t,null!==t&&i&&void 0===t.Hg&&(t.Hg=new Q),null!==n&&i&&xo(n,this),null!==t&&(this.Rn||!0===t.complete?(t.En&&(t.Ln instanceof Event&&null!==this.md?this.md(this,t.Ln):!0===t.lr&&!t.Ln&&null!==this.oh&&t.bu&&this.oh(this,t.bu)),t.lr=!0,this.desiredSize.u()||(Js(this,!1),this.s())):i&&Bl(this,t)),this.g(\"element\",e,t),this.N()}}},source:{get:function(){return this.rp},set:function(t){var e=this.rp;if(e!==t){this.rp=t;var i=dl;if(Eo){if(void 0!==i[t])var n=i[t];else if(\"\"!==t){30<zl&&(Fl(),i=dl),(n=b(\"img\")).En=!0,Bl(this,n);var r=this.Fl;null!==r&&(n.crossOrigin=r(this)),n.src=t,i[t]=n,zl++}this.element=n,null!==n&&void 0===n.__goCache&&(n.__goCache=new El),this.s(),this.N()}this.g(\"source\",e,t)}}},sourceCrossOrigin:{get:function(){return this.Fl},set:function(t){if(this.Fl!==t&&(this.Fl=t,null!==this.element)){var e=this.element.getAttribute(\"src\");null===t&&\"string\"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.lh},set:function(t){var e=this.lh;e.A(t)||(this.lh=t=t.I(),this.N(),this.g(\"sourceRect\",e,t))}},imageStretch:{get:function(){return this.Wk},set:function(t){var e=this.Wk;e!==t&&(this.Wk=t,this.N(),this.g(\"imageStretch\",e,t))}},flip:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(this.Ud=t,this.N(),this.g(\"flip\",e,t))}},imageAlignment:{get:function(){return this.Vk},set:function(t){var e=this.Vk;e.A(t)||(this.Vk=t=t.I(),this.N(),this.g(\"imageAlignment\",e,t))}},errorFunction:{get:function(){return this.md},set:function(t){var e=this.md;e!==t&&(this.md=t,this.g(\"errorFunction\",e,t))}},successFunction:{get:function(){return this.oh},set:function(t){var e=this.oh;e!==t&&(this.oh=t,this.g(\"successFunction\",e,t))}},naturalBounds:{get:function(){return this.uc}}}),Dl.prototype.redraw=Dl.prototype.redraw,Dl.prototype.reloadSource=Dl.prototype.DA;var zl=0,Rl=4;function El(){this.Ci=null}function _l(t,e,i,n,r){null===t.Ci&&(t.Ci=[]);var o=new ma(null),s=o.context,a=1/e;o.width=i/e,o.height=n/e,0!==o.width&&0!==o.height&&(e=new Vl(o.La,e),i=1,0<t.Ci.length&&(r=(i=t.Ci[t.Ci.length-1]).source,i=i.ratio),s.setTransform(a*i,0,0,a*i,0,0),s.Ed(),s.drawImage(r,0,0),t.Ci.push(e))}function Vl(t,e){this.source=t,this.ratio=e}function Yl(){this.ss=new Ue,this.jc=null}function Gl(t,e,i,n,r){t.jc=new Qe,t.jc.startX=e,t.jc.startY=i,t.jc.isFilled=n,t.ss.figures.add(t.jc),void 0!==r&&(t.jc.isShadowed=r)}function Xl(t){var e=t.jc.segments.length;0<e&&t.jc.segments.J(e-1).close()}function Ul(t,e,i,n,r,o,s){var a;void 0===a&&(a=!1);var h=new ti(oi);h.point1X=e,h.point1Y=i,h.point2X=n,h.point2Y=r,h.endX=o,h.endY=s,a&&h.close(),t.jc.segments.add(h)}function ql(t,e,i,n,r){var o;void 0===o&&(o=!1);var s=new ti(si);s.point1X=e,s.point1Y=i,s.endX=n,s.endY=r,o&&s.close(),t.jc.segments.add(s)}function Kl(t,e,i,n,r,o,s,a){var h;void 0===h&&(h=!1),e=new ti(hi,s,a,e,i,n,r,o),h&&e.close(),t.jc.segments.add(e)}function Hl(t){var e=Wl;return null!==e?(Wl=null,e.reset(t),e):((e=new Yl).reset(t),e)}Dl.className=\"Picture\",dl=new X,Dl.clearCache=Fl,El.className=\"PictureCacheArray\",Vl.className=\"PictureCacheInstance\",Yl.prototype.reset=function(t){null!==t?(t.ea(),this.ss=t,t.figures.clear()):this.ss=new Ue,this.jc=null},Yl.prototype.zm=function(t){this.jc.isShadowed=t},Yl.prototype.moveTo=function(t,e,i){void 0===i&&(i=!1);var n=new ti(ni);n.endX=t,n.endY=e,i&&n.close(),this.jc.segments.add(n)},Yl.prototype.lineTo=function(t,e,i){void 0===i&&(i=!1);var n=new ti(ri);n.endX=t,n.endY=e,i&&n.close(),this.jc.segments.add(n)},Yl.prototype.arcTo=function(t,e,i,n,r,o,s){void 0===o&&(o=0),void 0===s&&(s=!1);var a=new ti(ai);a.startAngle=t,a.sweepAngle=e,a.centerX=i,a.centerY=n,a.radiusX=r,a.radiusY=0!==o?o:r,s&&a.close(),this.jc.segments.add(a)};var Wl=null;function Zl(t,e){var i=t.toLowerCase(),n=Xe.Qe;n[t]=e,n[i]=t}function Jl(t,e){void 0===t||t instanceof Za||\"string\"==typeof t?fh.call(this,t):(fh.call(this),t&&(e=t)),this.F=2408959,this.Tg=this.Nf=\"\",this.Yo=this.Uo=this.hp=this.eo=null,this.jp=\"\",this.Lf=this.On=this.ip=this.jh=null,this.Wo=\"\",this.Vo=Lt,this.Xb=this.Zo=\"\",this.fi=this.Zm=this.Rh=null,this.Wf=new gt(NaN,NaN).freeze(),this.lo=\"\",this.cf=null,this.mo=ee,this.$o=Pe,this.uo=rt,this.no=ot,this.pn=null,this.fo=127,this.op=st,this.np=\"gray\",this.gg=4,this.Sw=-1,this.Kp=NaN,this.Oy=new Bt,this.li=null,this.Xf=NaN,e&&Object.assign(this,e)}function $l(t){0!=(16384&t.F)!=0&&(t.updateAdornments(),t.F&=-16385)}function Ql(t){if(!1===lu(t)){uu(t,!0),t.bl();var e=t.diagram;null!==e&&(e.te.add(t),e.Fb())}}function tu(t){if(t.F|=2097152,!1!==lu(t)){var e=t.position,i=t.location;i.u()&&e.u()||ru(t,e,i),i=t.xb;var n=Bt.alloc().assign(i);i.ea(),i.x=e.x,i.y=e.y,i.freeze(),t.hm(n,i),Bt.free(n),uu(t,!1)}}function eu(t,e,i,n){void 0===n&&(n=new gt),i=i.zc()?oe:i;var r=e.naturalBounds;if(n.h(r.width*i.x+i.offsetX,r.height*i.y+i.offsetY),null===e||e===t)return n;for(e.transform.Aa(n),e=e.panel;null!==e&&e!==t;)e.transform.Aa(n),e=e.panel;return null!==t.Bb&&t.Bb.Aa(n),n.offset(-t.lc.x,-t.lc.y),n}function iu(t,e){var i=t.Oy;isNaN(t.Xf)&&(t.Xf=Mh(t));var n=t.Xf,r=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+r,e.height+2+r),i;n=e.x,r=e.y;var o=e.width;e=e.height;var s=t.shadowBlur;return o+=s,e+=s,n-=s/2,r-=s/2,0<(t=t.shadowOffset).x?o+=t.x:(n+=t.x,o-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),i.h(n-1,r-1,o+2,e+2),i}function nu(t,e,i,n,r){null===e||t instanceof bu||(e=e.animationManager).tb&&Wn(e,t,new gt(n,r),i)}function ru(t,e,i){var n=gt.alloc(),r=t.locationObject,o=r.naturalBounds,s=r instanceof Hh?r.strokeWidth:0;if(n.Ui(0,0,o.width+s,o.height+s,t.locationSpot),r!==t)for(n.offset(-s/2,-s/2),r.transform.Aa(n),r=r.panel;null!==r&&r!==t;)r.transform.Aa(n),r=r.panel;null!==t.Bb&&t.Bb.Aa(n),n.offset(-t.lc.x,-t.lc.y),r=t.diagram,o=i.u(),s=e.u(),o&&s?0!=(2097152&t.F)?ou(t,e,i,r,n):su(t,e,i,r,n):o?ou(t,e,i,r,n):s&&su(t,e,i,r,n),t.F|=2097152,gt.free(n),t.bl()}function ou(t,e,i,n,r){var o=e.x,s=e.y;e.h(i.x-r.x,i.y-r.y),null!==n&&((n=(i=n.animationManager).defaultAnimation.isAnimating)||!i.tb||t instanceof bu||Wn(i,t,new gt(o,s),e),n||e.x===o&&e.y===s||t.g(\"position\",new gt(o,s),e.copy()))}function su(t,e,i,n,r){var o=i.copy();i.h(e.x+r.x,e.y+r.y),i.A(o)||null===n||t.g(\"location\",o,i.copy())}function au(t,e,i){cu(t,!1),t instanceof wu&&Do(i,t),t.layer.isTemporary||e||i.Qa(),e=t.xb;var n=i.viewportBounds;n.u()?fu(t)?(Yt(e,n)||t.Md(!1),t.updateAdornments()):e.Lc(n)?(t.Md(!0),t.updateAdornments()):t.Lb():i.lj=!0}function hu(t,e,i,n){e.constructor===t.constructor||xu||(xu=!0,S('Should not change the class of the Part when changing category from \"'+i+'\" to \"'+n+'\"'),S(\"  Old class: \"+O(t.constructor)+\", new class: \"+O(e.constructor)+\", part: \"+t.toString())),t.Oj();var r=t.data;i=t.layerName;var o=t.isSelected,s=t.isHighlighted,a=!0,h=!0,l=!1;t instanceof wu&&(a=t.isTreeLeaf,h=t.isTreeExpanded,l=t.wasTreeExpanded),e.wf(t),e.cloneProtected(t),t.Nf=n,t.s(),t.N(),n=!0,null!==(e=t.diagram)&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.jb=r,t.F=o?4096|t.F:-4097&t.F,t.F=s?524288|t.F:-524289&t.F,t instanceof wu&&(t.R=a?4|t.R:-5&t.R,t.R=h?1|t.R:-2&t.R,t.R=l?2|t.R:-3&t.R),null!==r&&t.Fa(),(r=t.layerName)!==i&&(t.Tg=i,t.layerName=r),null!==e&&(e.skipsUndoManager=n),t.Mc()&&t.B(64)}function lu(t){return 0!=(32768&t.F)}function uu(t,e){t.F=e?32768|t.F:-32769&t.F}function cu(t,e){t.F=e?65536|t.F:-65537&t.F}function fu(t){return 0!=(131072&t.F)}function du(t,e){t.F=e?1048576|t.F:-1048577&t.F}function pu(t,e){var i=e.containingGroup;return null!==i?1+pu(t,i):e instanceof wu&&null!==(e=e.labeledLink)?pu(t,e):0}function gu(t,e){var i=e.containingGroup;return null!==i||e instanceof wu&&null!==(i=e.labeledLink)?gu(t,i):e}function yu(t,e,i){if(e===i||null===i)return!1;var n=e.containingGroup;return!(null===n||n!==i&&!yu(t,n,i))||e instanceof wu&&null!==(e=e.labeledLink)&&yu(t,e,i)}function mu(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function vu(t,e,i,n,r,o){if(void 0===o&&(o=null),!(t.contains(e)||null!==o&&!o(e)||e instanceof bu))if(t.add(e),e instanceof wu){if(i&&e instanceof _u)for(var s=e.memberParts;s.next();)vu(t,s.value,i,n,r,o);if(!1!==r)for(s=e.linksConnected;s.next();){var a=s.value;if(!t.contains(a)){var h=a.fromNode,l=a.toNode;h=null===h||t.contains(h),l=null===l||t.contains(l),(r?h&&l:h||l)&&vu(t,a,i,n,r,o)}}if(1<n)for(e=e.Ru();e.next();)vu(t,e.value,i,n-1,r,o)}else if(e instanceof qu)for(e=e.labelNodes;e.next();)vu(t,e.value,i,n,r,o)}Yl.className=\"StreamGeometryContext\",Zl(\"Rectangle\",(function(t,e,i){t=\"r\"+e+\",\"+i;var n=Xe.Jf[t];return void 0!==n||((n=new Ue(Ue.D)).endX=e,n.endY=i,Xe.Kf<Xe.Hm&&(Xe.Jf[t]=n,Xe.Kf++)),n})),Zl(\"Square\",(function(t,e,i){t=\"s\"+e+\",\"+i;var n=Xe.Jf[t];return void 0!==n||((n=new Ue(Ue.D)).endX=e,n.endY=i,n.defaultStretch=ds,Xe.Kf<Xe.Hm&&(Xe.Jf[t]=n,Xe.Kf++)),n})),Zl(\"RoundedRectangle\",(function(t,e,i){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3);var n=\"rr\"+e+\",\"+i+\",\"+(t=Math.min(t,i/3)),r=Xe.Jf[n];if(void 0!==r)return r;var o=t*Xe.vg;return r=(new Ue).add(new Qe(t,0,!0).add(new ti(ri,e-t,0)).add(new ti(oi,e,t,e-o,0,e,o)).add(new ti(ri,e,i-t)).add(new ti(oi,e-t,i,e,i-o,e-o,i)).add(new ti(ri,t,i)).add(new ti(oi,0,i-t,o,i,0,i-o)).add(new ti(ri,0,t)).add(new ti(oi,t,0,0,o,o,0).close())),1<o&&(r.spot1=new ze(0,0,o,o),r.spot2=new ze(1,1,-o,-o)),Xe.Kf<Xe.Hm&&(Xe.Jf[n]=r,Xe.Kf++),r})),Zl(\"Border\",\"RoundedRectangle\"),Zl(\"Ellipse\",(function(t,e,i){t=\"e\"+e+\",\"+i;var n=Xe.Jf[t];return void 0!==n||((n=new Ue(Ue.L)).endX=e,n.endY=i,n.spot1=Fe,n.spot2=Be,Xe.Kf<Xe.Hm&&(Xe.Jf[t]=n,Xe.Kf++)),n})),Zl(\"Circle\",(function(t,e,i){t=\"c\"+e+\",\"+i;var n=Xe.Jf[t];return void 0!==n||((n=new Ue(Ue.L)).endX=e,n.endY=i,n.spot1=Fe,n.spot2=Be,n.defaultStretch=ds,Xe.Kf<Xe.Hm&&(Xe.Jf[t]=n,Xe.Kf++)),n})),Zl(\"TriangleRight\",(function(t,e,i){return(new Ue).add(new Qe(0,0).add(new ti(ri,e,.5*i)).add(new ti(ri,0,i).close())).Am(0,.25,.5,.75)})),Zl(\"TriangleDown\",(function(t,e,i){return(new Ue).add(new Qe(0,0).add(new ti(ri,e,0)).add(new ti(ri,.5*e,i).close())).Am(.25,0,.75,.5)})),Zl(\"TriangleLeft\",(function(t,e,i){return(new Ue).add(new Qe(e,i).add(new ti(ri,0,.5*i)).add(new ti(ri,e,0).close())).Am(.5,.25,1,.75)})),Zl(\"TriangleUp\",(function(t,e,i){return(new Ue).add(new Qe(e,i).add(new ti(ri,0,i)).add(new ti(ri,.5*e,0).close())).Am(.25,.5,.75,1)})),Zl(\"Triangle\",\"TriangleUp\"),Zl(\"Diamond\",(function(t,e,i){return(new Ue).add(new Qe(.5*e,0).add(new ti(ri,0,.5*i)).add(new ti(ri,.5*e,i)).add(new ti(ri,e,.5*i).close())).Am(.25,.25,.75,.75)})),Zl(\"LineH\",(function(t,e,i){return(t=new Ue(Ue.j)).startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t})),Zl(\"LineV\",(function(t,e,i){return(t=new Ue(Ue.j)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t})),Zl(\"None\",\"Rectangle\"),Zl(\"BarH\",\"Rectangle\"),Zl(\"BarV\",\"Rectangle\"),Zl(\"MinusLine\",\"LineH\"),Zl(\"PlusLine\",(function(t,e,i){return(new Ue).add(new Qe(0,i/2,!1).add(new ti(ri,e,i/2)).add(new ti(ni,e/2,0)).add(new ti(ri,e/2,i)))})),Zl(\"XLine\",(function(t,e,i){return(new Ue).add(new Qe(0,i,!1).add(new ti(ri,e,0)).add(new ti(ni,0,0)).add(new ti(ri,e,i)))})),Xe.Gm={\"\":\"\",Standard:\"F1 m 0,0 l 8,4 -8,4 2,-4 z\",Backward:\"F1 m 8,0 l -2,4 2,4 -8,-4 z\",Triangle:\"F1 m 0,0 l 8,4.62 -8,4.62 z\",BackwardTriangle:\"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z\",Boomerang:\"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z\",BackwardBoomerang:\"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z\",SidewaysV:\"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z\",BackwardV:\"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\",OpenTriangle:\"m 0,0 l 8,4 -8,4\",BackwardOpenTriangle:\"m 8,0 l -8,4 8,4\",OpenTriangleLine:\"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8\",BackwardOpenTriangleLine:\"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8\",OpenTriangleTop:\"m 0,0 l 8,4 m 0,4\",BackwardOpenTriangleTop:\"m 8,0 l -8,4 m 0,4\",OpenTriangleBottom:\"m 0,8 l 8,-4\",BackwardOpenTriangleBottom:\"m 0,4 l 8,4\",HalfTriangleTop:\"F1 m 0,0 l 0,4 8,0 z m 0,8\",BackwardHalfTriangleTop:\"F1 m 8,0 l 0,4 -8,0 z m 0,8\",HalfTriangleBottom:\"F1 m 0,4 l 0,4 8,-4 z\",BackwardHalfTriangleBottom:\"F1 m 8,4 l 0,4 -8,-4 z\",ForwardSemiCircle:\"m 4,0 b 270 180 0 4 4\",BackwardSemiCircle:\"m 4,8 b 90 180 0 -4 4\",Feather:\"m 0,0 l 3,4 -3,4\",BackwardFeather:\"m 3,0 l -3,4 3,4\",DoubleFeathers:\"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4\",BackwardDoubleFeathers:\"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4\",TripleFeathers:\"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4\",BackwardTripleFeathers:\"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4\",ForwardSlash:\"m 0,8 l 5,-8\",BackSlash:\"m 0,0 l 5,8\",DoubleForwardSlash:\"m 0,8 l 4,-8 m -2,8 l 4,-8\",DoubleBackSlash:\"m 0,0 l 4,8 m -2,-8 l 4,8\",TripleForwardSlash:\"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8\",TripleBackSlash:\"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8\",Fork:\"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4\",BackwardFork:\"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4\",LineFork:\"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4\",BackwardLineFork:\"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8\",CircleFork:\"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4\",BackwardCircleFork:\"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3\",CircleLineFork:\"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4\",BackwardCircleLineFork:\"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3\",Circle:\"F1 m 8,4 b 0 360 -4 0 4 z\",Block:\"F1 m 0,0 l 0,8 8,0 0,-8 z\",StretchedDiamond:\"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z\",Diamond:\"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z\",Chevron:\"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z\",StretchedChevron:\"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z\",NormalArrow:\"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z\",X:\"m 0,0 l 8,8 m 0,-8 l -8,8\",TailedNormalArrow:\"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z\",DoubleTriangle:\"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z\",BigEndArrow:\"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z\",ConcaveTailArrow:\"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z\",RoundedTriangle:\"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z\",SimpleArrow:\"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z\",AccelerationArrow:\"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z\",BoxArrow:\"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z\",TriangleLine:\"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8\",CircleEndedArrow:\"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z\",DynamicWidthArrow:\"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z\",EquilibriumArrow:\"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3\",FastForward:\"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z\",Kite:\"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z\",HalfArrowTop:\"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8\",HalfArrowBottom:\"F1 m 0,8 l 4,-4 4,0 -8,4 z\",OpposingDirectionDoubleArrow:\"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z\",PartialDoubleTriangle:\"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z\",LineCircle:\"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z\",DoubleLineCircle:\"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z\",TripleLineCircle:\"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z\",CircleLine:\"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8\",DiamondCircle:\"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z\",PlusCircle:\"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8\",OpenRightTriangleTop:\"m 8,0 l 0,4 -8,0 m 0,4\",OpenRightTriangleBottom:\"m 8,8 l 0,-4 -8,0\",Line:\"m 0,0 l 0,8\",DoubleLine:\"m 0,0 l 0,8 m 2,0 l 0,-8\",TripleLine:\"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8\",PentagonArrow:\"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z\"},c(Jl,fh),Jl.prototype.cloneProtected=function(t){fh.prototype.cloneProtected.call(this,t),t.F=-4097&this.F|49152,t.Nf=this.Nf,t.Tg=this.Tg,t.eo=this.eo,t.hp=this.hp,t.Uo=this.Uo,t.Yo=this.Yo,t.jp=this.jp,t.ip=this.ip,t.On=this.On,t.Lf=null,t.Wo=this.Wo,t.Vo=this.Vo.I(),t.Zo=this.Zo,t.$o=this.$o.I(),t.Xb=this.Xb,t.Zm=this.Zm,t.Wf.assign(this.Wf),t.lo=this.lo,t.mo=this.mo.I(),t.uo=this.uo.I(),t.no=this.no.I(),t.pn=this.pn,t.fo=this.fo,t.op=this.op.I(),t.np=this.np,t.gg=this.gg,t.Kp=this.Kp},Jl.prototype.wf=function(t){fh.prototype.wf.call(this,t),t.Gh(),t.jh=null,t.cf=null,t.li=null},Jl.prototype.toString=function(){var t=O(this.constructor)+\"#\"+it(this);return null!==this.data&&(t+=\"(\"+D(this.data)+\")\"),t},Jl.prototype.nk=function(t,e,i,n,r,o,s){var a=this.diagram;null!==a&&(t===pi&&\"elements\"===e?r instanceof fh?vh(r,(function(t){Vf(a.partManager,t),vo(a,t)})):xo(a,r):t===gi&&\"elements\"===e&&(r instanceof fh?vh(r,(function(t){Yf(a.partManager,t,a)})):bo(a,r)),a.Wa(t,e,i,n,r,o,s))},Jl.prototype.Fa=function(t){if(fh.prototype.Fa.call(this,t),null!==this.data){for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];r instanceof fh&&vh(r,(function(t){null!==t.data&&t.Fa()}))}for(e=this.adornments;e.next();)e.value.Fa(t)}},Jl.prototype.updateRelationshipsFromData=function(){var t;null!==this.data&&(null===(t=this.diagram)||void 0===t||t.partManager.updateRelationshipsFromData(this))},Jl.prototype.Wj=function(t){var e=this.Lf;return null===e?null:e.H(t)},Jl.prototype.xh=function(t,e){if(null!==e){var i=null,n=this.Lf;if(null!==n&&(i=n.H(t)),i!==e){if(null!==i){var r=i.diagram;null!==r&&r.remove(i)}null===n&&(this.Lf=n=new pt),e.Nf!==t&&(e.category=t),n.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.Ch())&&(e.data=t.data))}}},Jl.prototype.Gf=function(t){var e=this.Lf;if(null!==e){var i=e.H(t);if(null!==i){var n=i.diagram;null!==n&&n.remove(i)}e.remove(t),0===e.count&&(this.Lf=null)}},Jl.prototype.Oj=function(){var t=this.Lf;if(null!==t){var e=A();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Gf(e[i]);j(e)}},Jl.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var i=e.value;i.s(),i.placeholder&&i.placeholder.s()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.u()&&this.isVisible()&&e.Ff()&&e.actualBounds.u()){if(null===(i=this.Wj(\"Selection\"))){if(null===(i=this.selectionAdornmentTemplate)&&(i=this.Hh()?t.linkSelectionAdornmentTemplate:this instanceof _u?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof bu))break t;jh(i),null!==(i=i.copy())&&(this.Hh()&&this.selectionObject===this.path&&(i.type=fh.Link),i.adornedObject=e)}if(null!==i){i.type===fh.Link&&i.s(),this.xh(\"Selection\",i);break t}}this.Gf(\"Selection\")}for(function(t,e){e.toolManager.mouseDownTools.each((function(e){e.isEnabled&&e.updateAdornments(t)})),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Fa()}},Jl.prototype.Lb=function(){var t=this.diagram;null!==t&&(eo(t),0!=(16384&this.F)!=1&&(this.F|=16384,t.Fb()))},Jl.prototype.xe=function(t,e,i,n){var r=this.lc;r.h(t,e,i,n),null===this.Bb&&(this.Bb=new Ye);var o=this.Bb;o.reset(),this.mp(o,t,e,i,n),this.Bb=o,o.Bs()||o.wq(r)},Jl.prototype.mp=function(t,e,i,n,r){if(1!==this.sa&&t.scale(this.sa),0!==this.zb){var o=oe;this.locationSpot.hb()&&(o=this.locationSpot);var s=gt.alloc();if(this.locationObject!==this)for(i=(e=this.locationObject).naturalBounds,s.Ui(i.x,i.y,i.width,i.height,o),null!==e.Bb&&e.Bb.Aa(s),s.offset(-e.measuredBounds.x,-e.measuredBounds.y),o=e.panel;null!==o&&o!==this;)null!==o.Bb&&o.Bb.Aa(s),s.offset(-o.measuredBounds.x,-o.measuredBounds.y),o=o.panel;else s.Ui(e,i,n,r,o);t.rotate(this.zb,s.x,s.y),gt.free(s)}},Jl.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},Jl.prototype.moveTo=function(t,e,i){t=gt.allocAt(t,e),this.move(t,i),gt.free(t)},Jl.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.Ls(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},Jl.prototype.Ob=function(t){var e=this.diagram;t?(this.B(4),this.Lb(),null!==e&&e.te.add(this)):(this.B(8),this.Oj()),this.Gh(),null!==e&&(e.Qa(),e.N())},Jl.prototype.Ya=function(t){if(this.name===t)return this;var e=this.li;if(null===e&&(this.li=e=new pt),null!==e.H(t))return e.H(t);var i=fh.prototype.Ya.call(this,t);return null!==i?(e.set(t,i),i):(e.set(t,null),null)},Jl.prototype.Li=function(t){return void 0===t&&(t=new Bt),t.assign(this.actualBounds)},Jl.prototype.Ta=function(){!0===Zs(this)&&this.measure(1/0,1/0),this.arrange()},Jl.prototype.arrange=function(){if(!1===$s(this))tu(this);else{Qs(this,!1);var t=this.xb,e=Bt.alloc();e.assign(t);var i=fu(this);this.zh(0,0,this.lc.width,this.lc.height);var n=this.position;ru(this,n,this.location),t.ea(),t.x=n.x,t.y=n.y,t.freeze(),this.hm(e,t),e.A(t)?this.Md(i):!this.Mc()||Xe.w(e.width,t.width)&&Xe.w(e.height,t.height)||0<=this.Sw&&this.B(16),Bt.free(e),uu(this,!1)}},(e=Jl.prototype).hm=function(t,e){var i=this.diagram;if(null!==i){var n=!1;if(!1===i.jj&&t.u()){var r=Bt.alloc();r.assign(i.documentBounds),r.Nv(i.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(n=!0),Bt.free(r)}0!=(65536&this.F)!=1&&t.A(e)||au(this,n,i),i.N(),!t.u()&&!e.u()||Et(t,e)||(this instanceof wu&&!i.undoManager.isUndoingRedoing&&this.rd(),this.Gh())}},e.Jv=function(t,e,i){if(this.Hh()||!t.u())return!1;var n=this.diagram;null!==n&&nu(this,n,t,e,i),this.ja=t,this.F&=-2097153;var r=this.Wf;return!r.u()||null!==n&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=r.copy(),r.h(r.x+(t.x-e),r.y+(t.y-i)),this.g(\"location\",n,r.copy())),!1===lu(this)&&!1===$s(this)&&(Ql(this),tu(this)),!0},e.wm=function(t,e,i){var n=this.Wf,r=this.ja;if(i){if(n.x===t&&n.y===e)return;lu(this)||$s(this)?r.h(NaN,NaN):r.h(r.x+t-n.x,r.y+e-n.y),n.h(t,e)}else{if(r.x===t&&r.y===e)return;lu(this)||$s(this)?this.Us():n.h(n.x+t-r.x,n.y+e-r.y),r.h(t,e)}Ql(this)},e.Us=function(){this.F&=-2097153,Ql(this)},e.Ri=function(){return!0},e.Mc=function(){return!0},e.Hh=function(){return!1},e.Qi=function(){return!0},Jl.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},Jl.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},Jl.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},Jl.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},Jl.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},Jl.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},Jl.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},Jl.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},Jl.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(e=Jl.prototype).Md=function(t){this.F=t?131072|this.F:-131073&this.F},e.Gh=function(){var t=this.containingGroup;null!==t&&(t.s(),null!==t.placeholder&&t.placeholder.s(),t.rd())},e.N=function(){var t=this.diagram;null!==t&&!$s(this)&&!lu(this)&&this.isVisible()&&this.xb.u()&&t.N(iu(this,this.xb))},e.s=function(){fh.prototype.s.call(this);var t=this.diagram;null!==t&&(t.te.add(this),this instanceof wu&&null!==this.labeledLink&&Vs(this.labeledLink),t.Fb(!0))},e.bq=function(t){t||null!==(t=this.Rh)&&Vu(t,this)},e.cq=function(t){t||null!==(t=this.Rh)&&Yu(t,this)},e.Uj=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.mm(t)}},e.Nz=function(){return pu(this,this)},e.Rz=function(){return gu(this,this)},e.Jd=function(t){return t instanceof _u&&yu(this,this,t)},e.Lx=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof _u&&du(e,!0),e instanceof wu){var i=e.labeledLink;null!==i&&(e=i)}e=e.containingGroup}for(i=null,e=t;null!==e;){if(0!=(1048576&e.F)){i=e;break}e instanceof wu&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof _u&&du(e,!1),e instanceof wu&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return i},Jl.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof wu&&this.isLinkLabel)},Jl.prototype.B=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof wu&&this.isLinkLabel)&&(null===(e=this.diagram)||!e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.Rh)){var i=e.layout;null!==i?i.B():e.B(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.B()},f.Object.defineProperties(Jl.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.pa(this.data)}},adornments:{get:function(){return null===this.Lf?U:this.Lf.iteratorValues}},layer:{get:function(){return this.fi}},diagram:{get:function(){var t=this.fi;return null==t?null:t.diagram}},layerName:{get:function(){return this.Tg},set:function(t){var e=this.Tg;if(e!==t){var i=this.diagram;if((null===i||null!==i.Xj(t)&&!i.partManager.addsToTemporaryLayer)&&(this.Tg=t,null!==i&&i.Qa(),this.g(\"layerName\",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(i=e.diagram)&&null!==(t=i.Xj(t))&&t!==e)){var n=e.ec(-1,this,!0);if(0<=n&&i.Wa(gi,\"parts\",e,this,null,n,!0),n=t.Ni(99999999,this,!0),e.visible!==t.visible&&this.Ob(t.visible),0<=n&&i.Wa(pi,\"parts\",t,null,this,!0,n),null!==(n=this.layerChanged)){var r=i.Z;i.Z=!0,n(this,e,t),i.Z=r}}}}},layerChanged:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.g(\"layerChanged\",e,t))}},zOrder:{get:function(){return this.Kp},set:function(t){var e=this.Kp;if(e!==t){this.Kp=t;var i=this.layer;null!==i&&Sr(i,-1,this),this.g(\"zOrder\",e,t),null!==(t=this.diagram)&&t.N()}}},locationObject:{get:function(){if(null===this.cf){var t=this.locationObjectName;\"\"!==t?(t=this.Ya(t),this.cf=null!==t?t:this):this instanceof bu&&this.type!==fh.Link&&null!==this.placeholder?this.cf=this.placeholder:this.cf=this}return this.cf.visible?this.cf:this}},minLocation:{get:function(){return this.uo},set:function(t){var e=this.uo;e.A(t)||(this.uo=t=t.I(),this.g(\"minLocation\",e,t))}},maxLocation:{get:function(){return this.no},set:function(t){var e=this.no;e.A(t)||(this.no=t=t.I(),this.g(\"maxLocation\",e,t))}},locationObjectName:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(this.lo=t,this.cf=null,this.s(),this.g(\"locationObjectName\",e,t))}},locationSpot:{get:function(){return this.mo},set:function(t){var e=this.mo;e.A(t)||(this.mo=t=t.I(),this.s(),this.g(\"locationSpot\",e,t))}},location:{get:function(){return this.Wf},set:function(t){var e=t.x,i=t.y,n=this.Wf;if(!(n.x===e||isNaN(n.x)&&isNaN(e))||!(n.y===i||isNaN(n.y)&&isNaN(i))){if(e=t=t.copy(),this.Hh())e=!1;else{if(this.Wf=e,this.F|=2097152,!1===$s(this)&&(Ql(this),(i=this.ja).u())){var r=this.diagram;if(null===r||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){var o=i.copy();i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),nu(this,r,i,o.x,o.y),this.g(\"position\",o,i.copy())}}e=!0}e&&this.g(\"location\",n,t.copy())}}},category:{get:function(){return this.Nf},set:function(t){var e=this.Nf;if(e!==t){var i=this.diagram,n=this.data,r=null;if(null!==i&&null!==n&&!(this instanceof bu)){var o=i.model.undoManager;o.isEnabled&&!o.isUndoingRedoing&&(r=this.clone()).T.addAll(this.T)}this.Nf=t,this.g(\"category\",e,t),null===i||null===n||this instanceof bu?this instanceof bu&&null!==(r=this.adornedPart)&&(null!==(t=r.Lf)&&t.remove(e),r.xh(this.category,this)):(o=i.model).undoManager.isUndoingRedoing||(this.Hh()?(i.partManager.setLinkCategoryForData(n,t),null!==(i=i.partManager.findLinkTemplateForCategory(t))&&(jh(i),null!==(i=i.copy())&&hu(this,i,e,t))):(null!==o&&o.tm(n,t),null!==(i=Rf(i.partManager,n,t))&&(jh(i),null===(i=i.copy())||i instanceof qu||(n=this.location.copy(),hu(this,i,e,t),this.location.u()||(this.location=n)))),null!==r&&((e=this.clone()).T.addAll(this.T),this.g(\"self\",r,e)))}}},self:{get:function(){return this},set:function(t){hu(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.F)},set:function(t){var e=0!=(1&this.F);e!==t&&(this.F^=1,this.g(\"copyable\",e,t))}},deletable:{get:function(){return 0!=(2&this.F)},set:function(t){var e=0!=(2&this.F);e!==t&&(this.F^=2,this.g(\"deletable\",e,t))}},textEditable:{get:function(){return 0!=(4&this.F)},set:function(t){var e=0!=(4&this.F);e!==t&&(this.F^=4,this.g(\"textEditable\",e,t),this.Lb())}},groupable:{get:function(){return 0!=(8&this.F)},set:function(t){var e=0!=(8&this.F);e!==t&&(this.F^=8,this.g(\"groupable\",e,t))}},movable:{get:function(){return 0!=(16&this.F)},set:function(t){var e=0!=(16&this.F);e!==t&&(this.F^=16,this.g(\"movable\",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.F)},set:function(t){var e=0!=(32&this.F);e!==t&&(this.F^=32,this.g(\"selectionAdorned\",e,t),this.Lb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.F)},set:function(t){var e=0!=(64&this.F);if(e!==t){this.F^=64;var i=this.diagram;null!==i&&i.Qa(),this.g(\"isInDocumentBounds\",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.F)},set:function(t){var e=0!=(128&this.F);e!==t&&(this.F^=128,this.g(\"isLayoutPositioned\",e,t),this.B(t?4:8))}},selectable:{get:function(){return 0!=(256&this.F)},set:function(t){var e=0!=(256&this.F);e!==t&&(this.F^=256,this.g(\"selectable\",e,t),this.Lb())}},reshapable:{get:function(){return 0!=(512&this.F)},set:function(t){var e=0!=(512&this.F);e!==t&&(this.F^=512,this.g(\"reshapable\",e,t),this.Lb())}},resizable:{get:function(){return 0!=(1024&this.F)},set:function(t){var e=0!=(1024&this.F);e!==t&&(this.F^=1024,this.g(\"resizable\",e,t),this.Lb())}},rotatable:{get:function(){return 0!=(2048&this.F)},set:function(t){var e=0!=(2048&this.F);e!==t&&(this.F^=2048,this.g(\"rotatable\",e,t),this.Lb())}},isSelected:{get:function(){return 0!=(4096&this.F)},set:function(t){var e=0!=(4096&this.F);if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(null!==i&&i.selection.count>=i.maxSelectionCount)){this.F^=4096;var n=!1;if(null!==i){n=i.skipsUndoManager,i.skipsUndoManager=!0;var r=i.selection;r.ea(),t?r.add(this):r.remove(this),r.freeze()}this.g(\"isSelected\",e,t),this.Lb(),null!==(t=this.selectionChanged)&&t(this),null!==i&&(i.Fb(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return 0!=(524288&this.F)},set:function(t){var e=0!=(524288&this.F);if(e!==t){this.F^=524288;var i=this.diagram;null!==i&&((i=i.highlighteds).ea(),t?i.add(this):i.remove(this),i.freeze()),this.g(\"isHighlighted\",e,t),this.N(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.F)},set:function(t){var e=0!=(8192&this.F);e!==t&&(this.F^=8192,this.g(\"isShadowed\",e,t),this.N())}},isAnimated:{get:function(){return 0!=(262144&this.F)},set:function(t){var e=0!=(262144&this.F);e!==t&&(this.F^=262144,this.g(\"isAnimated\",e,t))}},highlightedChanged:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(this.On=t,this.g(\"highlightedChanged\",e,t))}},selectionObjectName:{get:function(){return this.jp},set:function(t){var e=this.jp;e!==t&&(this.jp=t,this.jh=null,this.g(\"selectionObjectName\",e,t))}},selectionAdornmentTemplate:{get:function(){return this.hp},set:function(t){var e=this.hp;e!==t&&(this.hp=t,this.g(\"selectionAdornmentTemplate\",e,t))}},selectionObject:{get:function(){if(null===this.jh){var t=this.selectionObjectName;null!==t&&\"\"!==t?(t=this.Ya(t),this.jh=null!==t?t:this):this instanceof qu?(t=this.path,this.jh=null!==t?t:this):this.jh=this}return this.jh}},selectionChanged:{get:function(){return this.ip},set:function(t){var e=this.ip;e!==t&&(this.ip=t,this.g(\"selectionChanged\",e,t))}},resizeAdornmentTemplate:{get:function(){return this.Uo},set:function(t){var e=this.Uo;e!==t&&(this.Uo=t,this.g(\"resizeAdornmentTemplate\",e,t))}},resizeObjectName:{get:function(){return this.Wo},set:function(t){var e=this.Wo;e!==t&&(this.Wo=t,this.g(\"resizeObjectName\",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return\"\"!==t&&null!==(t=this.Ya(t))?t:this}},resizeCellSize:{get:function(){return this.Vo},set:function(t){var e=this.Vo;e.A(t)||(this.Vo=t=t.I(),this.g(\"resizeCellSize\",e,t))}},rotateAdornmentTemplate:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g(\"rotateAdornmentTemplate\",e,t))}},rotateObjectName:{get:function(){return this.Zo},set:function(t){var e=this.Zo;e!==t&&(this.Zo=t,this.g(\"rotateObjectName\",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return\"\"!==t&&null!==(t=this.Ya(t))?t:this}},rotationSpot:{get:function(){return this.$o},set:function(t){var e=this.$o;e.A(t)||(this.$o=t=t.I(),this.g(\"rotationSpot\",e,t))}},text:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==t&&(this.Xb=t,this.g(\"text\",e,t))}},containingGroup:{get:function(){return this.Rh},set:function(t){if(this.Mc()){var e=this.Rh;if(e!==t){null===t||this!==t&&!t.Jd(this)||(this===t&&w(\"Cannot make a Group a member of itself: \"+this.toString()),w(\"Cannot make a Group indirectly contain itself: \"+this.toString()+\" already contains \"+t.toString())),this.B(2);var i=this.diagram;if(null!==e?Yu(e,this):this instanceof _u&&null!==i&&i.wi.remove(this),this.Rh=t,null!==t?Vu(t,this):this instanceof _u&&null!==i&&i.wi.add(this),this.B(1),null!==i&&i.Z){var n=this.data,r=i.model;if(null!==n&&r.ck()){var o=r.pa(null!==t?t.data:null);r.tq(n,o)}}if(null!==(n=this.containingGroupChanged)&&(r=!0,null!==i&&(r=i.Z,i.Z=!0),n(this,e,t),null!==i&&(i.Z=r)),this instanceof _u)for(vu(i=new Q,this,!0,0,!0),i=i.iterator;i.next();)if((n=i.value)instanceof wu)for(n=n.linksConnected;n.next();)Ku(n.value);if(this instanceof wu){for(i=this.linksConnected;i.next();)Ku(i.value);null!==(i=this.labeledLink)&&Ku(i)}this.g(\"containingGroup\",e,t),null!==t&&null!==(e=t.layer)&&Sr(e,-1,t)}}else w(\"cannot set the Part.containingGroup of a Link or Adornment\")}},containingGroupChanged:{get:function(){return this.Zm},set:function(t){var e=this.Zm;e!==t&&(this.Zm=t,this.g(\"containingGroupChanged\",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof wu&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.fo},set:function(t){var e=this.fo;e!==t&&(this.fo=t,this.g(\"layoutConditions\",e,t))}},dragComputation:{get:function(){return this.pn},set:function(t){var e=this.pn;e!==t&&(this.pn=t,this.g(\"dragComputation\",e,t))}},shadowOffset:{get:function(){return this.op},set:function(t){var e=this.op;e.A(t)||(this.op=t=t.I(),this.N(),this.g(\"shadowOffset\",e,t))}},shadowColor:{get:function(){return this.np},set:function(t){var e=this.np;e!==t&&(this.np=t,this.N(),this.g(\"shadowColor\",e,t))}},shadowBlur:{get:function(){return this.gg},set:function(t){var e=this.gg;e!==t&&(this.gg=t,this.N(),this.g(\"shadowBlur\",e,t))}}}),Jl.prototype.invalidateLayout=Jl.prototype.B,Jl.prototype.findCommonContainingGroup=Jl.prototype.Lx,Jl.prototype.isMemberOf=Jl.prototype.Jd,Jl.prototype.findTopLevelPart=Jl.prototype.Rz,Jl.prototype.findSubGraphLevel=Jl.prototype.Nz,Jl.prototype.ensureBounds=Jl.prototype.Ta,Jl.prototype.getDocumentBounds=Jl.prototype.Li,Jl.prototype.findObject=Jl.prototype.Ya,Jl.prototype.moveTo=Jl.prototype.moveTo,Jl.prototype.invalidateAdornments=Jl.prototype.Lb,Jl.prototype.clearAdornments=Jl.prototype.Oj,Jl.prototype.removeAdornment=Jl.prototype.Gf,Jl.prototype.addAdornment=Jl.prototype.xh,Jl.prototype.findAdornment=Jl.prototype.Wj,Jl.prototype.updateTargetBindings=Jl.prototype.Fa;var xu=!1;function bu(t,e){void 0===t||t instanceof Za||\"string\"==typeof t?Jl.call(this,t):(Jl.call(this),t&&(e=t)),this.F&=-257,this.Tg=\"Adornment\",this.le=null,this.Ww=0,this.qx=!1,this.j=this.Sa=null,e&&Object.assign(this,e)}function wu(t,e){void 0===t||t instanceof Za||\"string\"==typeof t?Jl.call(this,t):(Jl.call(this),t&&(e=t)),this.R=13,this.ab=new J,this.Dp=this.gl=this.ii=this.io=this.ho=null,this.Ak=Qt,this.nc=this.Te=null,this.Ro=Ru,this.vh=!1,e&&Object.assign(this,e)}function ku(t,e){null!==e&&(null===t.Te&&(t.Te=new Q),t.Te.add(e))}function Mu(t,e,i,n){if(null===e||null===t.Te)return null;for(var r=t.Te.iterator;r.next();){var o=r.value;if(o.Js===t&&o.nv===e&&o.my===i&&o.ny===n||o.Js===e&&o.nv===t&&o.my===n&&o.ny===i)return o}return null}function Su(t,e){for(t=t.linksConnected;t.next();){var i=t.value;i.fromPort!==e&&i.toPort!==e||(Pu(i.fromPort),Pu(i.toPort),i.Va())}}function Pu(t){if(null!==t){var e=t.Qo;null!==e&&e.cm(),null===(e=(t=t.part).containingGroup)||t.isVisible()||Pu(e.port)}}function Nu(t,e,i,n){if(null!==e&&!i.has(e)){i.add(e);var r=!0,o=t.diagram;null!==o&&(r=o.isTreePathToChildren),e.linksConnected.each((function(o){o.isTreeLink?(r?o.fromNode===e:o.toNode===e)&&Nu(t,r?o.toNode:o.fromNode,i,n):n.add(o)}))}}function Cu(t,e,i){Pu(i);var n=t.ab.contains(e);if(n||t.ab.add(e),!n||e.fromNode===e.toNode){var r=t.linkConnected;if(null!==r){var o=!0,s=t.diagram;null!==s&&(o=s.Z,s.Z=!0),r(t,e,i),null!==s&&(s.Z=o)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,null!==i&&null!==e&&i!==e&&(n=!0,null!==(t=t.diagram)&&(n=t.isTreePathToChildren),o=n?i:e,(r=n?e:i).vh||(r.vh=o),!o.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(n?i===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function Tu(t,e,i){Pu(i);var n=t.ab.remove(e),r=null;if(n||e.toNode===e.fromNode){var o=t.linkDisconnected;if(r=t.diagram,null!==o){var s=!0;null!==r&&(s=r.Z,r.Z=!0),o(t,e,i),null!==r&&(r.Z=s)}}n&&e.isTreeLink&&(i=!0,null!==r&&(i=r.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,null!==t&&(t.vh=!1),null===e||e.isTreeLeaf||(0===e.ab.count?(e.vh=null,null!==r&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Lu(e)))}function Lu(t){if(t.vh=!1,0!==t.ab.count){var e=!0,i=t.diagram;if(null===i||!i.undoManager.isUndoingRedoing){for(null!==i&&(e=i.isTreePathToChildren),i=t.ab.iterator;i.next();){var n=i.value;if(n.isTreeLink)if(e){if(n.fromNode===t)return void(t.isTreeLeaf=!1)}else if(n.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function Au(t){null===t.nc?t.nc=new pt:t.nc.clear(),t.Cm(t,(function(t,e){ju(t,e)})),0===t.nc.count&&t.nc.add(\"\",t)}function ju(t,e){var i=e.portId;null!==i&&null!==t.nc&&t.nc.add(i,e)}function Ou(t,e,i){var n=e.portId;if(null!==n&&(null!==t.nc&&t.nc.remove(n),null!==(e=t.diagram)&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,null===i&&(i=A()),i.push(n);if(null!==i){for(t=0;t<i.length;t++)e.remove(i[t]);j(i)}}}function Du(t,e){return null===(e=e.qg())?0:1+Du(t,e)}function Fu(t,e,i,n,r,o,s){if(1<n)for(var a=i?t.Vp():t.Gd();a.next();){var h=a.value;h.isTreeLink&&(null===(h=h.$p(t))||h===t||e.contains(h)||(e.add(h),Fu(h,e,i,n-1,r,o,s)))}else Bu(t,e,i,r,o,s)}function Bu(t,e,i,n,r,o){for(var s=r===t||t.isTreeExpanded,a=i?t.Vp():t.Gd();a.next();){var h=a.value;if(h.isTreeLink&&null!==(h=h.$p(t))&&h!==t){var l=e.contains(h);l||e.add(h),s&&(o&&n.Kj(h,r),h.Gh(),h.Ob(!1)),h.isTreeExpanded&&(h.wasTreeExpanded=h.isTreeExpanded,l||Bu(h,e,i,n,r,o))}}t.isTreeExpanded=!1}function Iu(t,e,i,n,r,o,s){for(var a=o!==t&&t.isTreeExpanded,h=i?t.Vp():t.Gd();h.next();){var l=h.value;l.isTreeLink&&(a||l.td||l.Va(),null!==(l=l.$p(t))&&l!==t&&!e.contains(l)&&(e.add(l),a||(l.Ob(!0),l.Gh(),s&&r.Mj(l,o)),2<n||l.wasTreeExpanded))&&(l.wasTreeExpanded=!1,Iu(l,e,i,n-1,r,o,s))}t.isTreeExpanded=!0}Jl.className=\"Part\",Jl.LayoutNone=0,Jl.LayoutAdded=1,Jl.LayoutRemoved=2,Jl.LayoutShown=4,Jl.LayoutHidden=8,Jl.LayoutNodeSized=16,Jl.LayoutGroupLayout=32,Jl.LayoutNodeReplaced=64,Jl.LayoutStandard=127,Jl.LayoutAll=16777215,c(bu,Jl),bu.prototype.toString=function(){var t=this.adornedPart;return\"Adornment(\"+this.category+\")\"+(null!==t?t.toString():\"\")},bu.prototype.updateRelationshipsFromData=function(){},bu.prototype.fk=function(t){var e=this.adornedObject,i=null==e?void 0:e.part;if(i instanceof qu&&e instanceof Hh){e=i.path,i.fk(t),t=e.geometry,e=(i=this.T.m).length;for(var n=0;n<e;n++){var r=i[n];r.isPanelMain&&r instanceof Hh&&(r.ma=t)}}},bu.prototype.Ri=function(){var t=this.le;return null===t||null===(t=t.part)||!$s(t)},bu.prototype.Mc=function(){return!1},bu.prototype.nk=function(t,e,i,n,r,o,s){if(t===pi&&\"elements\"===e){if(r instanceof Uu)null===this.Sa&&(this.Sa=r);else if(r instanceof fh){var a=r.Yl((function(t){return t instanceof Uu}));a instanceof Uu&&null===this.Sa&&(this.Sa=a)}}else t===gi&&\"elements\"===e&&null!==this.Sa&&(n===this.Sa||n instanceof fh&&this.Sa.rg(n))&&(this.Sa=null);Jl.prototype.nk.call(this,t,e,i,n,r,o,s)},bu.prototype.updateAdornments=function(){},bu.prototype.Uj=function(){},f.Object.defineProperties(bu.prototype,{placeholder:{get:function(){return this.Sa}},adornedObject:{get:function(){return this.le},set:function(t){var e=this.adornedPart,i=null;null!==t&&(i=t.part),null===e||null!==t&&e===i||e.Gf(this.category),this.le=t,null!==i&&i.xh(this.category,this)}},adornedPart:{get:function(){var t=this.le;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),bu.className=\"Adornment\",c(wu,Jl),wu.prototype.cloneProtected=function(t){Jl.prototype.cloneProtected.call(this,t),t.R=this.R,t.R=-17&this.R,t.ho=this.ho,t.io=this.io,t.ii=this.ii,t.Dp=this.Dp,t.Ak=this.Ak.I(),t.Ro=this.Ro},(e=wu.prototype).wf=function(t){Jl.prototype.wf.call(this,t),t.rd(),t.Te=this.Te,t.nc=null},e.jA=function(t,e,i){null==e&&(e=\"\"),null==i&&(i=\"\"),null!==(t=Mu(this,t,e,i))&&t.cm()},e.nk=function(t,e,i,n,r,o,s){(t===pi&&\"elements\"===e||t===gi&&\"elements\"===e)&&(this.nc=null),Jl.prototype.nk.call(this,t,e,i,n,r,o,s)},e.rd=function(t){for(var e=this.linksConnected;e.next();){var i=e.value;void 0!==t&&t.contains(i)||(Pu(i.fromPort),Pu(i.toPort),i.Va())}},e.Ri=function(){return!0},wu.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Lp(this.Ak),t},wu.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},wu.prototype.isVisible=function(){if(!Jl.prototype.isVisible.call(this))return!1;var t=!0,e=Qo,i=this.diagram;if(null!==i){if(i.animationManager.Ls(this))return!0;t=i.isTreePathToChildren,e=i.treeCollapsePolicy}if(e===Qo){if(null!==(t=this.qg())&&!t.isTreeExpanded)return!1}else if(e===ts){if(0<(t=t?this.Ou():this.Pu()).count&&t.all((function(t){return!t.isTreeExpanded})))return!1}else if(e===es&&0<(t=t?this.Ou():this.Pu()).count&&t.any((function(t){return!t.isTreeExpanded})))return!1;return null===(t=this.labeledLink)||t.isVisible()},wu.prototype.Ob=function(t){Jl.prototype.Ob.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&null!==this.containingGroup){var n=i.$p(this);null===n||n.Jd(this.containingGroup)||i.Va()}i.Ob(t)}},wu.prototype.Mx=function(){var t=new Q,e=new Q;return Nu(this,this,t,e),e.iterator},wu.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.ab.iterator;var e=new W(this.ab),i=this;return e.predicate=function(e){return e.fromNode===i&&e.fromPortId===t||e.toNode===i&&e.toPortId===t},e},(e=wu.prototype).Vp=function(t){void 0===t&&(t=null);var e=new W(this.ab),i=this;return e.predicate=function(e){return e.fromNode===i&&(null===t||e.fromPortId===t)},e},e.Gd=function(t){void 0===t&&(t=null);var e=new W(this.ab),i=this;return e.predicate=function(e){return e.toNode===i&&(null===t||e.toPortId===t)},e},e.Nu=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.ab.iterator;n.next();){var r=n.value;r.fromNode===this?null!==t&&r.fromPortId!==t||(r=r.toNode,null!==e?e.add(r):null!==i&&i!==r?((e=new Q).add(i),e.add(r)):i=r):r.toNode!==this||null!==t&&r.toPortId!==t||(r=r.fromNode,null!==e?e.add(r):null!==i&&i!==r?((e=new Q).add(i),e.add(r)):i=r)}return null!==e?e.iterator:null!==i?new H(i):U},e.Pu=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.ab.iterator;n.next();){var r=n.value;r.fromNode!==this||null!==t&&r.fromPortId!==t||(r=r.toNode,null!==e?e.add(r):null!==i&&i!==r?((e=new Q).add(i),e.add(r)):i=r)}return null!==e?e.iterator:null!==i?new H(i):U},e.Ou=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.ab.iterator;n.next();){var r=n.value;r.toNode!==this||null!==t&&r.toPortId!==t||(r=r.fromNode,null!==e?e.add(r):null!==i&&i!==r?((e=new Q).add(i),e.add(r)):i=r)}return null!==e?e.iterator:null!==i?new H(i):U},e.Iz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new W(this.ab),r=this;return n.predicate=function(n){return!(n.fromNode!==r||n.toNode!==t||null!==e&&n.fromPortId!==e||null!==i&&n.toPortId!==i)||!(n.fromNode!==t||n.toNode!==r||null!==i&&n.fromPortId!==i||null!==e&&n.toPortId!==e)},n},e.Jz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new W(this.ab),r=this;return n.predicate=function(n){return!(n.fromNode!==r||n.toNode!==t||null!==e&&n.fromPortId!==e||null!==i&&n.toPortId!==i)},n},wu.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(e=wu.prototype).bq=function(t){Jl.prototype.bq.call(this,t),t||(Lu(this),null!==(t=this.gl)&&Hu(t,this))},e.cq=function(t){Jl.prototype.cq.call(this,t),t||null!==(t=this.gl)&&null!==t.nd&&(t.nd.remove(this),t.s())},e.Uj=function(){if(0<this.ab.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,i=this.ab.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,Jl.prototype.Uj.call(this)},e.rs=function(t){if(null===this.nc){if(\"\"===t&&!1===this.Je)return this;Au(this)}var e=this.nc.H(t);return null!==e||\"\"!==t&&null!==(e=this.nc.H(\"\"))?e:this},e.lA=function(t){if(null===t||t===this)return!1;var e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.ab.iterator;n.next();){var r=n.value;if(r.isTreeLink&&(e=r.fromNode)!==i&&e!==this)break}if(e===this||null===e||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.ab.iterator;n.next()&&(!(r=n.value).isTreeLink||(e=r.toNode)===i||e===this););if(e===this||null===e||e===i)return!1;i=e}return!0},e.Vz=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.ab.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,i=e.ab.iterator;i.next()&&(!(n=i.value).isTreeLink||(t=n.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},e.Fz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)du(e,!0),e=e.qg();var i=null;for(e=t;null!==e;){if(0!=(1048576&e.F)){i=e;break}e=e.qg()}for(e=this;null!==e;)du(e,!1),e=e.qg();return i},e.Ii=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.ab.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},e.qg=function(){var t=this.vh;if(null===t)return null;if(t instanceof wu)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.ab.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.vh=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.vh=e;return this.vh=null},e.Tz=function(){var t=new Q;return function t(e,i){if(null!==e){i.add(e);var n=e.Ii();null!==n&&(i.add(n),t(e.qg(),i))}}(this,t),t},e.Sz=function(){return Du(this,this)},e.Xp=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new W(this.ab);var i=this;return e.predicate=t?function(t){return!(!t.isTreeLink||t.fromNode!==i)}:function(t){return!(!t.isTreeLink||t.toNode!==i)},e},e.Ru=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var i=e=null,n=this.ab.iterator;if(t)for(;n.next();)(t=n.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==i&&i!==t?((e=new J).add(i),e.add(t)):i=t);else for(;n.next();)(t=n.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==i&&i!==t?((e=new J).add(i),e.add(t)):i=t);return null!==e?e.iterator:null!==i?new H(i):U},e.Uz=function(t){void 0===t&&(t=1/0);var e=new Q;return vu(e,this,!1,t,!0),e},wu.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ke){e.Ke=!0;var i=new Q;i.add(this),Fu(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Qo),e.Ke=!1}},wu.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ke){e.Ke=!0;var i=new Q;i.add(this),Iu(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Qo),e.Ke=!1}},f.Object.defineProperties(wu.prototype,{portSpreading:{get:function(){return this.Ro},set:function(t){var e=this.Ro;e!==t&&(this.Ro=t,this.g(\"portSpreading\",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.rd())}},avoidable:{get:function(){return 0!=(8&this.R)},set:function(t){var e=0!=(8&this.R);if(e!==t){this.R^=8;var i=this.diagram;null!==i&&Do(i,this),this.g(\"avoidable\",e,t)}}},avoidableMargin:{get:function(){return this.Ak},set:function(t){\"number\"==typeof t&&(t=new Wt(t));var e=this.Ak;if(!e.A(t)){this.Ak=t=t.I();var i=this.diagram;null!==i&&Do(i,this),this.g(\"avoidableMargin\",e,t)}}},linksConnected:{get:function(){return this.ab.iterator}},linkConnected:{get:function(){return this.ho},set:function(t){var e=this.ho;e!==t&&(this.ho=t,this.g(\"linkConnected\",e,t))}},linkDisconnected:{get:function(){return this.io},set:function(t){var e=this.io;e!==t&&(this.io=t,this.g(\"linkDisconnected\",e,t))}},linkValidation:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g(\"linkValidation\",e,t))}},isLinkLabel:{get:function(){return null!==this.gl}},labeledLink:{get:function(){return this.gl},set:function(t){var e=this.gl;if(e!==t){var i=this.diagram,n=this.data;if(null!==e){if(null!==e.nd&&(e.nd.remove(this),e.s()),null!==i&&null!==n&&!i.undoManager.isUndoingRedoing){var r=e.data,o=i.model;if(null!==r&&o.Pi()){var s=o.pa(n);void 0!==s&&o.oy(r,s)}}this.containingGroup=null}this.gl=t,null!==t&&(Hu(t,this),null===i||null===n||i.undoManager.isUndoingRedoing||(r=t.data,i=i.model,null!==r&&i.Pi()&&void 0!==(n=i.pa(n))&&i.tu(r,n)),this.containingGroup=t.containingGroup),Vs(this),this.g(\"labeledLink\",e,t)}}},port:{get:function(){return this.rs(\"\")}},ports:{get:function(){return null===this.nc&&Au(this),this.nc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.R)},set:function(t){var e=0!=(1&this.R);if(e!==t){this.R^=1;var i=this.diagram;if(this.g(\"isTreeExpanded\",e,t),null!==(e=this.treeExpandedChanged)){var n=!0;null!==i&&(n=i.Z,i.Z=!0),e(this),null!==i&&(i.Z=n)}null!==i&&i.undoManager.isUndoingRedoing?this.Ob(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.R)},set:function(t){var e=0!=(2&this.R);e!==t&&(this.R^=2,this.g(\"wasTreeExpanded\",e,t))}},treeExpandedChanged:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e!==t&&(this.Dp=t,this.g(\"treeExpandedChanged\",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.R)},set:function(t){var e=0!=(4&this.R);e!==t&&(this.R^=4,this.g(\"isTreeLeaf\",e,t))}}}),wu.prototype.expandTree=wu.prototype.expandTree,wu.prototype.collapseTree=wu.prototype.collapseTree,wu.prototype.findTreeParts=wu.prototype.Uz,wu.prototype.findTreeChildrenNodes=wu.prototype.Ru,wu.prototype.findTreeChildrenLinks=wu.prototype.Xp,wu.prototype.findTreeLevel=wu.prototype.Sz,wu.prototype.findTreeParentChain=wu.prototype.Tz,wu.prototype.findTreeParentNode=wu.prototype.qg,wu.prototype.findTreeParentLink=wu.prototype.Ii,wu.prototype.findCommonTreeParent=wu.prototype.Fz,wu.prototype.findTreeRoot=wu.prototype.Vz,wu.prototype.isInTreeOf=wu.prototype.lA,wu.prototype.findPort=wu.prototype.rs,wu.prototype.findLinksTo=wu.prototype.Jz,wu.prototype.findLinksBetween=wu.prototype.Iz,wu.prototype.findNodesInto=wu.prototype.Ou,wu.prototype.findNodesOutOf=wu.prototype.Pu,wu.prototype.findNodesConnected=wu.prototype.Nu,wu.prototype.findLinksInto=wu.prototype.Gd,wu.prototype.findLinksOutOf=wu.prototype.Vp,wu.prototype.findExternalTreeLinksConnected=wu.prototype.Mx,wu.prototype.invalidateConnectedLinks=wu.prototype.rd,wu.prototype.invalidateLinkBundle=wu.prototype.jA;var zu=new V(wu,\"SpreadingNone\",10),Ru=new V(wu,\"SpreadingEvenly\",11),Eu=new V(wu,\"SpreadingPacked\",12);function _u(t,e){void 0===t||t instanceof Za||\"string\"==typeof t?wu.call(this,t):(wu.call(this),t&&(e=t)),this.R|=4608,this.so=new Q,this.pl=new Q,this.Sa=this.wp=this.ki=this.to=this.ro=this.$a=null,this.Dc=new rf,this.Dc.group=this,this.Zq=null,e&&Object.assign(this,e)}function Vu(t,e){if(t.so.add(e)){e instanceof _u&&t.pl.add(e);var i=t.memberAdded;if(null!==i){var n=!0,r=t.diagram;null!==r&&(n=r.Z,r.Z=!0),i(t,e),null!==r&&(r.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!1)}e instanceof qu&&!t.computesBoundsIncludingLinks||(null===(e=t.Sa)&&(e=t),e.s())}function Yu(t,e){if(t.so.remove(e)){e instanceof _u&&t.pl.remove(e);var i=t.memberRemoved;if(null!==i){var n=!0,r=t.diagram;null!==r&&(n=r.Z,r.Z=!0),i(t,e),null!==r&&(r.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!0)}e instanceof qu&&!t.computesBoundsIncludingLinks||(null===(e=t.Sa)&&(e=t),e.s())}function Gu(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Ob(!1),o instanceof _u&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,Gu(o,e,i,n)),o instanceof wu)o.rd(e),i.Kj(o,n);else if(o instanceof qu)for(o=o.labelNodes;o.next();)o.value.rd(e)}t.isSubGraphExpanded=!1}function Xu(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Ob(!0),o instanceof _u&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,Xu(o,e,i,n)),o instanceof wu)o.rd(e),i.Mj(o,n);else if(o instanceof qu)for(o=o.labelNodes;o.next();)o.value.rd(e)}t.isSubGraphExpanded=!0}function Uu(t){Ds.call(this),this.nb=$t,this.fp=new Bt(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}function qu(t){Jl.call(this,fh.Link),this.Ia=8,this.We=null,this.Xe=\"\",this.pf=this.Cn=null,this.qf=\"\",this.Cp=null,this.uk=xc,this.fn=0,this.hn=xc,this.jn=NaN,this.Cj=gc,this.qp=.5,this.nd=null,this.Cb=(new J).freeze(),this.gf=this.dh=null,this.wl=new Bt,this.ma=new Ue,this.D=this.o=this.Mf=this.Qf=null,this.lu=new gt,this.cr=this.jx=this.ix=null,this.Gt=NaN,this.P=null,this.j=[],t&&Object.assign(this,t)}function Ku(t){var e,i=t.fromNode,n=t.toNode;if(e=null!==i?null!==n?i.Lx(n):i.containingGroup:null!==n?n.containingGroup:null,i=e,(n=t.Rh)!==i){null!==n&&Yu(n,t),t.Rh=i,null!==i&&Vu(i,t);var r=t.containingGroupChanged;if(null!==r){var o=!0,s=t.diagram;null!==s&&(o=s.Z,s.Z=!0),r(t,n,i),null!==s&&(s.Z=o)}!t.td||t.ix!==n&&t.jx!==n||t.Va()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=e}function Hu(t,e){null===t.nd&&(t.nd=new Q),t.nd.add(e),t.s()}function Wu(t,e,i){if(0!==e||0!==i)if(0===t.pointsCount)t.defaultFromPoint&&t.defaultFromPoint.offset(e,i),t.defaultToPoint&&t.defaultToPoint.offset(e,i);else{for(var n=t.td,r=new J,o=t.Cb.iterator;o.next();){var s=o.value;r.add(new gt(s.x+e,s.y+i).freeze())}r.freeze(),o=t.Cb,t.Cb=r,s=t.diagram,isNaN(e)||isNaN(i)||null!==s&&s.animationManager.tb?t.s():(t.Wf.h(t.Wf.x+e,t.Wf.y+i),t.ja.h(t.ja.x+e,t.ja.y+i),Vs(t)),n?Zu(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==s&&s.animationManager.tb&&(e=s.animationManager,t.gf=r,e.yl.add(t)),t.g(\"points\",o,r)}}function Zu(t){0===t.Cb.count?t.td=!1:(t.td=!0,t.cr=null,t.Gt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),lc(t,!1))}function Ju(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}function $u(t,e){var i=e.Qo;return null===i&&((i=new $c).port=e,i.node=e.part,e.Qo=i),tf(i,t)}function Qu(t){return t===te||.5===t.x&&.5===t.y}function tc(t){return.5===t.x&&.5===t.y?t:oe}function ec(t){if(null===t.diagram||!t.isAvoiding||!Lo(t.diagram))return!1;var e=t.points.m,i=e.length;if(4>i)return!1;t=Ao(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var r=e[n],o=e[n+1];if(!t.dk(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function ic(t,e,i,n,r,o,s){var a=e.Qp,h=e.Pp,l=_c(e,i,n),u=i,c=n;for(0===r?u+=a:90===r?c+=h:180===r?u-=a:c-=h,r!==s&&l>Hc&&_c(e,u,c)!==l-1&&(_c(e,i-a,n)===l-1?(r=180,u=i-a,c=n):_c(e,i+a,n)===l-1?(r=0,u=i+a,c=n):_c(e,i,n-h)===l-1?(r=270,u=i,c=n-h):_c(e,i,n+h)===l-1&&(r=90,u=i,c=n+h));l>Hc&&_c(e,u,c)===l-1;)i=u,n=c,0===r?u+=a:90===r?c+=h:180===r?u-=a:c-=h,--l;o?l>Hc&&(180===r||0===r?i=Math.floor(i/a)*a+a/2:90!==r&&270!==r||(n=Math.floor(n/h)*h+h/2)):(i=Math.floor(i/a)*a+a/2,n=Math.floor(n/h)*h+h/2),l>Hc&&(o=r,s=i,u=n,0===r?(o=90,u+=h):90===r?(o=180,s-=a):180===r?(o=270,u-=h):270===r&&(o=0,s+=a),_c(e,s,u)===l-1?ic(t,e,s,u,o,!1,o):(s=i,u=n,0===r?(o=270,u-=h):90===r?(o=0,s+=a):180===r?(o=90,u+=h):270===r&&(o=180,s-=a),_c(e,s,u)===l-1&&ic(t,e,s,u,o,!1,o))),t.tf(i,n)}function nc(t,e,i,n){return t=i-t,isNaN(t)||1/0===t||-1/0===t?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||1/0===e||-1/0===e?NaN:(0>e&&(e=-e),Xe.aa(t,0)?e:Xe.aa(e,0)?t:Math.sqrt(t*t+e*e)))}function rc(t,e,i,n){var r=t.pointsCount;if(2>r)return e;if(i){var o=t.i(1);if(i=o.x-n.x,o=o.y-n.y,0===(n=nc(e.x,e.y,i,o)))return e;r=2===r?.5*n:n,(t=t.computeShortLength(!0))>r&&(t=r),r=t*(o-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=r}else{if(i=(o=t.i(r-2)).x-n.x,o=o.y-n.y,0===(n=nc(e.x,e.y,i,o)))return e;r=2===r?.5*n:n,(t=t.computeShortLength(!1))>r&&(t=r),r=t*(e.y-o)/n,e.x-=t*(e.x-i)/n,e.y-=r}return e}function oc(t,e,i,n){for(var r=t.pointsCount,o=e;Xe.aa(e.x,o.x)&&Xe.aa(e.y,o.y);){if(i>=r)return r-1;o=t.i(i++)}if(!Xe.aa(e.x,o.x)&&!Xe.aa(e.y,o.y))return i-1;for(var s=o;Xe.aa(e.x,o.x)&&Xe.aa(o.x,s.x)&&(!n||(e.y>=o.y?o.y>=s.y:o.y<=s.y))||Xe.aa(e.y,o.y)&&Xe.aa(o.y,s.y)&&(!n||(e.x>=o.x?o.x>=s.x:o.x<=s.x));){if(i>=r)return r-1;s=t.i(i++)}return i-2}function sc(t,e,i,n,r,o,s){if(!s&&hc(t)){var a=(s=t.computeJumpLength())/2,h=[],l=0;if(t.isVisible()&&(l=function(t,e,i,n){var r=t.diagram;if(null===r||e.A(i))return 0;for(r=r.layers;r.next();){var o=r.value;if(null!==o&&o.visible)for(var s=(o=o.Ha.m).length,a=0;a<s;a++){var h=o[a];if(h instanceof qu){if(h===t)return 0<n.length&&n.sort((function(t,e){return t-e})),n.length;if(h.isVisible()&&hc(h)){var l=h.routeBounds;l.u()&&t.routeBounds.Lc(l)&&!t.usesSamePort(h)&&null!==(l=h.path)&&l.Ff()&&ac(e,i,n,h)}}}}return 0<n.length&&n.sort((function(t,e){return t-e})),n.length}(t,r,o,h)),0<l)if(Xe.w(r.y,o.y))if(r.x<o.x)for(var u=0;u<l;){var c=Math.max(r.x,Math.min(h[u++]-a,o.x-s));e.lineTo(c+i,o.y+n);for(var f=c+i,d=Math.min(c+s,o.x);u<l&&(c=h[u])<d+s;)u++,d=Math.min(c+a,o.x);c=o.y-s+n,d+=i;var p=o.y+n;t.curve===wc?Gl(e,d,p,!1):Ul(e,f,c,d,c,d,p)}else for(--l;0<=l;){for(u=Math.min(r.x,Math.max(h[l--]+a,o.x+s)),e.lineTo(u+i,o.y+n),f=u+i,c=Math.max(u-s,o.x);0<=l&&(u=h[l])>c-s;)l--,c=Math.max(u-a,o.x);u=o.y-s+n,c+=i,d=o.y+n,t.curve===wc?Gl(e,c,d,!1):Ul(e,f,u,c,u,c,d)}else if(Xe.w(r.x,o.x))if(r.y<o.y)for(u=0;u<l;){for(c=Math.max(r.y,Math.min(h[u++]-a,o.y-s)),e.lineTo(o.x+i,c+n),f=c+n,c=Math.min(c+s,o.y);u<l&&(d=h[u])<c+s;)u++,c=Math.min(d+a,o.y);d=o.x-s+i,p=o.x+i,c+=n,t.curve===wc?Gl(e,p,c,!1):Ul(e,d,f,d,c,p,c)}else for(--l;0<=l;){for(u=Math.min(r.y,Math.max(h[l--]+a,o.y+s)),e.lineTo(o.x+i,u+n),f=u+n,u=Math.max(u-s,o.y);0<=l&&(c=h[l])>u-s;)l--,u=Math.max(c-a,o.y);c=o.x-s+i,d=o.x+i,u+=n,t.curve===wc?Gl(e,d,u,!1):Ul(e,c,f,c,u,d,u)}}e.lineTo(o.x+i,o.y+n)}function ac(t,e,i,n){for(var r=Xe.w(t.y,e.y),o=n.pointsCount,s=n.i(0),a=gt.alloc(),h=1;h<o;h++){var l=n.i(h);if(h<o-1){var u=n.i(h+1);if(s.y===l.y&&l.y===u.y){if(l.x>s.x&&u.x>=l.x||l.x<s.x&&u.x<=l.x)continue}else if(s.x===l.x&&l.x===u.x&&(l.y>s.y&&u.y>=l.y||l.y<s.y&&u.y<=l.y))continue}t:{u=t.x;var c=t.y,f=e.x,d=e.y,p=s.x;s=s.y;var g=l.x,y=l.y;if(Xe.w(u,f)){if(!Xe.w(c,d)&&Xe.w(s,y)&&Math.min(c,d)<s&&Math.max(c,d)>s&&Math.min(p,g)<u&&Math.max(p,g)>u&&!Xe.w(p,g)){a.x=u,a.y=s,u=!0;break t}}else if(Xe.w(c,d)&&Xe.w(p,g)&&Math.min(u,f)<p&&Math.max(u,f)>p&&Math.min(s,y)<c&&Math.max(s,y)>c&&!Xe.w(s,y)){a.x=p,a.y=c,u=!0;break t}a.x=0,a.y=0,u=!1}u&&(r?i.push(a.x):i.push(a.y)),s=l}gt.free(a)}function hc(t){return(t=t.curve)===kc||t===wc}function lc(t,e){(e||hc(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Xh.contains(t)||0===t.wl.width&&0===t.wl.height||e.Xh.add(t,t.wl.copy()))}function uc(t,e,i){if(null!==e&&e.Bm&&e.td&&hc(e)){var n=e.routeBounds;n.u()&&(t.routeBounds.Lc(n)||i.Lc(n))&&(t.usesSamePort(e)||e.fc(!1))}}function cc(t){var e=t.We;if(null!==e){var i=t.pf;if(null!==i&&isNaN(t.curviness)){for(var n=t.Xe,r=t.qf,o=t=null,s=e.ab.m,a=s.length,h=0;h<a;h++){var l=s[h];(l.We===e&&l.Xe===n&&l.pf===i&&l.qf===r||l.We===i&&l.Xe===r&&l.pf===e&&l.qf===n)&&(null===o?o=l:(null===t&&(t=[]).push(o),t.push(l)))}if(null!==t){for(null===(o=Mu(e,i,n,r))&&(ku(e,o=new zc(e,n,i,r)),ku(i,o)),o.links=t,e=0;e<t.length;e++)t[e].Mf=o;o.cm()}}}}function fc(t){var e=t.Mf;null!==e&&isNaN(t.curviness)&&(t.Mf=null,0<=(t=e.links.indexOf(t))&&(L(e.links,t),e.cm()))}wu.className=\"Node\",wu.SpreadingNone=zu,wu.SpreadingEvenly=Ru,wu.SpreadingPacked=Eu,c(_u,wu),_u.prototype.cloneProtected=function(t){wu.prototype.cloneProtected.call(this,t),this.R=-32769&this.R,null!==this.$a&&(t.$a=this.$a.copy()),t.ro=this.ro,t.to=this.to,t.ki=this.ki,t.wp=this.wp;var e=t.Yl((function(t){return t instanceof Uu}));t.Sa=e instanceof Uu?e:null,null!==this.Dc?(t.Dc=this.Dc.copy(),t.Dc.group=t):(null!==t.Dc&&(t.Dc.group=null),t.Dc=null)},(e=_u.prototype).wf=function(t){wu.prototype.wf.call(this,t);var e=t.Yj();for(t=t.memberParts;t.next();){var i=t.value;if(i.s(),i.B(8),i.Oj(),i instanceof wu)i.rd(e);else if(i instanceof qu)for(i=i.labelNodes;i.next();)i.value.rd(e)}},e.nk=function(t,e,i,n,r,o,s){if(t===pi&&\"elements\"===e){if(r instanceof Uu)null===this.Sa?this.Sa=r:this.Sa!==r&&w(\"Cannot insert a second Placeholder into the visual tree of a Group.\");else if(r instanceof fh){var a=r.Yl((function(t){return t instanceof Uu}));a instanceof Uu&&(null===this.Sa?this.Sa=a:this.Sa!==a&&w(\"Cannot insert a second Placeholder into the visual tree of a Group.\"))}}else t===gi&&\"elements\"===e&&null!==this.Sa&&(n===this.Sa||n instanceof fh&&this.Sa.rg(n))&&(this.Sa=null);wu.prototype.nk.call(this,t,e,i,n,r,o,s)},e.hm=function(t,e){wu.prototype.hm.call(this,t,e),this.isClipping&&this.type!==fh.Spot&&this.isSubGraphExpanded&&((t=this.resizeObject)instanceof fh&&(t=t.pb()),null===this.$a&&(this.$a=new Bt),t.Li(this.$a),t instanceof Hh&&this.$a.Jc(-t.strokeWidth,-t.strokeWidth))},e.zh=function(t,e,i,n){this.cf=this.Sa,wu.prototype.zh.call(this,t,e,i,n)},e.Ta=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each((function(e){!t.computesBoundsIncludingLinks&&e instanceof qu||e.Ta()})),wu.prototype.Ta.call(this)},e.Ri=function(){if(!wu.prototype.Ri.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof wu){if(e.isVisible()&&$s(e))return!1}else if(e instanceof qu&&e.isVisible()&&$s(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},e.Uj=function(){if(0<this.so.count){var t=this.diagram;if(null!==t)for(var e=this.so.copy().iterator;e.next();)t.remove(e.value)}wu.prototype.Uj.call(this)},_u.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Os(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},_u.prototype.addMembers=function(t,e){var i=this.diagram;if(null===i)return!1;i=i.commandHandler;var n=!0;for(t=Os(t).iterator;t.next();){var r=t.value;!e||i.isValidMember(this,r)?r.containingGroup=this:n=!1}return n},_u.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null!==t&&!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(e=_u.prototype).rd=function(t){var e=0!=(65536&this.R);if(wu.prototype.rd.call(this,t),!e)for(0!=(65536&this.R)!=1&&(this.R=65536^this.R),e=this.Mu();e.next();){var i=e.value;if(void 0===t||!t.contains(i)){var n=i.fromNode;(null!==n&&n!==this&&n.Jd(this)&&!n.isVisible()||null!==(n=i.toNode)&&n!==this&&n.Jd(this)&&!n.isVisible())&&(Pu(i.fromPort),Pu(i.toPort),i.Va())}}},e.Mu=function(){var t=null!==this.diagram&&this.diagram.mx;if(t&&null!==this.Zq)return this.Zq.iterator;var e=this.Yj();e.add(this);for(var i=new Q,n=e.iterator;n.next();){var r=n.value;if(r instanceof wu)for(r=r.linksConnected;r.next();){var o=r.value;e.contains(o)||i.add(o)}}return t&&(this.Zq=i),i.iterator},e.Hz=function(){var t=this.Yj();t.add(this);for(var e=new Q,i=t.iterator;i.next();){var n=i.value;if(n instanceof wu)for(n=n.linksConnected;n.next();){var r=n.value,o=r.fromNode;null===o||t.contains(o)&&o!==this||e.add(o),null===(r=r.toNode)||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},e.Gz=function(){var t=new Q;return function t(e,i){null!==e&&(i.add(e),t(e.containingGroup,i))}(this,t),t},e.Yj=function(){var t=new Q;return vu(t,this,!0,0,!0),t.remove(this),t},e.Ob=function(t){wu.prototype.Ob.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ob(t)},_u.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ke||(t.Ke=!0,Gu(this,this.Yj(),t,this),t.Ke=!1)},_u.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ke||(t.Ke=!0,Xu(this,this.Yj(),t,this),t.Ke=!1)},_u.prototype.move=function(t,e){void 0===e&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var r=t.x,o=t.y;if(!(n===r||isNaN(n)&&isNaN(r))||!(i===o||isNaN(i)&&isNaN(o))){for(n=r-(isNaN(n)?0:n),i=o-(isNaN(i)?0:i),o=gt.alloc(),wu.prototype.move.call(this,t,e),t=new Q,e=this.Yj().iterator;e.next();)(r=e.value)instanceof qu&&(r.suspendsRouting&&t.add(r),r.td||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(!((r=e.value).Hh()||r instanceof wu&&r.isLinkLabel)){var s=r.position,a=r.location;s.u()?(o.x=s.x+n,o.y=s.y+i,r.position=o):a.u()&&(o.x=a.x+n,o.y=a.y+i,r.location=o)}for(e.reset();e.next();)(r=e.value)instanceof qu&&(r.suspendsRouting=t.contains(r),r.td||r.fromNode!==this&&r.toNode!==this)&&(s=r.position,o.x=s.x+n,o.y=s.y+i,o.u()?r.move(o):r.Va(),ec(r)&&r.Va());gt.free(o)}},f.Object.defineProperties(_u.prototype,{placeholder:{get:function(){return this.Sa}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.R)},set:function(t){var e=0!=(2048&this.R);e!==t&&(this.R^=2048,this.g(\"computesBoundsAfterDrag\",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.R)},set:function(t){var e=0!=(4096&this.R);e!==t&&(this.R^=4096,this.g(\"computesBoundsIncludingLinks\",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.R)},set:function(t){var e=0!=(8192&this.R);e!==t&&(this.R^=8192,this.g(\"computesBoundsIncludingLocation\",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.R)},set:function(t){var e=0!=(16384&this.R);e!==t&&(this.R^=16384,this.g(\"handlesDragDropForMembers\",e,t))}},memberParts:{get:function(){return this.so.iterator}},layout:{get:function(){return this.Dc},set:function(t){var e=this.Dc;if(e!==t){null!==e&&(e.diagram=null,e.group=null),this.Dc=t;var i=this.diagram;null!==t&&(t.diagram=i,t.group=this),null!==i&&(i.Oh=!0),this.g(\"layout\",e,t),null!==i&&i.Fb()}}},memberAdded:{get:function(){return this.ro},set:function(t){var e=this.ro;e!==t&&(this.ro=t,this.g(\"memberAdded\",e,t))}},memberRemoved:{get:function(){return this.to},set:function(t){var e=this.to;e!==t&&(this.to=t,this.g(\"memberRemoved\",e,t))}},memberValidation:{get:function(){return this.ki},set:function(t){var e=this.ki;e!==t&&(this.ki=t,this.g(\"memberValidation\",e,t))}},ungroupable:{get:function(){return 0!=(256&this.R)},set:function(t){var e=0!=(256&this.R);e!==t&&(this.R^=256,this.g(\"ungroupable\",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.R)},set:function(t){var e=0!=(512&this.R);if(e!==t){this.R^=512;var i=this.diagram;if(this.g(\"isSubGraphExpanded\",e,t),null!==(e=this.subGraphExpandedChanged)){var n=!0;null!==i&&(n=i.Z,i.Z=!0),e(this),null!==i&&(i.Z=n)}null!==i&&i.undoManager.isUndoingRedoing?(null!==this.Sa&&this.Sa.s(),this.memberParts.each((function(t){t.updateAdornments()}))):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.R)},set:function(t){var e=0!=(1024&this.R);e!==t&&(this.R^=1024,this.g(\"wasSubGraphExpanded\",e,t))}},subGraphExpandedChanged:{get:function(){return this.wp},set:function(t){var e=this.wp;e!==t&&(this.wp=t,this.g(\"subGraphExpandedChanged\",e,t))}},Jh:{get:function(){return 0!=(32768&this.R)},set:function(t){0!=(32768&this.R)!==t&&(this.R^=32768)}}}),_u.prototype.expandSubGraph=_u.prototype.expandSubGraph,_u.prototype.collapseSubGraph=_u.prototype.collapseSubGraph,_u.prototype.findSubGraphParts=_u.prototype.Yj,_u.prototype.findContainingGroupChain=_u.prototype.Gz,_u.prototype.findExternalNodesConnected=_u.prototype.Hz,_u.prototype.findExternalLinksConnected=_u.prototype.Mu,_u.prototype.ensureBounds=_u.prototype.Ta,_u.className=\"Group\",c(Uu,Ds),Uu.prototype.cloneProtected=function(t){Ds.prototype.cloneProtected.call(this,t),t.nb=this.nb.I(),t.fp=this.fp.copy()},Uu.prototype.Bh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return Xt(0,0,e.width,e.height,t.x,t.y)},Uu.prototype.gm=function(){var t=this.part;if(null!==t&&(t instanceof _u||t instanceof bu)||w(\"Placeholder is not inside a Group or Adornment.\"),t instanceof _u){var e=this.computeBorder(this.fp),i=this.minSize,n=this.uc;for(It(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),this.xe(0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||null===n||n.animationManager.cv(t)||isNaN(e.x)||isNaN(e.y)||((i=gt.alloc()).Ti(e,t.locationSpot),i.A(t.location)||(t.location=i),gt.free(i))}else{e=this.uc,n=(i=this.nb).left+i.right;var r=i.top+i.bottom,o=t.adornedObject;t.angle=o.Ki();var s=0;o instanceof Hh&&(s=o.strokeWidth);var a=o.Af(),h=o.naturalBounds,l=(h.width+s)*a;s=(h.height+s)*a,t.type!==fh.Link&&(o=o.da(\"Selection\"===t.category?ee:t.locationSpot,gt.alloc()),t.location=o,gt.free(o)),isNaN(l)||isNaN(s)?(l=(t=t.adornedObject).da(ee,gt.alloc()),(o=Bt.allocAt(l.x,l.y,0,0)).Oe(t.da(le,l)),o.Oe(t.da(ne,l)),o.Oe(t.da(ae,l)),It(e,o.width+n||0,o.height+r||0),this.xe(-i.left,-i.top,e.width,e.height),gt.free(l),Bt.free(o)):(It(e,l+n||0,s+r||0),this.xe(-i.left,-i.top,e.width,e.height))}},Uu.prototype.zh=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},Uu.prototype.computeBorder=function(t){var e=this.part,i=e.diagram;if(null!==i&&e instanceof _u&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.fp.u()){var n=i.toolManager.findTool(\"Dragging\");if(n===i.currentTool&&null!==(i=n.computeBorder(e,this.fp,t)))return i}i=Bt.alloc(),n=this.computeMemberBounds(i);var r=this.nb;return e instanceof _u&&!e.isSubGraphExpanded?t.h(n.x-r.left,n.y-r.top,0,0):t.h(n.x-r.left,n.y-r.top,Math.max(n.width+r.left+r.right,0),Math.max(n.height+r.top+r.bottom,0)),Bt.free(i),e instanceof _u&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Oe(e.location),t},Uu.prototype.computeMemberBounds=function(t){if(!(this.part instanceof _u))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,r=-1/0,o=-1/0,s=e.memberParts;s.next();){var a=s.value;if(a.isVisible()){if(a instanceof qu){if(!e.computesBoundsIncludingLinks)continue;if(Zs(a))continue;if(a.fromNode===e||a.toNode===e)continue}(a=a.actualBounds).left<i&&(i=a.left),a.top<n&&(n=a.top),a.right>r&&(r=a.right),a.bottom>o&&(o=a.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,r-i,o-n):(e=e.location,t.h(e.x,e.y,0,0)),t},f.Object.defineProperties(Uu.prototype,{padding:{get:function(){return this.nb},set:function(t){\"number\"==typeof t&&(t=new Wt(t));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.g(\"padding\",e,t),this.s())}}}),Uu.className=\"Placeholder\",c(qu,Jl),qu.prototype.cloneProtected=function(t){Jl.prototype.cloneProtected.call(this,t),t.Ia=-113&this.Ia,t.Xe=this.Xe,t.Cn=this.Cn,t.qf=this.qf,t.Cp=this.Cp,t.uk=this.uk,t.fn=this.fn,t.hn=this.hn,t.jn=this.jn,t.Cj=this.Cj,t.qp=this.qp,null!==this.P&&(t.P=this.P.copy())},(e=qu.prototype).wf=function(t){Jl.prototype.wf.call(this,t),this.Xe=t.Xe,this.qf=t.qf,t.dh=null,t.Va(),t.Mf=this.Mf;var e=t.fromPort;null!==e&&Pu(e),null!==(t=t.toPort)&&Pu(t)},e.gb=function(t){t.classType===qu?2==(2&t.value)?this.routing=t:t===bc||t===wc||t===kc?this.curve=t:t===Mc||t===Sc||t===Pc?this.adjusting=t:t!==gc&&t!==xc&&w(\"Unknown Link enum value for a Link property: \"+t):Jl.prototype.gb.call(this,t)},e.Kc=function(){null===this.P&&(this.P=new nf)},e.Ri=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),$s(t)||lu(t))return!1}return null===(t=this.toNode)||(null!==(e=t.findVisibleNode())&&(t=e),!$s(t)&&!lu(t))},e.Jv=function(){return!1},e.Us=function(){},e.Mc=function(){return!1},qu.prototype.computeAngle=function(t,e,i){return qu.computeAngle(e,i)},qu.computeAngle=function(t,e){switch(t){default:case xc:t=0;break;case Nc:t=e;break;case Cc:t=e+90;break;case Tc:t=e-90;break;case Lc:t=e+180;break;case Ac:90<(t=Xe.iq(e))&&270>t&&(t-=180);break;case jc:90<(t=Xe.iq(e+90))&&270>t&&(t-=180);break;case Oc:90<(t=Xe.iq(e-90))&&270>t&&(t-=180);break;case Dc:if(45<(t=Xe.iq(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return Xe.iq(t)},(e=qu.prototype).Gh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&Jl.prototype.Gh.call(this)},e.$p=function(t){var e=this.fromNode;return t===e?this.toNode:e},e.$z=function(t){var e=this.fromPort;return t===e?this.toPort:e},e.bq=function(t){if(Jl.prototype.bq.call(this,t),hc(this)&&this.eq(this.actualBounds),!t){var e=null;null!==(t=this.We)&&Cu(t,this,e=this.fromPort);var i=this.pf;if(null!==i){var n=this.toPort;i===t&&n===e||Cu(i,this,n)}cc(this)}},e.cq=function(t){if(Jl.prototype.cq.call(this,t),hc(this)&&this.eq(this.actualBounds),!t){var e=null;null!==(t=this.We)&&Tu(t,this,e=this.fromPort);var i=this.pf;if(null!==i){var n=this.toPort;i===t&&n===e||Tu(i,this,n)}fc(this)}},e.Uj=function(){if(this.td=!0,null!==this.nd){var t=this.diagram;if(null!==t)for(var e=this.nd.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},qu.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},qu.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var r=i.y;for(isNaN(r)&&(r=0),n=t.x-n,r=t.y-r,!0===e?Jl.prototype.move.call(this,t,!1):(t=gt.allocAt(i.x+n,i.y+r),Jl.prototype.move.call(this,t,!1),gt.free(t)),Wu(this,n,r),t=this.labelNodes;t.next();)i=(e=t.value).position,e.moveTo(i.x+n,i.y+r)},qu.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},qu.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},qu.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(at),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===bc))return this.ma.Tu(.5,t),t.add(this.i(0)),i=this.ma.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===bc){if(3===e)return this.i(1);if(i=3*((n=(e-1)/3|0)/2|0),1==n%2){n=this.i(i);var r=this.i(i+1),o=this.i(i+2);i=this.i(i+3),Xe.iz(n.x,n.y,r.x,r.y,o.x,o.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var s=this.flattenedLengths;for(i=this.flattenedTotalLength,r=o=n=0;n<i/2&&o<e&&!(n+(r=s[o])>i/2);)n+=r,o++;return e=this.i(o),o=this.i(o+1),1>Math.abs(e.x-o.x)?e.y>o.y?t.h(e.x,e.y-(i/2-n)):t.h(e.x,e.y+(i/2-n)):1>Math.abs(e.y-o.y)?e.x>o.x?t.h(e.x-(i/2-n),e.y):t.h(e.x+(i/2-n),e.y):(i=(i/2-n)/r,t.h(e.x+i*(o.x-e.x),e.y+i*(o.y-e.y))),t},qu.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Pa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===bc))return this.ma.Rx(.5);if(this.computeCurve()===bc&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(1==e%2){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),Xe.hz(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).Pa(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var r,o=0;for(i=0;o<n/2&&i<t&&!(o+(r=e[i])>n/2);)o+=r,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).Pa(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.Pa(n)},(e=qu.prototype).i=function(t){return this.Cb.m[t]},e.Pc=function(t,e){this.Cb.Oc(t,e)},e.M=function(t,e,i){this.Cb.Oc(t,new gt(e,i))},e.iA=function(t,e){this.Cb.wb(t,e)},e.l=function(t,e,i){this.Cb.wb(t,new gt(e,i))},e.ee=function(t){this.Cb.add(t)},e.tf=function(t,e){this.Cb.add(new gt(t,e))},e.Av=function(t){this.Cb.eb(t)},e.Pj=function(){this.Cb.clear()},e.Lh=function(){null===this.dh&&(this.dh=this.Cb,this.Cb=this.Cb.copy())},e.vf=function(){if(null!==this.dh){for(var t=this.dh,e=this.Cb,i=1/0,n=1/0,r=t.m,o=r.length,s=0;s<o;s++){var a=r[s];i=Math.min(a.x,i),n=Math.min(a.y,n)}a=s=1/0;for(var h=e.m,l=h.length,u=0;u<l;u++){var c=h[u];s=Math.min(c.x,s),a=Math.min(c.y,a),c.freeze()}if(e.freeze(),l===o){for(o=0;o<l;o++)if(u=r[o],c=h[o],u.x-i!=c.x-s||u.y-n!=c.y-a){this.fc(!0);break}}else this.fc(!0);this.dh=null,null!==(i=this.diagram)&&i.animationManager.tb&&(i=i.animationManager,this.gf=e,i.yl.add(this)),Zu(this),this.g(\"points\",t,e)}},e.Cv=function(){null!==this.dh&&(this.Cb=this.dh,this.dh=null)},e.Va=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Gs.contains(this)||t.undoManager.isUndoingRedoing)return;if((t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.gf&&!t.isTicking&&t.isAnimating&&(this.gf=null)}null!==(t=this.path)&&(this.td=!1,this.s(),t.s())}},e.ug=function(){if(!this.td&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.Lh(),t=this.computePoints()}catch(t){this.computingPoints=!1,this.Cv()}finally{this.computingPoints=!1,t?this.vf():this.Cv()}}},qu.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(dc||((dc=new wu).desiredSize=Mt,dc.Ta()),this.defaultFromPoint&&(dc.location=this.defaultFromPoint,dc.Ta(),e=t=dc)):e=this.fromPort,null!==e&&!t.isVisible()){var i=t.findVisibleNode();null!==i&&i!==t?(t=i,e=i.port):t=i}if(this.ix=t,null===t||!t.location.u())return!1;for(;!(null===e||e.actualBounds.u()&&e.Ff());)e=e.panel;if(null===e)return!1;var n=this.toNode,r=null;if(null===n?(pc||((pc=new wu).desiredSize=Mt,pc.Ta()),this.defaultToPoint&&(pc.location=this.defaultToPoint,pc.Ta(),r=n=pc)):r=this.toPort,null===r||n.isVisible()||(null!==(i=n.findVisibleNode())&&i!==n?(n=i,r=i.port):n=i),this.jx=n,null===n||!n.location.u())return!1;for(;!(null===r||r.actualBounds.u()&&r.Ff());)r=r.panel;if(null===r)return!1;var o=this.pointsCount,s=this.computeSpot(!0,e);i=this.computeSpot(!1,r);var a=Qu(s),h=Qu(i),l=e===r&&null!==e,u=this.isOrthogonal,c=this.curve===bc;this.Qf=!(!l||u)&&(c=!0);var f=this.computeAdjusting()===xc||l;if(!u&&!l&&a&&h){if(a=!1,!f&&3<=o&&(f=this.getLinkPoint(t,e,s,!0,!1,n,r),h=this.getLinkPoint(n,r,i,!1,!1,t,e),a=this.adjustPoints(0,f,o-1,h))&&(f=this.getLinkPoint(t,e,s,!0,!1,n,r),h=this.getLinkPoint(n,r,i,!1,!1,t,e),this.adjustPoints(0,f,o-1,h)),!a)if(this.Pj(),c){o=this.getLinkPoint(t,e,s,!0,!1,n,r),a=(f=this.getLinkPoint(n,r,i,!1,!1,t,e)).x-o.x,h=f.y-o.y,l=this.computeCurviness(),c=u=0;var d=o.x+a/3,p=o.y+h/3,g=d,y=p;Xe.w(h,0)?y=0<a?y-l:y+l:(u=-a/h,c=Math.sqrt(l*l/(u*u+1)),0>l&&(c=-c),y=u*((g=(0>h?-1:1)*c+d)-d)+p);var m=d=o.x+2*a/3,v=p=o.y+2*h/3;v=Xe.w(h,0)?0<a?v-l:v+l:u*((m=(0>h?-1:1)*c+d)-d)+p,this.Pj(),this.ee(o),this.tf(g,y),this.tf(m,v),this.ee(f),this.Pc(0,this.getLinkPoint(t,e,s,!0,!1,n,r)),this.Pc(3,this.getLinkPoint(n,r,i,!1,!1,t,e))}else o=n,f=r,n=this.getLinkPoint(t,e,s,!0,!1,o,f),r=this.getLinkPoint(o,f,i,!1,!1,t,e),this.hasCurviness()?(f=r.x-n.x,i=r.y-n.y,s=this.computeCurviness(),o=t=n.x+f/2,a=e=n.y+i/2,Xe.w(i,0)?a=0<f?a-s:a+s:(f=-f/i,o=Math.sqrt(s*s/(f*f+1)),0>s&&(o=-o),a=f*((o=(0>i?-1:1)*o+t)-t)+e),this.ee(n),this.tf(o,a),this.ee(r)):(this.ee(n),this.ee(r),a=Bt.alloc(),e.Li(a),h=a.$(r),f.Li(a),l=a.$(n),(h||l)&&(s=e.da(tc(s),new gt),this.Pc(0,this.getLinkPointFromPoint(t,e,s,r,!0,s)),i=f.da(tc(i),new gt),this.Pc(1,this.getLinkPointFromPoint(o,f,i,n,!1,i))),Bt.free(a))}else{c=this.isAvoiding,f&&(u&&c||l)&&this.Pj();var x=l?this.computeCurviness():0;c=this.getLinkPoint(t,e,s,!0,u,n,r),d=g=p=0,(u||!a||l)&&(y=this.computeEndSegmentLength(t,e,s,!0),d=this.getLinkDirection(t,e,c,s,!0,u,n,r),l&&(a||s.A(i)||!u&&1===s.x+i.x&&1===s.y+i.y)&&(d-=u?90:30,0>x&&(d-=180)),0>d?d+=360:360<=d&&(d-=360),l&&(y+=Math.abs(x)*(u?1:2)),0===d?p=y:90===d?g=y:180===d?p=-y:270===d?g=-y:(p=y*Math.cos(d*Math.PI/180),g=y*Math.sin(d*Math.PI/180)),s.zc()&&l&&(y=e.da(oe,gt.alloc()),m=gt.allocAt(y.x+1e3*p,y.y+1e3*g),this.getLinkPointFromPoint(t,e,y,m,!0,c),gt.free(y),gt.free(m))),y=this.getLinkPoint(n,r,i,!1,u,t,e);var b=v=m=0;if(u||!h||l){var w=this.computeEndSegmentLength(n,r,i,!1);b=this.getLinkDirection(n,r,y,i,!1,u,t,e),l&&(h||s.A(i)||!u&&1===s.x+i.x&&1===s.y+i.y)&&(b+=u?0:30,0>x&&(b+=180)),0>b?b+=360:360<=b&&(b-=360),l&&(w+=Math.abs(x)*(u?1:2)),0===b?m=w:90===b?v=w:180===b?m=-w:270===b?v=-w:(m=w*Math.cos(b*Math.PI/180),v=w*Math.sin(b*Math.PI/180)),i.zc()&&l&&(i=r.da(oe,gt.alloc()),s=gt.allocAt(i.x+1e3*m,i.y+1e3*v),this.getLinkPointFromPoint(n,r,i,s,!1,y),gt.free(i),gt.free(s))}i=c,(u||!a||l)&&(i=new gt(c.x+p,c.y+g)),s=y,(u||!h||l)&&(s=new gt(y.x+m,y.y+v)),!f&&!u&&a&&3<o&&this.adjustPoints(0,c,o-2,s)?this.Pc(o-1,y):!f&&!u&&h&&3<o&&this.adjustPoints(1,i,o-1,y)?this.Pc(0,c):!f&&(u?6<=o:4<o)&&this.adjustPoints(1,i,o-2,s)?(this.Pc(0,c),this.Pc(o-1,y)):(this.Pj(),this.ee(c),(u||!a||l)&&this.ee(i),u&&this.addOrthoPoints(i,d,s,b,t,n),(u||!h||l)&&this.ee(s),this.ee(y))}return!0},qu.prototype.getLinkPointFromPoint=function(t,e,i,n,r,o){if(void 0===o&&(o=new gt),null===t||null===e)return o.assign(i),o;if(t.isVisible()||null!==(r=t.findVisibleNode())&&r!==t&&(e=r.port),t=null,null===(r=e.panel)||r.je()||(r=r.panel),null===r){r=n.x,n=n.y;var s=i.x;i=i.y}else{r=1/((t=r.fe).m11*t.m22-t.m12*t.m21),s=t.m22*r;var a=-t.m12*r,h=-t.m21*r,l=t.m11*r,u=r*(t.m21*t.dy-t.m22*t.dx),c=r*(t.m12*t.dx-t.m11*t.dy);r=n.x*s+n.y*h+u,n=n.x*a+n.y*l+c,s=i.x*s+i.y*h+u,i=i.x*a+i.y*l+c}return e.Zj(r,n,s,i,o),null!==t&&o.transform(t),o},qu.prototype.getLinkPoint=function(t,e,i,n,r,o,s,a){if(void 0===a&&(a=new gt),i.hb()&&!Qu(i))return e.da(i,a),a;if(i.Nc()){var h=$u(this,e);if(null!==h){if(a.assign(h.gq),r&&this.routing===vc){var l=$u(this,s);if(null!==l&&h.Wl<l.Wl){h=gt.alloc(),l=gt.alloc();var u=new Bt(e.da(ee,h),e.da(le,l)),c=this.computeSpot(!n,s);t=this.getLinkPoint(o,s,c,!n,r,t,e,l),(i.Df(ce)||i.Df(fe))&&t.y>=u.y&&t.y<=u.y+u.height?a.y=t.y:(i.Df(ue)||i.Df(de))&&t.x>=u.x&&t.x<=u.x+u.width&&(a.x=t.x),gt.free(h),gt.free(l)}}return a}}return i=e.da(tc(i),gt.alloc()),this.pointsCount>(r?6:2)?(s=n?this.i(1):this.i(this.pointsCount-2),r&&(s=Ju(i,s.copy()))):(h=this.computeSpot(!n,s),o=gt.alloc(),s=s.da(tc(h),o),r&&(s=Ju(i,s)),gt.free(o)),this.getLinkPointFromPoint(t,e,i,s,n,a),gt.free(i),a},qu.prototype.getLinkDirection=function(t,e,i,n,r,o,s,a){t:if(n.hb())var h=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.Nc()&&null!==(h=$u(this,e)))switch(h.Ac){case 1:h=270;break t;case 2:h=180;break t;default:case 4:h=0;break t;case 8:h=90;break t}h=e.da(oe,gt.alloc()),this.pointsCount>(o?6:2)?(a=r?this.i(1):this.i(this.pointsCount-2),a=o?Ju(h,a.copy()):i):(i=gt.alloc(),a=a.da(oe,i),gt.free(i)),i=Math.abs(a.x-h.x)>Math.abs(a.y-h.y)?a.x>=h.x?0:180:a.y>=h.y?90:270,gt.free(h),h=i}return n.zc()&&s.Jd(t)&&360<=(h+=180)&&(h-=360),Qu(n)||0===(t=e.Ki())||(45<=t&&135>t?h+=90:135<=t&&225>t?h+=180:225<=t&&315>t&&(h+=270),360<=h&&(h-=360)),h},qu.prototype.computeEndSegmentLength=function(t,e,i,n){return null!==e&&i.Nc()&&null!==(t=$u(this,e))?t.Ju:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},qu.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=oe:((e=this.fromSpot).Mb()&&(e=t.fromSpot),t=e===Pe?te:e):null===(t=e||this.toPort)?t=oe:((e=this.toSpot).Mb()&&(e=t.toSpot),t=e===Pe?te:e),t},qu.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==xc&&4<this.pointsCount?this.computeMidPoint(new gt):null!==(t=null!==(t=e.Qo)?tf(t,this):null)?t.gq:e.da(oe)},qu.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},qu.prototype.zf=function(t,e,i,n,r,o){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var s=o;if(void 0===o&&(s=Ye.alloc()).reset(),s.multiply(this.transform),this.Ah(t,s))return Sh(this,e,i,r),void 0===o&&Ye.free(s),!0;if(this.Lc(t,s)){var a=!1;if(!this.isAtomic)for(var h=this.T.m,l=h.length;l--;){var u=h[l];if(u.visible||u===this.locationObject){var c=u.actualBounds,f=this.naturalBounds;if(!(c.x>f.width||c.y>f.height||0>c.x+c.width||0>c.y+c.height)){if((c=Ye.alloc()).set(s),u instanceof fh)a=u.zf(t,e,i,n,r,c);else if(this.path===u){if(u instanceof Hh)if(a=t,f=n,!1===u.pickable)a=!1;else if(c.multiply(u.transform),f)t:{var d=a,p=c;if(u.Ah(d,p))a=!0;else{if(void 0===p&&(p=u.transform,d.Ge(u.actualBounds))){a=!0;break t}a=d.left,f=d.right;var g=d.top;d=d.bottom;var y=gt.alloc(),m=gt.alloc(),v=gt.alloc(),x=Ye.alloc();x.set(p),x.lv(u.transform),x.As(),m.x=f,m.y=g,m.transform(x),y.x=a,y.y=g,y.transform(x),p=!1,Qh(u,y,m,v)?p=!0:(y.x=f,y.y=d,y.transform(x),Qh(u,y,m,v)?p=!0:(m.x=a,m.y=d,m.transform(x),Qh(u,y,m,v)?p=!0:(y.x=a,y.y=g,y.transform(x),Qh(u,y,m,v)&&(p=!0)))),Ye.free(x),gt.free(y),gt.free(m),gt.free(v),a=p}}else a=u.Ah(a,c)}else a=Is(u,t,n,c);a&&(f=u,null!==e&&(f=e(u)),f&&(null===i||i(f))&&r.add(f)),Ye.free(c)}}}return void 0===o&&Ye.free(s),a||null!==this.background||null!==this.areaBackground}return void 0===o&&Ye.free(s),!1},qu.prototype.computeCurve=function(){if(null===this.Qf){var t=this.fromPort,e=this.isOrthogonal;this.Qf=null!==t&&t===this.toPort&&!e}return this.Qf?bc:this.curve},qu.prototype.computeCorner=function(){if(this.curve===bc)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},qu.prototype.findMidLabel=function(){for(var t=this.path,e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];if(r!==t&&!r.isPanelMain&&(-1/0===r.segmentIndex||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(-1/0===(e=t.value).segmentIndex||isNaN(e.segmentIndex))return e;return null},qu.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=Bc;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(null!==e&&null!==i){var n=this.findMidLabel();if(null!==n){var r=n.naturalBounds,o=n.margin,s=isNaN(r.width)?30:r.width*n.scale+o.left+o.right;r=isNaN(r.height)?14:r.height*n.scale+o.top+o.bottom,(n=n.segmentOrientation)===Nc||n===Ac||n===Lc?t=Math.max(t,r):n===Tc||n===Oc||n===Cc||n===jc?t=Math.max(t,s):(e=e.da(oe).Pa(i.da(oe))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*s)+Math.abs(Math.cos(e)*r)+1)),this.curve===bc&&(t*=1.333)}}return t},qu.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===xc&&i.Va()}},qu.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=Fc;var e=this.Mf;if(null!==e){for(var i=A(),n=0,r=e.links,o=0;o<r.length;o++){var s=r[o].computeSpacing();i.push(s),n+=s}for(n=-n/2,o=0;o<r.length;o++){if(r[o]===this){t=n+i[o]/2;break}n+=i[o]}e.Js===this.fromNode&&(t=-t),j(i)}}return t},qu.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},qu.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Mf},qu.prototype.adjustPoints=function(t,e,i,n){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===Sc)return!1;r===Pc&&(r=Mc)}switch(r){case Sc:var o=this.i(t),s=this.i(i);if(!o.Ua(e)||!s.Ua(n)){r=o.x,o=o.y;var a=s.x-r,h=s.y-o,l=Math.sqrt(a*a+h*h);if(!Xe.aa(l,0)){if(Xe.aa(a,0))var u=0>h?-Math.PI/2:Math.PI/2;else u=Math.atan(h/Math.abs(a)),0>a&&(u=Math.PI-u);s=e.x;var c=e.y;a=n.x-s;var f=n.y-c;for(h=Math.sqrt(a*a+f*f),Xe.aa(a,0)?f=0>f?-Math.PI/2:Math.PI/2:(f=Math.atan(f/Math.abs(a)),0>a&&(f=Math.PI-f)),l=h/l,u=f-u,this.Pc(t,e),t+=1;t<i;t++)a=(e=this.i(t)).x-r,h=e.y-o,e=Math.sqrt(a*a+h*h),Xe.aa(e,0)||(Xe.aa(a,0)?h=0>h?-Math.PI/2:Math.PI/2:(h=Math.atan(h/Math.abs(a)),0>a&&(h=Math.PI-h)),a=h+u,e*=l,this.M(t,s+e*Math.cos(a),c+e*Math.sin(a)));this.Pc(i,n)}}return!0;case Pc:if(o=this.i(t),c=this.i(i),!o.Ua(e)||!c.Ua(n)){r=o.x,o=o.y,l=((s=c.x)-r)*(s-r)+((c=c.y)-o)*(c-o),a=e.x,u=e.y,h=n.x,f=n.y;var d=1;if(0!=h-a){var p=(f-u)/(h-a);d=Math.sqrt(1+1/(p*p))}else p=9e9;for(this.Pc(t,e),t+=1;t<i;t++){var g=(e=this.i(t)).x,y=e.y,m=.5;0!==l&&(m=((r-g)*(r-s)+(o-y)*(o-c))/l);var v=r+m*(s-r),x=o+m*(c-o);e=Math.sqrt((g-v)*(g-v)+(y-x)*(y-x)),y<p*(g-v)+x&&(e=-e),0<p&&(e=-e),g=a+m*(h-a),m=u+m*(f-u),0!==p?(e=g+e/d,this.M(t,e,m-(e-g)/p)):this.M(t,g,m+e)}this.Pc(i,n)}return!0;case Mc:return this.isOrthogonal&&(r=this.i(t),o=this.i(t+1),s=this.i(t+2),c=a=o.x,l=u=o.y,Xe.w(r.y,o.y)?Xe.w(o.x,s.x)?u=e.y:Xe.w(o.y,s.y)&&(a=e.x):Xe.w(r.x,o.x)&&(Xe.w(o.y,s.y)?a=e.x:Xe.w(o.x,s.x)&&(u=e.y)),this.M(t+1,a,u),r=this.i(i),o=this.i(i-1),s=this.i(i-2),h=a=o.x,f=u=o.y,Xe.w(r.y,o.y)?Xe.w(o.x,s.x)?u=n.y:Xe.w(o.y,s.y)&&(a=n.x):Xe.w(r.x,o.x)&&(Xe.w(o.y,s.y)?a=n.x:Xe.w(o.x,s.x)&&(u=n.y)),this.M(i-1,a,u),ec(this))?(this.M(t+1,c,l),this.M(i-1,h,f),i=!1):(this.Pc(t,e),this.Pc(i,n),i=!0),i;default:return!1}},qu.prototype.addOrthoPoints=function(t,e,i,n,r,o){0>e?e+=360:360<=e&&(e-=360),0>n?n+=360:360<=n&&(n-=360);var s=n;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=315<=n||45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var a=r.actualBounds.copy(),h=o.actualBounds.copy();if(a.u()&&h.u()){a.Jc(Ic,Ic),h.Jc(Ic,Ic),a.Oe(t),h.Oe(i);var l=gt.alloc(),u=gt.alloc();0===e?i.x>t.x||270===n&&i.y<t.y&&h.right>t.x||90===n&&i.y>t.y&&h.right>t.x?(l.h(i.x,t.y),u.h(i.x,(t.y+i.y)/2),180===n?(l.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),u.x=l.x,u.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(l.x=t.x<h.left?this.computeMidOrthoPosition(t.x,t.y,h.left,i.y,!1):t.x<h.right&&(270===n&&t.y<h.top||90===n&&t.y>h.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):h.right,u.x=l.x,u.y=i.y):0===n&&t.x<h.left&&t.y>h.top&&t.y<h.bottom&&(l.x=t.x,l.y=t.y<i.y?Math.min(i.y,h.top):Math.max(i.y,h.bottom),u.y=l.y)):(l.h(t.x,i.y),u.h((t.x+i.x)/2,i.y),(180===n||90===n&&i.y<a.top||270===n&&i.y>a.bottom)&&(180===n&&(h.$(t)||a.$(i))?l.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(180===n||90===n)?l.y=this.computeMidOrthoPosition(t.x,a.top,i.x,Math.max(i.y,h.bottom),!0):i.y>t.y&&(180===n||270===n)&&(l.y=this.computeMidOrthoPosition(t.x,a.bottom,i.x,Math.min(i.y,h.top),!0)),u.x=i.x,u.y=l.y),l.y>a.top&&l.y<a.bottom&&(i.x>=a.left&&i.x<=t.x||t.x<=h.right&&t.x>=i.x?90!==n&&270!==n||(l.h(Math.max((t.x+i.x)/2,t.x),t.y),u.h(l.x,i.y)):(l.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,0===n?a.top:Math.min(a.top,h.top)):Math.max(i.y,0===n?a.bottom:Math.max(a.bottom,h.bottom)),u.x=i.x,u.y=l.y))):180===e?i.x<t.x||270===n&&i.y<t.y&&h.left<t.x||90===n&&i.y>t.y&&h.left<t.x?(l.h(i.x,t.y),u.h(i.x,(t.y+i.y)/2),0===n?(l.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),u.x=l.x,u.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(l.x=t.x>h.right?this.computeMidOrthoPosition(t.x,t.y,h.right,i.y,!1):t.x>h.left&&(270===n&&t.y<h.top||90===n&&t.y>h.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):h.left,u.x=l.x,u.y=i.y):180===n&&t.x>h.right&&t.y>h.top&&t.y<h.bottom&&(l.x=t.x,l.y=t.y<i.y?Math.min(i.y,h.top):Math.max(i.y,h.bottom),u.y=l.y)):(l.h(t.x,i.y),u.h((t.x+i.x)/2,i.y),(0===n||90===n&&i.y<a.top||270===n&&i.y>a.bottom)&&(0===n&&(h.$(t)||a.$(i))?l.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(0===n||90===n)?l.y=this.computeMidOrthoPosition(t.x,a.top,i.x,Math.max(i.y,h.bottom),!0):i.y>t.y&&(0===n||270===n)&&(l.y=this.computeMidOrthoPosition(t.x,a.bottom,i.x,Math.min(i.y,h.top),!0)),u.x=i.x,u.y=l.y),l.y>a.top&&l.y<a.bottom&&(i.x<=a.right&&i.x>=t.x||t.x>=h.left&&t.x<=i.x?90!==n&&270!==n||(l.h(Math.min((t.x+i.x)/2,t.x),t.y),u.h(l.x,i.y)):(l.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,180===n?a.top:Math.min(a.top,h.top)):Math.max(i.y,180===n?a.bottom:Math.max(a.bottom,h.bottom)),u.x=i.x,u.y=l.y))):90===e?i.y>t.y||180===n&&i.x<t.x&&h.bottom>t.y||0===n&&i.x>t.x&&h.bottom>t.y?(l.h(t.x,i.y),u.h((t.x+i.x)/2,i.y),270===n?(l.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),u.x=i.x,u.y=l.y):180===n&&i.x<t.x||0===n&&i.x>t.x?(l.y=t.y<h.top?this.computeMidOrthoPosition(t.x,t.y,i.x,h.top,!0):t.y<h.bottom&&(180===n&&t.x<h.left||0===n&&t.x>h.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):h.bottom,u.x=i.x,u.y=l.y):90===n&&t.y<h.top&&t.x>h.left&&t.x<h.right&&(l.x=t.x<i.x?Math.min(i.x,h.left):Math.max(i.x,h.right),l.y=t.y,u.x=l.x)):(l.h(i.x,t.y),u.h(i.x,(t.y+i.y)/2),(270===n||0===n&&i.x<a.left||180===n&&i.x>a.right)&&(270===n&&(h.$(t)||a.$(i))?l.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(270===n||0===n)?l.x=this.computeMidOrthoPosition(a.left,t.y,Math.max(i.x,h.right),i.y,!1):i.x>t.x&&(270===n||180===n)&&(l.x=this.computeMidOrthoPosition(a.right,t.y,Math.min(i.x,h.left),i.y,!1)),u.x=l.x,u.y=i.y),l.x>a.left&&l.x<a.right&&(i.y>=a.top&&i.y<=t.y||t.y<=h.bottom&&t.y>=i.y?0!==n&&180!==n||(l.h(t.x,Math.max((t.y+i.y)/2,t.y)),u.h(i.x,l.y)):(l.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,90===n?a.left:Math.min(a.left,h.left)):Math.max(i.x,90===n?a.right:Math.max(a.right,h.right)),u.x=l.x,u.y=i.y))):i.y<t.y||180===n&&i.x<t.x&&h.top<t.y||0===n&&i.x>t.x&&h.top<t.y?(l.h(t.x,i.y),u.h((t.x+i.x)/2,i.y),90===n?(l.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),u.x=i.x,u.y=l.y):180===n&&i.x<t.x||0===n&&i.x>=t.x?(l.y=t.y>h.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,h.bottom,!0):t.y>h.top&&(180===n&&t.x<h.left||0===n&&t.x>h.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):h.top,u.x=i.x,u.y=l.y):270===n&&t.y>h.bottom&&t.x>h.left&&t.x<h.right&&(l.x=t.x<i.x?Math.min(i.x,h.left):Math.max(i.x,h.right),l.y=t.y,u.x=l.x)):(l.h(i.x,t.y),u.h(i.x,(t.y+i.y)/2),(90===n||0===n&&i.x<a.left||180===n&&i.x>a.right)&&(90===n&&(h.$(t)||a.$(i))?l.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(90===n||0===n)?l.x=this.computeMidOrthoPosition(a.left,t.y,Math.max(i.x,h.right),i.y,!1):i.x>t.x&&(90===n||180===n)&&(l.x=this.computeMidOrthoPosition(a.right,t.y,Math.min(i.x,h.left),i.y,!1)),u.x=l.x,u.y=i.y),l.x>a.left&&l.x<a.right&&(i.y<=a.bottom&&i.y>=t.y||t.y>=h.top&&t.y<=i.y?0!==n&&180!==n||(l.h(t.x,Math.min((t.y+i.y)/2,t.y)),u.h(i.x,l.y)):(l.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,270===n?a.left:Math.min(a.left,h.left)):Math.max(i.x,270===n?a.right:Math.max(a.right,h.right)),u.x=l.x,u.y=i.y)));var c=i;if(this.isAvoiding){var f=this.diagram;if(null===f||r===o||this.layer.isTemporary||!Lo(f)||a.$(c)&&!o.Jd(r)||h.$(t)&&!r.Jd(o))e=!1;else{var d=Ao(f,!0,this.containingGroup,null);if(17!==this.segmentIndex&&d.dk(Math.min(t.x,l.x),Math.min(t.y,l.y),Math.abs(t.x-l.x),Math.abs(t.y-l.y))&&d.dk(Math.min(l.x,u.x),Math.min(l.y,u.y),Math.abs(l.x-u.x),Math.abs(l.y-u.y))&&d.dk(Math.min(u.x,c.x),Math.min(u.y,c.y),Math.abs(u.x-c.x),Math.abs(u.y-c.y)))e=!1;else{r=t,o=c;var p=i=null;if(f.isVirtualized){(f=d.bounds.copy()).Jc(-d.Qp,-d.Pp);var g=gt.alloc();Ec(d,t.x,t.y)||(Xe.Cf(f.x,f.y,f.x+f.width,f.y+f.height,t.x,t.y,l.x,l.y,g)?(i=t=g.copy(),e=g.Pa(l)):Xe.Cf(f.x,f.y,f.x+f.width,f.y+f.height,l.x,l.y,u.x,u.y,g)?(i=t=g.copy(),e=g.Pa(u)):Xe.Cf(f.x,f.y,f.x+f.width,f.y+f.height,u.x,u.y,c.x,c.y,g)&&(i=t=g.copy(),e=g.Pa(c))),Ec(d,c.x,c.y)||(Xe.Cf(f.x,f.y,f.x+f.width,f.y+f.height,c.x,c.y,u.x,u.y,g)?(p=c=g.copy(),n=u.Pa(g)):Xe.Cf(f.x,f.y,f.x+f.width,f.y+f.height,u.x,u.y,l.x,l.y,g)?(p=c=g.copy(),n=l.Pa(g)):Xe.Cf(f.x,f.y,f.x+f.width,f.y+f.height,l.x,l.y,t.x,t.y,g)&&(p=c=g.copy(),n=t.Pa(g))),gt.free(g)}(a=a.copy().Qc(h)).Jc(d.Qp*d.zy,d.Pp*d.zy),Uc(d,t,e,c,n,a,!0),h=_c(d,c.x,c.y),!d.abort&&h>=Wc&&(Vc(d),a.Jc(d.Qp*d.ey,d.Pp*d.ey),Uc(d,t,e,c,n,a,!1),h=_c(d,c.x,c.y)),!d.abort&&h<Wc&&_c(d,c.x,c.y)!==Kc?(ic(this,d,c.x,c.y,n,!0,s),a=this.i(2),4>this.pointsCount?(0===e||180===e?(a.x=t.x,a.y=c.y):(a.x=c.x,a.y=t.y),this.M(2,a.x,a.y),this.l(3,a.x,a.y)):(s=this.i(3),0===e||180===e?Xe.w(a.x,s.x)?(a=0===e?Math.max(a.x,t.x):Math.min(a.x,t.x),this.M(2,a,t.y),this.M(3,a,s.y)):Xe.w(a.y,s.y)?(Math.abs(t.y-a.y)<=d.Pp/2&&(this.M(2,a.x,t.y),this.M(3,s.x,t.y)),this.l(2,a.x,t.y)):this.M(2,t.x,a.y):90!==e&&270!==e||(Xe.w(a.y,s.y)?(a=90===e?Math.max(a.y,t.y):Math.min(a.y,t.y),this.M(2,t.x,a),this.M(3,s.x,a)):Xe.w(a.x,s.x)?(Math.abs(t.x-a.x)<=d.Qp/2&&(this.M(2,t.x,a.y),this.M(3,t.x,s.y)),this.l(2,t.x,a.y)):this.M(2,a.x,t.y))),null!==i&&(t=this.i(1),s=this.i(2),t.x!==s.x&&t.y!==s.y?0===e||180===e?this.l(2,t.x,s.y):this.l(2,s.x,t.y):0===e||180===e?this.l(2,r.x,i.y):this.l(2,i.x,r.y)),null!==p&&(0===n||180===n?this.tf(o.x,p.y):this.tf(p.x,o.y)),e=!0):e=!1}}}else e=!1;e||(this.ee(l.copy()),this.ee(u.copy())),gt.free(l),gt.free(u)}},qu.prototype.computeMidOrthoPosition=function(t,e,i,n,r){var o=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Nc()||this.computeSpot(!1,this.toPort).Nc()||(o=this.computeCurviness()),r?(e+n)/2+o:(t+i)/2+o},qu.prototype.Dz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),r=bt(e,t,i.x,i.y,n.x,n.y),o=0,s=1;s<this.pointsCount-1;s++){i=this.i(s+1);var a=bt(e,t,n.x,n.y,i.x,i.y);n=i,a<r&&(o=s,r=a)}return o},qu.prototype.fc=function(t){this.Bm=!1,t&&this.s()},qu.prototype.fk=function(t){if(!t){if(!1===this.td)return;if(t=this.pb(),this.Bm&&(null===t||null!==t.geometry))return}if(this.ma=this.makeGeometry(),null!==(t=this.path)){t.ma=this.ma;for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];r!==t&&r.isPanelMain&&r instanceof Hh&&(r.ma=this.ma)}}},qu.prototype.makeGeometry=function(){var t=this.ma,e=this.pointsCount;if(2>e)return t.type=Ue.j,this.Bm=!0,t;var i=!1,n=this.diagram;null!==n&&hc(this)&&n.Xh.contains(this)&&(0!==this.wl.width||0!==this.wl.height)&&(i=!0);var r=this.i(0).copy(),o=r.copy();n=this.Cb.m;var s=this.computeCurve();if(s===bc&&3<=e&&!Xe.aa(this.smoothness,0))if(3===e){var a=this.i(1);n=Math.min(r.x,a.x);var h=Math.min(r.y,a.y);a=this.i(2),n=Math.min(n,a.x),h=Math.min(h,a.y)}else{if(this.isOrthogonal)for(h=0;h<e;h++)a=n[h],o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),h=this.i(n),o.x=Math.min(h.x,o.x),o.y=Math.min(h.y,o.y);n=o.x,h=o.y}else{for(h=0;h<e;h++)a=n[h],o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);n=o.x,h=o.y}if(n-=this.lu.x,h-=this.lu.y,r.x-=n,r.y-=h,2!==e||hc(this)){if(t.type=Ue.o,a=Hl(t),0!==this.computeShortLength(!0)&&(r=rc(this,r,!0,o)),Gl(a,r.x,r.y,!1),s===bc&&3<=e&&!Xe.aa(this.smoothness,0))if(3===e)e=(i=this.i(1)).x-n,i=i.y-h,(r=this.i(2).copy()).x-=n,r.y-=h,0!==this.computeShortLength(!1)&&(r=rc(this,r,!1,o)),Ul(a,e,i,e,i,r.x,r.y);else if(this.isOrthogonal){e=gt.allocAt(n,h),(i=gt.alloc()).assign(this.i(1)),o=gt.allocAt(n,h),r=gt.allocAt(n,h),s=this.i(0);for(var l,u=this.smoothness/3,c=1;c<this.pointsCount-1;c++){var f=s,d=l=this.i(c),p=this.i(oc(this,l,c,!1));if(!(Xe.aa(f.x,d.x)&&Xe.aa(d.x,p.x)||Xe.aa(f.y,d.y)&&Xe.aa(d.y,p.y))){var g=u;isNaN(g)&&(g=this.smoothness/3);var y=f.x;f=f.y;var m=d.x;d=d.y;var v=p.x;p=p.y;var x=g*nc(y,f,m,d);g*=nc(m,d,v,p),Xe.aa(f,d)&&Xe.aa(m,v)&&(m>y?p>d?(o.x=m-x,o.y=d-x,r.x=m+g,r.y=d+g):(o.x=m-x,o.y=d+x,r.x=m+g,r.y=d-g):p>d?(o.x=m+x,o.y=d-x,r.x=m-g,r.y=d+g):(o.x=m+x,o.y=d+x,r.x=m-g,r.y=d-g)),Xe.aa(y,m)&&Xe.aa(d,p)&&(d>f?(v>m?(o.x=m-x,o.y=d-x,r.x=m+g):(o.x=m+x,o.y=d-x,r.x=m-g),r.y=d+g):(v>m?(o.x=m-x,o.y=d+x,r.x=m+g):(o.x=m+x,o.y=d+x,r.x=m-g),r.y=d-g)),(Xe.aa(y,m)&&Xe.aa(m,v)||Xe.aa(f,d)&&Xe.aa(d,p))&&(y=.5*(y+v),f=.5*(f+p),o.x=y,o.y=f,r.x=y,r.y=f),(1===c||2===c&&Xe.aa(s.x,this.i(0).x)&&Xe.aa(s.y,this.i(0).y))&&(i.x=.5*(s.x+l.x),i.y=.5*(s.y+l.y)),Ul(a,i.x-n,i.y-h,o.x-n,o.y-h,l.x-n,l.y-h),e.set(o),i.set(r),s=l}}l=s.x,s=s.y,u=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(u=rc(this,u.copy(),!1,nt)),l=.5*(l+u.x),s=.5*(s+u.y),Ul(a,r.x-n,r.y-h,l-n,s-h,u.x-n,u.y-h),gt.free(e),gt.free(i),gt.free(o),gt.free(r)}else for(i=3;i<e;i+=3)o=this.i(i-2),i+3>=e&&(i=e-1),r=this.i(i-1),s=this.i(i),i===e-1&&0!==this.computeShortLength(!1)&&(s=rc(this,s.copy(),!1,nt)),Ul(a,o.x-n,o.y-h,r.x-n,r.y-h,s.x-n,s.y-h);else{for((o=gt.alloc()).assign(this.i(0)),(r=gt.alloc()).assign(o),s=this.computeCorner(),c=1,l=0;c<e;){if(c=oc(this,o,c,1<c),u=this.i(c),c>=e-1){if(o.A(u)){if(0===l)for(c=1;c<e;)r.assign(o),sc(this,a,-n,-h,o,u=this.i(c++),i),o.assign(u)}else 0!==this.computeShortLength(!1)&&(u=rc(this,u.copy(),!1,nt)),sc(this,a,-n,-h,o,u,i);break}if(l=oc(this,u,c+1,c<e-3),c=-n,y=-h,f=u,m=this.i(l),g=i,Xe.w(o.y,f.y)&&Xe.w(f.x,m.x))if(p=Math.min(s,Math.abs(f.x-r.x)/2),p=x=Math.min(p,Math.abs(m.y-f.y)/2),Xe.w(p,0))sc(this,a,c,y,o,f,g),o.assign(f);else{var b=f.x,w=f.y;d=b,v=w,b=f.x>o.x?f.x-p:f.x+p,v=m.y>f.y?f.y+x:f.y-x,sc(this,a,c,y,o,m=gt.allocAt(b,w),g),gt.free(m),ql(a,f.x+c,f.y+y,d+c,v+y),o.h(d,v)}else Xe.w(o.x,f.x)&&Xe.w(f.y,m.y)?(p=Math.min(s,Math.abs(f.y-r.y)/2),p=x=Math.min(p,Math.abs(m.x-f.x)/2),Xe.w(x,0)?(sc(this,a,c,y,o,f,g),o.assign(f)):(d=b=f.x,v=w=f.y,w=f.y>o.y?f.y-p:f.y+p,d=m.x>f.x?f.x+x:f.x-x,sc(this,a,c,y,o,m=gt.allocAt(b,w),g),gt.free(m),ql(a,f.x+c,f.y+y,d+c,v+y),o.h(d,v))):(sc(this,a,c,y,o,f,g),o.assign(f));r.assign(u),c=l}gt.free(o)}Wl=a}else(a=this.i(1).copy()).x-=n,a.y-=h,0!==this.computeShortLength(!0)&&(r=rc(this,r,!0,o)),0!==this.computeShortLength(!1)&&(a=rc(this,a,!1,o)),t.type=Ue.j,t.startX=r.x,t.startY=r.y,t.endX=a.x,t.endY=a.y;return this.Bm=!0,t},qu.prototype.computeJumpLength=function(){return 10},qu.prototype.eq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var i=e.diagram;if(null!==i&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var r=i.value;if(r.visible)if(r===e){n=!0;for(var o=!1,s=(r=r.Ha.m).length,a=0;a<s;a++){var h=r[a];h instanceof qu&&(h===this?o=!0:o&&uc(this,h,t))}}else if(n)for(r=(o=r.Ha.m).length,s=0;s<r;s++)(a=o[s])instanceof qu&&uc(this,a,t)}}}},qu.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),r=t.i(0);if(n.Ua(r))return!0;if(e=this.i(e-1),t=t.i(i-1),e.Ua(t)||n.Ua(t)||e.Ua(r))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},qu.prototype.isVisible=function(){if(!Jl.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),null!==(i=this.fromNode)){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;null!==n;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(null===(i=i.findVisibleNode())||i===t)return!1}if(null!==(i=this.toNode)){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=i.findVisibleNode())||e===t)return!1}return!0},qu.prototype.Ob=function(t){if(Jl.prototype.Ob.call(this,t),null!==this.Mf&&this.Mf.cm(),null!==this.nd)for(var e=this.nd.iterator;e.next();)e.value.Ob(t)},qu.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?Mc:this.uk},qu.prototype.Hh=function(){return!0},f.Object.defineProperties(qu.prototype,{fromNode:{get:function(){return this.We},set:function(t){var e=this.We;if(e!==t){var i=this.fromPort;null!==e&&(this.pf!==e&&Tu(e,this,i),fc(this),this.B(2)),this.We=t,null!==t&&this.Ob(t.isVisible()),this.Qf=null,this.Va();var n=this.diagram;null!==n&&n.Z&&n.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,o=this.fromPortChanged;if(null!==o){var s=!0;null!==n&&(s=n.Z,n.Z=!0),o(this,i,r),null!==n&&(n.Z=s)}null!==t&&(this.pf!==t&&Cu(t,this,r),cc(this),this.B(1)),this.g(\"fromNode\",e,t),Ku(this)}}},fromPortId:{get:function(){return this.Xe},set:function(t){var e=this.Xe;if(e!==t){var i=this.fromPort;null!==i&&Pu(i),fc(this),this.Xe=t;var n=this.fromPort;null!==n&&Pu(n);var r=this.diagram;if(null!==r){var o=this.data,s=r.model;null!==o&&s.Pi()&&s.Hv(o,t)}i!==n&&(this.Qf=null,this.Va(),null!==(o=this.fromPortChanged)&&(s=!0,null!==r&&(s=r.Z,r.Z=!0),o(this,i,n),null!==r&&(r.Z=s))),cc(this),this.g(\"fromPortId\",e,t)}}},fromPort:{get:function(){var t=this.We;return null===t?null:t.rs(this.Xe)}},fromPortChanged:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.g(\"fromPortChanged\",e,t))}},toNode:{get:function(){return this.pf},set:function(t){var e=this.pf;if(e!==t){var i=this.toPort;null!==e&&(this.We!==e&&Tu(e,this,i),fc(this),this.B(2)),this.pf=t,null!==t&&this.Ob(t.isVisible()),this.Qf=null,this.Va();var n=this.diagram;null!==n&&n.Z&&n.partManager.setToNodeForLink(this,t,e);var r=this.toPort,o=this.toPortChanged;if(null!==o){var s=!0;null!==n&&(s=n.Z,n.Z=!0),o(this,i,r),null!==n&&(n.Z=s)}null!==t&&(this.We!==t&&Cu(t,this,r),cc(this),this.B(1)),this.g(\"toNode\",e,t),Ku(this)}}},toPortId:{get:function(){return this.qf},set:function(t){var e=this.qf;if(e!==t){var i=this.toPort;null!==i&&Pu(i),fc(this),this.qf=t;var n=this.toPort;null!==n&&Pu(n);var r=this.diagram;if(null!==r){var o=this.data,s=r.model;null!==o&&s.Pi()&&s.Lv(o,t)}i!==n&&(this.Qf=null,this.Va(),null!==(o=this.toPortChanged)&&(s=!0,null!==r&&(s=r.Z,r.Z=!0),o(this,i,n),null!==r&&(r.Z=s))),cc(this),this.g(\"toPortId\",e,t)}}},toPort:{get:function(){var t=this.pf;return null===t?null:t.rs(this.qf)}},toPortChanged:{get:function(){return this.Cp},set:function(t){var e=this.Cp;e!==t&&(this.Cp=t,this.g(\"toPortChanged\",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Og:Pe},set:function(t){this.Kc();var e=this.P.Og;e.A(t)||(t=t.I(),this.P.Og=t,this.g(\"fromSpot\",e,t),(e.Nc()||t.Nc())&&null!==this.fromNode&&Pu(this.fromPort),this.Va())}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Mg:NaN},set:function(t){this.Kc();var e=this.P.Mg;e!==t&&(0>t&&M(t,\">= 0\",qu,\"fromEndSegmentLength\"),this.P.Mg=t,this.g(\"fromEndSegmentLength\",e,t),this.Va())}},fromShortLength:{get:function(){return null!==this.P?this.P.Ng:NaN},set:function(t){this.Kc();var e=this.P.Ng;e!==t&&(this.P.Ng=t,this.fc(!0),this.g(\"fromShortLength\",e,t))}},toSpot:{get:function(){return null!==this.P?this.P.th:Pe},set:function(t){this.Kc();var e=this.P.th;e.A(t)||(t=t.I(),this.P.th=t,this.g(\"toSpot\",e,t),(e.Nc()||t.Nc())&&null!==this.toNode&&Pu(this.toPort),this.Va())}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.rh:NaN},set:function(t){this.Kc();var e=this.P.rh;e!==t&&(0>t&&M(t,\">= 0\",qu,\"toEndSegmentLength\"),this.P.rh=t,this.g(\"toEndSegmentLength\",e,t),this.Va())}},toShortLength:{get:function(){return null!==this.P?this.P.sh:NaN},set:function(t){this.Kc();var e=this.P.sh;e!==t&&(this.P.sh=t,this.fc(!0),this.g(\"toShortLength\",e,t))}},isLabeledLink:{get:function(){return null!==this.nd&&0<this.nd.count}},labelNodes:{get:function(){return null===this.nd?U:this.nd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Ia)},set:function(t){var e=0!=(1&this.Ia);e!==t&&(this.Ia^=1,this.g(\"relinkableFrom\",e,t),this.Lb())}},relinkableTo:{get:function(){return 0!=(2&this.Ia)},set:function(t){var e=0!=(2&this.Ia);e!==t&&(this.Ia^=2,this.g(\"relinkableTo\",e,t),this.Lb())}},resegmentable:{get:function(){return 0!=(4&this.Ia)},set:function(t){var e=0!=(4&this.Ia);e!==t&&(this.Ia^=4,this.g(\"resegmentable\",e,t),this.Lb())}},isTreeLink:{get:function(){return 0!=(8&this.Ia)},set:function(t){var e=0!=(8&this.Ia);e!==t&&(this.Ia^=8,this.g(\"isTreeLink\",e,t),null!==this.fromNode&&Lu(this.fromNode),null!==this.toNode&&Lu(this.toNode))}},path:{get:function(){var t=this.pb();return t instanceof Hh?t:null}},routeBounds:{get:function(){this.ug();var t=this.wl,e=1/0,i=1/0,n=this.pointsCount;if(0===n)t.h(NaN,NaN,0,0);else{if(1===n)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(2===n){n=this.i(0);var r=this.i(1);e=Math.min(n.x,r.x),i=Math.min(n.y,r.y),t.h(n.x,n.y,0,0),t.Oe(r)}else if(this.computeCurve()===bc&&3<=n&&!this.isOrthogonal)if(e=(r=this.i(0)).x,i=r.y,t.h(e,i,0,0),3===n){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var o=this.i(2);e=Math.min(o.x,e),i=Math.min(o.y,i),Xe.Tl(r.x,r.y,n.x,n.y,n.x,n.y,o.x,o.y,.5,t)}else for(o=3;o<n;o+=3){var s=this.i(o-2);o+3>=n&&(o=n-1);var a=this.i(o-1),h=this.i(o);Xe.Tl(r.x,r.y,s.x,s.y,a.x,a.y,h.x,h.y,.5,t),e=Math.min(h.x,e),i=Math.min(h.y,i),r=h}else for(r=this.i(0),o=this.i(1),e=Math.min(r.x,o.x),i=Math.min(r.y,o.y),t.h(r.x,r.y,0,0),t.Oe(o),r=2;r<n;r++)o=this.i(r),e=Math.min(o.x,e),i=Math.min(o.y,i),t.Oe(o);this.lu.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.ug(),this.computeMidPoint(new gt)}},midAngle:{get:function(){return this.ug(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.cr){this.td||Zu(this);for(var t=this.cr=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),r=this.i(i+1);Xe.aa(n.x,r.x)?0>(n=r.y-n.y)&&(n=-n):Xe.aa(n.y,r.y)?0>(n=r.x-n.x)&&(n=-n):n=Math.sqrt(n.xf(r)),t.push(n)}}return this.cr}},flattenedTotalLength:{get:function(){var t=this.Gt;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.Gt=t}return t}},points:{get:function(){return this.Cb},set:function(t){var e=this.Cb;if(e!==t){var i=null;if(Array.isArray(t)){var n=0==t.length%2;if(n)for(var r=0;r<t.length;r++)if(\"number\"!=typeof t[r]||isNaN(t[r])){n=!1;break}if(n)for(i=new J,n=0;n<t.length/2;n++)r=new gt(t[2*n],t[2*n+1]).freeze(),i.add(r);else{for(n=!0,r=0;r<t.length;r++){var o=t[r];if(!P(o)||\"number\"!=typeof o.x||isNaN(o.x)||\"number\"!=typeof o.y||isNaN(o.y)){n=!1;break}}if(n)for(i=new J,n=0;n<t.length;n++)r=t[n],i.add(new gt(r.x,r.y).freeze())}}else if(t instanceof J)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else w(\"Link.points value is not an instance of List or Array: \"+t);i.freeze(),this.Cb=i,this.fc(!0),Zu(this),null!==(t=this.diagram)&&(t.Oi||t.undoManager.isUndoingRedoing||t.Gs.add(this),t.animationManager.tb&&(t=t.animationManager,this.gf=i,t.yl.add(this))),this.g(\"points\",e,i)}}},pointsCount:{get:function(){return this.Cb.count}},td:{get:function(){return 0!=(16&this.Ia)},set:function(t){0!=(16&this.Ia)!==t&&(this.Ia^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Ia)},set:function(t){0!=(32&this.Ia)!==t&&(this.Ia^=32)}},computingPoints:{get:function(){return 0!=(64&this.Ia)},set:function(t){0!=(64&this.Ia)!==t&&(this.Ia^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.D},set:function(t){this.D=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.Cj.value)}},isAvoiding:{get:function(){return 4==(4&this.Cj.value)}},Bm:{get:function(){return 0!=(128&this.Ia)},set:function(t){0!=(128&this.Ia)!==t&&(this.Ia^=128)}},geometry:{get:function(){return this.Bm||(this.ug(),this.ma=this.makeGeometry()),this.ma}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Qu(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!Qu(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.uk},set:function(t){var e=this.uk;e!==t&&(this.uk=t,this.g(\"adjusting\",e,t))}},corner:{get:function(){return this.fn},set:function(t){var e=this.fn;e!==t&&(this.fn=t,this.fc(!0),this.g(\"corner\",e,t))}},curve:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,this.Va(),this.fc(!0),lc(this,e===wc||e===kc||t===wc||t===kc),this.g(\"curve\",e,t))}},curviness:{get:function(){return this.jn},set:function(t){var e=this.jn;e!==t&&(this.jn=t,this.Va(),this.fc(!1),this.g(\"curviness\",e,t))}},routing:{get:function(){return this.Cj},set:function(t){var e=this.Cj;e!==t&&(this.Cj=t,this.Qf=null,this.Va(),lc(this,2==(2&e.value)||2==(2&t.value)),this.g(\"routing\",e,t))}},smoothness:{get:function(){return this.qp},set:function(t){var e=this.qp;e!==t&&(this.qp=t,this.fc(!0),this.g(\"smoothness\",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.Pi())return t.model.pc(this.data)}}}),qu.prototype.invalidateOtherJumpOvers=qu.prototype.eq,qu.prototype.findClosestSegment=qu.prototype.Dz,qu.prototype.updateRoute=qu.prototype.ug,qu.prototype.invalidateRoute=qu.prototype.Va,qu.prototype.rollbackRoute=qu.prototype.Cv,qu.prototype.commitRoute=qu.prototype.vf,qu.prototype.startRoute=qu.prototype.Lh,qu.prototype.clearPoints=qu.prototype.Pj,qu.prototype.removePoint=qu.prototype.Av,qu.prototype.addPointAt=qu.prototype.tf,qu.prototype.addPoint=qu.prototype.ee,qu.prototype.insertPointAt=qu.prototype.l,qu.prototype.insertPoint=qu.prototype.iA,qu.prototype.setPointAt=qu.prototype.M,qu.prototype.setPoint=qu.prototype.Pc,qu.prototype.getPoint=qu.prototype.i,qu.prototype.getOtherPort=qu.prototype.$z,qu.prototype.getOtherNode=qu.prototype.$p;var dc=null,pc=null,gc=new V(qu,\"Normal\",1),yc=new V(qu,\"Orthogonal\",2),mc=new V(qu,\"AvoidsNodes\",6),vc=new V(qu,\"AvoidsNodesStraight\",7),xc=new V(qu,\"None\",0),bc=new V(qu,\"Bezier\",9),wc=new V(qu,\"JumpGap\",10),kc=new V(qu,\"JumpOver\",11),Mc=new V(qu,\"End\",17),Sc=new V(qu,\"Scale\",18),Pc=new V(qu,\"Stretch\",19),Nc=new V(qu,\"OrientAlong\",21),Cc=new V(qu,\"OrientPlus90\",22),Tc=new V(qu,\"OrientMinus90\",23),Lc=new V(qu,\"OrientOpposite\",24),Ac=new V(qu,\"OrientUpright\",25),jc=new V(qu,\"OrientPlus90Upright\",26),Oc=new V(qu,\"OrientMinus90Upright\",27),Dc=new V(qu,\"OrientUpright45\",28),Fc=16,Bc=14,Ic=8;function zc(t,e,i,n){tt(this),this.ue=this.ir=!1,this.Js=t,this.my=e,this.nv=i,this.ny=n,this.links=[]}function Rc(){tt(this),this.yy=this.group=null,this.zs=!0,this.abort=!1,this.zd=this.yd=1,this.po=this.oo=-1,this.hc=this.gc=8,this.Tb=null,this.zi=this.yi=0,this.zy=11,this.ey=124}function Ec(t,e,i){return t.yd<=e&&e<=t.oo&&t.zd<=i&&i<=t.po}function _c(t,e,i){return Ec(t,e,i)?(e-=t.yd,e/=t.gc,i-=t.zd,i/=t.hc,t.Tb[0|e][0|i]):Zc}function Vc(t){if(null!==t.Tb)for(var e=0;e<=t.yi;e++)for(var i=t.Tb[e],n=0;n<=t.zi;n++)i[n]>=Hc&&(i[n]=Zc)}function Yc(t,e,i,n,r,o,s,a,h){if(!(e<o||e>s||i<a||i>h)){var l=0|e,u=0|i,c=t.Tb[l][u];if(c>=Hc&&c<Wc)for(r?u+=n:l+=n,c+=1;o<=l&&l<=s&&a<=u&&u<=h&&!(c>=t.Tb[l][u]);)t.Tb[l][u]=c,c+=1,r?u+=n:l+=n;if(l=r?u:l,r)if(0<n)for(i+=n;i<l;i+=n)Yc(t,e,i,1,!r,o,s,a,h),Yc(t,e,i,-1,!r,o,s,a,h);else for(i+=n;i>l;i+=n)Yc(t,e,i,1,!r,o,s,a,h),Yc(t,e,i,-1,!r,o,s,a,h);else if(0<n)for(e+=n;e<l;e+=n)Yc(t,e,i,1,!r,o,s,a,h),Yc(t,e,i,-1,!r,o,s,a,h);else for(e+=n;e>l;e+=n)Yc(t,e,i,1,!r,o,s,a,h),Yc(t,e,i,-1,!r,o,s,a,h)}}function Gc(t,e,i,n,r,o,s,a,h){e|=0,i|=0;var l=Kc,u=Hc;for(t.Tb[e][i]=u;l===Kc&&e>o&&e<s&&i>a&&i<h;)u+=1,t.Tb[e][i]=u,r?i+=n:e+=n,l=t.Tb[e][i]}function Xc(t,e,i,n,r,o,s,a,h){e|=0,i|=0;var l=Kc,u=Wc;for(t.Tb[e][i]=u;l===Kc&&e>o&&e<s&&i>a&&i<h;)t.Tb[e][i]=u,r?i+=n:e+=n,l=t.Tb[e][i]}function Uc(t,e,i,n,r,o,s){if(null!==t.Tb){t.abort=!1;var a=e.x,h=e.y;if(Ec(t,a,h)){a-=t.yd,a/=t.gc,h-=t.zd,h/=t.hc;var l=n.x,u=n.y;if(Ec(t,l,u))if(l-=t.yd,l/=t.gc,u-=t.zd,u/=t.hc,1>=Math.abs(a-l)&&1>=Math.abs(h-u))t.abort=!0;else{var c=o.x;n=o.y,e=o.x+o.width;var f=o.y+o.height;c-=t.yd,c/=t.gc,n-=t.zd,n/=t.hc,e-=t.yd,e/=t.gc,f-=t.zd,f/=t.hc,o=Math.max(0,Math.min(t.yi,0|c)),e=Math.min(t.yi,Math.max(0,0|e)),c=Math.max(0,Math.min(t.zi,0|n)),f=Math.min(t.zi,Math.max(0,0|f)),h|=0,l|=0,u|=0;var d=0===i||90===i?1:-1;if(i=90===i||270===i,(n=t.Tb)[a|=0][h]===Kc?(Gc(t,a,h,d,i,o,e,c,f),Gc(t,a,h,1,!i,o,e,c,f),Gc(t,a,h,-1,!i,o,e,c,f)):Gc(t,a,h,d,i,a,h,a,h),n[l][u]===Kc?(Xc(t,l,u,0===r||90===r?1:-1,90===r||270===r,o,e,c,f),Xc(t,l,u,1,!(90===r||270===r),o,e,c,f),Xc(t,l,u,-1,!(90===r||270===r),o,e,c,f)):Xc(t,l,u,d,i,l,u,l,u),i=A(),s&&qc(t,l,u,r,a,h,i))for(i[0]===l&&i[1]===u||(i.unshift(u),i.unshift(l)),i[i.length-2]===a&&i[i.length-1]===h||(i.push(a),i.push(h)),t=Hc,r=i[i.length-2],s=i[i.length-1],n[r][s]=t++,o=i.length-4;0<=o;o-=2)for(r=i[o+2],s=i[o+3],e=i[o],l=i[o+1];e>r?r++:e<r?r--:l>s?s++:l<s&&s--,n[r][s]=t++,r!==e||s!==l;);else Yc(t,a,h,1,!1,o,e,c,f),Yc(t,a,h,-1,!1,o,e,c,f),Yc(t,a,h,1,!0,o,e,c,f),Yc(t,a,h,-1,!0,o,e,c,f);j(i)}}}}function qc(t,e,i,n,r,o,s){for(var a=t.Tb,h=e,l=i;;){if(h===r&&l===o)return!0;var u=h,c=l;if(0===n){if(!(u<r))break;u++}else if(90===n){if(!(c<o))break;c++}else if(180===n){if(!(u>r))break;u--}else{if(!(c>o))break;c--}var f=a[u][c];if(0===f||f===Jc)break;h=u,l=c}for(;;){if(u=n,c=h,f=l,0===n?f<o?(u=90,f++):f>o&&(u=270,f--):90===n?c<r?(u=0,c++):c>r&&(u=180,c--):180===n?f<o?(u=90,f++):f>o&&(u=270,f--):c<r?(u=0,c++):c>r&&(u=180,c--),c=a[c][f],u!==n&&0!==c&&c!==Jc){if(s.push(h),s.push(l),qc(t,h,l,u,r,o,s))return!0;s.pop(),s.pop()}if(a[h][l]=Jc,0===n){if(h===e)return!1;h--}else if(90===n){if(l===i)return!1;l--}else if(180===n){if(h===e)return!1;h++}else{if(l===i)return!1;l++}}}qu.className=\"Link\",qu.Normal=gc,qu.Orthogonal=yc,qu.AvoidsNodes=mc,qu.AvoidsNodesStraight=vc,qu.None=xc,qu.Bezier=bc,qu.JumpGap=wc,qu.JumpOver=kc,qu.End=Mc,qu.Scale=Sc,qu.Stretch=Pc,qu.OrientAlong=Nc,qu.OrientPlus90=Cc,qu.OrientMinus90=Tc,qu.OrientOpposite=Lc,qu.OrientUpright=Ac,qu.OrientPlus90Upright=jc,qu.OrientMinus90Upright=Oc,qu.OrientUpright45=Dc,qu.EndSegmentStep=8,qu.CurvinessStart=Fc,qu.SpacingMin=Bc,qu.OrthoShortCut=Ic,qu.AvoidanceCell=8,qu.AvoidanceLimit=999,zc.prototype.cm=function(){if(!this.ir){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.Ow.add(this),this.ue=t.undoManager.isUndoingRedoing)}this.ir=!0},zc.prototype.Xv=function(){if(this.ir){this.ir=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=null===i||i.Oi&&!this.ue,this.ue=!1,e.arrangeBundledLinks(t,i),1===t.length&&(e.Mf=null,t.length=0)}0===t.length&&(t=this.Js,null!==this&&null!==t.Te&&t.Te.remove(this),t=this.nv,null!==this&&null!==t.Te&&t.Te.remove(this))}},zc.className=\"LinkBundle\",Rc.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.yd=Math.floor((t.x-this.gc)/this.gc)*this.gc,this.zd=Math.floor((e-this.hc)/this.hc)*this.hc,this.oo=Math.ceil((i+2*this.gc)/this.gc)*this.gc,this.po=Math.ceil((n+2*this.hc)/this.hc)*this.hc,t=1+(0|Math.ceil((this.oo-this.yd)/this.gc)),e=1+(0|Math.ceil((this.po-this.zd)/this.hc)),null===this.Tb||this.yi<t-1||this.zi<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.Tb=i,this.yi=t-1,this.zi=e-1}if(t=Zc,null!==this.Tb)for(e=0;e<=this.yi;e++)if((i=this.Tb[e]).fill)i.fill(t);else for(n=0;n<=this.zi;n++)i[n]=t}},Rc.prototype.dk=function(t,e,i,n){if(t>this.oo||t+i<this.yd||e>this.po||e+n<this.zd)return!0;t=(t-this.yd)/this.gc|0,e=(e-this.zd)/this.hc|0,i=Math.max(0,i)/this.gc+1|0;var r=Math.max(0,n)/this.hc+1|0;if(0>t&&(i+=t,t=0),0>e&&(r+=e,e=0),0>i||0>r)return!0;for(n=0|Math.min(t+i-1,this.yi),i=0|Math.min(e+r-1,this.zi);t<=n;t++){r=this.Tb[t];for(var o=e;o<=i;o++)if(r[o]===Kc)return!1}return!0},f.Object.defineProperties(Rc.prototype,{bounds:{get:function(){return new Bt(this.yd,this.zd,this.oo-this.yd,this.po-this.zd)}},Qp:{get:function(){return this.gc},set:function(t){0<t&&t!==this.gc&&(this.gc=t,this.initialize(this.bounds))}},Pp:{get:function(){return this.hc},set:function(t){0<t&&t!==this.hc&&(this.hc=t,this.initialize(this.bounds))}}});var Kc=0,Hc=1,Wc=999999,Zc=Wc+1,Jc=Wc+2;function $c(){tt(this),this.port=this.node=null,this.ge=[],this.hq=!1}function Qc(t,e,i,n){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&15!==e&&0>(i-=15)&&(i+=360),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}function tf(t,e){var i=t.ge;if(0===i.length){t:if(!t.hq){i=t.hq,t.hq=!0;var n=null,r=t.node,o=r instanceof _u?r:null;if(null===o||o.isSubGraphExpanded)var s=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.Mx();else{if(!o.actualBounds.u()){t.hq=i;break t}s=(n=o).Mu()}o=t.ge.length=0;var a=t.port.da(ee,gt.alloc()),h=t.port.da(le,gt.alloc());for((r=Bt.allocAt(a.x,a.y,0,0)).Oe(h),gt.free(a),gt.free(h),a=gt.allocAt(r.x+r.width/2,r.y+r.height/2),h=t.port.Ki(),s=s.iterator;s.next();){var l=s.value;if(l.isVisible()&&l.fromPort!==l.toPort){var u=l.fromPort===t.port||null!==l.fromNode&&l.fromNode.Jd(n),c=l.computeSpot(u,t.port);if(c.Nc()){var f=u?l.toPort:l.fromPort;if(null!==f&&null!==(u=f.part)){var d=u.findVisibleNode();null!==d&&d!==u&&(f=(u=d).port),u=l.computeOtherPoint(u,f),f=a.Pa(f.da(oe)),f+=(a.Pa(u)-f)/360,0>(f-=h)?f+=360:360<=f&&(f-=360),0===(c=Qc(r,c,f,l.isOrthogonal))?(c=4,180<f&&(f-=360)):90===c?(c=8,270<f&&(f-=360)):180===c?c=2:(c=1,90>f&&(f+=360)),void 0===(d=t.ge[o])?(d=new ef(l,f,c),t.ge[o]=d):(d.link=l,d.angle=f,d.Ac=c),d.qv.set(u),o++}}}}for(gt.free(a),t.ge.sort($c.prototype.j),h=t.ge.length,n=-1,o=a=0;o<h;o++)void 0!==(s=t.ge[o])&&(s.Ac!==n&&(n=s.Ac,a=0),s.aq=a,a++);for(n=-1,a=0,o=h-1;0<=o;o--)void 0!==(h=t.ge[o])&&(h.Ac!==n&&(n=h.Ac,a=h.aq+1),h.Wl=a);if(o=t.ge,c=t.port,n=t.node.portSpreading,a=gt.alloc(),h=gt.alloc(),s=gt.alloc(),l=gt.alloc(),c.da(ee,a),c.da(ne,h),c.da(le,s),c.da(ae,l),d=f=u=c=0,n===Eu)for(var p=0;p<o.length;p++){var g=o[p];if(null!==g){var y=g.link.computeThickness();switch(g.Ac){case 8:f+=y;break;case 2:d+=y;break;case 1:c+=y;break;default:u+=y}}}var m=p=0,v=1,x=g=0;for(y=0;y<o.length;y++){var b=o[y];if(null!==b){if(p!==b.Ac){switch(p=b.Ac){case 8:var w=s;m=l;break;case 2:w=l,m=a;break;case 1:w=a,m=h;break;default:w=h,m=s}switch(g=m.x-w.x,x=m.y-w.y,p){case 8:f>Math.abs(g)?(v=Math.abs(g)/f,f=Math.abs(g)):v=1;break;case 2:d>Math.abs(x)?(v=Math.abs(x)/d,d=Math.abs(x)):v=1;break;case 1:c>Math.abs(g)?(v=Math.abs(g)/c,c=Math.abs(g)):v=1;break;default:u>Math.abs(x)?(v=Math.abs(x)/u,u=Math.abs(x)):v=1}m=0}var k=b.gq;if(n===Eu){switch(b=b.link.computeThickness(),b*=v,k.set(w),p){case 8:k.x=w.x+g/2+f/2-m-b/2;break;case 2:k.y=w.y+x/2+d/2-m-b/2;break;case 1:k.x=w.x+g/2-c/2+m+b/2;break;default:k.y=w.y+x/2-u/2+m+b/2}m+=b}else{var M=.5;n===Ru&&(M=(b.aq+1)/(b.Wl+1)),k.x=w.x+g*M,k.y=w.y+x*M}}}for(gt.free(a),gt.free(h),gt.free(s),gt.free(l),w=t.ge,o=0;o<w.length;o++)null!==(n=w[o])&&(n.Ju=t.computeEndSegmentLength(n));t.hq=i,Bt.free(r)}i=t.ge}for(t=0;t<i.length;t++)if(null!==(r=i[t])&&r.link===e)return r;return null}function ef(t,e,i){this.link=t,this.angle=e,this.Ac=i,this.qv=new gt,this.Wl=this.aq=0,this.gq=new gt,this.Ju=0}function nf(){this.th=this.Og=Pe,this.sh=this.Ng=this.rh=this.Mg=NaN,this.Ap=this.An=null,this.Bp=this.Bn=1/0}function rf(t){tt(this),this.o=this.C=null,this.$h=this.Un=!0,this.$n=!1,this.Qm=new gt(0,0).freeze(),this.Xn=!0,this.Um=this.Wn=null,this.Zn=!1,this.j=null,this.D=0,this.qo=this.Hp=null,this.gs=!1,this.kg=this.Ej=null,this.Xr=!1,t&&Object.assign(this,t)}function of(t,e,i,n,r,o,s,a){for(i=i.iterator;i.next();){var h=i.value;n&&!h.isTopLevel||null!==r&&!r(h)||!h.canLayout()||(o&&h instanceof wu?h.isLinkLabel||(h instanceof _u&&null===h.layout?of(t,e,h.memberParts,!1,r,o,s,a):(sf(h),e.add(h))):s&&h instanceof qu?e.add(h):!a||!h.Mc()||h instanceof wu||(sf(h),e.add(h)))}}function sf(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Ta()}function af(t,e){if(null!==t.workerStateChanged){var i={key:t.group?t.group.key:null};void 0!==e&&(i.time=e),null!==t.Ej&&(i.running=hf(t.Ej)),null!==t.kg&&(i.waiting=hf(t.kg)),t.workerStateChanged(i,t)}}function hf(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function lf(t,e){var i=uf(t);if(!i)throw Error(\"Unknown Layout class: \"+t);if(e)for(var n in e)i[n]=e[n]}function uf(t){var e=null;if(\"function\"==typeof t){if(!(e=pf.get(t))){var i=O(t);(e=pf.get(i))||((e=new mf).Eu=t,e.name=i,e.j=t.name,e.Yx=gf,pf.set(i,e),pf.set(t,e),pf.set(t.name,e))}}else\"string\"==typeof t&&(e=pf.get(t));return e}function cf(t,e){t.gs=!0;var i=uf(t.constructor),n=ff(t,e,!0);n._GoJS=\"_GoJS\",i.Pe.postMessage(n),i.em.set(it(t),t),t.Ej=e}function ff(t,e,i){t.onNetworkSerialization(1,i,e,null);var n={};t.serializeLayoutProperties(n,i);var r=[];e.vertexes.each((function(t){var e={};t.serializeVertexProperties(e,i),r.push(e)}));var o=[];return e.edges.each((function(t){var e={};t.serializeEdgeProperties(e,i),o.push(e)})),n={id:i?it(t):t.id,layout:O(t.constructor),p:n,XA:r,Bz:o},t.onNetworkSerialization(2,i,e,n),n}function df(t,e,i){i&&(t.id=e.id);var n=t.diagram,r=t.createNetwork();t.onNetworkSerialization(3,i,r,e);var o=e.XA,s=new pt;o&&o.forEach((function(t){var e=null;null===t.key||null===n||i||(e=n.Eb(t.key)),null!==e?e=r.Nj(e):(e=r.createVertex(),r.ng(e)),i&&null!==t.key&&(e.data={di:t.key}),s.set(t.id,e)}));var a=e.Bz,h=new pt;return a&&a.forEach((function(t){var e=null;null===t.key||null===n||i||(e=n.findLinkForKey(t.key));var o=r.createEdge();r.Rl(o),o.link=e,i&&null!==t.key&&(o.data={di:t.key}),h.set(t.id,o)})),o&&o.forEach((function(t){var e=s.get(t.id);e&&e.deserializeVertexProperties(t,s,h,i)})),a&&a.forEach((function(t){var e=h.get(t.id);e&&e.deserializeEdgeProperties(t,s,h,i)})),t.deserializeLayoutProperties(e.p,s,h,i,r),t.onNetworkSerialization(4,i,r,e),r}Rc.className=\"PositionArray\",$c.prototype.toString=function(){for(var t=this.ge,e=this.node.toString()+\" \"+t.length.toString()+\":\",i=0;i<t.length;i++){var n=t[i];null!==n&&(e+=\"\\n  \"+n.toString())}return e},$c.prototype.cm=function(){this.ge.length=0},$c.prototype.j=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},$c.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,te,e.fromPort===this.port),n=t.aq;if(0>n)return i;var r=t.Wl;if(1>=r||!e.isOrthogonal)return i;e=t.qv;var o=t.gq;return 2!==t.Ac&&8!==t.Ac||(n=r-1-n),((t=2===t.Ac||4===t.Ac)?e.y<o.y:e.x<o.x)?i+8*n:(t?e.y===o.y:e.x===o.x)?i:i+8*(r-1-n)},$c.className=\"Knot\",ef.prototype.toString=function(){return this.link.toString()+\" \"+this.angle.toString()+\" \"+this.Ac.toString()+\":\"+this.aq.toString()+\"/\"+this.Wl.toString()+\" \"+this.gq.toString()+\" \"+this.Ju.toString()+\" \"+this.qv.toString()},ef.className=\"LinkInfo\",nf.prototype.copy=function(){var t=new nf;return t.Og=this.Og.I(),t.th=this.th.I(),t.Mg=this.Mg,t.rh=this.rh,t.Ng=this.Ng,t.sh=this.sh,t.An=this.An,t.Ap=this.Ap,t.Bn=this.Bn,t.Bp=this.Bp,t},nf.className=\"LinkSettings\",rf.prototype.cloneProtected=function(t){t.Un=this.Un,t.$h=this.$h,t.$n=this.$n,t.Qm.assign(this.Qm),t.Xn=this.Xn,t.Wn=this.Wn,t.Um=this.Um,t.Zn=!0,t.qo=this.qo,t.Hp=this.Hp},rf.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},rf.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},rf.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new gt(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},rf.prototype.gb=function(){},rf.prototype.toString=function(){var t=O(this.constructor);return t+=\"(\",null!==this.group&&(t+=\" in \"+this.group),null!==this.diagram&&(t+=\" for \"+this.diagram),t+\")\"},rf.prototype.B=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.qc(),this.isOngoing&&t.Oi||this.isInitial&&!t.Oi)&&(this.isValidLayout=!1,t.Fb())}}},rf.prototype.createNetwork=function(){return new vf(this)},rf.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof Pr?(e.mg(t.nodes,!0),e.mg(t.links,!0)):t instanceof _u?e.mg(t.memberParts):e.mg(t.iterator),e},rf.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(null!==i&&null!==(t=i.diagram))break}try{null!==t&&t.xa(\"Layout\"),this.commitLayout()}finally{null!==t&&t.Xa(\"Layout\")}}},rf.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},rf.prototype.doLayout=function(t){var e=new Q;t instanceof Pr?(of(this,e,t.nodes,!0,this.Jh,!0,!1,!0),of(this,e,t.parts,!0,this.Jh,!0,!1,!0)):t instanceof _u?of(this,e,t.memberParts,!1,this.Jh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.xa(\"Layout\"),this.doMinimalNoNetworkLayout(e),null!==t&&t.Xa(\"Layout\")),this.isValidLayout=!0},rf.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,r=this.arrangementOrigin.y,o=0,s=0;for(t=t.iterator;t.next();){var a=t.value;sf(a);var h=a.measuredBounds,l=h.width;h=h.height,a.moveTo(n,r),a instanceof _u&&(a.Jh=!1),n+=Math.max(l,50)+20,s=Math.max(s,Math.max(h,50)),o>=e-1?(o=0,n=i,r+=s+20,s=0):o++}},rf.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,r=0,o=0,s=this.network.vertexes.iterator;s.next();){var a=s.value.node;if(!(null===a||a instanceof qu)&&(sf(a),this.Jh(a))){var h=a.measuredBounds,l=h.width;h=h.height,a.moveTo(i,n),a instanceof _u&&(a.Jh=!1),i+=Math.max(l,50)+20,o=Math.max(o,Math.max(h,50)),r>=t-1?(r=0,i=e,n+=o+20,o=0):r++}}},rf.prototype.Jh=function(t){return!(t.location.u()&&!(t instanceof _u&&t.Jh))},rf.prototype.Mi=function(t,e){var i=this.boundsComputation;return null!==i?(e||(e=new Bt),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},rf.prototype.Ax=function(t){var e=new Q;return t instanceof Pr?(of(this,e,t.nodes,!0,null,!0,!0,!0),of(this,e,t.links,!0,null,!0,!0,!0),of(this,e,t.parts,!0,null,!0,!0,!0)):of(this,e,t instanceof _u?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},rf.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),null!==(e=e.placeholder)&&(i=e.da(ee),(isNaN(i.x)||isNaN(i.y))&&i.set(t),t=e.padding,i.x+=t.left,i.y+=t.top),i}return t},rf.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},rf.prototype.workerLayout=function(){return!1},rf.prototype.jz=function(){var t=uf(this.constructor);t&&(null!==t.Pe&&t.Pe.terminate(),t.Pe=null,t.em.iteratorValues.each((function(t){t.gs=!1,t.Ej=null,t.kg=null,t.Xr=!1,af(t)})),t.em.clear())},rf.prototype.Wv=function(){if(\"undefined\"==typeof Worker||!yf||\"undefined\"==typeof self||void 0!==self.DedicatedWorkerGlobalScope)return!1;if(!this.mayUseWorker())return this.gs&&(this.Xr=!0,this.kg=this.Ej=null,af(this)),!1;var t=uf(this.constructor);return null!==t&&(null===t.Pe&&(t.Pe=new Worker(yf),t.Pe.onerror=function(t){t.preventDefault(),S(\"Worker Error at: \"+t.filename+\" \"+t.lineno+\" \"+t.colno+\"\\n  \"+t.message)},t.Pe.j=function(t){S(\"Worker serialization error: \"+t)},t.Pe.onmessage=function(e){var i=e.data;if(\"_GoJS\"===i._GoJS)if(i.version&&Pr.version&&i.version!==Pr.version)S(\"Failure: GoJS v\"+Pr.version+\"  Worker v\"+i.version);else if(e=t.em.get(i.id)){if(t.em.remove(i.id),e.gs=!1,e.Ej=null,e.Xr)e.Xr=!1,e.kg=null;else{var n=df(e,i,!1);e.network=n,e.updateParts(),e.network=null,e.isValidLayout=!0}if(af(e,i.time),null!==(i=e.kg))e.kg=null;else for(n=t.em.iteratorValues;n.next();){var r=n.value;if(null!==(i=r.kg)){r.kg=null;break}}null!==i&&cf(e,i)}},t.Pe.postMessage({_GoJS:\"_GoJS\",url:t.Yx}),Array.isArray(t.scripts)&&t.scripts.forEach((function(e){t.Pe.postMessage({_GoJS:\"_GoJS\",url:e})})),t.Pe.postMessage({_GoJS:\"_GoJS\",version:-1})),null!==this.Ej?this.kg=this.network:cf(this,this.network),af(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},rf.prototype.onNetworkSerialization=function(){},f.Object.defineProperties(rf.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,null!==t&&(this.C=t.diagram))}},isOngoing:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t)}},isInitial:{get:function(){return this.$h},set:function(t){this.$h=t,t||(this.Zn=!0)}},isViewportSized:{get:function(){return this.$n},set:function(t){this.$n!==t&&(this.$n=t)&&this.B()}},isRouting:{get:function(){return this.Xn},set:function(t){this.Xn!==t&&(this.Xn=t)}},isRealtime:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&(this.Wn=t)}},isValidLayout:{get:function(){return this.Zn},set:function(t){this.Zn!==t&&(this.Zn=t,t||null!==(t=this.diagram)&&(t.Oh=!0))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.Um},set:function(t){this.Um!==t&&(this.Um=t,this.B())}},arrangementOrigin:{get:function(){return this.Qm},set:function(t){this.Qm.A(t)||(this.Qm.assign(t),this.B())}},id:{get:function(){return this.D},set:function(t){this.D=t}},mayUseWorkerFunction:{get:function(){return this.qo},set:function(t){this.qo!==t&&(this.qo=t)}},workerStateChanged:{get:function(){return this.Hp},set:function(t){this.Hp!==t&&(this.Hp=t)}}}),rf.prototype.useWorker=rf.prototype.Wv,rf.declareWorkerLayout=lf,rf.prototype.cancelWorker=rf.prototype.jz,rf.prototype.collectParts=rf.prototype.Ax,rf.prototype.getLayoutBounds=rf.prototype.Mi,rf.prototype.invalidateLayout=rf.prototype.B;var pf=new pt,gf=\"object\"==typeof y.document&&y.document.currentScript?y.document.currentScript.src:\"\",yf=\"undefined\"!=typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof Blob?URL.createObjectURL(new Blob([\"self.onmessage=function(e){if(e.data.url){\\nimportScripts(e.data.url);}}\"],{type:\"text/javascript\"})):\"\";function mf(){this.Eu=null,this.Yx=this.j=this.name=\"\",this.scripts=[],this.Pe=null,this.em=new pt}function vf(t){tt(this),this.Dc=t,this.rf=new Q,this.oe=new Q,this.Ks=new pt,this.Fs=new pt}function xf(t,e){if(null===e)return!1;var i=t.rf.remove(e);return i&&null!==(e=e.node)&&t.Ks.remove(e),i}function bf(t,e){if(null!==e){t.oe.add(e);var i=e.link;null!==i&&null===t.Up(i)&&t.Fs.add(i,e),e.network=t}}function wf(t,e){null!==e&&t.oe.remove(e)&&null!==(e=e.link)&&t.Fs.remove(e)}function kf(t,e,i){if(null!==i&&i.network!==e){xf(t,i),e.ng(i);for(var n=i.sourceEdges;n.next();){var r=n.value;r.network!==e&&(wf(t,r),bf(e,r),kf(t,e,r.fromVertex))}for(n=i.destinationEdges;n.next();)(i=n.value).network!==e&&(wf(t,i),bf(e,i),kf(t,e,i.toVertex))}}function Mf(t){tt(this),this.Rb=t,this.j=new Bt(0,0,10,10).freeze(),this.o=new gt(5,5).freeze(),this.mi=this.jb=null,this.sd=new J,this.Fd=new J}function Sf(t,e){return t=t.mi,e=e.mi,t?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function Pf(t){tt(this),this.Qb=t,this.cd=this.Uc=this.jl=this.jb=null}function Nf(t){rf.call(this),this.isViewportSized=!0,this.Ip=this.Jp=NaN,this.yg=new jt(NaN,NaN).freeze(),this.jf=new jt(10,10).freeze(),this.yb=Lf,this.Hb=Af,this.$c=Ff,this.Sc=Cf,t&&Object.assign(this,t)}function Cf(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}rf.className=\"Layout\",rf.GoJSScriptURL=gf,rf.declareWorkerLayout=lf,\"undefined\"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&\"undefined\"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&(self.onmessage=function(t){if(\"_GoJS\"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:\"_GoJS\",version:Pr.version},void 0);else{var e=performance.now(),i=null;t.layout&&(i=uf(t.layout));var n=null;if(i&&i.Eu&&(n=new i.Eu),!n)throw Error(\"no registered Worker Layout: \"+t.layout);n.network=df(n,t,!0),n.workerLayout=function(){var t=ff(n,n.network,!1);return t._GoJS=\"_GoJS\",t.time=performance.now()-e,self.postMessage(t,void 0),!0},n.doLayout(new J)}}),vf.prototype.clear=function(){if(this.rf)for(var t=this.rf.iterator;t.next();)t.value.clear();if(this.oe)for(t=this.oe.iterator;t.next();)t.value.clear();this.rf=new Q,this.oe=new Q,this.Ks=new pt,this.Fs=new pt},vf.prototype.toString=function(t){void 0===t&&(t=0);var e=\"LayoutNetwork\"+(null!==this.layout?\"(\"+this.layout.toString()+\")\":\"\");if(0>=t)return e;if(e+=\" vertexes: \"+this.rf.count+\" edges: \"+this.oe.count,1<t){for(var i=this.rf.iterator;i.next();)e+=\"\\n    \"+i.value.toString(t-1);for(i=this.oe.iterator;i.next();)e+=\"\\n    \"+i.value.toString(t-1)}return e},vf.prototype.createVertex=function(){return new Mf(this)},vf.prototype.createEdge=function(){return new Pf(this)},vf.prototype.mg=function(t,e,i){if(null!==t){for(void 0===e&&(e=!1),void 0===i&&(i=null),null===i&&(i=function(t){if(t instanceof wu)return!t.isLinkLabel;if(t instanceof qu){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&null!==(t=t.toNode)&&!t.isLinkLabel}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof wu&&(!e||n.isTopLevel)&&n.canLayout()&&i(n))if(n instanceof _u&&null===n.layout)this.mg(n.memberParts,!1);else if(null===this.Ji(n)){var r=this.createVertex();r.node=n,this.ng(r)}}for(t.reset();t.next();)if((n=t.value)instanceof qu&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&null===this.Up(n)){var o=n.fromNode;r=n.toNode,null!==o&&null!==r&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),null!==o&&null!==r&&this.ek(o,r,n))}}},vf.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.Ji(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.Ji(e)))return t;e=e.containingGroup}return null},(e=vf.prototype).ng=function(t){if(null!==t){this.rf.add(t);var e=t.node;null!==e&&this.Ks.add(e,t),t.network=this}},e.Nj=function(t){if(null===t)return null;var e=this.Ji(t);return null===e&&((e=this.createVertex()).node=t,this.ng(e)),e},e.Iu=function(t){if(null!==t&&xf(this,t)){for(var e=t.sd,i=e.count-1;0<=i;i--){var n=e.J(i);this.Vj(n)}for(t=(e=t.Fd).count-1;0<=t;t--)i=e.J(t),this.Vj(i)}},e.wz=function(t){null!==t&&null!==(t=this.Ji(t))&&this.Iu(t)},e.Ji=function(t){return null===t?null:this.Ks.H(t)},e.Rl=function(t){if(null!==t){bf(this,t);var e=t.toVertex;null!==e&&e.uu(t),null!==(e=t.fromVertex)&&e.su(t)}},e.$y=function(t){if(null===t)return null;var e=t.fromNode,i=t.toNode,n=this.Up(t);return null===n?((n=this.createEdge()).link=t,null!==e&&(n.fromVertex=this.Nj(e)),null!==i&&(n.toVertex=this.Nj(i)),this.Rl(n)):(n.fromVertex=null!==e?this.Nj(e):null,n.toVertex=null!==i?this.Nj(i):null),n},e.Vj=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.Hu(t),null!==(e=t.fromVertex)&&e.Gu(t),wf(this,t)}},e.vz=function(t){null!==t&&null!==(t=this.Up(t))&&this.Vj(t)},e.Up=function(t){return null===t?null:this.Fs.H(t)},e.ek=function(t,e,i){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Rl(n),n}return null},e.qm=function(t){if(null!==t){var e=t.fromVertex,i=t.toVertex;null!==e&&null!==i&&(e.Gu(t),i.Hu(t),t.qm(),e.uu(t),i.su(t))}},e.Sp=function(){for(var t=A(),e=this.oe.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Vj(t[i]);j(t)},vf.prototype.deleteArtificialVertexes=function(){for(var t=A(),e=this.rf.iterator;e.next();){var i=e.value;null===i.node&&null===i.data&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Iu(t[e]);for(e=A(),i=this.oe.iterator;i.next();){var n=i.value;null===n.link&&null===n.data&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.Vj(e[n]);j(t),j(e)},vf.prototype.Ay=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function(t){for(var e=A(),i=t.oe.iterator;i.next();){var n=i.value;null!==n.fromVertex&&null!==n.toVertex||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Vj(e[n]);j(e)}(this),this.Sp()),t=new J;for(var e=!0;e;){e=!1;for(var i=this.rf.iterator;i.next();){var n=i.value;if(0<n.sd.count||0<n.Fd.count){e=this.layout.createNetwork(),t.add(e),kf(this,e,n),e=!0;break}}}return t.sort((function(t,e){return null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count})),t},vf.prototype.Cz=function(){for(var t=new Q,e=this.rf.iterator;e.next();)t.add(e.value.node);for(e=this.oe.iterator;e.next();)t.add(e.value.link);return t},f.Object.defineProperties(vf.prototype,{layout:{get:function(){return this.Dc},set:function(t){null!==t&&(this.Dc=t)}},vertexes:{get:function(){return this.rf}},edges:{get:function(){return this.oe}}}),vf.prototype.findAllParts=vf.prototype.Cz,vf.prototype.splitIntoSubNetworks=vf.prototype.Ay,vf.prototype.deleteSelfEdges=vf.prototype.Sp,vf.prototype.reverseEdge=vf.prototype.qm,vf.prototype.linkVertexes=vf.prototype.ek,vf.prototype.findEdge=vf.prototype.Up,vf.prototype.deleteLink=vf.prototype.vz,vf.prototype.deleteEdge=vf.prototype.Vj,vf.prototype.addLink=vf.prototype.$y,vf.prototype.addEdge=vf.prototype.Rl,vf.prototype.findVertex=vf.prototype.Ji,vf.prototype.deleteNode=vf.prototype.wz,vf.prototype.deleteVertex=vf.prototype.Iu,vf.prototype.addNode=vf.prototype.Nj,vf.prototype.addVertex=vf.prototype.ng,vf.prototype.addParts=vf.prototype.mg,vf.className=\"LayoutNetwork\",Mf.prototype.serializeVertexProperties=function(t){t.id=it(this),t.key=this.node?this.node.key:this.data?this.data.di:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.YA=this.bounds.width,t.fA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.sd.each((function(t){e.push(it(t))})),t.xy=e;var i=[];this.Fd.each((function(t){i.push(it(t))})),t.Hx=i},Mf.prototype.deserializeVertexProperties=function(t,e,i){if(null!==t){this.x=t.x,this.y=t.y,this.width=t.YA,this.height=t.fA,this.focusX=t.fx,this.focusY=t.fy;var n=this;t.xy&&t.xy.forEach((function(t){(t=i.get(t))&&n.sd.add(t)})),t.Hx&&t.Hx.forEach((function(t){(t=i.get(t))&&n.Fd.add(t)}))}},Mf.prototype.clear=function(){this.mi=this.jb=null,this.sd=new J,this.Fd=new J},Mf.prototype.toString=function(t){void 0===t&&(t=0);var e=\"LayoutVertex#\"+it(this);if(0<t&&(e+=null!==this.node?\"(\"+this.node.toString()+\")\":\"\",1<t)){t=\"\";for(var i=!0,n=this.sd.iterator;n.next();){var r=n.value;i?i=!1:t+=\",\",t+=r.toString(0)}for(r=\"\",i=!0,n=this.Fd.iterator;n.next();)i?i=!1:r+=\",\",r+=n.value.toString(0);e+=\" sources: \"+t+\" destinations: \"+r}return e},Mf.prototype.commit=function(){var t=this.jb;if(null!==t){var e=this.bounds,i=t.bounds;P(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof _u)){i=Bt.alloc();var n=this.network.layout.Mi(t,i),r=t.locationObject.da(oe);if(n.u()&&r.u())return t.moveTo(e.x+this.focusX-(r.x-n.x),e.y+this.focusY-(r.y-n.y)),void Bt.free(i);Bt.free(i)}t.moveTo(e.x,e.y)}},Mf.prototype.uu=function(t){null!==t&&(this.sd.contains(t)||this.sd.add(t))},Mf.prototype.Hu=function(t){null!==t&&this.sd.remove(t)},Mf.prototype.su=function(t){null!==t&&(this.Fd.contains(t)||this.Fd.add(t))},Mf.prototype.Gu=function(t){null!==t&&this.Fd.remove(t)},f.Object.defineProperties(Mf.prototype,{sourceEdgesArrayAccess:{get:function(){return this.sd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Fd._dataArray}},data:{get:function(){return this.jb},set:function(t){if(this.jb=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;e=e.height,this.o.h(n/2,e/2),this.j.h(t,i,n,e)}}},node:{get:function(){return this.mi},set:function(t){if(this.mi!==t){this.mi=t,t.Ta();var e=this.network.layout,i=Bt.alloc(),n=e.Mi(t,i);e=n.x;var r=n.y,o=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.j.h(e,r,o,n),Bt.free(i),!(t instanceof _u)&&(t=t.locationObject.da(oe)).u())return void this.o.h(t.x-e,t.y-r);this.o.h(o/2,n/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.A(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.A(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ea(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ea(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Rb},set:function(t){this.Rb=t}},sourceVertexes:{get:function(){for(var t=new Q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new Q,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new Q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.sd.iterator}},destinationEdges:{get:function(){return this.Fd.iterator}},edges:{get:function(){for(var t=new J,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.sd.count+this.Fd.count}}}),Mf.prototype.deleteDestinationEdge=Mf.prototype.Gu,Mf.prototype.addDestinationEdge=Mf.prototype.su,Mf.prototype.deleteSourceEdge=Mf.prototype.Hu,Mf.prototype.addSourceEdge=Mf.prototype.uu,Mf.className=\"LayoutVertex\",Mf.standardComparer=Sf,Mf.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.mi;var i=e.mi;if(null!==t){if(null!==i){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\\d+(?:\\.\\d*)?(?:e[+-]?\\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+-]?[.]?\\d+(?:\\.\\d*)?(?:e[+-]?\\d+)?)/),i=0;i<e.length;i++)if(\"\"!==t[i]&&void 0!==t[i]){var n=parseFloat(e[i]),r=parseFloat(t[i]);if(isNaN(n)){if(!isNaN(r))return 1;if(0!==e[i].localeCompare(t[i]))return e[i].localeCompare(t[i])}else{if(isNaN(r))return-1;if(0!=n-r)return n-r}}else if(\"\"!==e[i])return 1;return\"\"!==t[i]&&void 0!==t[i]?-1:0}return 1}return null!==i?-1:0}return 1}return null!==e?-1:0},Pf.prototype.clear=function(){this.cd=this.Uc=this.jl=this.jb=null},Pf.prototype.serializeEdgeProperties=function(t){t.id=it(this),t.key=this.link?this.link.key:this.data?this.data.di:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?it(this.fromVertex):null,t.TA=this.toVertex?it(this.toVertex):null},Pf.prototype.deserializeEdgeProperties=function(t,e){if(null!==t){var i=e.get(t.from);i&&(this.fromVertex=i),(t=e.get(t.TA))&&(this.toVertex=t)}},Pf.prototype.toString=function(t){void 0===t&&(t=0);var e=\"LayoutEdge#\"+it(this);return 0<t&&(e+=null!==this.jl?\"(\"+this.jl.toString()+\")\":\"\",1<t&&(e+=\" \"+(this.Uc?this.Uc.toString():\"null\")+\" --\\x3e \"+(this.cd?this.cd.toString():\"null\"))),e},Pf.prototype.qm=function(){var t=this.Uc;this.Uc=this.cd,this.cd=t},Pf.prototype.commit=function(){},Pf.prototype.Vx=function(t){return this.cd===t?this.Uc:this.Uc===t?this.cd:null},f.Object.defineProperties(Pf.prototype,{network:{get:function(){return this.Qb},set:function(t){this.Qb=t}},data:{get:function(){return this.jb},set:function(t){this.jb!==t&&(this.jb=t)}},link:{get:function(){return this.jl},set:function(t){this.jl!==t&&(this.jl=t)}},fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}}}),Pf.prototype.getOtherVertex=Pf.prototype.Vx,Pf.className=\"LayoutEdge\",c(Nf,rf),Nf.prototype.cloneProtected=function(t){rf.prototype.cloneProtected.call(this,t),t.Jp=this.Jp,t.Ip=this.Ip,t.yg.assign(this.yg),t.jf.assign(this.jf),t.yb=this.yb,t.Hb=this.Hb,t.$c=this.$c,t.Sc=this.Sc},Nf.prototype.gb=function(t){t.classType===Nf?t===Ff||t===Bf||t===Of||t===Df?this.sorting=t:t===Af||t===jf?this.arrangement=t:t===Lf||t===Tf?this.alignment=t:w(\"Unknown enum value: \"+t):rf.prototype.gb.call(this,t)},Nf.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Ax(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.Hh()||null===n.fromNode&&null===n.toNode){if(n.Ta(),n instanceof _u)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var r=e.ya();if(0!==r.length){switch(this.sorting){case Df:r.reverse();break;case Ff:r.sort(this.comparer);break;case Bf:r.sort(this.comparer),r.reverse()}var o=this.wrappingColumn;isNaN(o)&&(o=0);var s=this.wrappingWidth;switch(isNaN(s)&&null!==t?(e=t.padding,s=Math.max(t.viewportBounds.width-e.left-e.right,0)):s=Math.max(this.wrappingWidth,0),0>=o&&0>=s&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),null!==t&&t.xa(\"Layout\"),n=[],this.alignment){case Tf:var a=e,h=i,l=Bt.alloc(),u=Math.max(this.cellSize.width,1);if(!isFinite(u))for(var c=u=0;c<r.length;c++){var f=this.Mi(r[c],l);u=Math.max(u,f.width)}if(u=Math.max(u+a,1),c=Math.max(this.cellSize.height,1),!isFinite(c))for(f=c=0;f<r.length;f++){var d=this.Mi(r[f],l);c=Math.max(c,d.height)}c=Math.max(c+h,1),f=this.arrangement;for(var p=d=this.arrangementOrigin.x,g=this.arrangementOrigin.y,y=0,m=0,v=0;v<r.length;v++){var x=r[v],b=this.Mi(x,l),w=Math.ceil((b.width+a)/u)*u,k=Math.ceil((b.height+h)/c)*c;if(f===jf)var M=Math.abs(p-b.width);else M=p+b.width;(0<o&&y>o-1||0<s&&0<y&&M-d>s)&&(n.push(new Bt(0,g,s+a,m)),y=0,p=d,g+=m,m=0),m=Math.max(m,k),b=f===jf?-b.width:0,x.moveTo(p+b,g),f===jf?p-=w:p+=w,y++}n.push(new Bt(0,g,s+a,m)),Bt.free(l);break;case Lf:for(h=s,u=o,c=e,f=i,s=Bt.alloc(),d=Math.max(this.cellSize.width,1),o=g=l=0,a=gt.alloc(),p=0;p<r.length;p++)m=r[p],y=this.Mi(m,s),m=eu(m,m.locationObject,m.locationSpot,a),l=Math.max(l,m.x),g=Math.max(g,y.width-m.x),o=Math.max(o,m.y);(p=this.arrangement)===jf?l+=c:g+=c,d=isFinite(d)?Math.max(d+c,1):Math.max(l+g,1);var S=m=this.arrangementOrigin.x;for(v=this.arrangementOrigin.y,g=0,h>=l&&(h-=l),l=x=0,w=Math.max(this.cellSize.height,1),b=o=0,k=!0,y=gt.alloc(),M=0;M<r.length;M++){var P=r[M],N=this.Mi(P,s),C=eu(P,P.locationObject,P.locationSpot,a);if(0<g?p===jf?(S=(S-m-(N.width-C.x))/d,S=(S=Xe.aa(Math.round(S),S)?Math.round(S):Math.floor(S))*d+m):(S=(S-m+C.x)/d,S=(S=Xe.aa(Math.round(S),S)?Math.round(S):Math.ceil(S))*d+m):x=p===jf?S+C.x+N.width:S-C.x,p===jf)var T=-(S+C.x)+x;else T=S+N.width-C.x-x;if(0<u&&g>u-1||0<h&&0<g&&T>h){for(n.push(new Bt(0,k?v-o:v,h+c,b+o+f)),S=0;S<g&&M!==g;S++){var L=eu(T=r[M-g+S],T.locationObject,T.locationSpot,y);T.moveTo(T.position.x,T.position.y+o-L.y)}b+=f,v=k?v+b:v+(b+o),g=b=o=0,S=m,k=!1}S===m&&(l=p===jf?Math.max(l,N.width-C.x):Math.min(l,-C.x)),o=Math.max(o,C.y),b=Math.max(b,N.height-C.y),isFinite(w)&&(b=Math.max(b,Math.max(N.height,w)-C.y)),k?P.moveTo(S-C.x,v-C.y):P.moveTo(S-C.x,v),p===jf?S-=C.x+c:S+=N.width-C.x+c,g++}if(n.push(new Bt(0,v,h+c,(k?b:b+o)+f)),r.length!==g)for(h=0;h<g;h++)c=eu(u=r[r.length-g+h],u.locationObject,u.locationSpot,a),u.moveTo(u.position.x,u.position.y+o-c.y);if(gt.free(a),gt.free(y),p===jf)for(r=0;r<n.length;r++)(o=n[r]).width+=l,o.x-=l;else for(r=0;r<n.length;r++)(o=n[r]).x>l&&(o.width+=o.x-l,o.x=l);Bt.free(s)}for(a=o=s=r=0;a<n.length;a++)h=n[a],r=Math.min(r,h.x),s=Math.min(s,h.y),o=Math.max(o,h.x+h.width);this.arrangement===jf?this.commitLayers(n,new gt(r+e/2-(o+r),s-i/2)):this.commitLayers(n,new gt(r-e/2,s-i/2)),null!==t&&t.Xa(\"Layout\"),this.isValidLayout=!0}},Nf.prototype.commitLayers=function(){},f.Object.defineProperties(Nf.prototype,{wrappingWidth:{get:function(){return this.Jp},set:function(t){this.Jp!==t&&(0<t||isNaN(t))&&(this.Jp=t,this.isViewportSized=isNaN(t),this.B())}},wrappingColumn:{get:function(){return this.Ip},set:function(t){this.Ip!==t&&(0<t||isNaN(t))&&(this.Ip=t,this.B())}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.A(t)||(this.yg.assign(t),this.B())}},spacing:{get:function(){return this.jf},set:function(t){this.jf.A(t)||(this.jf.assign(t),this.B())}},alignment:{get:function(){return this.yb},set:function(t){this.yb===t||t!==Lf&&t!==Tf||(this.yb=t,this.B())}},arrangement:{get:function(){return this.Hb},set:function(t){this.Hb===t||t!==Af&&t!==jf||(this.Hb=t,this.B())}},sorting:{get:function(){return this.$c},set:function(t){this.$c===t||t!==Of&&t!==Df&&t!==Ff&&t!==Bf||(this.$c=t,this.B())}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t,this.B())}}});var Tf=new V(Nf,\"Position\",0),Lf=new V(Nf,\"Location\",1),Af=new V(Nf,\"LeftToRight\",2),jf=new V(Nf,\"RightToLeft\",3),Of=new V(Nf,\"Forward\",4),Df=new V(Nf,\"Reverse\",5),Ff=new V(Nf,\"Ascending\",6),Bf=new V(Nf,\"Descending\",7);function If(){this.Do=new Q,this.ko=new Q,this.Ha=new Q,this.Ve=new pt,this.Ue=new pt,this.pj=new pt,this.C=null,this.Aq=!1}function zf(t,e,i){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){void 0===i&&(i=!0);t:{if(null!=e&&!t.C.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){var n=t.Yp(e),r=Rf(t,e,n);if(null!==r&&(jh(r),null!==(r=r.copy()))){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Nf=n,r.jb=e,t.Aq&&(r.Tg=\"Tool\"),t.diagram.add(r),r.jb=null,r.data=e,t.diagram.skipsModelSourceBindings=o,n=r;break t}}n=null}null!==n&&i&&t.resolveReferencesForData(e)}}function Rf(t,e,i){var n=(t=t.C).model;return n.ck()&&n.dv(e)?null===(e=t.groupTemplateMap.H(i))&&null===(e=t.groupTemplateMap.H(\"\"))&&(Uf||(Uf=!0,S('No Group template found for category \"'+i+'\"'),S(\"  Using default group template\")),e=t.Ky):null===(e=t.nodeTemplateMap.H(i))&&null===(e=t.nodeTemplateMap.H(\"\"))&&(Xf||(Xf=!0,S('No Node template found for category \"'+i+'\"'),S(\"  Using default node template\")),e=t.My),e}function Ef(t,e,i){for(var n in i){var r=e[n],o=i[n];if(N(o)){if(!N(r)||r.length<o.length)return!1;for(var s=0;s<r.length;s++){var a=o[s];if(void 0!==a&&!_f(t,r[s],a))return!1}}else if(!_f(t,r,o))return!1}return!0}function _f(t,e,i){if(\"function\"==typeof i){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(P(e)&&P(i)){if(!Ef(t,e,i))return!1}else if(e!==i)return!1;return!0}function Vf(t,e){var i=e.ci;if(N(i)){var n=t.pj.H(i);if(null===n)(n=[]).push(e),t.pj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function Yf(t,e,i){vh(e,(function(t){for(var e=(t=t.T.m).length,n=0;n<e;n++)bo(i,t[n])}));var n=e.ci;if(N(n)){var r=t.pj.H(n);if(null!==r)for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),0===r.length&&t.pj.remove(n);break}}}function Gf(t,e,i,n,r){if(null===e||r&&!e.canCopy())return null;if(n.contains(e))return n.H(e);var o=t.copyPartData(e,i);if(!(o instanceof Jl))return null;if(o.isSelected=!1,o.isHighlighted=!1,n.add(e,o),e instanceof wu){for(var s=e.linksConnected;s.next();){var a=s.value;if(a.fromNode===e){var h=n.H(a);null!==h&&(h.fromNode=o)}a.toNode===e&&null!==(a=n.H(a))&&(a.toNode=o)}if(e instanceof _u&&o instanceof _u)for(e=e.memberParts;e.next();)(s=Gf(t,e.value,i,n,r))instanceof qu||null===s||(s.containingGroup=o)}else if(e instanceof qu&&o instanceof qu)for(null!==(s=e.fromNode)&&null!==(s=n.H(s))&&(o.fromNode=s),null!==(s=e.toNode)&&null!==(s=n.H(s))&&(o.toNode=s),e=e.labelNodes;e.next();)null!==(s=Gf(t,e.value,i,n,r))&&s instanceof wu&&(s.labeledLink=o);return o}Nf.className=\"GridLayout\",Nf.standardComparer=Cf,Nf.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\\d+(?:\\.\\d*)?(?:e[+-]?\\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\\d+(?:\\.\\d*)?(?:e[+-]?\\d+)?)/);for(var i=0;i<t.length;i++)if(\"\"!==e[i]&&void 0!==e[i]){var n=parseFloat(t[i]),r=parseFloat(e[i]);if(isNaN(n)){if(!isNaN(r))return 1;if(0!==t[i].localeCompare(e[i]))return t[i].localeCompare(e[i])}else{if(isNaN(r))return-1;if(0!=n-r)return n-r}}else if(\"\"!==t[i])return 1;return\"\"!==e[i]&&void 0!==e[i]?-1:0}return 1}return null!==e?-1:0},Nf.Position=Tf,Nf.Location=Lf,Nf.LeftToRight=Af,Nf.RightToLeft=jf,Nf.Forward=Of,Nf.Reverse=Df,Nf.Ascending=Ff,Nf.Descending=Bf,(e=If.prototype).clear=function(){this.Do.clear(),this.ko.clear(),this.Ha.clear(),this.Ve.clear(),this.Ue.clear(),this.pj.clear()},e.Ne=function(t){this.C=t},e.Ni=function(t){if(t instanceof wu){if(this.Do.add(t),t instanceof _u){var e=t.containingGroup;null===e?this.C.wi.add(t):e.pl.add(t),null!==(e=t.layout)&&(e.diagram=this.C)}}else t instanceof qu?this.ko.add(t):t instanceof bu||this.Ha.add(t);null===(e=t.data)||t instanceof bu||(t instanceof qu?this.Ue.add(e,t):this.Ve.add(e,t))},e.ec=function(t){if(t.Oj(),t instanceof wu){if(this.Do.remove(t),t instanceof _u){var e=t.containingGroup;null===e?this.C.wi.remove(t):e.pl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof qu?this.ko.remove(t):t instanceof bu||this.Ha.remove(t);null===(e=t.data)||t instanceof bu||(t instanceof qu?this.Ue.remove(e):this.Ve.remove(e))},e.Ld=function(){for(var t=this.C.nodeTemplateMap.iterator;t.next();){var e=t.value,i=t.key;(!e.Mc()||e instanceof _u)&&w('Invalid node template in Diagram.nodeTemplateMap: template for \"'+i+'\" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.C.groupTemplateMap.iterator;t.next();)e=t.value,i=t.key,e instanceof _u||w('Invalid group template in Diagram.groupTemplateMap: template for \"'+i+'\" must be a Group, not a normal Node or Link: '+e);for(t=this.C.linkTemplateMap.iterator;t.next();)e=t.value,i=t.key,e instanceof qu||w('Invalid link template in Diagram.linkTemplateMap: template for \"'+i+'\" must be a Link, not a normal Node or simple Part: '+e);for(t=A(),e=this.C.selection.iterator;e.next();)(i=e.value.data)&&t.push(i);for(e=A(),i=this.C.highlighteds.iterator;i.next();){var n=i.value.data;n&&e.push(n)}for(i=A(),n=this.nodes.iterator;n.next();){var r=n.value;null!==r.data&&(i.push(r.data),i.push(r.location))}for(n=this.links.iterator;n.next();)null!==(r=n.value).data&&(i.push(r.data),i.push(r.location));for(n=this.parts.iterator;n.next();)null!==(r=n.value).data&&(i.push(r.data),i.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<t.length;n++)null!==(r=this.yc(t[n]))&&(r.isSelected=!0);for(n=0;n<e.length;n++)null!==(r=this.yc(e[n]))&&(r.isHighlighted=!0);for(n=0;n<i.length;n+=2)null!==(r=this.yc(i[n]))&&(r.location=i[n+1]);j(t),j(e),j(i)},If.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},If.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach((function(t){n.cb(t)&&zf(i,t,!1)})),t.forEach((function(t){n.cb(t)&&i.resolveReferencesForData(t)})),!1!==e&&Mo(this.diagram,!1)},If.prototype.insertLink=function(){return null},If.prototype.resolveReferencesForData=function(){},If.prototype.Yp=function(t){return this.C.model.Yp(t)},If.prototype.getLinkCategoryForData=function(){return\"\"},If.prototype.setLinkCategoryForData=function(){},If.prototype.setFromNodeForLink=function(){},If.prototype.setToNodeForLink=function(){},If.prototype.findLinkTemplateForCategory=function(t){var e=this.C.linkTemplateMap.H(t);return null===e&&null===(e=this.C.linkTemplateMap.H(\"\"))&&(qf||(qf=!0,S('No Link template found for category \"'+t+'\"'),S(\"  Using default link template\")),e=this.C.Ly),e},If.prototype.removeAllModeledParts=function(){this.Os(this.diagram.model.nodeDataArray)},If.prototype.Os=function(t){var e=this;t.forEach((function(t){e.pq(t)}))},If.prototype.pq=function(t){null!==(t=this.yc(t))&&(oo(this.diagram,t,!1),this.unresolveReferencesForPart(t))},If.prototype.unresolveReferencesForPart=function(){},If.prototype.removeDataForLink=function(){},If.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.C.model.Yb(t))?this.Ve.H(t):null},If.prototype.Eb=function(t){return null==t||null===(t=this.C.model.Yb(t))?null:(t=this.Ve.H(t))instanceof wu?t:null},If.prototype.findLinkForKey=function(){return null},(e=If.prototype).yc=function(t){if(null===t)return null;var e=this.Ve.H(t);return null!==e?e:e=this.Ue.H(t)},e.Gi=function(t){return null===t?null:(t=this.Ve.H(t))instanceof wu?t:null},e.xc=function(t){return null===t?null:this.Ue.H(t)},e.qs=function(t){for(var e=0;e<arguments.length;++e);e=new Q;for(var i=this.Do.iterator;i.next();){var n=i.value,r=n.data;if(null!==r)for(var o=0;o<arguments.length;o++){var s=arguments[o];if(P(s)&&Ef(this,r,s)){e.add(n);break}}}return e.iterator},e.ps=function(t){for(var e=0;e<arguments.length;++e);e=new Q;for(var i=this.ko.iterator;i.next();){var n=i.value,r=n.data;if(null!==r)for(var o=0;o<arguments.length;o++){var s=arguments[o];if(P(s)&&Ef(this,r,s)){e.add(n);break}}}return e.iterator},If.prototype.doModelChanged=function(t){if(this.C){var e=this.C;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var n=t.modelChange;if(\"\"!==n)if(i===di){if(\"nodeCategory\"===n){var r=this.yc(t.object),o=t.newValue;null!==r&&\"string\"==typeof o&&(r.category=o)}else\"nodeDataArray\"===n&&(this.Os(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===pi){var s=t.newValue;\"nodeDataArray\"===n&&P(s)&&zf(this,s),e.isModified=!0}else if(i===gi){var a=t.oldValue;\"nodeDataArray\"===n&&P(a)&&this.pq(a),e.isModified=!0}else i===fi&&(\"SourceChanged\"===n?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.yq(),this.updateAllTargetBindings()):\"ModelDisplaced\"===n&&this.Ld());else if(i===di){var h=t.propertyName,l=t.object;l===e.model?\"nodeKeyProperty\"!==h&&\"nodeCategoryProperty\"!==h||e.undoManager.isUndoingRedoing||this.Ld():this.updateDataBindings(l,h),e.isModified=!0}else if(i===pi||i===gi){var u=t.change===pi,c=u?t.newParam:t.oldParam,f=u?t.newValue:t.oldValue,d=this.pj.H(t.object);if(Array.isArray(d))for(t=0;t<d.length;t++){var p=d[t];if(u)Fh(p,f,c,!0);else if(!(0>c)){var g=c+Oh(p);p.ec(g,!0),Bh(p,g,c)}}e.isModified=!0}}finally{e.Z=!0}}}}},If.prototype.updateAllTargetBindings=function(t){void 0===t&&(t=\"\");for(var e=this.parts.iterator;e.next();)e.value.Fa(t);for(e=this.nodes.iterator;e.next();)e.value.Fa(t);for(e=this.links.iterator;e.next();)e.value.Fa(t)},If.prototype.yq=function(){for(var t=this.C.model,e=new Q,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var r=[];for(this.nodes.each((function(t){null===t.data||e.contains(t.data)||r.push(t.data)})),this.parts.each((function(t){null===t.data||e.contains(t.data)||r.push(t.data)})),r.forEach((function(e){dd(t,e,!1)})),n=0;n<i.length;n++){var o=i[n];null===this.yc(o)&&fd(t,o,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},If.prototype.refreshDataBoundLinks=function(){},If.prototype.updateRelationshipsFromData=function(){},If.prototype.updateDataBindings=function(t,e){if(\"string\"==typeof e){var i=this.yc(t);if(null!==i)i.Fa(e);else{i=null;for(var n=this.pj.iterator;n.next();){for(var r=n.value,o=0;o<r.length;o++){var s=r[o].Nx(t);null!==s&&(null===i&&(i=A()),i.push(s))}if(null!==i)break}if(null!==i){for(n=0;n<i.length;n++)i[n].Fa(e);j(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},If.prototype.Tj=function(t,e,i){void 0===i&&(i=!1);var n=new pt;if(N(t))for(var r=0;r<t.length;r++)Gf(this,t[r],e,n,i);else for(t=t.iterator;t.next();)Gf(this,t.value,e,n,i);if(null!==e){i=e.model,t=null!==(t=e.toolManager.findTool(\"Dragging\"))?t.dragOptions.dragsLink:e.on.dragsLink,r=new Q;for(var o=new pt,s=n.iterator;s.next();){var a=s.value;if(a instanceof qu)t||null!==a.fromNode&&null!==a.toNode||r.add(a);else if(a instanceof wu&&null!==a.data&&i.dm()){var h=a,l=(a=s.key).qg();null!==l&&(null!==(l=n.H(l))?(i.he(h.data,i.pa(l.data)),h=e.xc(h.data),null!==(a=a.Ii())&&null!==h&&o.add(a,h)):i.he(h.data,void 0))}}if(0<r.count&&e.Ps(r,!1),0<o.count)for(i=o.iterator;i.next();)n.add(i.key,i.value)}if(null!==e&&null!==this.C&&null!==(i=(e=e.model).afterCopyFunction)){var u=new pt;n.each((function(t){null!==t.key.data&&u.add(t.key.data,t.value.data)})),i(u,e,this.C.model)}for(e=n.iterator;e.next();)e.value.Fa();return n},If.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(null!==n&&null!==e){var r=e.model;t instanceof qu||P(n=r.copyNodeData(n))&&(r.sf(n),i=e.yc(n))}else jh(t),null!==(i=t.copy())&&(r=this.C,null!==e?e.add(i):null!==n&&null!==r&&null!==r.commandHandler&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,i instanceof qu||(r=e.copyNodeData(n)),P(r)&&(i.data=r)));return i},f.Object.defineProperties(If.prototype,{nodes:{get:function(){return this.Do}},links:{get:function(){return this.ko}},parts:{get:function(){return this.Ha}},diagram:{get:function(){return this.C}},addsToTemporaryLayer:{get:function(){return this.Aq},set:function(t){this.Aq=t}}}),If.prototype.updateAllRelationshipsFromData=If.prototype.yq,If.prototype.findLinksByExample=If.prototype.ps,If.prototype.findNodesByExample=If.prototype.qs,If.prototype.findLinkForData=If.prototype.xc,If.prototype.findNodeForData=If.prototype.Gi,If.prototype.findPartForData=If.prototype.yc,If.prototype.findNodeForKey=If.prototype.Eb,If.prototype.removeModeledPart=If.prototype.pq,If.prototype.removeModeledParts=If.prototype.Os,If.prototype.rebuildParts=If.prototype.Ld;var Xf=!1,Uf=!1,qf=!1;function Kf(t){If.apply(this,arguments)}function Hf(t,e){e.forEach((function(e){Wf(t,e)})),Mo(t.diagram,!1)}function Wf(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ue.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(null!==n){jh(n);var r=n.copy();if(null!==r){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Nf=i,r.jb=e;var o=Fd(i=t.diagram.model,e,!0);\"\"!==o&&(r.fromPortId=o),void 0!==(o=Od(i,e,!0))&&(o=t.Eb(o))instanceof wu&&(r.fromNode=o),\"\"!==(o=Fd(i,e,!1))&&(r.toPortId=o),void 0!==(o=Od(i,e,!1))&&(o=t.Eb(o))instanceof wu&&(r.toNode=o),i=i.Bf(e),Array.isArray(i)&&i.forEach((function(e){null!==(e=t.Eb(e))&&(e.labeledLink=r)})),t.Aq&&(r.Tg=\"Tool\"),t.diagram.add(r),r.jb=null,r.data=e,t.diagram.skipsModelSourceBindings=n}}}}function Zf(t,e){e.forEach((function(e){t.pq(e)}))}function Jf(){If.apply(this,arguments),this.ih=null}function $f(t,e,i){if(null!==e&&null!==i){var n=t.diagram.toolManager.findTool(\"Linking\"),r=e,o=i;if(t.diagram.isTreePathToChildren){for(e=o.linksConnected;e.next();)if(e.value.toNode===o)return}else for(o=e,e=(r=i).linksConnected;e.next();)if(e.value.fromNode===r)return;if((null===n||!Ji(n,r,o,null,!0))&&(n=t.getLinkCategoryForData(i.data),null!==(e=t.findLinkTemplateForCategory(n))&&(jh(e),null!==(e=e.copy())))){var s=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Nf=n,e.jb=i.data,e.fromNode=r,e.toNode=o,t.diagram.add(e),e.jb=null,e.data=i.data,t.diagram.skipsModelSourceBindings=s}}}function Qf(t,e){this.tl=new Q,this.rl=new Q,this.ww=',\\n  \"insertedNodeKeys\": ',this.Iy=',\\n  \"modifiedNodeData\": ',this.yw=',\\n  \"removedNodeKeys\": ',this.Mh=null,tt(this),this.kn=this.na=\"\",this.Rg=!1,this.j={},this.Fc=[],this.bb=new pt,this.ni=\"key\",this.Ik=this.ll=null,this.an=this.bn=!1,this.dn=!0,this.Nm=null,this.yj=\"category\",this.Pf=new pt,this.Ot=new J,this.kh=!1,this.o=null,this.undoManager=new mi,void 0!==t&&(N(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function td(t,e,i,n,r,o){function s(t,i){a?(void 0===t.__gohashid&&o.push(t),n.set(t,i)):(t=ht++,n.set(t,i),r.set(t,e))}if(!P(e))return e;o||(o=[]);var a=Object.isExtensible(e);if(n||(n=new pt),a){var h=n.get(e);if(h)return h}else for(r||(r=new pt),h=r.iterator;h.next();){var l=h.key;if(h.value===e&&(l=n.get(l)))return l}if(Array.isArray(e)){s(e,h=[]);for(var u=0;u<e.length;u++)h.push(td(t,e[u],!1,n,r,o))}else if(e instanceof gt||e instanceof jt||e instanceof Bt||e instanceof Wt||e instanceof ze)h=e.copy(),s(e,h);else{if(e instanceof wa||e instanceof Ue||e instanceof V)return e;if(e instanceof J)h=(new J).addAll(td(t,e.ya(),!1,n,r,o)),s(e,h);else if(e instanceof Q)h=(new Q).addAll(td(t,e.ya(),!1,n,r,o)),s(e,h);else if(e instanceof pt)h=(new pt).addAll(td(t,e.ya(),!1,n,r,o)),s(e,h);else if(e instanceof Date)h=new Date(e.getTime()),s(e,h);else if(e instanceof RegExp)h=new RegExp(e),s(e,h),h.lastIndex=e.lastIndex;else if(\"function\"==typeof e.copy)h=e.copy(),s(e,h);else for(u in s(e,h={}),e)\"__gohashid\"!==u&&(h[u]=td(t,e[u],!1,n,r,o))}return i&&o.forEach((function(t){delete t.__gohashid})),h}function ed(t,e){P(e=e.modelData)&&(t.nm(e),t.modelData=e)}function id(t,e){function i(t,e){if((e=e.part)&&t!==(e=e.data)){var i=n.get(t);null===i?((i=new Q).add(e),n.add(t,i)):i.add(e)}}var n=t.Mh;null===n&&(n=new pt,e.changes.each((function(t){if(null!==t.diagram){var e=t.change;e===di?(t=t.object.panel)&&(e=t.data)&&i(e,t):e!==pi&&e!==gi||(e=(t=t.object).itemArray)&&i(e,t)}})),t.Mh=n)}function nd(t,e){for(var i=new Q,n=0;n<t.nodeDataArray.length;n++){var r=t.nodeDataArray[n];rd(t,e,r,r,i)}return i}function rd(t,e,i,n,r){if(Array.isArray(i))for(var o=0;o<i.length;o++){var s=i[o];if(s===e)return r.add(n),!0;if(rd(t,e,s,n,r))return!0}else if(P(i)&&Object.getPrototypeOf(i)===Object.prototype)for(o in i){if((s=i[o])===e)return r.add(n),!0;if(rd(t,e,s,n,r))return!0}return!1}function od(t,e,i){void 0===i&&(i=!1);var n=e.length;if(0>=n)return\"[]\";var r=new G;r.add(\"[\"),i&&1<n&&r.add(\"\\n\");for(var o=0;o<n;o++){var s=e[o];void 0!==s&&(0<o&&(r.add(\",\"),i&&r.add(\"\\n\")),r.add(t.Em(s)))}return i&&1<n&&r.add(\"\\n\"),r.add(\"]\"),r.toString()}function sd(t,e){return void 0===e||\"__gohashid\"===t||\"_\"===t[0]||\"function\"==typeof e}function ad(t){return isNaN(t)?\"NaN\":1/0===t?\"9e9999\":-1/0===t?\"-9e9999\":t}function hd(t,e){var i=e;if(i instanceof gt)e={class:\"go.Point\",x:ad(i.x),y:ad(i.y)};else if(i instanceof jt)e={class:\"go.Size\",width:ad(i.width),height:ad(i.height)};else if(i instanceof Bt)e={class:\"go.Rect\",x:ad(i.x),y:ad(i.y),width:ad(i.width),height:ad(i.height)};else if(i instanceof Wt)e={class:\"go.Margin\",top:ad(i.top),right:ad(i.right),bottom:ad(i.bottom),left:ad(i.left)};else if(i instanceof ze)e=i.hb()?{class:\"go.Spot\",x:ad(i.x),y:ad(i.y),offsetX:ad(i.offsetX),offsetY:ad(i.offsetY)}:{class:\"go.Spot\",enum:i.toString()};else if(i instanceof wa){if(e={class:\"go.Brush\",type:i.type.name},i.type===Ba?e.color=i.color:i.type!==Ia&&i.type!==za||(e.start=i.start,e.end=i.end,i.type===za&&(0!==i.startRadius&&(e.startRadius=ad(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=ad(i.endRadius)))),null!==i.colorStops){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof Ue?(e={class:\"go.Geometry\",type:i.type.name},0!==i.startX&&(e.startX=ad(i.startX)),0!==i.startY&&(e.startY=ad(i.startY)),0!==i.endX&&(e.endX=ad(i.endX)),0!==i.endY&&(e.endY=ad(i.endY)),i.spot1.A(ee)||(e.spot1=i.spot1),i.spot2.A(le)||(e.spot2=i.spot2),i.type===Ue.o&&(e.path=Ue.wa(i))):i instanceof V&&(e={class:\"go.EnumValue\",classType:xd(t,i.classType),name:i.name});for(var r in n=\"{\",i=!0,e){var o=wd(e,r);if(!sd(r,o))if(i?i=!1:n+=\",\",n+=t.quote(r)+\":\",\"points\"===r&&o instanceof J){var s=\"[\";for(o=o.iterator;o.next();){var a=o.value;1<s.length&&(s+=\",\"),s+=t.Em(a.x),s+=\",\",s+=t.Em(a.y)}n+=s+=\"]\"}else n+=t.Em(o)}return n+\"}\"}function ld(t){return\"number\"==typeof t?t:\"NaN\"===t?NaN:\"9e9999\"===t?1/0:\"-9e9999\"===t?-1/0:parseFloat(t)}function ud(t,e,i,n,r,o,s,a,h){void 0===a&&(a=null),void 0===h&&(h=null);var l=new ci;l.model=t,l.change=i,l.modelChange=e,l.propertyName=n,l.object=r,l.oldValue=o,l.oldParam=a,l.newValue=s,l.newParam=h,t.js(l)}function cd(t){return\"number\"==typeof t||\"string\"==typeof t}function fd(t,e,i){var n=t.pa(e);void 0!==n&&t.bb.H(n)===e||(t.jv(e),void 0===(n=t.pa(e))&&w(\"Model.makeNodeDataKeyUnique failed on \"+e+\".  Data not added to Model.\"),t.bb.add(n,e),n=null,i&&(n=t.Fc.length,T(t.Fc,n,e)),ud(t,\"nodeDataArray\",pi,\"nodeDataArray\",t,null,e,null,n),t.pm(e),t.om(e))}function dd(t,e,i){var n=t.pa(e);if(void 0!==n&&t.bb.remove(n),n=null,i){t:if(i=t.Fc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var r=0;r<n;r++)if(i[r]===e){n=r;break t}n=-1}if(0>n)return;L(t.Fc,n)}ud(t,\"nodeDataArray\",gi,\"nodeDataArray\",t,e,null,n,null),t.xq(e)}function pd(t,e,i){if(void 0!==e){var n=t.Pf.H(e);null===n&&(n=new Q,t.Pf.add(e,n)),n.add(i)}}function gd(t,e,i){if(void 0!==e){var n=t.Pf.H(e);n instanceof Q&&(null==i?t.Pf.remove(e):(n.remove(i),0===n.count&&t.Pf.remove(e)))}}function yd(t,e){return void 0===e?null:(t=t.Pf.H(e))instanceof Q?t:null}function md(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var r=md(t,e[i],t.copiesArrayObjects);n.push(r)}return tt(n),n}if(i&&P(e)){for(n in i=(i=e.constructor)?new i:{},r=t.copiesKey||\"string\"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if(\"__gohashid\"===n)i.__gohashid=void 0;else if(n===r)i[r]=void 0;else{var o=wd(e,n),s=xd(t,o);\"GraphObject\"===s||\"Diagram\"===s||\"Layer\"===s||\"RowColumnDefinition\"===s||\"AnimationManager\"===s||\"Tool\"===s||\"CommandHandler\"===s||\"Layout\"===s||\"InputEvent\"===s||\"DiagramEvent\"===s||o instanceof Qf||o instanceof mi||o instanceof yi||o instanceof ci||(o=md(t,o,!1)),kd(i,n,o)}return tt(i),i}return e instanceof gt||e instanceof jt||e instanceof Bt||e instanceof ze||e instanceof Wt?e.copy():e}function vd(){return new Qf}function xd(t,e){if(\"function\"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if(\"object\"==typeof e&&null!==e&&e.constructor)return xd(t,e.constructor);return typeof e}function bd(t){return Sd[t]?Sd[t]:void 0!==y.go&&y.go[t]?y.go[t]:null}function wd(t,e){if(!t||!e)return null;try{if(\"function\"==typeof e)var i=e(t);else\"function\"==typeof t.getAttribute?null===(i=t.getAttribute(e))&&(i=void 0):i=t[e]}catch(t){}return i}function kd(t,e,i){if(t&&e)try{\"function\"==typeof e?e(t,i):\"function\"==typeof t.setAttribute?t.setAttribute(e,i):t[e]=i}catch(t){}}If.className=\"PartManager\",c(Kf,If),Kf.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),Hf(this,t.linkDataArray)},Kf.prototype.addModeledParts=function(t){for(If.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)Ku(t.value);Mo(this.diagram,!1)},Kf.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Zf(this,t.linkDataArray),this.Os(t.nodeDataArray)},Kf.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ts(t)},Kf.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.sq(t,e)},Kf.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.Gv(t.data,i.pa(null!==e?e.data:null))},Kf.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.Kv(t.data,i.pa(null!==e?e.data:null))},Kf.prototype.removeDataForLink=function(t){this.diagram.model.lm(t.data)},Kf.prototype.findPartForKey=function(t){var e=If.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.Dh(t))?this.Ue.H(t):e},Kf.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Dh(t))?this.Ue.H(t):null},Kf.prototype.doModelChanged=function(t){var e=this;if(If.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.Z){i.Z=!1;try{var r=t.modelChange;if(\"\"!==r){if(n===di){if(\"linkFromKey\"===r){var o=this.xc(t.object);if(null!==o){var s=this.Eb(t.newValue);o.fromNode=s}}else if(\"linkToKey\"===r){var a=this.xc(t.object);if(null!==a){var h=this.Eb(t.newValue);a.toNode=h}}else if(\"linkFromPortId\"===r){var l=this.xc(t.object);if(null!==l){var u=t.newValue;\"string\"==typeof u&&(l.fromPortId=u)}}else if(\"linkToPortId\"===r){var c=this.xc(t.object);if(null!==c){var f=t.newValue;\"string\"==typeof f&&(c.toPortId=f)}}else if(\"nodeGroupKey\"===r){var d=this.yc(t.object);if(null!==d){var p=t.newValue;if(void 0!==p){var g=this.Eb(p);d.containingGroup=g instanceof _u?g:null}else d.containingGroup=null}}else if(\"linkLabelKeys\"===r){var y=this.xc(t.object);if(null!==y){var m=t.oldValue,v=t.newValue;Array.isArray(m)&&m.forEach((function(t){0<=v.indexOf(t)||null!==(t=e.Eb(t))&&(t.labeledLink=null)})),Array.isArray(v)&&v.forEach((function(t){null!==(t=e.Eb(t))&&(t.labeledLink=y)}))}}else if(\"linkCategory\"===r){var x=this.xc(t.object),b=t.newValue;null!==x&&\"string\"==typeof b&&(x.category=b)}else\"linkDataArray\"===r&&(Zf(this,t.oldValue),Hf(this,t.newValue));i.isModified=!0}else if(n===pi){var w=t.newValue;if(\"linkDataArray\"===r&&\"object\"==typeof w&&null!==w)Wf(this,w);else if(\"linkLabelKeys\"===r&&cd(w)){var k=this.xc(t.object),M=this.Eb(w);null!==k&&null!==M&&(M.labeledLink=k)}i.isModified=!0}else if(n===gi){var S=t.oldValue;if(\"linkDataArray\"===r&&\"object\"==typeof S&&null!==S)this.pq(S);else if(\"linkLabelKeys\"===r&&cd(S)){var P=this.Eb(S);null!==P&&(P.labeledLink=null)}i.isModified=!0}}else if(n===di){var N=t.propertyName;t.object!==i.model||\"linkFromKeyProperty\"!==N&&\"linkToKeyProperty\"!==N&&\"linkFromPortIdProperty\"!==N&&\"linkToPortIdProperty\"!==N&&\"linkLabelKeysProperty\"!==N&&\"nodeIsGroupProperty\"!==N&&\"nodeGroupKeyProperty\"!==N&&\"linkCategoryProperty\"!==N||i.undoManager.isUndoingRedoing||this.Ld(),i.isModified=!0}}finally{i.Z=!0}}}}},Kf.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new Q,n=e.linkDataArray;n.forEach((function(t){i.add(t)}));var r=[];this.links.each((function(t){null===t.data||i.contains(t.data)||r.push(t.data)})),r.forEach((function(t){zd(e,t,!1)})),n.forEach((function(i){null===t.xc(i)&&Id(e,i,!1)}))},Kf.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;if(t instanceof qu){var r=Od(n,e,!0);if(r=i.Eb(r),t.fromNode=r,r=Od(n,e,!1),r=i.Eb(r),t.toNode=r,0<(e=n.Bf(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){r=e[0];var o=t.labelNodes.first();if(n.pa(o.data)===r)return}r=(new Q).addAll(e);var s=new Q;t.labelNodes.each((function(t){null!==t.data&&void 0!==(t=n.pa(t.data))&&s.add(t)})),(e=s.copy()).oq(r),(r=r.copy()).oq(s),(0<e.count||0<r.count)&&(e.each((function(e){null!==(e=i.Eb(e))&&e.labeledLink===t&&(e.labeledLink=null)})),r.each((function(e){null!==(e=i.Eb(e))&&e.labeledLink!==t&&(e.labeledLink=t)})))}}else!(t instanceof bu)&&(e=n.Eh(e),null===(e=i.findPartForKey(e))||e instanceof _u)&&(t.containingGroup=e)}}},Kf.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.pa(t);if(void 0!==i){var n=yd(e,i),r=this.yc(t);if(null!==n&&null!==r){n=n.iterator;for(var o={};n.next();){var s=n.value;e.cb(s)?r instanceof _u&&e.Eh(s)===i&&null!==(s=this.yc(s))&&(s.containingGroup=r):(o.link=this.xc(s),null!==o.link&&r instanceof wu&&(Od(e,s,!0)===i&&(o.link.fromNode=r),Od(e,s,!1)===i&&(o.link.toNode=r),s=e.Bf(s),Array.isArray(s)&&s.some(function(t){return function(e){return e===i&&(r.labeledLink=t.link,!0)}}(o)))),o={link:o.link}}gd(e,i)}void 0!==(t=e.Eh(t))&&(t=this.Eb(t))instanceof _u&&(r.containingGroup=t)}},Kf.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof wu){var i=e.pa(t.data);if(void 0!==i){for(var n=t.linksConnected;n.next();)pd(e,i,n.value.data);if(t.isLinkLabel&&null!==(n=t.labeledLink)&&pd(e,i,n.data),t instanceof _u)for(t=t.memberParts;t.next();)n=t.value.data,e.cb(n)&&pd(e,i,n)}}},Kf.prototype.copyPartData=function(t,e){var i=If.prototype.copyPartData.call(this,t,e);if(t instanceof qu)if(null!==(t=t.data)&&null!==e){var n=e.model;\"object\"==typeof(t=n.Rp(t))&&null!==t&&(n.Bi(t),i=e.xc(t))}else null!==i&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&\"object\"==typeof(e=e.model.Rp(t))&&null!==e&&(i.data=e));return i},Kf.prototype.insertLink=function(t,e,i,n){var r=this.diagram,o=r.model,s=r.toolManager.findTool(\"Linking\"),a=\"\";if(null!==t&&(null===e&&(e=t),null===(a=e.portId)&&(a=\"\")),e=\"\",null!==i&&(null===n&&(n=i),null===(e=n.portId)&&(e=\"\")),(n=s.archetypeLinkData)instanceof qu){if(jh(n),null!==(o=n.copy()))return o.fromNode=t,o.fromPortId=a,o.toNode=i,o.toPortId=e,r.add(o),(t=s.archetypeLabelNodeData)instanceof wu&&(jh(t),null!==(t=t.copy())&&(t.labeledLink=o,r.add(t))),o}else if(null!==n&&\"object\"==typeof(n=o.Rp(n))&&null!==n)return null!==t&&Dd(o,n,o.pa(t.data),!0),Bd(o,n,a,!0),null!==i&&Dd(o,n,o.pa(i.data),!1),Bd(o,n,e,!1),o.Bi(n),null===(t=s.archetypeLabelNodeData)||t instanceof wu||\"object\"==typeof(t=o.copyNodeData(t))&&null!==t&&(o.sf(t),void 0!==(t=o.pa(t))&&o.tu(n,t)),r.xc(n);return null},Kf.prototype.findLinkForKey=Kf.prototype.findLinkForKey,Kf.prototype.findPartForKey=Kf.prototype.findPartForKey,Kf.prototype.removeAllModeledParts=Kf.prototype.removeAllModeledParts,Kf.prototype.addModeledParts=Kf.prototype.addModeledParts,Kf.prototype.addAllModeledParts=Kf.prototype.addAllModeledParts,Kf.className=\"GraphLinksPartManager\",c(Jf,If),Jf.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ws(t)},Jf.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Ts(t,e)},Jf.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)n.he(t.data,n.pa(e));else{var r=this.ih;this.ih=t,null!==i&&n.he(i.data,void 0),n.he(e,n.pa(null!==t.toNode?t.toNode.data:null)),this.ih=r}},Jf.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var r=this.ih;this.ih=t,null!==i&&n.he(i.data,void 0),n.he(e,n.pa(null!==t.fromNode?t.fromNode.data:null)),this.ih=r}else n.he(t.data,n.pa(e))},Jf.prototype.removeDataForLink=function(t){this.diagram.model.he(t.data,void 0)},Jf.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Yb(t))?this.Ue.H(t):null},Jf.prototype.doModelChanged=function(t){if(If.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.Z){e.Z=!1;try{var n=t.modelChange;if(\"\"!==n){if(i===di){if(\"nodeParentKey\"===n){var r=t.object,o=this.Eb(t.newValue),s=this.Gi(r);if(null!==this.ih)null!==o&&(this.ih.data=r,this.ih.category=this.getLinkCategoryForData(r));else if(null!==s){var a=s.Ii();null!==a?null===o?e.remove(a):e.isTreePathToChildren?a.fromNode=o:a.toNode=o:$f(this,o,s)}}else if(\"parentLinkCategory\"===n){var h=this.Gi(t.object),l=t.newValue;if(null!==h&&\"string\"==typeof l){var u=h.Ii();null!==u&&(u.category=l)}}e.isModified=!0}}else if(i===di){var c=t.propertyName;t.object===e.model&&\"nodeParentKeyProperty\"===c&&(e.undoManager.isUndoingRedoing||this.Ld()),e.isModified=!0}}finally{e.Z=!0}}}}},Jf.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;t instanceof wu&&(e=n.Fh(e),(e=i.Eb(e))!==(n=t.qg())&&(n=t.Ii(),null!==e?null!==n?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:$f(this,e,t):null!==n&&oo(i,n,!1)))}}},Jf.prototype.updateDataBindings=function(t,e){If.prototype.updateDataBindings.call(this,t,e),\"string\"==typeof e&&null!==this.yc(t)&&null!==(t=this.xc(t))&&t.Fa(e)},Jf.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.pa(t);if(void 0!==i){var n=yd(e,i),r=this.yc(t);if(null!==n&&null!==r){for(n=n.iterator;n.next();){var o=n.value;e.cb(o)&&r instanceof wu&&e.Fh(o)===i&&$f(this,r,this.Gi(o))}gd(e,i)}void 0!==(t=e.Fh(t))&&r instanceof wu&&$f(this,t=this.Eb(t),r)}},Jf.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof wu){var i=e.pa(t.data),n=this.xc(t.data);if(null!==n){n.isSelected=!1,n.isHighlighted=!1;var r=n.layer;if(null!==r){var o=r.ec(-1,n,!1);0<=o&&this.diagram.Wa(gi,\"parts\",r,n,null,o,null),null!==(o=n.layerChanged)&&o(n,r,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(n?r.toNode:r.fromNode).data,e.cb(r)&&pd(e,i,r)}},Jf.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,r=i;return this.diagram.isTreePathToChildren||(n=i,r=t),null!==n&&null!==r?(e.he(r.data,e.pa(n.data)),r.Ii()):null},Jf.prototype.findLinkForKey=Jf.prototype.findLinkForKey,Jf.className=\"TreePartManager\",Qf.prototype.cloneProtected=function(t){t.na=this.na,t.kn=this.kn,t.Rg=this.Rg,t.ni=this.ni,t.ll=this.ll,t.Ik=this.Ik,t.bn=this.bn,t.an=this.an,t.dn=this.dn,t.Nm=this.Nm,t.yj=this.yj},Qf.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Qf.prototype.clear=function(){this.Fc=[],this.bb.clear(),this.Pf.clear(),this.undoManager.clear()},Qf.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.uq();var e=(\"\"!==this.name?this.name:\"\")+\" Model\";if(0<t){e+=\"\\n node data:\";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var r=t[n];e+=\" \"+this.pa(r)+\":\"+D(r)}}return e},Qf.prototype.UA=function(t){t.change!==fi&&w(\"Model.toIncrementalData argument is not a Transaction ChangedEvent:\"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof yi?(id(this,e),t=this.aw(e,\"FinishedUndo\"===t.propertyName),this.Mh=null,t):null},Qf.prototype.aw=function(t,e){var i=this,n=!1,r=new Q,o=new Q,s=new Q,a=this.Mh;t.changes.each((function(t){t.model===i&&(\"nodeDataArray\"===t.modelChange?t.change===pi?r.add(t.newValue):t.change===gi&&s.add(t.oldValue):i.cb(t.object)?o.add(t.object):t.change!==di||i.modelData!==t.object&&\"modelData\"!==t.propertyName?null!==t.object&&(a&&a.contains(t.object)?a.get(t.object).each((function(t){i.cb(t)&&o.add(t)})):t.object instanceof Qf||i.Pi()&&i.wc(t.object)||nd(i,t.object).each((function(t){o.add(t)}))):n=!0)}));var h=this.rl;h.clear(),r.each((function(t){h.add(i.pa(t)),e||o.add(t)}));var l=this.tl;l.clear(),s.each((function(t){l.add(i.pa(t)),e&&o.add(t)})),t=i.cloneDeep(o.ya());var u=null;return n&&(null===u&&(u={}),u.modelData=this.cloneDeep(this.modelData)),0<h.count&&(null===u&&(u={}),e?u.removedNodeKeys=h.ya():u.insertedNodeKeys=h.ya()),0<t.length&&(null===u&&(u={}),u.modifiedNodeData=t),0<l.count&&(null===u&&(u={}),e?u.insertedNodeKeys=l.ya():u.removedNodeKeys=l.ya()),l.clear(),h.clear(),u},Qf.prototype.cloneDeep=function(t){return td(this,t,!0)},(e=Qf.prototype).quote=function(t){return JSON.stringify(t).replace(/[\\u007F-\\uFFFF]/g,(function(t){return\"\\\\u\"+(\"0000\"+t.charCodeAt(0).toString(16)).substr(-4)}))},e.Dm=function(){var t=\"\";return\"\"!==this.name&&(t+=',\\n  \"name\": '+this.quote(this.name)),\"\"!==this.dataFormat&&(t+=',\\n  \"dataFormat\": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\\n  \"isReadOnly\": '+this.isReadOnly),\"key\"!==this.nodeKeyProperty&&\"string\"==typeof this.nodeKeyProperty&&(t+=',\\n  \"nodeKeyProperty\": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\\n  \"copiesArrays\": true'),this.copiesArrayObjects&&(t+=',\\n  \"copiesArrayObjects\": true'),this.copiesKey||(t+=',\\n  \"copiesKey\": false'),\"category\"!==this.nodeCategoryProperty&&\"string\"==typeof this.nodeCategoryProperty&&(t+=',\\n  \"nodeCategoryProperty\": '+this.quote(this.nodeCategoryProperty)),t},e.mq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},e.bw=function(){var t,e=this.modelData,i=!1;for(t in e)if(!sd(t,e[t])){i=!0;break}return e=\"\",i&&(e=',\\n  \"modelData\": '+hd(this,this.modelData)),e+',\\n  \"nodeDataArray\": '+od(this,this.nodeDataArray,!0)},e.wv=function(t){ed(this,t),N(t=t.nodeDataArray)&&(this.nm(t),this.nodeDataArray=t)},e.$v=function(t,e){var i=this,n=!1,r=new Q,o=new Q,s=new Q,a=this.Mh;t.changes.each((function(t){t.model===i&&(\"nodeDataArray\"===t.modelChange?t.change===pi?r.add(t.newValue):t.change===gi&&s.add(t.oldValue):i.cb(t.object)?o.add(t.object):t.change!==di||i.modelData!==t.object&&\"modelData\"!==t.propertyName?null!==t.object&&(a&&a.contains(t.object)?a.get(t.object).each((function(t){i.cb(t)&&o.add(t)})):t.object instanceof Qf||i.Pi()&&i.wc(t.object)||nd(i,t.object).each((function(t){o.add(t)}))):n=!0)}));var h=this.rl;h.clear(),r.each((function(t){h.add(i.pa(t)),e||o.add(t)}));var l=this.tl;return l.clear(),s.each((function(t){l.add(i.pa(t)),e&&o.add(t)})),t=\"\",n&&(t+=',\\n  \"modelData\": '+hd(this,this.modelData)),0<h.count&&(t+=(e?this.yw:this.ww)+od(this,h.ya(),!0)),0<o.count&&(t+=this.Iy+od(this,o.ya(),!0)),0<l.count&&(t+=(e?this.ww:this.yw)+od(this,l.ya(),!0)),l.clear(),h.clear(),t},e.lq=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&w(\"applyIncrementalJson cannot change Model properties\"),ed(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new pt;if(Array.isArray(i))for(var r=0;r<i.length;r++){var o=i[r],s=this.pa(o);null!=s&&n.set(s,o)}if(Array.isArray(e))for(r=e.length,o=0;o<r;o++){s=e[o];var a=this.Yb(s);null===a&&(a=(a=n.get(s))?a:this.copyNodeData({}),this.um(a,s),this.sf(a))}if(Array.isArray(i))for(e=i.length,n=0;n<e;n++)if(r=i[n],o=this.pa(r),null!==(o=this.Yb(o))){for(var h in r)\"__gohashid\"===h||h===this.nodeKeyProperty||this.bk()&&h===this.nodeIsGroupProperty||this.setDataProperty(o,h,r[h]);this.vm(r,o)}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,h=0;h<i;h++)null!==(e=this.Yb(t[h]))&&this.mm(e)},e.By=function(t,e){t.change!==fi&&w(\"Model.toIncrementalJson argument is not a Transaction ChangedEvent:\"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof yi?(void 0===e&&(e=xd(this,this)),id(this,i),t=this.$v(i,\"FinishedUndo\"===t.propertyName),this.Mh=null,\"2\"===e?'{ \"incremental\": 2'+t+\"}\":'{ \"class\": '+this.quote(e)+', \"incremental\": 1'+this.Dm()+t+\"}\"):'{ \"incremental\": 0 }'},e.VA=function(t,e){return this.By(t,e)},e.uq=function(t){return void 0===t&&(t=xd(this,this)),'{ \"class\": '+this.quote(t)+this.Dm()+this.bw()+\"}\"},e.toJSON=function(t){return this.uq(t)},e.wx=function(t){var e=null;if(\"string\"==typeof t)try{e=y.JSON.parse(t)}catch(t){}else\"object\"==typeof t?e=t:w(\"Unable to modify a Model from: \"+t);var i=e.incremental;\"number\"!=typeof i&&w(\"Unable to apply non-incremental changes to Model: \"+t),0!==i&&(this.xa(\"applyIncrementalJson\"),this.lq(e),this.Xa(\"applyIncrementalJson\"))},e.fz=function(t){return this.wx(t)},Qf.constructGraphLinksModel=function(){return new Qf},(e=Qf.prototype).nm=function(t){if(N(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(P(n)){var r=i;n=this.nm(n),Array.isArray(t)?t[r]=n:w(\"Cannot replace an object in an HTMLCollection or NodeList at \"+r)}}else if(P(t)){for(e in t)if(P(i=t[e])&&(i=this.nm(i),t[e]=i,\"points\"===e&&Array.isArray(i))){for(r=0==i.length%2,n=0;n<i.length;n++)if(\"number\"!=typeof i[n]){r=!1;break}if(r){for(r=new J,n=0;n<i.length/2;n++)r.add(new gt(i[2*n],i[2*n+1]));r.freeze(),t[e]=r}}return function(t){if(\"object\"!=typeof t)return t;var e=t.class||\"\";if(\"NaN\"===e)return NaN;if(\"Date\"===e)return new Date(t.value);if(0!==e.indexOf(\"go.\"))return t;var i=t;if(\"Point\"===(e=e.substr(3)))i=new gt(ld(t.x),ld(t.y));else if(\"Size\"===e)i=new jt(ld(t.width),ld(t.height));else if(\"Rect\"===e)i=new Bt(ld(t.x),ld(t.y),ld(t.width),ld(t.height));else if(\"Margin\"===e)i=new Wt(ld(t.top),ld(t.right),ld(t.bottom),ld(t.left));else if(\"Spot\"===e)i=\"string\"==typeof t.enum?Ee(t.enum):new ze(ld(t.x),ld(t.y),ld(t.offsetX),ld(t.offsetY));else if(\"Brush\"===e){if((i=new wa).type=Y(wa,t.type),\"string\"==typeof t.color&&(i.color=t.color),t.start instanceof ze&&(i.start=t.start),t.end instanceof ze&&(i.end=t.end),\"number\"==typeof t.startRadius&&(i.startRadius=ld(t.startRadius)),\"number\"==typeof t.endRadius&&(i.endRadius=ld(t.endRadius)),P(t=t.colorStops))for(var n in t)i.addColorStop(parseFloat(n),t[n])}else\"Geometry\"===e?(i=null,(i=\"string\"==typeof t.path?Ue.parse(t.path):new Ue).type=Y(Ue,t.type),\"number\"==typeof t.startX&&(i.startX=ld(t.startX)),\"number\"==typeof t.startY&&(i.startY=ld(t.startY)),\"number\"==typeof t.endX&&(i.endX=ld(t.endX)),\"number\"==typeof t.endY&&(i.endY=ld(t.endY)),t.spot1 instanceof ze&&(i.spot1=t.spot1),t.spot2 instanceof ze&&(i.spot2=t.spot2)):\"EnumValue\"===e&&(0===(n=t.classType).indexOf(\"go.\")&&(n=n.substr(3)),\"function\"==typeof(n=bd(n))&&(i=Y(n,t.name)));return i}(t)}return t},e.Em=function(t){return void 0===t?\"undefined\":null===t?\"null\":!0===t?\"true\":!1===t?\"false\":\"string\"==typeof t?this.quote(t):\"number\"==typeof t?1/0===t?\"9e9999\":-1/0===t?\"-9e9999\":isNaN(t)?'{\"class\":\"NaN\"}':t.toString():t instanceof Date?'{\"class\":\"Date\", \"value\":\"'+t.toJSON()+'\"}':t instanceof Number?this.Em(t.valueOf()):N(t)?od(this,t):P(t)?hd(this,t):\"function\"==typeof t?\"null\":t.toString()},e.yh=function(t){return this.Ot.add(t),this},e.pk=function(t){this.Ot.remove(t)},e.js=function(t){this.skipsUndoManager||this.undoManager.Yu(t);for(var e=this.Ot,i=e.length,n=0;n<i;n++)e.J(n)(t)},e.Wa=function(t,e,i,n,r,o,s){ud(this,\"\",t,e,i,n,r,o,s)},e.g=function(t,e,i,n,r){ud(this,\"\",di,t,this,e,i,n,r)},e.Ns=function(t,e,i,n,r,o){ud(this,\"\",di,e,t,i,n,r,o)},Qf.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===di){var i=t.object,n=t.propertyName,r=t.H(e);n===this.nodeKeyProperty&&this.cb(i)&&(void 0!==(e=t.H(!e))&&this.bb.remove(e),void 0!==r&&this.bb.add(r,i)),kd(i,n,r)}else t.change===pi?(i=t.newParam,\"nodeDataArray\"===t.modelChange?P(t=t.newValue)&&\"number\"==typeof i&&(n=this.pa(t),e?(this.Fc[i]===t&&L(this.Fc,i),void 0!==n&&this.bb.remove(n)):(this.Fc[i]!==t&&T(this.Fc,i,t),void 0!==n&&this.bb.add(n,t))):\"\"===t.modelChange?((n=t.object)&&!N(n)&&t.propertyName&&(n=wd(t.object,t.propertyName)),N(n)&&\"number\"==typeof i&&(t=t.newValue,e?L(n,i):T(n,i,t))):w(\"unknown ChangedEvent.Insert modelChange: \"+t.toString())):t.change===gi?(i=t.oldParam,\"nodeDataArray\"===t.modelChange?P(t=t.oldValue)&&\"number\"==typeof i&&(n=this.pa(t),e?(this.Fc[i]!==t&&T(this.Fc,i,t),void 0!==n&&this.bb.add(n,t)):(this.Fc[i]===t&&L(this.Fc,i),void 0!==n&&this.bb.remove(n))):\"\"===t.modelChange?((n=t.object)&&!N(n)&&t.propertyName&&(n=wd(t.object,t.propertyName)),N(n)&&\"number\"==typeof i&&(t=t.oldValue,e?T(n,i,t):L(n,i))):w(\"unknown ChangedEvent.Remove modelChange: \"+t.toString())):t.change!==fi&&w(\"unknown ChangedEvent: \"+t.toString())},Qf.prototype.xa=function(t){return this.undoManager.xa(t)},Qf.prototype.Xa=function(t){return this.undoManager.Xa(t)},Qf.prototype.Hf=function(){return this.undoManager.Hf()},Qf.prototype.commit=function(t,e){void 0===e&&(e=\"\");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=\"\"),this.undoManager.xa(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Xa(e):this.undoManager.Hf(),this.skipsUndoManager=i}},(e=Qf.prototype).Fa=function(t,e){void 0===e&&(e=\"\"),ud(this,\"SourceChanged\",fi,e,t,null,null)},e.pa=function(t){if(null!==t){var e=this.ni;if(\"\"!==e&&void 0!==(e=wd(t,e))){if(cd(e))return e;w(\"Key value for node data \"+t+\" is not a number or a string: \"+e)}}},e.um=function(t,e){if(null!==t){var i=this.ni;if(\"\"!==i)if(this.cb(t)){var n=wd(t,i);n!==e&&null===this.Yb(e)&&(kd(t,i,e),void 0!==n&&this.bb.remove(n),this.bb.add(e,t),ud(this,\"nodeKey\",di,i,t,n,e),\"string\"==typeof i&&this.Fa(t,i),this.qq(n,e))}else kd(t,i,e)}},e.cb=function(t){var e=this.pa(t);return void 0!==e&&this.bb.H(e)===t},e.Yb=function(t){return null===t&&w(\"Model.findNodeDataForKey:key must not be null\"),void 0!==t&&cd(t)?this.bb.H(t):null},e.jv=function(t){if(null!==t){var e=this.ni;if(\"\"!==e){var i=this.pa(t);if(void 0===i||this.bb.contains(i)){var n=this.ll;if(null!==n&&null!=(i=n(this,t))&&!this.bb.contains(i))return void kd(t,e,i);if(\"string\"==typeof i){for(n=2;this.bb.contains(i+n);)n++;kd(t,e,i+n)}else if(void 0===i||\"number\"==typeof i){for(i=-this.bb.count-1;this.bb.contains(i);)i--;kd(t,e,i)}}}}},e.sf=function(t){null!==t&&(et(t),this.cb(t)||fd(this,t,!0))},e.bz=function(t){if(N(t))for(var e=t.length,i=0;i<e;i++)this.sf(t[i]);else for(t=t.iterator;t.next();)this.sf(t.value)},e.mm=function(t){null!==t&&dd(this,t,!0)},e.JA=function(t){if(N(t))for(var e=t.length,i=0;i<e;i++)this.mm(t[i]);else for(t=t.iterator;t.next();)this.mm(t.value)},e.wA=function(t){if(t!==this.nodeDataArray&&N(t)){var e=this.tl;e.clear(),e.addAll(this.bb.iteratorKeys);var i=this.rl;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],s=this.pa(o);if(void 0!==s){i.add(s);var a=this.Yb(s);a!==o&&(null!==a?(this.Mp(a,o),this.vm(o,a)):(o=this.cloneDeep(o),this.um(o,s),this.sf(o)))}else s=this.cloneDeep(o),this.sf(s),i.add(this.pa(s))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.Yb(n))&&this.mm(n);e.clear(),i.clear()}},e.qq=function(t,e){void 0!==e&&(t=yd(this,t))instanceof Q&&this.Pf.add(e,t)},e.Uv=function(){},e.pm=function(){},e.om=function(){},e.xq=function(){},e.mz=function(t){void 0===t?this.Pf.clear():this.Pf.remove(t)},Qf.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.Ik;return P(t=null!==e?e(t,this):md(this,t,!0))&&tt(t),t},Qf.prototype.setDataProperty=function(t,e,i){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.um(t,i);if(e===this.nodeCategoryProperty)return void this.tm(t,i)}else!Md&&t instanceof Ds&&(Md=!0,S('Model.setDataProperty is modifying a GraphObject, \"'+t.toString()+'\"'),S(\"  Is that really your intent?\"));var n=wd(t,e);n!==i&&(kd(t,e,i),this.Ns(t,e,n,i))},(e=Qf.prototype).set=function(t,e,i){this.setDataProperty(t,e,i)},e.Mp=function(t,e){if(e){var i,n=this.cb(t);for(i in e)\"__gohashid\"===i||n&&i===this.nodeKeyProperty||this.setDataProperty(t,i,e[i])}},e.Yy=function(t,e){this.xs(t,-1,e)},e.xs=function(t,e,i){0>e&&(e=t.length),T(t,e,i),ud(this,\"\",pi,\"\",t,null,i,null,e)},e.zv=function(t,e){void 0===e&&(e=-1),t===this.Fc&&w(\"Model.removeArrayItem should not be called on the Model.nodeDataArray\"),-1===e&&(e=t.length-1);var i=t[e];L(t,e),ud(this,\"\",gi,\"\",t,i,null,e,null)},e.Yp=function(t){if(null===t)return\"\";var e=this.yj;return\"\"===e||void 0===(e=wd(t,e))?\"\":\"string\"==typeof e?e:void w(\"getCategoryForNodeData found a non-string category for \"+t+\": \"+e)},e.tm=function(t,e){if(null!==t){var i=this.yj;if(\"\"!==i)if(this.cb(t)){var n=wd(t,i);void 0===n&&(n=\"\"),n!==e&&(kd(t,i,e),ud(this,\"nodeCategory\",di,i,t,n,e))}else kd(t,i,e)}},e.vm=function(t,e){this.tm(e,this.Yp(t))},e.dm=function(){return!1},e.bk=function(){return!1},e.Pi=function(){return!1},e.Cs=function(){return!1},e.ck=function(){return!1},f.Object.defineProperties(Qf.prototype,{name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.g(\"name\",e,t))}},dataFormat:{get:function(){return this.kn},set:function(t){var e=this.kn;e!==t&&(this.kn=t,this.g(\"dataFormat\",e,t))}},isReadOnly:{get:function(){return this.Rg},set:function(t){var e=this.Rg;e!==t&&(this.Rg=t,this.g(\"isReadOnly\",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g(\"modelData\",e,t),this.Fa(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(null!==e&&e.py(this),this.o=t,null!==t&&t.ux(this))}},skipsUndoManager:{get:function(){return this.kh},set:function(t){this.kh=t}},nodeKeyProperty:{get:function(){return this.ni},set:function(t){var e=this.ni;e!==t&&(\"\"===t&&w(\"Model.nodeKeyProperty may not be the empty string\"),0<this.bb.count&&w(\"Cannot set Model.nodeKeyProperty when there is existing node data\"),this.ni=t,this.g(\"nodeKeyProperty\",e,t))}},makeUniqueKeyFunction:{get:function(){return this.ll},set:function(t){var e=this.ll;e!==t&&(this.ll=t,this.g(\"makeUniqueKeyFunction\",e,t))}},nodeDataArray:{get:function(){return this.Fc},set:function(t){var e=this.Fc;if(e!==t){this.bb.clear(),this.Uv();for(var i=t.length,n=0;n<i;n++){var r=t[n];P(r)||w(\"Model.nodeDataArray must only contain Objects, not: \"+r),et(r)}for(this.Fc=t,n=new J,r=0;r<i;r++){var o=t[r],s=this.pa(o);void 0===s||null!==this.bb.H(s)?n.add(o):this.bb.add(s,o)}for(n=n.iterator;n.next();)r=n.value,this.jv(r),void 0!==(o=this.pa(r))&&this.bb.add(o,r);for(ud(this,\"nodeDataArray\",di,\"nodeDataArray\",this,e,t),e=0;e<i;e++)n=t[e],this.pm(n),this.om(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Ik},set:function(t){var e=this.Ik;e!==t&&(this.Ik=t,this.g(\"copyNodeDataFunction\",e,t))}},copiesArrays:{get:function(){return this.bn},set:function(t){var e=this.bn;e!==t&&(this.bn=t,this.g(\"copiesArrays\",e,t))}},copiesArrayObjects:{get:function(){return this.an},set:function(t){var e=this.an;e!==t&&(this.an=t,this.g(\"copiesArrayObjects\",e,t))}},copiesKey:{get:function(){return this.dn},set:function(t){var e=this.dn;e!==t&&(this.dn=t,this.g(\"copiesKey\",e,t))}},afterCopyFunction:{get:function(){return this.Nm},set:function(t){var e=this.Nm;e!==t&&(this.Nm=t,this.g(\"afterCopyFunction\",e,t))}},nodeCategoryProperty:{get:function(){return this.yj},set:function(t){var e=this.yj;e!==t&&(this.yj=t,this.g(\"nodeCategoryProperty\",e,t))}},type:{get:function(){return\"Model\"}}}),Qf.prototype.setCategoryForNodeData=Qf.prototype.tm,Qf.prototype.getCategoryForNodeData=Qf.prototype.Yp,Qf.prototype.removeArrayItem=Qf.prototype.zv,Qf.prototype.insertArrayItem=Qf.prototype.xs,Qf.prototype.addArrayItem=Qf.prototype.Yy,Qf.prototype.assignAllDataProperties=Qf.prototype.Mp,Qf.prototype.set=Qf.prototype.set,Qf.prototype.clearUnresolvedReferences=Qf.prototype.mz,Qf.prototype.mergeNodeDataArray=Qf.prototype.wA,Qf.prototype.removeNodeDataCollection=Qf.prototype.JA,Qf.prototype.removeNodeData=Qf.prototype.mm,Qf.prototype.addNodeDataCollection=Qf.prototype.bz,Qf.prototype.addNodeData=Qf.prototype.sf,Qf.prototype.makeNodeDataKeyUnique=Qf.prototype.jv,Qf.prototype.findNodeDataForKey=Qf.prototype.Yb,Qf.prototype.containsNodeData=Qf.prototype.cb,Qf.prototype.setKeyForNodeData=Qf.prototype.um,Qf.prototype.getKeyForNodeData=Qf.prototype.pa,Qf.prototype.updateTargetBindings=Qf.prototype.Fa,Qf.prototype.commit=Qf.prototype.commit,Qf.prototype.rollbackTransaction=Qf.prototype.Hf,Qf.prototype.commitTransaction=Qf.prototype.Xa,Qf.prototype.startTransaction=Qf.prototype.xa,Qf.prototype.raiseDataChanged=Qf.prototype.Ns,Qf.prototype.raiseChanged=Qf.prototype.g,Qf.prototype.raiseChangedEvent=Qf.prototype.Wa,Qf.prototype.removeChangedListener=Qf.prototype.pk,Qf.prototype.addChangedListener=Qf.prototype.yh,Qf.prototype.writeJsonValue=Qf.prototype.Em,Qf.prototype.replaceJsonObjects=Qf.prototype.nm,Qf.prototype.applyIncrementalJSON=Qf.prototype.fz,Qf.prototype.applyIncrementalJson=Qf.prototype.wx,Qf.prototype.toJSON=Qf.prototype.toJSON,Qf.prototype.toJson=Qf.prototype.uq,Qf.prototype.toIncrementalJSON=Qf.prototype.VA,Qf.prototype.toIncrementalJson=Qf.prototype.By,Qf.prototype.toIncrementalData=Qf.prototype.UA,Qf.prototype.clear=Qf.prototype.clear;var Md=!1,Sd={};function Pd(t,e,i,n){tt(this),this.v=!1,void 0===t&&(t=\"\"),void 0===e&&(e=t),void 0===i&&(i=null),this.j=-1,this.od=null,this.Ol=t,this.Nl=this.xp=0,this.Tr=null,this.Yn=!1,this.Gl=e,this.$m=i,void 0===n?(this.ol=Td,this.Bk=null):(this.ol=Ld,this.Bk=n),this.Et=new Q}function Nd(t,e,i){return null===(t=t.sourceName)||\"\"===t?e:\"/\"===t?i.part:\".\"===t?i:\"..\"===t?i.panel:e.Ya(t)}Qf.className=\"Model\",Qf.fromJSON=Qf.fromJson=function(t,e){void 0===e&&(e=null);var i=null;if(\"string\"==typeof t)try{i=y.JSON.parse(t)}catch(t){}else\"object\"==typeof t?i=t:w(\"Unable to construct a Model from: \"+t);if(null===e){t=null;var n=i.class;if(\"string\"==typeof n)try{var r=null;0===n.indexOf(\"go.\")?r=bd(n=n.substr(3)):null===(r=bd(n))&&(r=y[n]),\"function\"==typeof r&&(t=new r)}catch(t){}null===t||t instanceof Qf?e=t:w(\"Unable to construct a Model of declared class: \"+i.class)}return null===e&&(e=Qf.constructGraphLinksModel()),e.mq(i),e.wv(i),e},Qf.safePropertyValue=wd,Qf.safePropertySet=kd,Sd.Brush=wa,Sd.ChangedEvent=ci,Sd.Geometry=Ue,Sd.Margin=Wt,Sd.Panel=fh,Sd.Point=gt,Sd.Rect=Bt,Sd.Size=jt,Sd.Spot=ze,Sd.Transaction=yi,Sd.UndoManager=mi,Pd.prototype.copy=function(){var t=new Pd;return t.Ol=this.Ol,t.xp=this.xp,t.Nl=this.Nl,t.Tr=this.Tr,t.Yn=this.Yn,t.Gl=this.Gl,t.$m=this.$m,t.ol=this.ol,t.Bk=this.Bk,t},(e=Pd.prototype).gb=function(t){t.classType===Pd&&(this.mode=t)},e.toString=function(){return\"Binding(\"+this.targetProperty+\":\"+this.sourceProperty+(-1!==this.Xi?\" \"+this.Xi:\"\")+\" \"+this.mode.name+\")\"},e.freeze=function(){return this.v=!0,this},e.ea=function(){return this.v=!1,this},e.hy=function(t){return void 0===t&&(t=null),this.mode=Ld,this.backConverter=t,this},e.jq=function(t){return void 0===t&&(t=\"\"),this.sourceName=t,this.isToModel=!1,this},e.zA=function(){return this.sourceName=null,this.isToModel=!0,this},e.Vv=function(t,e,i){var n=this.Gl;if(void 0===i||\"\"===n||n===i){i=this.Ol;var r=this.$m;if(null===r&&\"\"===i)S(\"Binding error: target property is the empty string: \"+this.toString());else{var o=e;if(\"\"!==n&&(o=wd(e,n)),void 0!==o)if(null===r)\"\"!==i&&kd(t,i,o);else try{\"\"!==i?kd(t,i,r(o,t)):r(o,t)}catch(t){}}}},e.zq=function(t,e,i,n){if(this.ol===Ld){var r=this.Ol;if(void 0===i||r===i){i=this.Gl;var o=this.Bk,s=t;if(\"\"!==r&&(s=wd(t,r)),void 0!==s&&!this.Et.contains(t))try{this.Et.add(t);var a=null!==n?n.diagram:null,h=null!==a?a.model:null;if(null===o){if(\"\"!==i)null!==h?h.setDataProperty(e,i,s):kd(e,i,s);else if(null!==h&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var l=n.itemIndex,u=n.panel.itemArray;h.zv(u,l),h.xs(u,l,s)}}else try{if(\"\"!==i){var c=o(s,e,h);null!==h?h.setDataProperty(e,i,c):kd(e,i,c)}else{var f=o(s,e,h);if(void 0!==f&&null!==h&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var d=n.itemIndex,p=n.panel.itemArray;h.zv(p,d),h.xs(p,d,f)}}}catch(t){}}finally{this.Et.remove(t)}}}},f.Object.defineProperties(Pd.prototype,{Xi:{get:function(){return this.j},set:function(t){this.v&&k(this),this.j=t}},targetProperty:{get:function(){return this.Ol},set:function(t){this.v&&k(this),this.Ol=t}},sourceName:{get:function(){return this.Tr},set:function(t){this.v&&k(this),this.Tr=t,null!==t&&(this.Yn=!1)}},isToModel:{get:function(){return this.Yn},set:function(t){this.v&&k(this),this.Yn=t}},sourceProperty:{get:function(){return this.Gl},set:function(t){this.v&&k(this),this.Gl=t}},converter:{get:function(){return this.$m},set:function(t){this.v&&k(this),this.$m=t}},backConverter:{get:function(){return this.Bk},set:function(t){this.v&&k(this),this.Bk=t}},mode:{get:function(){return this.ol},set:function(t){this.v&&k(this),this.ol=t}}}),Pd.prototype.updateSource=Pd.prototype.zq,Pd.prototype.updateTarget=Pd.prototype.Vv,Pd.prototype.ofModel=Pd.prototype.zA,Pd.prototype.ofObject=Pd.prototype.jq,Pd.prototype.makeTwoWay=Pd.prototype.hy;var Cd=\"Binding\",Td=new V(Pd,\"OneWay\",1),Ld=new V(Pd,\"TwoWay\",2);function Ad(t,e,i){Qf.call(this),this.vw=',\\n  \"insertedLinkKeys\": ',this.Hy=',\\n  \"modifiedLinkData\": ',this.xw=',\\n  \"removedLinkKeys\": ',this.Yc=[],this.Vf=new Q,this.kb=new pt,this.hi=\"\",this.bj=this.Hk=this.ml=null,this.af=\"from\",this.bf=\"to\",this.uj=this.tj=\"\",this.sj=\"category\",this.ce=\"\",this.sl=\"isGroup\",this.Ae=\"group\",this.cn=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(N(t)?this.nodeDataArray=t:Object.assign(this,t)),i&&Object.assign(this,i)}function jd(t,e){for(var i=new Q,n=0;n<t.linkDataArray.length;n++){var r=t.linkDataArray[n];rd(t,e,r,r,i)}return i}function Od(t,e,i){if(null!==e&&\"\"!==(t=i?t.af:t.bf)&&void 0!==(t=wd(e,t))){if(cd(t))return t;w((i?\"FromKey\":\"ToKey\")+\" value for link data \"+e+\" is not a number or a string: \"+t)}}function Dd(t,e,i,n){if(null===i&&(i=void 0),null!==e){var r=n?t.af:t.bf;if(\"\"!==r)if(i=t.fm(i),t.wc(e)){var o=wd(e,r);o!==i&&(gd(t,o,e),kd(e,r,i),null===t.Yb(i)&&pd(t,i,e),ud(t,n?\"linkFromKey\":\"linkToKey\",di,r,e,o,i),\"string\"==typeof r&&t.Fa(e,r))}else kd(e,r,i)}}function Fd(t,e,i){return null===e||\"\"===(t=i?t.tj:t.uj)||void 0===(e=wd(e,t))?\"\":e}function Bd(t,e,i,n){if(null!==e){var r=n?t.tj:t.uj;if(\"\"!==r)if(t.wc(e)){var o=wd(e,r);void 0===o&&(o=\"\"),o!==i&&(kd(e,r,i),ud(t,n?\"linkFromPortId\":\"linkToPortId\",di,r,e,o,i),\"string\"==typeof r&&t.Fa(e,r))}else kd(e,r,i)}}function Id(t,e,i){if(\"\"!==t.linkKeyProperty){var n=t.pc(e);if(void 0!==n&&t.kb.H(n)===e)return;t.Hs(e),void 0===(n=t.pc(e))&&w(\"GraphLinksModel.makeLinkDataKeyUnique failed on \"+e+\". Data not added to model.\"),t.kb.add(n,e)}t.Vf.add(e),n=null,i&&(n=t.Yc.length,t.Yc.splice(n,0,e)),ud(t,\"linkDataArray\",pi,\"linkDataArray\",t,null,e,null,n),Rd(t,e)}function zd(t,e,i){t.Vf.remove(e);var n=t.pc(e);if(void 0!==n&&t.kb.remove(n),n=null,i){if(0>(n=t.Yc.indexOf(e)))return;t.Yc.splice(n,1)}if(ud(t,\"linkDataArray\",gi,\"linkDataArray\",t,e,null,n,null),gd(t,i=Od(t,e,!0),e),gd(t,i=Od(t,e,!1),e),n=t.Bf(e),Array.isArray(n))for(var r=n.length,o=0;o<r;o++)gd(t,i=n[o],e)}function Rd(t,e){var i=Od(t,e,!0);i=t.fm(i),null===t.Yb(i)&&pd(t,i,e),i=Od(t,e,!1),i=t.fm(i),null===t.Yb(i)&&pd(t,i,e);var n=t.Bf(e);if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],null===t.Yb(i)&&pd(t,i,e)}function Ed(t,e,i){t.sq(i,t.ts(e)),t.Gv(i,t.Tx(e)),t.Kv(i,t.Wx(e)),t.Ss(i,t.Bf(e)),t.Hv(i,t.Ux(e)),t.Lv(i,t.Xx(e))}Pd.className=\"Binding\",Pd.parseEnum=function(t,e){return function(i){return null===(i=Y(t,i))?e:i}},Pd.toString=D,Pd.OneWay=Td,Pd.TwoWay=Ld,c(Ad,Qf),Ad.constructGraphLinksModel=Qf.constructGraphLinksModel,Ad.prototype.cloneProtected=function(t){Qf.prototype.cloneProtected.call(this,t),t.hi=this.hi,t.ml=this.ml,t.Hk=this.Hk,t.af=this.af,t.bf=this.bf,t.tj=this.tj,t.uj=this.uj,t.sj=this.sj,t.ce=this.ce,t.sl=this.sl,t.Ae=this.Ae,t.cn=this.cn},(e=Ad.prototype).clear=function(){Qf.prototype.clear.call(this),this.Yc=[],this.kb.clear(),this.Vf.clear()},e.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.uq();var e=(\"\"!==this.name?this.name:\"\")+\" GraphLinksModel\";if(0<t){e+=\"\\n node data:\";var i,n=(t=this.nodeDataArray).length;for(i=0;i<n;i++){var r=t[i];e+=\" \"+this.pa(r)+\":\"+D(r)}for(e+=\"\\n link data:\",n=(t=this.linkDataArray).length,i=0;i<n;i++)e+=\" \"+Od(this,r=t[i],!0)+\"--\\x3e\"+Od(this,r,!1)}return e},e.aw=function(t,e){\"\"===this.linkKeyProperty&&w(\"GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.\");var i=Qf.prototype.aw.call(this,t,e),n=this,r=new Q,o=new Q,s=new Q,a=this.Mh;t.changes.each((function(t){t.model===n&&(\"linkDataArray\"===t.modelChange?t.change===pi?r.add(t.newValue):t.change===gi&&s.add(t.oldValue):n.wc(t.object)?o.add(t.object):null!==t.object&&(null!==t.object&&a&&a.contains(t.object)?a.get(t.object).each((function(t){n.wc(t)&&o.add(t)})):t.object instanceof Qf||n.cb(t.object)||jd(n,t.object).each((function(t){o.add(t)}))))}));var h=this.rl;h.clear(),r.each((function(t){h.add(n.pc(t)),e||o.add(t)}));var l=this.tl;return l.clear(),s.each((function(t){l.add(n.pc(t)),e&&o.add(t)})),t=n.cloneDeep(o.ya()),0<h.count&&(null===i&&(i={}),e?i.removedLinkKeys=h.ya():i.insertedLinkKeys=h.ya()),0<t.length&&(null===i&&(i={}),i.modifiedLinkData=t),0<l.count&&(null===i&&(i={}),e?i.insertedLinkKeys=l.ya():i.removedLinkKeys=l.ya()),l.clear(),h.clear(),i},e.Dm=function(){var t=Qf.prototype.Dm.call(this),e=\"\";return\"category\"!==this.linkCategoryProperty&&\"string\"==typeof this.linkCategoryProperty&&(e+=',\\n  \"linkCategoryProperty\": '+this.quote(this.linkCategoryProperty)),\"\"!==this.linkKeyProperty&&\"string\"==typeof this.linkKeyProperty&&(e+=',\\n  \"linkKeyProperty\": '+this.quote(this.linkKeyProperty)),\"from\"!==this.linkFromKeyProperty&&\"string\"==typeof this.linkFromKeyProperty&&(e+=',\\n  \"linkFromKeyProperty\": '+this.quote(this.linkFromKeyProperty)),\"to\"!==this.linkToKeyProperty&&\"string\"==typeof this.linkToKeyProperty&&(e+=',\\n  \"linkToKeyProperty\": '+this.quote(this.linkToKeyProperty)),\"\"!==this.linkFromPortIdProperty&&\"string\"==typeof this.linkFromPortIdProperty&&(e+=',\\n  \"linkFromPortIdProperty\": '+this.quote(this.linkFromPortIdProperty)),\"\"!==this.linkToPortIdProperty&&\"string\"==typeof this.linkToPortIdProperty&&(e+=',\\n  \"linkToPortIdProperty\": '+this.quote(this.linkToPortIdProperty)),\"\"!==this.linkLabelKeysProperty&&\"string\"==typeof this.linkLabelKeysProperty&&(e+=',\\n  \"linkLabelKeysProperty\": '+this.quote(this.linkLabelKeysProperty)),\"isGroup\"!==this.nodeIsGroupProperty&&\"string\"==typeof this.nodeIsGroupProperty&&(e+=',\\n  \"nodeIsGroupProperty\": '+this.quote(this.nodeIsGroupProperty)),\"group\"!==this.nodeGroupKeyProperty&&\"string\"==typeof this.nodeGroupKeyProperty&&(e+=',\\n  \"nodeGroupKeyProperty\": '+this.quote(this.nodeGroupKeyProperty)),t+e},e.mq=function(t){Qf.prototype.mq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},e.bw=function(){return Qf.prototype.bw.call(this)+',\\n  \"linkDataArray\": '+od(this,this.linkDataArray,!0)},e.wv=function(t){Qf.prototype.wv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.nm(t),this.linkDataArray=t)},e.$v=function(t,e){\"\"===this.linkKeyProperty&&w(\"GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.\");var i=Qf.prototype.$v.call(this,t,e),n=this,r=new Q,o=new Q,s=new Q,a=this.Mh;t.changes.each((function(t){t.model===n&&(\"linkDataArray\"===t.modelChange?t.change===pi?r.add(t.newValue):t.change===gi&&s.add(t.oldValue):n.wc(t.object)?o.add(t.object):null!==t.object&&(null!==t.object&&a&&a.contains(t.object)?a.get(t.object).each((function(t){n.wc(t)&&o.add(t)})):t.object instanceof Qf||n.cb(t.object)||jd(n,t.object).each((function(t){o.add(t)}))))}));var h=this.rl;h.clear(),r.each((function(t){h.add(n.pc(t)),e||o.add(t)}));var l=this.tl;return l.clear(),s.each((function(t){l.add(n.pc(t)),e&&o.add(t)})),t=i,0<h.count&&(t+=(e?this.xw:this.vw)+od(this,h.ya(),!0)),0<o.count&&(t+=this.Hy+od(this,o.ya(),!0)),0<l.count&&(t+=(e?this.vw:this.xw)+od(this,l.ya(),!0)),l.clear(),h.clear(),t},e.lq=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&w(\"applyIncrementalJson cannot change Model properties\"),Qf.prototype.lq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.Dh(r);null===o&&(o=this.Rp({}),this.Rs(o,r),this.Bi(o))}if(e=t.modifiedLinkData,Array.isArray(e))for(i=e.length,n=0;n<i;n++)if(r=e[n],o=this.pc(r),null!==(o=this.Dh(o))){for(var s in r)\"__gohashid\"!==s&&s!==this.linkKeyProperty&&this.setDataProperty(o,s,r[s]);Ed(this,r,o)}if(t=t.removedLinkKeys,Array.isArray(t))for(s=t.length,e=0;e<s;e++)null!==(i=this.Dh(t[e]))&&this.lm(i)},Ad.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===di){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.wc(i)){var r=t.H(e);return void 0!==(e=t.H(!e))&&this.kb.remove(e),void 0!==r&&this.kb.add(r,i),void kd(i,n,r)}}else if(t.change===pi){if(i=t.newParam,\"linkDataArray\"===t.modelChange)return void(P(t=t.newValue)&&\"number\"==typeof i&&(n=this.pc(t),e?(this.Vf.remove(t),this.Yc[i]===t&&this.Yc.splice(i,1),void 0!==n&&this.kb.remove(n)):(this.Vf.add(t),this.Yc[i]!==t&&this.Yc.splice(i,0,t),void 0!==n&&this.kb.add(n,t))));if(\"linkLabelKeys\"===t.modelChange)return n=this.Bf(t.object),void(Array.isArray(n)&&\"number\"==typeof i&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue)))}else if(t.change===gi){if(i=t.oldParam,\"linkDataArray\"===t.modelChange)return void(P(t=t.oldValue)&&\"number\"==typeof i&&(n=this.pc(t),e?(this.Vf.add(t),this.Yc[i]!==t&&this.Yc.splice(i,0,t),void 0!==n&&this.kb.add(n,t)):(this.Vf.remove(t),this.Yc[i]===t&&this.Yc.splice(i,1),void 0!==n&&this.kb.remove(n))));if(\"linkLabelKeys\"===t.modelChange)return n=this.Bf(t.object),void(Array.isArray(n)&&\"number\"==typeof i&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1))))}Qf.prototype.changeState.call(this,t,e)}},(e=Ad.prototype).fm=function(t){if(void 0!==t){var e=this.bj;if(null!==e){var i=this.Yb(t);null===i&&(kd(i=this.copyNodeData(e),this.nodeKeyProperty,t),this.sf(i))}return t}},e.Tx=function(t){return Od(this,t,!0)},e.Gv=function(t,e){Dd(this,t,e,!0)},e.Wx=function(t){return Od(this,t,!1)},e.Kv=function(t,e){Dd(this,t,e,!1)},e.Ux=function(t){return Fd(this,t,!0)},e.Hv=function(t,e){Bd(this,t,e,!0)},e.Xx=function(t){return Fd(this,t,!1)},e.Lv=function(t,e){Bd(this,t,e,!1)},e.Bf=function(t){if(null===t)return _d;var e=this.ce;return\"\"===e||void 0===(t=wd(t,e))?_d:t},e.Ss=function(t,e){if(null!==t){var i=this.ce;if(\"\"!==i)if(this.wc(t)){var n=wd(t,i);if(void 0===n&&(n=_d),n!==e){if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)gd(this,n[o],t);for(kd(t,i,e),r=e.length,o=0;o<r;o++){var s=e[o];null===this.Yb(s)&&pd(this,s,t)}ud(this,\"linkLabelKeys\",di,i,t,n,e),\"string\"==typeof i&&this.Fa(t,i)}}else kd(t,i,e)}},e.tu=function(t,e){if(null!=e&&null!==t){var i=this.ce;if(\"\"!==i){var n=wd(t,i);if(void 0===n)(i=[]).push(e),this.Ss(t,i);else if(Array.isArray(n)){var r=n.indexOf(e);0<=r||(r=n.length,n.push(e),this.wc(t)&&(null===this.Yb(e)&&pd(this,e,t),ud(this,\"linkLabelKeys\",pi,i,t,null,e,null,r)))}else w(i+\" property is not an Array; cannot addLabelKeyForLinkData: \"+t)}}},e.oy=function(t,e){if(null!=e&&null!==t){var i=this.ce;if(\"\"!==i){var n=wd(t,i);if(Array.isArray(n)){var r=n.indexOf(e);0>r||(n.splice(r,1),this.wc(t)&&(gd(this,e,t),ud(this,\"linkLabelKeys\",gi,i,t,e,null,r,null)))}else void 0!==n&&w(i+\" property is not an Array; cannot removeLabelKeyforLinkData: \"+t)}}},e.pc=function(t){if(null!==t){var e=this.hi;if(\"\"!==e&&void 0!==(e=wd(t,e))){if(cd(e))return e;w(\"Key value for link data \"+t+\" is not a number or a string: \"+e)}}},e.Rs=function(t,e){if(null!==t){var i=this.hi;if(\"\"!==i)if(this.wc(t)){var n=wd(t,i);n!==e&&null===this.Dh(e)&&(kd(t,i,e),void 0!==n&&this.kb.remove(n),this.kb.add(e,t),ud(this,\"linkKey\",di,i,t,n,e),\"string\"==typeof i&&this.Fa(t,i))}else kd(t,i,e)}},e.Dh=function(t){return null===t&&w(\"GraphLinksModel.findLinkDataForKey:key must not be null\"),void 0!==t&&cd(t)?this.kb.H(t):null},e.Hs=function(t){if(null!==t){var e=this.hi;if(\"\"!==e){var i=this.pc(t);if(void 0===i||this.kb.contains(i)){var n=this.ml;if(null!==n&&null!=(i=n(this,t))&&!this.kb.contains(i))return void kd(t,e,i);if(\"string\"==typeof i){for(n=2;this.kb.contains(i+n);)n++;kd(t,e,i+n)}else if(void 0===i||\"number\"==typeof i){for(i=-this.kb.count-1;this.kb.contains(i);)i--;kd(t,e,i)}}}}},e.wc=function(t){return null!==t&&this.Vf.contains(t)},e.Bi=function(t){null!==t&&(et(t),this.wc(t)||Id(this,t,!0))},e.az=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.Bi(t[i]);else for(t=t.iterator;t.next();)this.Bi(t.value)},e.lm=function(t){null!==t&&zd(this,t,!0)},e.HA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.lm(t[i]);else for(t=t.iterator;t.next();)this.lm(t.value)},e.vA=function(t){if(\"\"===this.linkKeyProperty&&w(\"GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed.\"),t!==this.linkDataArray&&N(t)){var e=this.tl;e.clear(),e.addAll(this.kb.iteratorKeys);var i=this.rl;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],s=this.pc(o);if(void 0!==s){i.add(s);var a=this.Dh(s);a!==o&&(null!==a?(this.Mp(a,o),Ed(this,o,a)):(o=this.cloneDeep(o),this.Rs(o,s),this.Bi(o)))}else s=this.cloneDeep(o),this.Bi(s),i.add(this.pc(s))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.Dh(n))&&this.lm(n);e.clear(),i.clear()}},e.Rp=function(t){if(null===t)return null;var e=this.Hk;return P(t=null!==e?e(t,this):md(this,t,!0))&&(tt(t),\"\"!==this.af&&kd(t,this.af,void 0),\"\"!==this.bf&&kd(t,this.bf,void 0),\"\"!==this.ce&&kd(t,this.ce,[])),t},e.dv=function(t){if(null===t)return!1;var e=this.sl;return\"\"!==e&&!!wd(t,e)},e.Eh=function(t){if(null!==t){var e=this.Ae;if(\"\"!==e&&void 0!==(e=wd(t,e))){if(cd(e))return e;w(\"GroupKey value for node data \"+t+\" is not a number or a string: \"+e)}}},e.tq=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.Ae;if(\"\"!==i)if(this.cb(t)){var n=wd(t,i);n!==e&&(gd(this,n,t),kd(t,i,e),null===this.Yb(e)&&pd(this,e,t),ud(this,\"nodeGroupKey\",di,i,t,n,e),\"string\"==typeof i&&this.Fa(t,i))}else kd(t,i,e)}},Ad.prototype.copyNodeData=function(t){return null===t?null:(t=Qf.prototype.copyNodeData.call(this,t),this.Rj||\"\"===this.Ae||void 0===wd(t,this.Ae)||kd(t,this.Ae,void 0),t)},Ad.prototype.setDataProperty=function(t,e,i){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.um(t,i);if(e===this.nodeCategoryProperty)return void this.tm(t,i);if(e===this.nodeGroupKeyProperty)return void this.tq(t,i)}else if(this.wc(t)){if(e===this.linkFromKeyProperty)return void Dd(this,t,i,!0);if(e===this.linkToKeyProperty)return void Dd(this,t,i,!1);if(e===this.linkFromPortIdProperty)return void Bd(this,t,i,!0);if(e===this.linkToPortIdProperty)return void Bd(this,t,i,!1);if(e===this.linkKeyProperty)return void this.Rs(t,i);if(e===this.linkCategoryProperty)return void this.sq(t,i);if(e===this.linkLabelKeysProperty)return void this.Ss(t,i)}var n=wd(t,e);n!==i&&(kd(t,e,i),this.Ns(t,e,n,i))},(e=Ad.prototype).Mp=function(t,e){if(e){var i,n=this.cb(t),r=this.wc(t);for(i in e)\"__gohashid\"===i||n&&i===this.nodeKeyProperty||n&&i===this.nodeIsGroupProperty&&wd(t,i)===e[i]||r&&i===this.linkKeyProperty||this.setDataProperty(t,i,e[i])}},e.qq=function(t,e){Qf.prototype.qq.call(this,t,e);for(var i=this.bb.iterator;i.next();)this.Bv(i.value,t,e);for(i=this.Vf.iterator;i.next();){var n=i.value,r=t,o=e;if(Od(this,n,!0)===r){var s=this.af;kd(n,s,o),ud(this,\"linkFromKey\",di,s,n,r,o),\"string\"==typeof s&&this.Fa(n,s)}if(Od(this,n,!1)===r&&(kd(n,s=this.bf,o),ud(this,\"linkToKey\",di,s,n,r,o),\"string\"==typeof s&&this.Fa(n,s)),s=this.Bf(n),Array.isArray(s))for(var a=s.length,h=this.ce,l=0;l<a;l++)s[l]===r&&(s[l]=o,ud(this,\"linkLabelKeys\",pi,h,n,r,o,l,l))}},e.Bv=function(t,e,i){if(this.Eh(t)===e){var n=this.Ae;kd(t,n,i),ud(this,\"nodeGroupKey\",di,n,t,e,i),\"string\"==typeof n&&this.Fa(t,n)}},e.Uv=function(){Qf.prototype.Uv.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)Rd(this,t[i])},e.pm=function(t){Qf.prototype.pm.call(this,t);var e=yd(this,t=this.pa(t));if(null!==e){var i=A();for(e=e.iterator;e.next();){var n=e.value;if(this.cb(n)){if(this.Eh(n)===t){var r=this.Ae;ud(this,\"nodeGroupKey\",di,r,n,t,t),\"string\"==typeof r&&this.Fa(n,r),i.push(n)}}else if(Od(this,n,!0)===t&&(r=this.af,ud(this,\"linkFromKey\",di,r,n,t,t),\"string\"==typeof r&&this.Fa(n,r),i.push(n)),Od(this,n,!1)===t&&(r=this.bf,ud(this,\"linkToKey\",di,r,n,t,t),\"string\"==typeof r&&this.Fa(n,r),i.push(n)),r=this.Bf(n),Array.isArray(r))for(var o=r.length,s=this.ce,a=0;a<o;a++)r[a]===t&&(ud(this,\"linkLabelKeys\",pi,s,n,t,t,a,a),i.push(n))}for(e=0;e<i.length;e++)gd(this,t,i[e]);j(i)}},e.om=function(t){Qf.prototype.om.call(this,t);var e=this.Eh(t);null===this.Yb(e)&&pd(this,e,t)},e.xq=function(t){Qf.prototype.xq.call(this,t),gd(this,this.Eh(t),t)},e.ts=function(t){if(null===t)return\"\";var e=this.sj;return\"\"===e||void 0===(e=wd(t,e))?\"\":\"string\"==typeof e?e:void w(\"getCategoryForLinkData found a non-string category for \"+t+\": \"+e)},Ad.prototype.getLinkCategoryForData=function(t){return this.ts(t)},Ad.prototype.sq=function(t,e){if(null!==t){var i=this.sj;if(\"\"!==i)if(this.wc(t)){var n=wd(t,i);void 0===n&&(n=\"\"),n!==e&&(kd(t,i,e),ud(this,\"linkCategory\",di,i,t,n,e),\"string\"==typeof i&&this.Fa(t,i))}else kd(t,i,e)}},Ad.prototype.setLinkCategoryForData=function(t,e){this.sq(t,e)},(e=Ad.prototype).vm=function(t,e){Qf.prototype.vm.call(this,t,e),this.tq(e,this.Eh(t))},e.bk=function(){return!0},e.Pi=function(){return!0},e.Cs=function(){return!0},e.ck=function(){return!0},f.Object.defineProperties(Ad.prototype,{archetypeNodeData:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g(\"archetypeNodeData\",e,t))}},linkFromKeyProperty:{get:function(){return this.af},set:function(t){var e=this.af;e!==t&&(this.af=t,this.g(\"linkFromKeyProperty\",e,t))}},linkToKeyProperty:{get:function(){return this.bf},set:function(t){var e=this.bf;e!==t&&(this.bf=t,this.g(\"linkToKeyProperty\",e,t))}},linkFromPortIdProperty:{get:function(){return this.tj},set:function(t){var e=this.tj;e!==t&&(this.tj=t,this.g(\"linkFromPortIdProperty\",e,t))}},linkToPortIdProperty:{get:function(){return this.uj},set:function(t){var e=this.uj;e!==t&&(this.uj=t,this.g(\"linkToPortIdProperty\",e,t))}},linkLabelKeysProperty:{get:function(){return this.ce},set:function(t){var e=this.ce;e!==t&&(this.ce=t,this.g(\"linkLabelKeysProperty\",e,t))}},linkDataArray:{get:function(){return this.Yc},set:function(t){var e=this.Yc;if(e!==t){this.kb.clear();for(var i=t.length,n=0;n<i;n++){var r=t[n];P(r)||w(\"GraphLinksModel.linkDataArray must only contain Objects, not: \"+r),et(r)}if(this.Yc=t,\"\"!==this.linkKeyProperty){for(n=new J,r=0;r<i;r++){var o=t[r],s=this.pc(o);void 0===s||null!==this.kb.H(s)?n.add(o):this.kb.add(s,o)}for(n=n.iterator;n.next();)r=n.value,this.Hs(r),void 0!==(o=this.pc(r))&&this.kb.add(o,r)}for(n=new Q,r=0;r<i;r++)n.add(t[r]);for(this.Vf=n,ud(this,\"linkDataArray\",di,\"linkDataArray\",this,e,t),e=0;e<i;e++)Rd(this,t[e])}}},linkKeyProperty:{get:function(){return this.hi},set:function(t){var e=this.hi;if(e!==t){this.hi=t,this.kb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var r=this.linkDataArray[n],o=this.pc(r);void 0===o&&(this.Hs(r),o=this.pc(r)),void 0!==o&&this.kb.add(o,r)}this.g(\"linkKeyProperty\",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.ml},set:function(t){var e=this.ml;e!==t&&(this.ml=t,this.g(\"makeUniqueLinkKeyFunction\",e,t))}},copyLinkDataFunction:{get:function(){return this.Hk},set:function(t){var e=this.Hk;e!==t&&(this.Hk=t,this.g(\"copyLinkDataFunction\",e,t))}},nodeIsGroupProperty:{get:function(){return this.sl},set:function(t){var e=this.sl;e!==t&&(this.sl=t,this.g(\"nodeIsGroupProperty\",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.g(\"nodeGroupKeyProperty\",e,t))}},Rj:{get:function(){return this.cn},set:function(t){this.cn!==t&&(this.cn=t)}},linkCategoryProperty:{get:function(){return this.sj},set:function(t){var e=this.sj;e!==t&&(this.sj=t,this.g(\"linkCategoryProperty\",e,t))}},type:{get:function(){return\"GraphLinksModel\"}}}),Ad.prototype.setCategoryForLinkData=Ad.prototype.sq,Ad.prototype.getCategoryForLinkData=Ad.prototype.ts,Ad.prototype.assignAllDataProperties=Ad.prototype.Mp,Ad.prototype.setGroupKeyForNodeData=Ad.prototype.tq,Ad.prototype.getGroupKeyForNodeData=Ad.prototype.Eh,Ad.prototype.isGroupForNodeData=Ad.prototype.dv,Ad.prototype.copyLinkData=Ad.prototype.Rp,Ad.prototype.mergeLinkDataArray=Ad.prototype.vA,Ad.prototype.removeLinkDataCollection=Ad.prototype.HA,Ad.prototype.removeLinkData=Ad.prototype.lm,Ad.prototype.addLinkDataCollection=Ad.prototype.az,Ad.prototype.addLinkData=Ad.prototype.Bi,Ad.prototype.containsLinkData=Ad.prototype.wc,Ad.prototype.makeLinkDataKeyUnique=Ad.prototype.Hs,Ad.prototype.findLinkDataForKey=Ad.prototype.Dh,Ad.prototype.setKeyForLinkData=Ad.prototype.Rs,Ad.prototype.getKeyForLinkData=Ad.prototype.pc,Ad.prototype.removeLabelKeyForLinkData=Ad.prototype.oy,Ad.prototype.addLabelKeyForLinkData=Ad.prototype.tu,Ad.prototype.setLabelKeysForLinkData=Ad.prototype.Ss,Ad.prototype.getLabelKeysForLinkData=Ad.prototype.Bf,Ad.prototype.setToPortIdForLinkData=Ad.prototype.Lv,Ad.prototype.getToPortIdForLinkData=Ad.prototype.Xx,Ad.prototype.setFromPortIdForLinkData=Ad.prototype.Hv,Ad.prototype.getFromPortIdForLinkData=Ad.prototype.Ux,Ad.prototype.setToKeyForLinkData=Ad.prototype.Kv,Ad.prototype.getToKeyForLinkData=Ad.prototype.Wx,Ad.prototype.setFromKeyForLinkData=Ad.prototype.Gv,Ad.prototype.getFromKeyForLinkData=Ad.prototype.Tx,Ad.prototype.clear=Ad.prototype.clear;var _d=Object.freeze([]);function Vd(t,e){Qf.call(this),this.Be=\"parent\",this.en=!1,this.Aj=\"parentLinkCategory\",void 0!==t&&(N(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function Yd(t){rf.call(this),this.Kw=this.sn=this.bc=0,this.Vq=360,this.Jw=tp,this.fj=0,this.zw=new gt,this.Nq=this.de=0,this.es=new gp,this.tt=this.zj=0,this.Ry=600,this.So=NaN,this.Sm=1,this.tp=0,this.Ll=360,this.Hb=tp,this.K=rp,this.$c=fp,this.Sc=Sf,this.jf=6,this.Co=dp,t&&Object.assign(this,t)}function Gd(t,e,i,n,r){var o=t.Vq,s=t.bc;t=t.de,n=n*Math.PI/180,i=i*Math.PI/180;for(var a=e.length,h=0;h<a;h++){var l=n+(r===rp?h*i/(360<=o?a:a-1):-h*i/a),u=e.J(h),c=s*Math.tan(l)/t;c=Math.sqrt((s*s+t*t*c*c)/(1+c*c)),u.centerX=c*Math.cos(l),u.centerY=c*Math.sin(l),u.actualAngle=180*l/Math.PI}}function Xd(t,e,i,n){var r=t.bc,o=t.de,s=t.fj;i=i*Math.PI/180;for(var a=e.length,h=0;h<a;h++){var l=e.J(h),u=e.J(h===a-1?0:h+1),c=o*Math.sin(i);l.centerX=r*Math.cos(i),l.centerY=c,l.actualAngle=180*i/Math.PI,isNaN(l.diameter)&&vp(l,0),isNaN(u.diameter)&&vp(u,0),l=Qd(t,r,o,n===rp?i:-i,(l.diameter+u.diameter)/2+s),i+=n===rp?l:-l}}function Ud(t,e,i,n){var r=t.bc,o=t.de,s=t.Nq;i=i*Math.PI/180;for(var a=e.length,h=0;h<a;h++){var l=e.J(h);l.centerX=r*Math.cos(i),l.centerY=o*Math.sin(i),l.actualAngle=180*i/Math.PI,l=Qd(t,r,o,n===rp?i:-i,s),i+=n===rp?l:-l}}function qd(t,e,i,n,r){var o=t.Vq;if(t.zj=0,t.es=new gp,360>i){for(o=n+(r===rp?o:-o);0>o;)o+=360;180<(o%=360)&&(o-=360),o*=Math.PI/180,t.tt=o,Hd(t,e,i,n,r)}else Kd(t,e,i,n,r);t.es.commit(e)}function Kd(t,e,i,n,r){var o=t.bc,s=t.fj,a=t.sn,h=o*Math.cos(n*Math.PI/180),l=t.de*Math.sin(n*Math.PI/180),u=e.ya();if(3===u.length)u[0].centerX=o,u[0].centerY=0,u[1].centerX=u[0].centerX-u[0].width/2-u[1].width/2-s,u[1].y=u[0].y,u[2].centerX=(u[0].centerX+u[1].centerX)/2,u[2].y=u[0].y-u[2].height-s;else if(4===u.length)u[0].centerX=o,u[0].centerY=0,u[2].centerX=-u[0].centerX,u[2].centerY=u[0].centerY,u[1].centerX=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-s,u[3].centerX=0,u[3].y=Math.max(u[0].y+u[0].height+s,u[2].y+u[2].height+s);else{o=gt.alloc();for(var c=0;c<u.length&&(u[c].centerX=h,u[c].centerY=l,!(c>=u.length-1));c++)Wd(t,h,l,u,c,r,o)||Zd(t,h,l,u,c,r,o),h=o.x,l=o.y;if(gt.free(o),t.zj++,!(23<t.zj)){h=u[0].centerX,l=u[0].centerY,o=u[u.length-1].centerX,c=u[u.length-1].centerY;var f=Math.abs(h-o)-((u[0].width+u[u.length-1].width)/2+s),d=Math.abs(l-c)-((u[0].height+u[u.length-1].height)/2+s);s=0,1>Math.abs(d)?Math.abs(h-o)<(u[0].width+u[u.length-1].width)/2&&(s=0):s=0<d?d:1>Math.abs(f)?0:f,h=Math.abs(o)>Math.abs(c)?0<o!=l>c:0<c!=h<o,(h=r===rp?h:!h)&&(s=-Math.abs(s),s=Math.min(s,-u[u.length-1].width),s=Math.min(s,-u[u.length-1].height)),t.es.compare(s,u),1<Math.abs(s)&&(t.bc=8>t.zj?t.bc-s/(2*Math.PI):5>u.length&&10<s?t.bc/2:t.bc-(0<s?1.7:-2.3),t.de=t.bc*a,Kd(t,e,i,n,r))}}}function Hd(t,e,i,n,r){for(var o=t.bc,s=t.de,a=t.sn,h=o*Math.cos(n*Math.PI/180),l=s*Math.sin(n*Math.PI/180),u=gt.alloc(),c=e.ya(),f=0;f<c.length&&(c[f].centerX=h,c[f].centerY=l,!(f>=c.length-1));f++)Wd(t,h,l,c,f,r,u)||Zd(t,h,l,c,f,r,u),h=u.x,l=u.y;if(gt.free(u),t.zj++,!(23<t.zj)){if(h=Math.atan2(l,h),h=r===rp?t.tt-h:h-t.tt,o=(h=Math.abs(h)<Math.abs(h-2*Math.PI)?h:h-2*Math.PI)*(o+s)/2,s=t.es,Math.abs(o)<Math.abs(s.$l))for(s.$l=o,s.qk=[],s.Fm=[],h=0;h<c.length;h++)s.qk[h]=c[h].bounds.x,s.Fm[h]=c[h].bounds.y;1<Math.abs(o)&&(t.bc=8>t.zj?t.bc-o/(2*Math.PI):t.bc-(0<o?1.7:-2.3),t.de=t.bc*a,Hd(t,e,i,n,r))}}function Wd(t,e,i,n,r,o,s){var a=t.bc,h=t.de,l=0;t=(n[r].width+n[r+1].width)/2+t.fj;var u=!1;if(0<=i!=(o===rp)){if((o=e+t)>a){if((o=e-t)<-a)return s.x=o,s.y=l,!1;u=!0}}else if((o=e-t)<-a){if((o=e+t)>a)return s.x=o,s.y=l,!1;u=!0}return l=Math.sqrt(1-Math.min(1,o*o/(a*a)))*h,0>i!==u&&(l=-l),Math.abs(i-l)>(n[r].height+n[r+1].height)/2?(s.x=o,s.y=l,!1):(s.x=o,s.y=l,!0)}function Zd(t,e,i,n,r,o,s){var a=t.bc,h=t.de,l=0;if(t=(n[r].height+n[r+1].height)/2+t.fj,n=!1,0<=e!=(o===rp)){if((o=i-t)<-h){if((o=i+t)>h)return s.x=l,void(s.y=o);n=!0}}else if((o=i+t)>h){if((o=i-t)<-h)return s.x=l,void(s.y=o);n=!0}l=Math.sqrt(1-Math.min(1,o*o/(h*h)))*a,0>e!==n&&(l=-l),s.x=l,s.y=o}function Jd(t,e,i,n,r){var o=t.Ry;if(.001>Math.abs(t.sn-1))return void 0!==n&&void 0!==r?r*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var s=0,a=void 0!==n&&void 0!==r?r/(o+1):Math.PI/(2*(o+1)),h=0,l=0;l<=o;l++){h=void 0!==n&&void 0!==r?n+l*r/o:l*Math.PI/(2*o);var u=Math.sin(h);s+=Math.sqrt(1-t*t*u*u)*a}return void 0!==n&&void 0!==r?(e>i?e:i)*s:4*(e>i?e:i)*s}function $d(t,e,i,n,r){return e/(void 0!==n&&void 0!==r?Jd(t,1,i,n,r):Jd(t,1,i))}function Qd(t,e,i,n,r){if(.001>Math.abs(t.sn-1))return r/e;var o=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,s=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var a=0;;a++){var h=Math.sin(n+a*t);if((s+=(e>i?e:i)*Math.sqrt(1-o*o*h*h)*t)>=r)return a*t}}Ad.className=\"GraphLinksModel\",Sd.GraphLinksModel=Ad,Qf.constructGraphLinksModel=Qf.constructGraphLinksModel=function(){return new Ad},Qf.initDiagramModel=vd=function(){return new Ad},c(Vd,Qf),Vd.constructGraphLinksModel=Qf.constructGraphLinksModel,Vd.prototype.cloneProtected=function(t){Qf.prototype.cloneProtected.call(this,t),t.Be=this.Be,t.en=this.en,t.Aj=this.Aj},(e=Vd.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.uq();var e=(\"\"!==this.name?this.name:\"\")+\" TreeModel\";if(0<t){e+=\"\\n node data:\";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var r=t[n];e+=\" \"+this.pa(r)+\":\"+D(r)}}return e},e.Dm=function(){var t=Qf.prototype.Dm.call(this),e=\"\";return\"parent\"!==this.nodeParentKeyProperty&&\"string\"==typeof this.nodeParentKeyProperty&&(e+=',\\n  \"nodeParentKeyProperty\": '+this.quote(this.nodeParentKeyProperty)),t+e},e.mq=function(t){Qf.prototype.mq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},e.lq=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&w(\"applyIncrementalJson cannot change Model properties\"),Qf.prototype.lq.call(this,t)},e.fm=function(t){return t},e.Fh=function(t){if(null!==t){var e=this.Be;if(\"\"!==e&&void 0!==(e=wd(t,e))){if(cd(e))return e;w(\"ParentKey value for node data \"+t+\" is not a number or a string: \"+e)}}},e.he=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.Be;if(\"\"!==i)if(e=this.fm(e),this.cb(t)){var n=wd(t,i);n!==e&&(gd(this,n,t),kd(t,i,e),null===this.Yb(e)&&pd(this,e,t),ud(this,\"nodeParentKey\",di,i,t,n,e),\"string\"==typeof i&&this.Fa(t,i))}else kd(t,i,e)}},e.ws=function(t){if(null===t)return\"\";var e=this.Aj;return\"\"===e||void 0===(e=wd(t,e))?\"\":\"string\"==typeof e?e:(w(\"getParentLinkCategoryForNodeData found a non-string category for \"+t+\": \"+e),\"\")},Vd.prototype.getLinkCategoryForData=function(t){return this.ws(t)},Vd.prototype.Ts=function(t,e){if(null!==t){var i=this.Aj;if(\"\"!==i)if(this.cb(t)){var n=wd(t,i);void 0===n&&(n=\"\"),n!==e&&(kd(t,i,e),ud(this,\"parentLinkCategory\",di,i,t,n,e),\"string\"==typeof i&&this.Fa(t,i))}else kd(t,i,e)}},Vd.prototype.setLinkCategoryForData=function(t,e){this.Ts(t,e)},Vd.prototype.copyNodeData=function(t){return null===t?null:(t=Qf.prototype.copyNodeData.call(this,t),this.Sj||\"\"===this.Be||void 0===wd(t,this.Be)||kd(t,this.Be,void 0),t)},Vd.prototype.setDataProperty=function(t,e,i){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.um(t,i);if(e===this.nodeCategoryProperty)return void this.tm(t,i);if(e===this.nodeParentKeyProperty)return void this.he(t,i)}var n=wd(t,e);n!==i&&(kd(t,e,i),this.Ns(t,e,n,i))},(e=Vd.prototype).qq=function(t,e){Qf.prototype.qq.call(this,t,e);for(var i=this.bb.iterator;i.next();)this.Bv(i.value,t,e)},e.Bv=function(t,e,i){if(this.Fh(t)===e){var n=this.Be;kd(t,n,i),ud(this,\"nodeParentKey\",di,n,t,e,i),\"string\"==typeof n&&this.Fa(t,n)}},e.pm=function(t){Qf.prototype.pm.call(this,t);var e=yd(this,t=this.pa(t));if(null!==e){var i=A();for(e=e.iterator;e.next();){var n=e.value;if(this.cb(n)&&this.Fh(n)===t){var r=this.Be;ud(this,\"nodeParentKey\",di,r,n,t,t),\"string\"==typeof r&&this.Fa(n,r),i.push(n)}}for(e=0;e<i.length;e++)gd(this,t,i[e]);j(i)}},e.om=function(t){Qf.prototype.om.call(this,t);var e=this.Fh(t);e=this.fm(e),null===this.Yb(e)&&pd(this,e,t)},e.xq=function(t){Qf.prototype.xq.call(this,t),gd(this,this.Fh(t),t)},e.vm=function(t,e){Qf.prototype.vm.call(this,t,e),this.Ts(e,this.ws(t)),this.he(e,this.Fh(t))},e.dm=function(){return!0},e.Cs=function(){return!0},f.Object.defineProperties(Vd.prototype,{nodeParentKeyProperty:{get:function(){return this.Be},set:function(t){var e=this.Be;e!==t&&(this.Be=t,this.g(\"nodeParentKeyProperty\",e,t))}},Sj:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)}},parentLinkCategoryProperty:{get:function(){return this.Aj},set:function(t){var e=this.Aj;e!==t&&(this.Aj=t,this.g(\"parentLinkCategoryProperty\",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return\"TreeModel\"}}}),Vd.prototype.setParentLinkCategoryForNodeData=Vd.prototype.Ts,Vd.prototype.getParentLinkCategoryForNodeData=Vd.prototype.ws,Vd.prototype.setParentKeyForNodeData=Vd.prototype.he,Vd.prototype.getParentKeyForNodeData=Vd.prototype.Fh,Vd.className=\"TreeModel\",Sd.TreeModel=Vd,c(Yd,rf),Yd.prototype.cloneProtected=function(t){rf.prototype.cloneProtected.call(this,t),t.So=this.So,t.Sm=this.Sm,t.tp=this.tp,t.Ll=this.Ll,t.Hb=this.Hb,t.K=this.K,t.$c=this.$c,t.Sc=this.Sc,t.jf=this.jf,t.Co=this.Co},Yd.prototype.gb=function(t){t.classType===Yd?t===up||t===cp||t===hp||t===lp||t===fp?this.sorting=t:t===sp||t===ap||t===rp||t===op?this.direction=t:t===ip||t===ep||t===tp||t===np?this.arrangement=t:t!==pp&&t!==dp||(this.nodeDiameterFormula=t):rf.prototype.gb.call(this,t)},Yd.prototype.createNetwork=function(){return new yp(this)},Yd.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new J;e.addAll(t.iterator),t=new J;var i,n,r=new J,o=this.sort(e),s=this.Nq,a=this.arrangement,h=this.nodeDiameterFormula,l=this.radius;(!isFinite(l)||0>=l)&&(l=NaN);var u=this.aspectRatio;(!isFinite(u)||0>=u)&&(u=1);var c=this.startAngle;isFinite(c)||(c=0);var f=this.sweepAngle;if((!isFinite(f)||360<f||1>f)&&(f=360),e=this.spacing,isFinite(e)||(e=NaN),a===np&&h===pp?a=tp:a===np&&h!==pp&&(a=this.arrangement),(this.direction===sp||this.direction===ap)&&this.sorting!==fp){for(h=0;!(h>=o.length||(t.add(o.J(h)),h+1>=o.length));h+=2)r.add(o.J(h+1));this.direction===sp?(this.arrangement===np&&t.reverse(),(o=new J).addAll(t),o.addAll(r)):(this.arrangement===np&&r.reverse(),(o=new J).addAll(r),o.addAll(t))}h=o.length;for(var d=n=i=0;d<o.length;d++){var p=c+f*n*(this.direction===rp?1:-1)/h,g=o.J(d).diameter;isNaN(g)&&(g=vp(o.J(d),p)),360>f&&(0===d||d===o.length-1)&&(g/=2),i+=g,n++}if(isNaN(l)||a===np){if(isNaN(e)&&(e=6),a!==tp&&a!==np){for(n=-1/0,s=0;s<h;s++)d=o.J(s),i=o.J(s===h-1?0:s+1),isNaN(d.diameter)&&vp(d,0),isNaN(i.diameter)&&vp(i,0),n=Math.max(n,(d.diameter+i.diameter)/2);s=n+e,l=a===ip?(n+e)/(2*Math.PI/h):$d(this,s*(360<=f?h:h-1),u,c*Math.PI/180,f*Math.PI/180)}else l=$d(this,i+(360<=f?h:h-1)*(a!==np?e:1.6*e),u,c*Math.PI/180,f*Math.PI/180);n=l*u}else if(d=Jd(this,l,n=l*u,c*Math.PI/180,f*Math.PI/180),isNaN(e))a!==tp&&a!==np||(e=(d-i)/(360<=f?h:h-1));else if(a===tp||a===np)(d=(d-i)/(360<=f?h:h-1))<e?n=(l=$d(this,i+e*(360<=f?h:h-1),u,c*Math.PI/180,f*Math.PI/180))*u:e=d;else{for(s=-1/0,i=0;i<h;i++)p=o.J(i),g=o.J(i===h-1?0:i+1),isNaN(p.diameter)&&vp(p,0),isNaN(g.diameter)&&vp(g,0),s=Math.max(s,(p.diameter+g.diameter)/2);(i=$d(this,(s+=e)*(360<=f?h:h-1),u,c*Math.PI/180,f*Math.PI/180))>l?n=(l=i)*u:s=d/(360<=f?h:h-1)}if(this.Jw=a,this.bc=l,this.sn=u,this.Kw=c,this.Vq=f,this.fj=e,this.de=n,this.Nq=s,e=o,o=this.Jw,a=this.bc,l=this.Kw,u=this.Vq,c=this.fj,f=this.de,h=this.Nq,this.direction!==sp&&this.direction!==ap||o!==np)if(this.direction===sp||this.direction===ap){switch(s=0,o){case ep:s=180*Qd(this,a,f,l,h)/Math.PI;break;case tp:h=e=0,null!==(s=t.first())&&(e=vp(s,Math.PI/2)),null!==(s=r.first())&&(h=vp(s,Math.PI/2)),s=180*Qd(this,a,f,l,c+(e+h)/2)/Math.PI;break;case ip:s=u/e.length}if(this.direction===sp){switch(o){case ep:Ud(this,t,l,op);break;case tp:Xd(this,t,l,op);break;case ip:Gd(this,t,u/2,l,op)}switch(o){case ep:Ud(this,r,l+s,rp);break;case tp:Xd(this,r,l+s,rp);break;case ip:Gd(this,r,u/2,l+s,rp)}}else{switch(o){case ep:Ud(this,r,l,op);break;case tp:Xd(this,r,l,op);break;case ip:Gd(this,r,u/2,l,op)}switch(o){case ep:Ud(this,t,l+s,rp);break;case tp:Xd(this,t,l+s,rp);break;case ip:Gd(this,t,u/2,l+s,rp)}}}else switch(o){case ep:Ud(this,e,l,this.direction);break;case tp:Xd(this,e,l,this.direction);break;case ip:Gd(this,e,u,l,this.direction);break;case np:qd(this,e,u,l,this.direction)}else qd(this,e,u,l-u/2,rp)}this.updateParts(),this.network=null,this.isValidLayout=!0},Yd.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Yd.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new gt(0,0):(i.x=this.arrangementOrigin.x+this.bc,i.y=this.arrangementOrigin.y+this.de);for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;r.x+=i.x,r.y+=i.y,r.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.ie(i.ie(t)),this.group.move(e),this.zw=e.ie(t))},Yd.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Yd.prototype.sort=function(t){switch(this.sorting){case hp:break;case lp:t.reverse();break;case up:t.sort(this.comparer);break;case cp:t.sort(this.comparer),t.reverse();break;case fp:return this.Ms(function(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new J;for(var n=0;n<t.length;n++){var r=-1,o=-1;if(0===n)for(var s=0;s<t.length;s++){var a=t.J(s).edgesCount;a>r&&(r=a,o=s)}else for(s=0;s<t.length;s++)(a=e[s])>r&&(r=a,o=s);for(i.add(t.J(o)),e[o]=-1,s=(o=t.J(o)).sourceEdges;s.next();)0>(r=t.indexOf(s.value.fromVertex))||0<=e[r]&&e[r]++;for(o=o.destinationEdges;o.next();)0>(r=t.indexOf(o.value.toVertex))||0<=e[r]&&e[r]++}return i}(t));default:w(\"Invalid sorting type.\")}return t},Yd.prototype.Ms=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.J(i);e[i]=[];for(var r,o=n.destinationEdges;o.next();)(r=t.indexOf(o.value.toVertex))!==i&&0>e[i].indexOf(r)&&e[i].push(r);for(n=n.sourceEdges;n.next();)(r=t.indexOf(n.value.fromVertex))!==i&&0>e[i].indexOf(r)&&e[i].push(r)}for(o=[],i=0;i<e.length;i++)o[i]=0;i=[];var s=[],a=[];n=[],r=new J;for(var h=0,l=0;l<e.length;l++){var u=e[l].length;if(1===u)n.push(l);else if(0===u)r.add(t.J(l));else{if(0===h)i.push(l);else{for(var c=u=1/0,f=-1,d=[],p=0;p<i.length;p++)0>e[i[p]].indexOf(i[p===i.length-1?0:p+1])&&d.push(p===i.length-1?0:p+1);if(0===d.length)for(p=0;p<i.length;p++)d.push(p);for(p=0;p<d.length;p++){for(var g=d[p],y=e[l],m=0,v=0;v<s.length;v++){var x=o[s[v]],b=o[a[v]];if(x<b){var w=x;x=b}else w=b;if(w<g&&g<=x)for(b=0;b<y.length;b++){var k=y[b];0>i.indexOf(k)||w<o[k]&&o[k]<x||w===o[k]||x===o[k]||m++}else for(b=0;b<y.length;b++)k=y[b],0>i.indexOf(k)||w<o[k]&&o[k]<x&&w!==o[k]&&x!==o[k]&&m++}for(y=m,v=m=0;v<e[l].length;v++)0<=(w=i.indexOf(e[l][v]))&&(m+=(w=Math.abs(g-(w>=g?w+1:w)))<i.length+1-w?w:i.length+1-w);for(v=0;v<s.length;v++)(w=o[s[v]])>=g&&w++,(x=o[a[v]])>=g&&x++,w>x&&(b=x,x=w,w=b),x-w<(i.length+2)/2==(w<g&&g<=x)&&m++;(y<u||y===u&&m<c)&&(u=y,c=m,f=g)}for(i.splice(f,0,l),u=0;u<i.length;u++)o[i[u]]=u;for(u=0;u<e[l].length;u++)c=e[l][u],0<=i.indexOf(c)&&(s.push(l),a.push(c))}h++}}for(s=i.length;;){for(o=!0,a=0;a<n.length;a++)if(l=e[h=n[a]][0],0<=(u=i.indexOf(l))){for(f=c=0;f<e[l].length;f++)0>(d=i.indexOf(e[l][f]))||d===u||(c+=d<u!=(p=d>u?d-u:u-d)>s-p?1:-1);i.splice(0>c?u:u+1,0,h),n.splice(a,1),a--}else o=!1;if(o)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)r.add(t.J(i[e]));return r},f.Object.defineProperties(Yd.prototype,{radius:{get:function(){return this.So},set:function(t){this.So!==t&&(0<t||isNaN(t))&&(this.So=t,this.B())}},aspectRatio:{get:function(){return this.Sm},set:function(t){this.Sm!==t&&0<t&&(this.Sm=t,this.B())}},startAngle:{get:function(){return this.tp},set:function(t){this.tp!==t&&(this.tp=t,this.B())}},sweepAngle:{get:function(){return this.Ll},set:function(t){this.Ll!==t&&(this.Ll=0<t&&360>=t?t:360,this.B())}},arrangement:{get:function(){return this.Hb},set:function(t){this.Hb===t||t!==np&&t!==tp&&t!==ep&&t!==ip||(this.Hb=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==rp&&t!==op&&t!==sp&&t!==ap||(this.K=t,this.B())}},sorting:{get:function(){return this.$c},set:function(t){this.$c===t||t!==hp&&t!==lp&&t!==up&&!cp&&t!==fp||(this.$c=t,this.B())}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t,this.B())}},spacing:{get:function(){return this.jf},set:function(t){this.jf!==t&&(this.jf=t,this.B())}},nodeDiameterFormula:{get:function(){return this.Co},set:function(t){this.Co===t||t!==dp&&t!==pp||(this.Co=t,this.B())}},actualXRadius:{get:function(){return this.bc}},actualYRadius:{get:function(){return this.de}},actualSpacing:{get:function(){return this.fj}},actualCenter:{get:function(){return this.zw}}});var tp=new V(Yd,\"ConstantSpacing\",0),ep=new V(Yd,\"ConstantDistance\",1),ip=new V(Yd,\"ConstantAngle\",2),np=new V(Yd,\"Packed\",3),rp=new V(Yd,\"Clockwise\",4),op=new V(Yd,\"Counterclockwise\",5),sp=new V(Yd,\"BidirectionalLeft\",6),ap=new V(Yd,\"BidirectionalRight\",7),hp=new V(Yd,\"Forwards\",8),lp=new V(Yd,\"Reverse\",9),up=new V(Yd,\"Ascending\",10),cp=new V(Yd,\"Descending\",11),fp=new V(Yd,\"Optimized\",12),dp=new V(Yd,\"Pythagorean\",13),pp=new V(Yd,\"Circular\",14);function gp(){this.$l=-1/0,this.Fm=this.qk=null}function yp(t){vf.call(this,t)}function mp(t){Mf.call(this,t),this.D=this.ej=NaN}function vp(t,e){var i=t.network;if(null===i)return NaN;if(null===(i=i.layout))return NaN;if(i.arrangement===np)if(i.nodeDiameterFormula===pp)t.ej=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===i)return t.width;if(0===e)return t.height;t.ej=Math.min(t.height/i,t.width/e)}else t.ej=i.nodeDiameterFormula===pp?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.ej}function xp(t){Pf.call(this,t)}function bp(t){rf.call(this),this.wh=null,this.bo=0,this.Qd=new jt(100,100).freeze(),this.Rm=!1,this.hf=!0,this.jd=!1,this.nl=100,this.vn=1,this.Tf=1e3,this.xo=10,this.To=Math,this.Ok=.05,this.Nk=50,this.Lk=150,this.Mk=0,this.nn=10,this.mn=5,t&&Object.assign(this,t)}function wp(t,e,i){if(function(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.wh=t.network.vertexes.ya(),(t=t.wh).sort((function(t,e){return null===t||null===e||t===e?0:e.Kd-t.Kd})),e=t.length-1;0<=e&&1>=t[e].Kd;)e--;return 1<t.length-e}(t,e)){var n=t.Tf;t.Tf*=1+1/(e+1);var r=function(t,e){for(var i=t.network,n=new Tp(t),r=0;r<t.wh.length;r++){var o=t.wh[r];if(!(1<o.Kd))break;n.ng(o);var s=new Cp;s.ht=o.Kd,s.lt=o.width,s.gt=o.height,s.ew=o.focus.x,s.fw=o.focus.y,null===o.Me&&(o.Me=new J),o.Me.add(s),o.Ev=o.Me.count-1}for(o=i.edges.iterator;o.next();){var a=o.value;r=a.fromVertex,s=a.toVertex,r.network===n&&s.network===n?n.Rl(a):r.network===n?(null===(a=r.Qj)&&(a=new J,r.Qj=a),a.add(s),r.Kd--,r.Kh+=s.Kh):s.network===n&&(null===(a=s.Qj)&&(a=new J,s.Qj=a),a.add(r),s.Kd--,s.Kh+=r.Kh)}for(r=n.edges.iterator;r.next();)(o=r.value).length*=Math.max(1,Xe.sqrt((o.fromVertex.Kh+o.toVertex.Kh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){var h=(r=e.value).Qj;if(null!==h&&0<h.count&&!(0>=(s=r.Me.J(r.Me.count-1).ht-r.Kd))){for(var l=a=0,u=h.count-s;u<h.count;u++){var c=h.J(u),f=null;for(o=c.edges.iterator;o.next();){var d=o.value;if(d.Vx(c)===r){f=d;break}}null!==f&&(l+=f.length,a+=c.width*c.height)}o=r.centerX,h=r.centerY,u=r.width,c=r.height,f=r.focus,1>(d=u*c)&&(d=1),s=((a=Xe.sqrt((a+d+l*l*4/(s*s))/d))-1)*u/2,a=(a-1)*c/2,r.bounds=new Bt(o-f.x-s,h-f.y-a,u+2*s,c+2*a),r.focus=new gt(f.x+s,f.y+a)}}return t.network=n,i}(t,e),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=o,wp(t,e+1,i),Pp(t,o),function(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,null!==n.Me){var r=n.Me.J(n.Ev);n.Kd=r.ht;var o=r.ew,s=r.fw;n.bounds=new Bt(n.centerX-o,n.centerY-s,r.lt,r.gt),n.focus=new gt(o,s),n.Ev--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}(t,r),(e=r.vertexes.ya()).sort((function(t,e){return null===t||null===e||t===e?0:e.Kd-t.Kd})),i=0;i<e.length;i++)kp(t,e[i]);t.Tf=n}}function kp(t,e){var i=e.Qj;if(null!==i&&0!==i.count){var n=e.centerX,r=e.centerY,o=e.width,s=e.height;null!==e.Me&&0<e.Me.count&&(o=(s=e.Me.J(0)).lt,s=s.gt),o=Xe.sqrt(o*o+s*s)/2;for(var a=!1,h=s=0,l=0,u=e.vertexes.iterator;u.next();){var c=u.value;1>=c.Kd?h++:(a=!0,l++,s+=Math.atan2(e.centerY-c.centerY,e.centerX-c.centerX))}if(0!==h)for(0<l&&(s/=l),l=e=0,e=a?2*Math.PI/(h+1):2*Math.PI/h,0==h%2&&(l=e/2),1<i.count&&i.sort((function(t,e){return null===t||null===e||t===e?0:e.width*e.height-t.width*t.height})),a=0==h%2?0:1,i=i.iterator;i.next();)if(!(1<(h=i.value).Kd||t.isFixed(h))){for(u=null,c=h.edges.iterator;c.next();){u=c.value;break}c=h.width;var f=h.height;c=Xe.sqrt(c*c+f*f)/2,u=o+u.length+c,c=s+(e*(a/2>>1)+l)*(0==a%2?1:-1),h.centerX=n+u*Math.cos(c),h.centerY=r+u*Math.sin(c),a++}}}function Mp(t,e,i,n,r,o,s){var a=9e19,h=-1,l=0;t:for(;l<e;l++){var u=t[l],c=u.x-i,f=u.y-n;if((c=c*c+f*f)<a){for(f=l-1;0<=f;f--)if(t[f].y>u.y&&t[f].x-u.x<r+s.width)continue t;for(f=l+1;f<e;f++)if(t[f].x>u.x&&t[f].y-u.y<o+s.height)continue t;h=l,a=c}}return h}function Sp(t,e){var i=t.bounds,n=i.x;t=i.y;var r=i.width;i=i.height;var o=e.bounds,s=o.x;e=o.y;var a=o.width;return o=o.height,n+r<s?t>e+o?(i=n+r-s,t=t-e-o,Xe.sqrt(i*i+t*t)):t+i<e?(n=n+r-s,t=t+i-e,Xe.sqrt(n*n+t*t)):s-(n+r):n>s+a?t>e+o?(i=n-s-a,t=t-e-o,Xe.sqrt(i*i+t*t)):t+i<e?(n=n-s-a,t=t+i-e,Xe.sqrt(n*n+t*t)):n-(s+a):t>e+o?t-(e+o):t+i<e?e-(t+i):.1}function Pp(t,e){for(t.wh=null,e=t.bo+e;t.bo<e&&(t.bo++,Np(t)););t.wh=null}function Np(t){null===t.wh&&(t.wh=t.network.vertexes.ya());var e=t.wh;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,r=n,o=i=i.centerY,s=1;s<e.length;s++){var a=e[s];a.forceX=0,a.forceY=0;var h=a.centerX;a=a.centerY,n=Math.min(n,h),r=Math.max(r,h),i=Math.min(i,a),o=Math.max(o,a)}(r=r-n>o-i)?e.sort((function(t,e){return null===t||null===e||t===e?0:t.centerX-e.centerX})):e.sort((function(t,e){return null===t||null===e||t===e?0:t.centerY-e.centerY})),i=t.Tf;var l=n=a=0;for(o=0;o<e.length;o++){n=(s=e[o]).bounds,a=s.focus,h=n.x+a.x;var u=n.y+a.y;n=s.charge*t.electricalFieldX(h,u),l=s.charge*t.electricalFieldY(h,u),n+=s.mass*t.gravitationalFieldX(h,u),l+=s.mass*t.gravitationalFieldY(h,u),s.forceX+=n,s.forceY+=l;for(var c=o+1;c<e.length;c++){var f=e[c];if(f!==s){n=f.bounds,a=f.focus,l=n.x+a.x;var d=n.y+a.y;if(h-l>i||l-h>i){if(r)break}else if(u-d>i||d-u>i){if(!r)break}else{var p=Sp(s,f);1>p?(null===(n=t.randomNumberGenerator)&&(t.randomNumberGenerator=n=new jp),p=n.random(),a=n.random(),n=h>l?(1+(n=Math.abs(f.bounds.right-s.bounds.x)))*p:h<l?-(1+(n=Math.abs(f.bounds.x-s.bounds.right)))*p:(1+(n=Math.max(f.width,s.width)))*p-n/2,l=u>d?(1+(l=Math.abs(f.bounds.bottom-s.bounds.y)))*a:h<l?-(1+(l=Math.abs(f.bounds.y-s.bounds.bottom)))*a:(1+(l=Math.max(f.height,s.height)))*a-l/2):(n=(l-h)/p*(a=-s.charge*f.charge/(p*p)),l=(d-u)/p*a),s.forceX+=n,s.forceY+=l,f.forceX-=n,f.forceY-=l}}}}for(r=t.network.edges.iterator;r.next();)i=(a=r.value).fromVertex,o=a.toVertex,s=i.bounds,h=i.focus,n=s.x+h.x,s=s.y+h.y,u=o.bounds,c=o.focus,h=u.x+c.x,u=u.y+c.y,1>(c=Sp(i,o))?(null===(c=t.randomNumberGenerator)&&(t.randomNumberGenerator=c=new jp),a=c.random(),c=c.random(),n=(n>h?1:-1)*(1+(o.width>i.width?o.width:i.width))*a,l=(s>u?1:-1)*(1+(o.height>i.height?o.height:i.height))*c):(n=(h-n)/c*(a=a.stiffness*(c-a.length)),l=(u-s)/c*a),i.forceX+=n,i.forceY+=l,o.forceX-=n,o.forceY-=l;for(r=n=0;r<e.length;r++)i=e[r],t.isFixed(i)?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}function Cp(){this.fw=this.ew=this.gt=this.lt=this.ht=0}function Tp(t){vf.call(this,t)}function Lp(t){Mf.call(this,t),this.Ba=!1,this.Ma=this.D=NaN,this.Kh=this.Kd=this.wa=this.L=0,this.Me=this.Qj=null,this.Ev=0}function Ap(t){Pf.call(this,t),this.j=this.o=NaN}function jp(){var t=0;void 0===t&&(t=42),this.seed=t,this.Cy=48271,this.Ey=2147483647,this.Q=44488.07041494893,this.Fy=3399,this.Dy=1/2147483647,this.random()}function Op(t){rf.call(this),this.ac=this.be=25,this.K=0,this.Kk=cg,this.il=pg,this.Zk=mg,this.qj=4,this.vk=wg,this.ag=15,this.hf=!0,this.jo=4,this.Ea=this.ji=this.ra=-1,this.tc=this.Vg=0,this.Ka=this.wd=this.xd=this.ae=this.Ab=null,this.bh=0,this.yo=this.xj=null,this.Ec=0,this.zo=null,this.Rc=new gt,this.ye=[],this.ye.length=100,t&&Object.assign(this,t)}function Dp(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function Fp(t){null===t.xj&&(t.xj=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.xj[e]=n.layer,e++,t.xj[e]=n.column,e++,t.xj[e]=n.index,e++}return t.xj}function Bp(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function Ip(t,e,i){var n=lg(t,e),r=t.Ab[e];(null===t.yo||t.yo.length<r*r)&&(t.yo=[]);for(var o=t.yo,s=0;s<r;s++){var a,h=0,l=n[s],u=l.near;if(null!==u&&u.layer===l.layer)if((l=u.index)>s)for(var c=s+1;c<l;c++){var f=n[c];f.near===u&&f.uf===u.uf||h++}else for(c=s-1;c>l;c--)(f=n[c]).near===u&&f.uf===u.uf||h++;if(0<=i)for(l=n[s].sourceEdgesArrayAccess,u=0;u<l.length;u++){var d=l[u];if(d.valid&&d.fromVertex.layer!==e)for(f=d.fromVertex.index,c=d.portToPos,d=d.portFromPos,a=u+1;a<l.length;a++){var p=l[a];if(p.valid&&p.fromVertex.layer!==e){var g=p.fromVertex.index,y=p.portToPos;p=p.portFromPos,c<y&&(f>g||f===g&&d>p)&&h++,y<c&&(g>f||g===f&&p>d)&&h++}}}if(0>=i)for(l=n[s].destinationEdgesArrayAccess,u=0;u<l.length;u++)if((d=l[u]).valid&&d.toVertex.layer!==e)for(f=d.toVertex.index,c=d.portToPos,d=d.portFromPos,a=u+1;a<l.length;a++)(p=l[a]).valid&&p.toVertex.layer!==e&&(g=p.toVertex.index,y=p.portToPos,d<(p=p.portFromPos)&&(f>g||f===g&&c>y)&&h++,p<d&&(g>f||g===f&&y>c)&&h++);for(o[s*r+s]=h,l=s+1;l<r;l++){var m=0,v=0;if(0<=i){h=n[s].sourceEdgesArrayAccess;var x=n[l].sourceEdgesArrayAccess;for(u=0;u<h.length;u++)if((d=h[u]).valid&&d.fromVertex.layer!==e)for(f=d.fromVertex.index,d=d.portFromPos,a=0;a<x.length;a++)(p=x[a]).valid&&p.fromVertex.layer!==e&&(g=p.fromVertex.index,p=p.portFromPos,(f<g||f===g&&d<p)&&v++,(g<f||g===f&&p<d)&&m++)}if(0>=i)for(h=n[s].destinationEdgesArrayAccess,x=n[l].destinationEdgesArrayAccess,u=0;u<h.length;u++)if((d=h[u]).valid&&d.toVertex.layer!==e)for(f=d.toVertex.index,c=d.portToPos,a=0;a<x.length;a++)(p=x[a]).valid&&p.toVertex.layer!==e&&(g=p.toVertex.index,y=p.portToPos,(f<g||f===g&&c<y)&&v++,(g<f||g===f&&y<c)&&m++);o[s*r+l]=m,o[l*r+s]=v}}return ug(t,e,n),o}function zp(t){for(var e=0,i=0;i<=t.ra;i++){for(var n=t,r=i,o=lg(n,r),s=n.Ab[r],a=0,h=0;h<s;h++){var l=o[h].destinationEdgesArrayAccess;if(null!==l)for(var u=0;u<l.length;u++){var c=l[u];if(c.valid&&c.toVertex.layer!==r){var f=c.fromVertex.column+c.portFromColOffset,d=c.toVertex.column+c.portToColOffset;a+=(Math.abs(f-d)+1)*Dp(c)}}}ug(n,r,o),e+=a}return e}function Rp(t,e,i){for(var n=lg(t,e),r=t.Ab[e],o=[],s=0;s<r;s++){var a=n[s],h=null;0>=i&&(h=a.sourceEdgesArrayAccess);var l=null;0<=i&&(l=a.destinationEdgesArrayAccess);var u=0,c=0,f=a.near;if(null!==f&&f.layer===a.layer&&(u+=f.column-1,c++),null!==h)for(f=0;f<h.length;f++){var d=(a=h[f]).fromVertex;a.valid&&!a.rev&&d.layer!==e&&(u+=d.column,c++)}if(null!==l)for(h=0;h<l.length;h++)f=(a=l[h]).toVertex,a.valid&&!a.rev&&f.layer!==e&&(u+=f.column,c++);o[s]=0===c?-1:u/c}return ug(t,e,n),o}function Ep(t,e,i){for(var n=lg(t,e),r=t.Ab[e],o=[],s=0;s<r;s++){var a=n[s],h=null;0>=i&&(h=a.sourceEdgesArrayAccess);var l=null;0<=i&&(l=a.destinationEdgesArrayAccess);var u=0,c=[],f=a.near;if(null!==f&&f.layer===a.layer&&(c[u]=f.column-1,u++),a=void 0,null!==h)for(f=0;f<h.length;f++){var d=(a=h[f]).fromVertex;a.valid&&!a.rev&&d.layer!==e&&(c[u]=d.column+a.portFromColOffset,u++)}if(null!==l)for(h=0;h<l.length;h++)f=(a=l[h]).toVertex,a.valid&&!a.rev&&f.layer!==e&&(c[u]=f.column+a.portToColOffset,u++);0===u?o[s]=-1:(c.sort((function(t,e){return t-e})),l=u>>1,o[s]=0!=(1&u)?c[l]:c[l-1]+c[l]>>1)}return ug(t,e,n),o}function _p(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var s=e.destinationEdges;s.next();){var a=s.value,h=a.toVertex,l=e.layer-h.layer;l===(a=t.linkMinLength(a))&&_p(t,h,i,n,r,o)}if(o)for(s=e.sourceEdges;s.next();)(l=(h=(a=s.value).fromVertex).layer-e.layer)===(a=t.linkMinLength(a))&&_p(t,h,i,n,r,o)}}function Vp(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var s=e.destinationEdges;s.next();)Vp(t,s.value.toVertex,i,n,r,o);if(o)for(e=e.sourceEdges;e.next();)Vp(t,e.value.fromVertex,i,n,r,o)}}function Yp(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Gp(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function Xp(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function Up(t,e){e.og=t.bh,t.bh++;for(var i=e.destinationEdges;i.next();){var n=i.value,r=n.toVertex;-1===r.og&&(n.forest=!0,Up(t,r))}e.finish=t.bh,t.bh++}function qp(t){for(var e=t.network.vertexes.iterator;e.next();){var i=Kp(t,e.value);t.ra=Math.max(i,t.ra)}}function Kp(t,e){var i=0;if(-1===e.layer){for(var n=e.destinationEdges;n.next();){var r=n.value,o=r.toVertex;r=t.linkMinLength(r),i=Math.max(i,Kp(t,o)+r)}e.layer=i}else i=e.layer;return i}function Hp(t,e){var i=0;if(-1===e.layer){for(var n=e.sourceEdges;n.next();){var r=n.value,o=r.fromVertex;r=t.linkMinLength(r),i=Math.max(i,Hp(t,o)+r)}e.layer=i}else i=e.layer;return i}function Wp(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)Wp(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,r=n.length,o=0;o<r;o++){var s=n[o],a=s.fromVertex,h=s.toVertex;s=t.linkMinLength(s),a.layer-h.layer>s&&_p(t,a,0,-1,!0,!1)}for(_p(t,e,1,-1,!0,!0);0!==e.component;){for(o=0,n=1/0,a=0,h=null,s=t.network.vertexes.iterator;s.next();){var l=s.value;if(1===l.component){var u=0,c=!1,f=l.sourceEdgesArrayAccess;r=f.length;for(var d=0;d<r;d++){var p=f[d],g=p.fromVertex;u+=1,1!==g.component&&(o+=1,g=g.layer-l.layer,p=t.linkMinLength(p),n=Math.min(n,g-p))}for(r=(f=l.destinationEdgesArrayAccess).length,d=0;d<r;d++)--u,1!==(p=f[d].toVertex).component?--o:c=!0;(null===h||u<a)&&!c&&(h=l,a=u)}}if(0<o){for(i.reset();i.next();)1===(r=i.value).component&&(r.layer+=n);e.component=0}else h.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(_p(t,e,1,-1,!0,!1);0!==e.component;){for(n=0,r=1/0,o=0,a=null,h=t.network.vertexes.iterator;h.next();)if(1===(s=h.value).component){for(l=0,u=!1,c=(f=s.sourceEdgesArrayAccess).length,d=0;d<c;d++)l+=1,1!==(p=f[d].fromVertex).component?n+=1:u=!0;for(c=(f=s.destinationEdgesArrayAccess).length,d=0;d<c;d++)--l,1!==(g=(p=f[d]).toVertex).component&&(--n,g=s.layer-g.layer,p=t.linkMinLength(p),r=Math.min(r,g-p));(null===a||l>o)&&!u&&(a=s,o=l)}if(0>n){for(i.reset();i.next();)1===(n=i.value).component&&(n.layer-=r);e.component=0}else a.component=0}}}function Zp(t,e,i){return 90===t.K?i&&!e.rev||!i&&e.rev?270:90:180===t.K?i&&!e.rev||!i&&e.rev?0:180:270===t.K?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}function Jp(t,e){var i=e.layer;for(e.index=t.Ab[i],t.Ab[i]++,e=e.destinationEdgesArrayAccess,i=!0;i;){i=!1;for(var n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];r.portFromColOffset>o.portFromColOffset&&(i=!0,e[n]=o,e[n+1]=r)}}for(i=0;i<e.length;i++)(n=e[i]).valid&&-1===(n=n.toVertex).index&&Jp(t,n)}function $p(t,e){var i=e.layer;e.index=t.Ab[i],t.Ab[i]++,e=e.sourceEdgesArrayAccess;for(var n=!0;n;)for(n=!1,i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];r.portToColOffset>o.portToColOffset&&(n=!0,e[i]=o,e[i+1]=r)}for(i=0;i<e.length;i++)(n=e[i]).valid&&-1===(n=n.fromVertex).index&&$p(t,n)}function Qp(t,e,i){var n=lg(t,e),r=t.Ab[e],o=Ep(t,e,i),s=Rp(t,e,i);for(i=0;i<r;i++)-1===s[i]&&(s[i]=n[i].column),-1===o[i]&&(o[i]=n[i].column);for(var a,h=!0;h;)for(h=!1,i=0;i<r-1;i++)(o[i+1]<o[i]||o[i+1]===o[i]&&s[i+1]<s[i])&&(h=!0,a=o[i],o[i]=o[i+1],o[i+1]=a,a=s[i],s[i]=s[i+1],s[i+1]=a,a=n[i],n[i]=n[i+1],n[i+1]=a);for(i=o=0;i<r;i++)(a=n[i]).index=i,o+=t.nodeMinColumnSpace(a,!0),a.column=o,o+=1,o+=t.nodeMinColumnSpace(a,!1);ug(t,e,n)}function tg(t,e,i){var n,r=lg(t,e),o=t.Ab[e];i=Ip(t,e,i);var s=[];for(n=0;n<o;n++)s[n]=-1;var a=[];for(n=0;n<o;n++)a[n]=-1;for(var h=!1,l=!0;l;)for(l=!1,n=0;n<o-1;n++){var u=i[r[n].index*o+r[n+1].index],c=i[r[n+1].index*o+r[n].index],f=0,d=0,p=r[n].column,g=r[n+1].column,y=t.nodeMinColumnSpace(r[n],!0),m=t.nodeMinColumnSpace(r[n],!1),v=t.nodeMinColumnSpace(r[n+1],!0),x=t.nodeMinColumnSpace(r[n+1],!1);y=p-y+v,m=g-m+x;var b=r[n].sourceEdges.iterator;for(b.reset();b.next();)if(x=(v=b.value).fromVertex,v.valid&&x.layer===e){for(v=0;r[v]!==x;)v++;v<n&&(f+=2*(n-v),d+=2*(n+1-v)),v===n+1&&(f+=1),v>n+1&&(f+=4*(v-n),d+=4*(v-(n+1)))}for((b=r[n].destinationEdges.iterator).reset();b.next();)if(x=(v=b.value).toVertex,v.valid&&x.layer===e){for(v=0;r[v]!==x;)v++;v===n+1&&(d+=1)}for((b=r[n+1].sourceEdges.iterator).reset();b.next();)if(x=(v=b.value).fromVertex,v.valid&&x.layer===e){for(v=0;r[v]!==x;)v++;v<n&&(f+=2*(n+1-v),d+=2*(n-v)),v===n&&(d+=1),v>n+1&&(f+=4*(v-(n+1)),d+=4*(v-n))}for((b=r[n+1].destinationEdges.iterator).reset();b.next();)if(x=(v=b.value).toVertex,v.valid&&x.layer===e){for(v=0;r[v]!==x;)v++;v===n&&(f+=1)}v=x=0,b=s[r[n].index];var w=a[r[n].index],k=s[r[n+1].index],M=a[r[n+1].index];-1!==b&&(x+=Math.abs(b-p),v+=Math.abs(b-m)),-1!==w&&(x+=Math.abs(w-p),v+=Math.abs(w-m)),-1!==k&&(x+=Math.abs(k-g),v+=Math.abs(k-y)),-1!==M&&(x+=Math.abs(M-g),v+=Math.abs(M-y)),(d<f-.5||d===f&&c<u-.5||d===f&&c===u&&v<x-.5)&&(l=h=!0,r[n].column=m,r[n+1].column=y,u=r[n],r[n]=r[n+1],r[n+1]=u)}for(n=0;n<o;n++)r[n].index=n;return ug(t,e,r),h}function eg(t,e,i){for(var n=!1;ig(t,e,i);)n=!0;return n}function ig(t,e,i){var n,r=lg(t,e),o=t.Ab[e],s=Rp(t,e,-1);if(0<i)for(n=0;n<o;n++)s[n]=-1;var a=Rp(t,e,1);if(0>i)for(n=0;n<o;n++)a[n]=-1;for(var h=!1,l=!0;l;)for(l=!1,n=0;n<o;n++){var u,c=r[n].column,f=t.nodeMinColumnSpace(r[n],!0),d=t.nodeMinColumnSpace(r[n],!1);u=0>n-1||c-r[n-1].column-1>f+t.nodeMinColumnSpace(r[n-1],!1)?c-1:c,f=n+1>=o||r[n+1].column-c-1>d+t.nodeMinColumnSpace(r[n+1],!0)?c+1:c;var p=d=0,g=0;if(0>=i)for(var y=r[n].sourceEdges.iterator;y.next();){var m=y.value,v=m.fromVertex;if(m.valid&&v.layer!==e){var x=Dp(m),b=m.portFromColOffset;m=m.portToColOffset,v=v.column,d+=(Math.abs(c+m-(v+b))+1)*x,p+=(Math.abs(u+m-(v+b))+1)*x,g+=(Math.abs(f+m-(v+b))+1)*x}}if(0<=i)for(y=r[n].destinationEdges.iterator;y.next();)v=(m=y.value).toVertex,m.valid&&v.layer!==e&&(x=Dp(m),b=m.portFromColOffset,m=m.portToColOffset,v=v.column,d+=(Math.abs(c+b-(v+m))+1)*x,p+=(Math.abs(u+b-(v+m))+1)*x,g+=(Math.abs(f+b-(v+m))+1)*x);m=b=x=0,y=s[r[n].index],v=a[r[n].index],-1!==y&&(x+=Math.abs(y-c),b+=Math.abs(y-u),m+=Math.abs(y-f)),-1!==v&&(x+=Math.abs(v-c),b+=Math.abs(v-u),m+=Math.abs(v-f)),p<d||p===d&&b<x?(l=h=!0,r[n].column=u):(g<d||g===d&&m<x)&&(l=h=!0,r[n].column=f)}return ug(t,e,r),t.normalize(),h}function ng(t,e,i){var n=lg(t,e),r=t.Ab[e],o=Ep(t,e,i),s=[];for(i=0;i<r;i++)s[i]=o[i];for(o=!0;o;)for(o=!1,i=0;i<r;i++){var a=n[i].column,h=t.nodeMinColumnSpace(n[i],!0),l=t.nodeMinColumnSpace(n[i],!1),u=0;if(-1===s[i])if(0===i&&i===r-1)u=a;else if(0===i){var c=n[i+1].column;u=c-a===l+t.nodeMinColumnSpace(n[i+1],!0)?a-1:a}else u=i===r-1?a-(c=n[i-1].column)===h+t.nodeMinColumnSpace(n[i-1],!1)?a+1:a:((h=(c=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+h+1)+(l=(c=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-l-1))/2|0;else 0===i&&i===r-1?u=s[i]:0===i?(l=(c=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-l-1,u=Math.min(s[i],l)):i===r-1?(h=(c=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+h+1,u=Math.max(s[i],h)):(h=(c=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+h+1,l=(c=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-l-1,h<s[i]&&s[i]<l?u=s[i]:h>=s[i]?u=h:l<=s[i]&&(u=l));u!==a&&(o=!0,n[i].column=u)}ug(t,e,n),t.normalize()}function rg(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var r=n.value,o=t.nodeMinColumnSpace(r,!0),s=t.nodeMinColumnSpace(r,!1);if(r.column-o<=e&&r.column+s>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)(i=n.value).column>e&&(--i.column,t=!0);return t}function og(t,e){var i,n=e+1,r=[],o=[];for(i=0;i<=t.ra;i++)r[i]=!1,o[i]=!1;for(var s=t.network.vertexes.iterator;s.next();){var a=(i=s.value).column-t.nodeMinColumnSpace(i,!0),h=i.column+t.nodeMinColumnSpace(i,!1);a<=e&&h>=e&&(r[i.layer]=!0),a<=n&&h>=n&&(o[i.layer]=!0)}for(a=!0,n=!1,i=0;i<=t.ra;i++)a=a&&!(r[i]&&o[i]);if(a)for(s.reset();s.next();)(t=s.value).column>e&&(--t.column,n=!0);return n}function sg(t,e){for(var i=0;i<=t.Ea;i++)for(;rg(t,i););for(t.normalize(),i=0;i<t.Ea;i++)for(;og(t,i););var n;if(t.normalize(),0<e)for(i=0;i<=t.Ea;i++){var r=Fp(t),o=zp(t);for(n=o+1;o<n;){n=o,ag(t,i,1);var s=zp(t);s>o?Bp(t,r):s<o&&(o=s,r=Fp(t))}}if(0>e)for(i=t.Ea;0<=i;i--)for(r=Fp(t),n=(o=zp(t))+1;o<n;)n=o,ag(t,i,-1),(s=zp(t))>o?Bp(t,r):s<o&&(o=s,r=Fp(t));t.normalize()}function ag(t,e,i){t.Ec=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var r=n.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.Ec)}if(0>i)for(n.reset();n.next();)(r=n.value).column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.Ec);for(t.Ec++,n.reset();n.next();)-1===(e=n.value).component&&(Vp(t,e,t.Ec,-1,!0,!0),t.Ec++);var o;for(e=[],o=0;o<t.Ec*t.Ec;o++)e[o]=!1;for(r=[],o=0;o<(t.ra+1)*(t.Ea+1);o++)r[o]=-1;for(n.reset();n.next();)for(var s=(o=n.value).layer,a=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),h=Math.min(t.Ea,o.column+t.nodeMinColumnSpace(o,!1));a<=h;a++)r[s*(t.Ea+1)+a]=o.component;for(o=0;o<=t.ra;o++){if(0<i)for(s=0;s<t.Ea;s++)-1!==r[o*(t.Ea+1)+s]&&-1!==r[o*(t.Ea+1)+s+1]&&r[o*(t.Ea+1)+s]!==r[o*(t.Ea+1)+s+1]&&(e[r[o*(t.Ea+1)+s]*t.Ec+r[o*(t.Ea+1)+s+1]]=!0);if(0>i)for(s=t.Ea;0<s;s--)-1!==r[o*(t.Ea+1)+s]&&-1!==r[o*(t.Ea+1)+s-1]&&r[o*(t.Ea+1)+s]!==r[o*(t.Ea+1)+s-1]&&(e[r[o*(t.Ea+1)+s]*t.Ec+r[o*(t.Ea+1)+s-1]]=!0)}for(r=[],o=0;o<t.Ec;o++)r[o]=!0;for((s=[]).push(0);0!==s.length;)if(h=s[s.length-1],s.pop(),r[h])for(r[h]=!1,o=0;o<t.Ec;o++)e[h*t.Ec+o]&&s.splice(0,0,o);if(0<i)for(n.reset();n.next();)r[(t=n.value).component]&&--t.column;if(0>i)for(n.reset();n.next();)r[(i=n.value).component]&&(i.column+=1)}function hg(t,e){return 270===t.K?e?Ae:De:90===t.K?e?De:Ae:180===t.K?e?je:Oe:e?Oe:je}function lg(t,e){var i=t.Ab[e];if(i>=t.ye.length){for(var n=[],r=0;r<t.ye.length;r++)n[r]=t.ye[r];t.ye=n}for(void 0===t.ye[i]||null===t.ye[i]?n=[]:(n=t.ye[i],t.ye[i]=null),t=t.zo[e],e=0;e<t.length;e++)n[(i=t[e]).index]=i;return n}function ug(t,e,i){t.ye[t.Ab[e]]=i}Yd.className=\"CircularLayout\",Yd.ConstantSpacing=tp,Yd.ConstantDistance=ep,Yd.ConstantAngle=ip,Yd.Packed=np,Yd.Clockwise=rp,Yd.Counterclockwise=op,Yd.BidirectionalLeft=sp,Yd.BidirectionalRight=ap,Yd.Forwards=hp,Yd.Reverse=lp,Yd.Ascending=up,Yd.Descending=cp,Yd.Optimized=fp,Yd.Pythagorean=dp,Yd.Circular=pp,gp.prototype.compare=function(t,e){if(0<t&&0>this.$l||Math.abs(t)<Math.abs(this.$l)&&!(0>t&&0<this.$l))for(this.$l=t,this.qk=[],this.Fm=[],t=0;t<e.length;t++)this.qk[t]=e[t].bounds.x,this.Fm[t]=e[t].bounds.y},gp.prototype.commit=function(t){if(null!==this.qk&&null!==this.Fm)for(var e=0;e<this.qk.length;e++){var i=t.J(e);i.x=this.qk[e],i.y=this.Fm[e]}},gp.className=\"VertexArrangement\",c(yp,vf),yp.prototype.createVertex=function(){return new mp(this)},yp.prototype.createEdge=function(){return new xp(this)},yp.className=\"CircularNetwork\",c(mp,Mf),f.Object.defineProperties(mp.prototype,{diameter:{get:function(){return this.ej},set:function(t){this.ej!==t&&(this.ej=t)}},actualAngle:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}}}),mp.className=\"CircularVertex\",c(xp,Pf),xp.className=\"CircularEdge\",c(bp,rf),bp.prototype.cloneProtected=function(t){rf.prototype.cloneProtected.call(this,t),t.Qd.assign(this.Qd),t.Rm=this.Rm,t.hf=this.hf,t.jd=this.jd,t.nl=this.nl,t.vn=this.vn,t.Tf=this.Tf,t.xo=this.xo,t.To=this.To,t.Ok=this.Ok,t.Nk=this.Nk,t.Lk=this.Lk,t.Mk=this.Mk,t.nn=this.nn,t.mn=this.mn},bp.prototype.serializeLayoutProperties=function(t,e){rf.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},bp.prototype.deserializeLayoutProperties=function(t,e,i,n,r){rf.prototype.deserializeLayoutProperties.call(this,t,e,i,n,r),this.arrangementSpacing=new jt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},bp.prototype.createNetwork=function(){return new Tp(this)},bp.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.Wv()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.Sp();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)(i=e.value).stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.vu(),this.bo=0,this.needsClusterLayout()){for(var n=(i=(e=this.network).Ay()).iterator;n.next();){this.network=n.value;for(var r=this.network.vertexes.iterator;r.next();){var o=r.value;o.Kd=o.vertexes.count,o.Kh=1,o.Qj=null,o.Me=null}wp(this,0,t)}this.network=e;var s=n=i.iterator;n=this.arrangementSpacing;var a=s.count,h=!0;o=r=0;for(var l=A(),u=0;u<a+e.vertexes.count+2;u++)l[u]=null;a=0,s.reset();for(var c=Bt.alloc();s.next();)if(u=s.value,this.computeBounds(u,c),h)h=!1,r=c.x+c.width/2,o=c.y+c.height/2,l[0]=new gt(c.x+c.width+n.width,c.y),l[1]=new gt(c.x,c.y+c.height+n.height),a=2;else{var f=Mp(l,a,r,o,c.width,c.height,n),d=l[f],p=new gt(d.x+c.width+n.width,d.y),g=new gt(d.x,d.y+c.height+n.height);for(f+1<a&&l.splice(f+1,0,null),l[f]=p,l[f+1]=g,a++,f=d.x-c.x,d=d.y-c.y,u=u.vertexes.iterator;u.next();)(p=u.value).centerX+=f,p.centerY+=d}for(Bt.free(c),u=e.vertexes.iterator;u.next();)f=(s=u.value).bounds,2>a?(r=f.x+f.width/2,o=f.y+f.height/2,l[0]=new gt(f.x+f.width+n.width,f.y),l[1]=new gt(f.x,f.y+f.height+n.height),a=2):(d=new gt((c=l[h=Mp(l,a,r,o,f.width,f.height,n)]).x+f.width+n.width,c.y),f=new gt(c.x,c.y+f.height+n.height),h+1<a&&l.splice(h+1,0,null),l[h]=d,l[h+1]=f,a++,s.centerX=c.x+s.width/2,s.centerY=c.y+s.height/2);for(j(l),n=i.iterator;n.next();){for(r=(i=n.value).vertexes.iterator;r.next();)e.ng(r.value);for(i=i.edges.iterator;i.next();)e.Rl(i.value)}}Pp(this,t),this.updateParts()}this.nl=t,this.network=null,this.isValidLayout=!0}},bp.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Lc(i)&&2<++t)return!0;if(10<e)break;e++}return!1},bp.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.Qc(n.bounds)}return e},bp.prototype.vu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},bp.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Nu();e.next();){var i=e.value;if(\"Comment\"===i.category&&i.isVisible()){var n=this.network.Ji(i);null===n&&(n=this.network.Nj(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var r=n.destinationEdges;r.next();){var o=r.value;if(o.toVertex===t){i=o;break}}if(null===i)for(r=n.sourceEdges;r.next();)if((o=r.value).fromVertex===t){i=o;break}null===i&&(i=this.network.ek(t,n,null)),i.length=this.defaultCommentSpringLength}}},bp.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},bp.prototype.moveFixedVertex=function(){},bp.prototype.commitLayout=function(){this.Iv(),this.commitNodes(),this.isRouting&&this.commitLinks()},bp.prototype.Iv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Pe,e.toSpot=Pe)}},bp.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=Bt.alloc();this.computeBounds(this.network,i),t=(e=this.arrangementOrigin).x-i.x,e=e.y-i.y,Bt.free(i)}i=Bt.alloc();for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;0===t&&0===e||(i.assign(r.bounds),i.x+=t,i.y+=e,r.bounds=i),r.commit()}Bt.free(i)},bp.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},bp.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Ok:t},bp.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Nk:t},bp.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Lk:t},bp.prototype.electricalFieldX=function(){return 0},bp.prototype.electricalFieldY=function(){return 0},bp.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Mk:t},bp.prototype.gravitationalFieldX=function(){return 0},bp.prototype.gravitationalFieldY=function(){return 0},bp.prototype.isFixed=function(t){return t.isFixed},f.Object.defineProperties(bp.prototype,{currentIteration:{get:function(){return this.bo}},arrangementSpacing:{get:function(){return this.Qd},set:function(t){this.Qd.A(t)||(this.Qd.assign(t),this.B())}},arrangesToOrigin:{get:function(){return this.Rm},set:function(t){this.Rm!==t&&(this.Rm=t,this.B())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.B())}},comments:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t,this.B())}},maxIterations:{get:function(){return this.nl},set:function(t){this.nl!==t&&0<=t&&(this.nl=t,this.B())}},epsilonDistance:{get:function(){return this.vn},set:function(t){this.vn!==t&&0<t&&(this.vn=t,this.B())}},infinityDistance:{get:function(){return this.Tf},set:function(t){this.Tf!==t&&1<t&&(this.Tf=t,this.B())}},moveLimit:{get:function(){return this.xo},set:function(t){this.xo!==t&&1<t&&(this.xo=t,this.B())}},randomNumberGenerator:{get:function(){return this.To},set:function(t){this.To!==t&&(null!==t&&\"function\"!=typeof t.random&&w('ForceDirectedLayout.randomNumberGenerator must have a \"random()\" function on it: '+t),this.To=t)}},defaultSpringStiffness:{get:function(){return this.Ok},set:function(t){this.Ok!==t&&(this.Ok=t,this.B())}},defaultSpringLength:{get:function(){return this.Nk},set:function(t){this.Nk!==t&&(this.Nk=t,this.B())}},defaultElectricalCharge:{get:function(){return this.Lk},set:function(t){this.Lk!==t&&(this.Lk=t,this.B())}},defaultGravitationalMass:{get:function(){return this.Mk},set:function(t){this.Mk!==t&&(this.Mk=t,this.B())}},defaultCommentSpringLength:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,this.B())}},defaultCommentElectricalCharge:{get:function(){return this.mn},set:function(t){this.mn!==t&&(this.mn=t,this.B())}}}),bp.className=\"ForceDirectedLayout\",Cp.className=\"ForceDirectedSubnet\",c(Tp,vf),Tp.prototype.createVertex=function(){return new Lp(this)},Tp.prototype.createEdge=function(){return new Ap(this)},Tp.className=\"ForceDirectedNetwork\",c(Lp,Mf),Lp.prototype.serializeVertexProperties=function(t,e){Mf.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},Lp.prototype.deserializeVertexProperties=function(t,e,i,n){Mf.prototype.deserializeVertexProperties.call(this,t,e,i,n),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},f.Object.defineProperties(Lp.prototype,{isFixed:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},charge:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}},mass:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},forceX:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}},forceY:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}}}),Lp.className=\"ForceDirectedVertex\",c(Ap,Pf),Ap.prototype.serializeEdgeProperties=function(t,e){Pf.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Ap.prototype.deserializeEdgeProperties=function(t,e,i,n){Pf.prototype.deserializeEdgeProperties.call(this,t,e,i,n),this.stiffness=t.stiffness,this.length=t.length},f.Object.defineProperties(Ap.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Ap.className=\"ForceDirectedEdge\",jp.prototype.random=function(){var t=this.seed%this.Q*this.Cy-this.seed/this.Q*this.Fy;return this.seed=0<t?t:t+this.Ey,this.seed*this.Dy},jp.className=\"RandomNumberGenerator\",c(Op,rf),Op.prototype.cloneProtected=function(t){rf.prototype.cloneProtected.call(this,t),t.be=this.be,t.ac=this.ac,t.K=this.K,t.Kk=this.Kk,t.il=this.il,t.Zk=this.Zk,t.qj=this.qj,t.vk=this.vk,t.ag=this.ag,t.hf=this.hf,t.jo=this.jo},Op.prototype.serializeLayoutProperties=function(t,e){rf.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.ji=this.ji,t.Ea=this.Ea,t.Vg=this.Vg,t.tc=this.tc,t.Ab=this.Ab,t.bh=this.bh,t.Ec=this.Ec,t.Rc={x:this.Rc.x,y:this.Rc.y}},Op.prototype.deserializeLayoutProperties=function(t,e,i,n,r){rf.prototype.deserializeLayoutProperties.call(this,t,e,i,n,r),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=Y(Op,t.cycleRemoveOption),this.layeringOption=Y(Op,t.layeringOption),this.initializeOption=Y(Op,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=Y(Op,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.ji=t.ji,this.Ea=t.Ea,this.Vg=t.Vg,this.tc=t.tc,this.Ab=t.Ab,this.bh=t.bh,this.Ec=t.Ec,this.Rc=new gt(this.Rc.x,this.Rc.y),r&&!n&&r.edges.each((function(t){if(!t.link&&t.fromVertex&&t.toVertex&&(null===t.fromVertex.node||null===t.toVertex.node)){for(var e=t.fromVertex;null!==e&&null===e.node&&0<e.sd.count;){var i=e.sd.J(0);if(i.link){t.link=i.link;break}e=i.fromVertex}if(!t.link){for(i=t.toVertex;null!==i&&null===i.node&&0<i.Fd.count;){var n=i.Fd.J(0);if(n.link){t.link=n.link;break}i=n.toVertex}if(!t.link)for(i=i.sd.iterator;i.next();)if((n=i.value).link&&n.fromVertex===e){t.link=n.link;break}}}}))},Op.prototype.gb=function(t){t.classType===Op?0===t.name.indexOf(\"Aggressive\")?this.aggressiveOption=t:0===t.name.indexOf(\"Cycle\")?this.cycleRemoveOption=t:0===t.name.indexOf(\"Init\")?this.initializeOption=t:0===t.name.indexOf(\"Layer\")?this.layeringOption=t:w(\"Unknown enum value: \"+t):rf.prototype.gb.call(this,t)},Op.prototype.createNetwork=function(){return new Pg(this)},Op.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.ji=-1,this.tc=this.Vg=0,this.zo=this.yo=this.xj=null,t=0;t<this.ye.length;t++)this.ye[t]=null;if(0<this.network.vertexes.count){if(this.network.Sp(),this.Wv())return;for(this.cycleRemoveOption!==dg&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===dg&&this.removeCycles();for(var e=[],i=(t=this.network).edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){var r=(n=e[i]).fromVertex,o=n.toVertex;if(!(n.valid||(null===r.node&&null===r.data||null===o.node&&null===o.data)&&r.layer===o.layer)){var s=0,a=0,h=0,l=0;if(null!==n.link){if(null===(a=n.link))continue;var u=r.node;if(s=o.node,null===u||null===s)continue;var c=a.fromNode;h=a.toNode;var f=a.fromPort;if(a=a.toPort,n.rev){l=c;var d=f;c=h,f=a,h=l,a=d}var p=r.focus;l=o.focus;var g=n.rev?o.bounds:r.bounds;d=gt.alloc(),u!==c?g.u()&&c.isVisible()?c.actualBounds.u()?(eu(c,f,oe,d),d.x+=c.actualBounds.x-g.x,d.y+=c.actualBounds.y-g.y):(eu(c,f,oe,d),d.u()||d.assign(p)):d.assign(p):g.u()?(eu(c,f,oe,d),d.u()||d.assign(p)):d.assign(p),c=n.rev?r.bounds:o.bounds,u=gt.alloc(),s!==h?c.u()&&h.isVisible()?h.actualBounds.u()?(eu(h,a,oe,u),u.x+=h.actualBounds.x-c.x,u.y+=h.actualBounds.y-c.y):(eu(h,a,oe,u),u.u()||u.assign(l)):u.assign(l):c.u()?(eu(h,a,oe,u),u.u()||u.assign(l)):u.assign(l),90===this.K||270===this.K?(s=Math.round((d.x-p.x)/this.ac),h=d.x,a=Math.round((u.x-l.x)/this.ac),l=u.x):(s=Math.round((d.y-p.y)/this.ac),h=d.y,a=Math.round((u.y-l.y)/this.ac),l=u.y),gt.free(d),gt.free(u),n.portFromColOffset=s,n.portFromPos=h,n.portToColOffset=a,n.portToPos=l}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(d=r.layer,u=o.layer,c=0,null!==(g=n.link)){var y=g.fromPort,m=g.toPort;if(null!==y&&null!==m){var v=g.fromNode;if(f=g.toNode,null!==v&&null!==f){var x=hg(this,!0),b=hg(this,!1),w=this.setsPortSpots?x:g.computeSpot(!0,y);p=this.setsPortSpots?b:g.computeSpot(!1,m);var k=g.isOrthogonal;w.Nc()&&w.Df(b)&&p.Nc()&&p.Df(x)?c=0:(x=g.getLinkPoint(v,y,w,!0,k,f,m,gt.alloc()),b=g.getLinkDirection(v,y,x,w,!0,k,f,m),gt.free(x),w.Ds()||b!==Zp(this,n,!0)?this.setsPortSpots&&null!==v&&1===v.ports.count&&n.rev&&(c+=1):c+=1,w=g.getLinkPoint(f,m,p,!1,k,v,y,gt.alloc()),g=g.getLinkDirection(f,m,w,p,!1,k,v,y),gt.free(w),p.Ds()||g!==Zp(this,n,!1)?this.setsPortSpots&&null!==f&&1===f.ports.count&&n.rev&&(c+=2):c+=2)}}}if(c=1===(f=c)||3===f,(f=2===f||3===f)&&((p=t.createVertex()).node=null,p.uf=1,p.layer=d,p.near=r,t.ng(p),(r=t.ek(r,p,n.link)).valid=!1,r.rev=n.rev,r.portFromColOffset=s,r.portToColOffset=0,r.portFromPos=h,r.portToPos=0,r=p),g=1,c&&g--,d-u>g&&0<d){for(n.valid=!1,(p=t.createVertex()).node=null,p.uf=2,p.layer=d-1,t.ng(p),(r=t.ek(r,p,n.link)).valid=!0,r.rev=n.rev,r.portFromColOffset=f?0:s,r.portToColOffset=0,r.portFromPos=f?0:h,r.portToPos=0,r=p,d--;d-u>g&&0<d;)(p=t.createVertex()).node=null,p.uf=3,p.layer=d-1,t.ng(p),(r=t.ek(r,p,n.link)).valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=p,d--;(r=t.ek(p,o,n.link)).valid=!c,c&&(p.near=o),r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=a,r.portFromPos=0,r.portToPos=l}else n.valid=!0}}for(t=this.Ab=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.ji=-1,i=this.tc=this.Vg=0;i<=this.ra;i++)t[i]>t[this.tc]&&(this.ji=t[i]-1,this.tc=i),t[i]<t[this.Vg]&&(this.Vg=i);for(this.zo=[],i=0;i<t.length;i++)this.zo[i]=[];for(e.reset();e.next();)t=e.value,this.zo[t.layer][t.index]=t;for(this.Ea=-1,t=0;t<=this.ra;t++){for(e=lg(this,t),i=0,n=this.Ab[t],o=0;o<n;o++)r=e[o],i+=this.nodeMinColumnSpace(r,!0),r.column=i,i+=1,i+=this.nodeMinColumnSpace(r,!1);this.Ea=Math.max(this.Ea,i-1),ug(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Op.prototype.linkMinLength=function(){return 1},Op.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.K||270===this.K?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Op.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var i=e?t.ik:t.hk;return null!==i?i:90===(i=this.K)||270===i?e?t.ik=t.focus.x/this.ac+1|0:t.hk=(t.bounds.width-t.focus.x)/this.ac+1|0:e?t.ik=t.focus.y/this.ac+1|0:t.hk=(t.bounds.height-t.focus.y)/this.ac+1|0},Op.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var i=Ip(this,e,1),n=this.Ab[e],r=0;r<n;r++)for(var o=r;o<n;o++)t+=i[r*n+o];return t},Op.prototype.normalize=function(){var t=1/0;this.Ea=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ea=Math.max(this.Ea,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ea-=t},Op.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Kk){default:case fg:var e=0,i=(t=this.network).vertexes.count-1,n=[];n.length=i+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;null!==Yp(t);){for(r=Gp(t);null!==r;)n[i]=r,i--,r.valid=!1,r=Gp(t);for(r=Xp(t);null!==r;)n[e]=r,e++,r.valid=!1,r=Xp(t);r=null;for(var o=0,s=this.network.vertexes.iterator;s.next();){var a=s.value;if(a.valid){for(var h=0,l=a.destinationEdges;l.next();)l.value.toVertex.valid&&h++;l=0;for(var u=a.sourceEdges;u.next();)u.value.fromVertex.valid&&l++;(null===r||o<h-l)&&(r=a,o=h-l)}}null!==r&&(n[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.index>e.toVertex.index&&(t.qm(e),e.rev=!0);break;case cg:for(n=this.network.vertexes.iterator;n.next();)(t=n.value).og=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.bh=0,n.reset();n.next();)0===(e=n.value).sourceEdges.count&&Up(this,e);for(n.reset();n.next();)-1===(e=n.value).og&&Up(this,e);for(t.reset();t.next();)(n=t.value).forest||(i=(e=n.fromVertex).finish,o=(r=n.toVertex).finish,r.og<e.og&&i<o&&(this.network.qm(n),n.rev=!0));break;case dg:for(e=(t=this.network).vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)void 0===(r=n[(i=e.value).layer])?n[i.layer]=[i]:r.push(i);for(i=e=0;i<n.length;i++)if((r=n[i])&&0!==r.length){if(0<i)for(o=0;o<r.length;o++)r[o].layer-=e}else e++;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.layer<e.toVertex.layer&&(t.qm(e),e.rev=!0)}}},Op.prototype.assignLayers=function(){switch(this.il){case gg:qp(this);break;case yg:for(var t,e=this.network.vertexes.iterator;e.next();)t=Hp(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)(t=e.value).layer=this.ra-t.layer;break;default:for(qp(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&Wp(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.ra=Math.max(this.ra,i.layer)}}},Op.prototype.initializeIndices=function(){switch(this.Zk){default:case xg:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;e.index=this.Ab[i],this.Ab[i]++}break;case mg:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)(i=t.value).layer===e&&-1===i.index&&Jp(this,i);break;case vg:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)(i=t.value).layer===e&&-1===i.index&&$p(this,i)}},Op.prototype.reduceCrossings=function(){var t,e,i,n,r,o=this.countCrossings(),s=Fp(this);for(t=0;t<this.qj;t++){for(e=0;e<=this.ra;e++)Qp(this,e,1),tg(this,e,1);var a=this.countCrossings();for(a<o&&(o=a,s=Fp(this)),e=this.ra;0<=e;e--)Qp(this,e,-1),tg(this,e,-1);(a=this.countCrossings())<o&&(o=a,s=Fp(this))}for(Bp(this,s),t=0;t<this.qj;t++){for(e=0;e<=this.ra;e++)Qp(this,e,0),tg(this,e,0);for((a=this.countCrossings())<o&&(o=a,s=Fp(this)),e=this.ra;0<=e;e--)Qp(this,e,0),tg(this,e,0);(a=this.countCrossings())<o&&(o=a,s=Fp(this))}switch(Bp(this,s),this.vk){case bg:break;case kg:for(r=o+1;(e=this.countCrossings())<r;)for(r=e,t=this.ra;0<=t;t--)for(n=0;n<=t;n++){for(i=!0;i;)for(i=!1,e=t;e>=n;e--)i=tg(this,e,-1)||i;for((a=this.countCrossings())>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=tg(this,e,1)||i;for((a=this.countCrossings())>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=tg(this,e,1)||i;for(a>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=tg(this,e,-1)||i;for(a>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=tg(this,e,0)||i;for(a>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=tg(this,e,0)||i;a>=o?Bp(this,s):(o=a,s=Fp(this))}break;default:for(t=this.ra,n=0,r=o+1;(e=this.countCrossings())<r;){for(r=e,i=!0;i;)for(i=!1,e=t;e>=n;e--)i=tg(this,e,-1)||i;for((a=this.countCrossings())>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=tg(this,e,1)||i;for((a=this.countCrossings())>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=tg(this,e,1)||i;for(a>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=tg(this,e,-1)||i;for(a>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=tg(this,e,0)||i;for(a>=o?Bp(this,s):(o=a,s=Fp(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=tg(this,e,0)||i;a>=o?Bp(this,s):(o=a,s=Fp(this))}}Bp(this,s)},Op.prototype.straightenAndPack=function(){var t=0!=(1&this.ag),e=0!=(this.ag&Mg);if(1e3<this.network.edges.count&&e&&(t=!1),t){var i=[];for(e=0;e<=this.ra;e++)i[e]=0;for(var n,r=this.network.vertexes.iterator;r.next();){var o=r.value;e=o.layer,n=o.column,o=this.nodeMinColumnSpace(o,!1),i[e]=Math.max(i[e],n+o)}for(r.reset();r.next();)e=(o=r.value).layer,n=o.column,o.column=(8*(this.Ea-i[e])>>1)+8*n;this.Ea*=8}if(0!=(2&this.ag))for(i=!0;i;){for(i=!1,e=this.tc+1;e<=this.ra;e++)i=eg(this,e,1)||i;for(e=this.tc-1;0<=e;e--)i=eg(this,e,-1)||i;i=eg(this,this.tc,0)||i}if(0!=(4&this.ag)){for(e=this.tc+1;e<=this.ra;e++)ng(this,e,1);for(e=this.tc-1;0<=e;e--)ng(this,e,-1);ng(this,this.tc,0)}if(t&&(sg(this,-1),sg(this,1)),0!=(2&this.ag))for(i=!0;i;){for(i=!1,i=eg(this,this.tc,0)||i,e=this.tc+1;e<=this.ra;e++)i=eg(this,e,0)||i;for(e=this.tc-1;0<=e;e--)i=eg(this,e,0)||i}},Op.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=hg(this,!0),e=hg(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;null!==n&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Bu(),this.isRouting&&this.commitLinks()},Op.prototype.commitNodes=function(){this.ae=[],this.xd=[],this.wd=[],this.Ka=[];for(var t=0;t<=this.ra;t++)this.ae[t]=0,this.xd[t]=0,this.wd[t]=0,this.Ka[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.ae[i]=Math.max(this.ae[i],this.nodeMinLayerSpace(e,!0)),this.xd[i]=Math.max(this.xd[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.be;for(var n=0;n<=this.ra;n++){var r=i;0>=this.ae[n]+this.xd[n]&&(r=0),0<n&&(e+=r/2),90===this.K||0===this.K?(e+=this.xd[n],this.wd[n]=e,e+=this.ae[n]):(e+=this.ae[n],this.wd[n]=e,e+=this.xd[n]),n<this.ra&&(e+=r/2),this.Ka[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.ra;n++)270===this.K?this.wd[n]=e.y+this.wd[n]:90===this.K?(this.wd[n]=e.y+i-this.wd[n],this.Ka[n]=i-this.Ka[n]):180===this.K?this.wd[n]=e.x+this.wd[n]:(this.wd[n]=e.x+i-this.wd[n],this.Ka[n]=i-this.Ka[n]);for(t.reset(),i=n=1/0;t.next();){var o=(r=t.value).layer,s=0|r.column;if(270===this.K||90===this.K){var a=e.x+this.ac*s;o=this.wd[o]}else a=this.wd[o],o=e.y+this.ac*s;r.centerX=a,r.centerY=o,n=Math.min(r.x,n),i=Math.min(r.y,i)}for(n=e.x-n,e=e.y-i,this.Rc=new gt(n,e),t.reset();t.next();)(i=t.value).x+=n,i.y+=e,i.commit()},Op.prototype.Bu=function(){for(var t=0,e=this.be,i=0;i<=this.ra;i++)t+=this.ae[i],t+=this.xd[i];t+=this.ra*e,e=[],i=this.ac*this.Ea;for(var n=this.maxLayer;0<=n;n--)270===this.K?0===n?e.push(new Bt(0,0,i,Math.abs(this.Ka[0]))):e.push(new Bt(0,this.Ka[n-1],i,Math.abs(this.Ka[n-1]-this.Ka[n]))):90===this.K?0===n?e.push(new Bt(0,this.Ka[0],i,Math.abs(this.Ka[0]-t))):e.push(new Bt(0,this.Ka[n],i,Math.abs(this.Ka[n-1]-this.Ka[n]))):180===this.K?0===n?e.push(new Bt(0,0,Math.abs(this.Ka[0]),i)):e.push(new Bt(this.Ka[n-1],0,Math.abs(this.Ka[n-1]-this.Ka[n]),i)):0===n?e.push(new Bt(this.Ka[0],0,Math.abs(this.Ka[0]-t),i)):e.push(new Bt(this.Ka[n],0,Math.abs(this.Ka[n-1]-this.Ka[n]),i));this.commitLayers(e,this.Rc)},Op.prototype.commitLayers=function(){},Op.prototype.commitLinks=function(){for(var t,e=this.network.edges.iterator;e.next();)null!==(t=e.value.link)&&(t.Lh(),t.Pj(),t.vf());for(e.reset();e.next();)null!==(t=e.value.link)&&t.ug();for(e.reset();e.next();){var i=e.value;if(null!==(t=i.link)){t.Lh();var n=t,r=n.fromNode,o=n.toNode,s=n.fromPort,a=n.toPort;if(null!==r){var h=r.findVisibleNode();null!==h&&h!==r&&(r=h,s=h.port)}null!==o&&null!==(h=o.findVisibleNode())&&h!==o&&(o=h,a=h.port);var l=t.computeSpot(!0,s);h=t.computeSpot(!1,a);var u=i.fromVertex,c=i.toVertex;if(i.valid){if(t.curve===bc&&4===t.pointsCount)if(u.column===c.column)i=t.getLinkPoint(r,s,l,!0,!1,o,a),s=t.getLinkPoint(o,a,h,!1,!1,r,s),i.u()||i.set(r.actualBounds.center),s.u()||s.set(o.actualBounds.center),t.Pj(),t.tf(i.x,i.y),t.tf((2*i.x+s.x)/3,(2*i.y+s.y)/3),t.tf((i.x+2*s.x)/3,(i.y+2*s.y)/3),t.tf(s.x,s.y);else{var f=!1,d=!1;if(null!==s&&l===te&&(f=!0),null!==a&&h===te&&(d=!0),f||d){var p=t.i(0).x;if(i=t.i(0).y,u=t.i(3).x,n=t.i(3).y,f){if(90===this.K||270===this.K){f=p;var g=(i+n)/2}else f=(p+u)/2,g=i;t.M(1,f,g),(l=t.getLinkPoint(r,s,l,!0,!1,o,a)).u()||l.set(r.actualBounds.center),t.M(0,l.x,l.y)}d&&(90===this.K||270===this.K?(l=u,i=(i+n)/2):(l=(p+u)/2,i=n),t.M(2,l,i),(r=t.getLinkPoint(o,a,h,!1,!1,r,s)).u()||r.set(o.actualBounds.center),t.M(3,r.x,r.y))}}t.vf()}else if(u.layer===c.layer)t.vf();else{if(f=d=!1,g=this.be,p=t.firstPickIndex+1,t.isOrthogonal){f=!0;var y=t.pointsCount;4<y&&t.points.removeRange(2,y-3)}else if(t.curve===bc)d=!0,4<(y=t.pointsCount)&&t.points.removeRange(2,y-3),4===y&&(p=2);else{y=t.pointsCount;var m=l===te,v=h===te;2<y&&m&&v?t.points.removeRange(1,y-2):3<y&&m&&!v?t.points.removeRange(1,y-3):3<y&&!m&&v?t.points.removeRange(2,y-2):4<y&&!m&&!v&&t.points.removeRange(2,y-3)}if(i.rev){for(;null!==c&&u!==c;){var x=y=null;for(m=c.sourceEdges.iterator;m.next()&&((v=m.value).link!==i.link||(y=v.fromVertex,x=v.toVertex,null!==y.node)););if(null===y)break;if(y!==u){m=t.i(p-1).x,v=t.i(p-1).y;var b=y.centerX,w=y.centerY;if(f)180===this.K||0===this.K?p===t.firstPickIndex+1?(t.l(p++,m,v),t.l(p++,m,w)):(null!==x?x.centerY:v)!==w&&(x=this.Ka[y.layer-1]+this.Rc.x,t.l(p++,x,v),t.l(p++,x,w)):p===t.firstPickIndex+1?(t.l(p++,m,v),t.l(p++,b,v)):(null!==x?x.centerX:m)!==b&&(x=this.Ka[y.layer-1]+this.Rc.y,t.l(p++,m,x),t.l(p++,b,x));else if(p===t.firstPickIndex+1){x=Math.max(10,this.ae[c.layer]);var k=Math.max(10,this.xd[c.layer]);if(d)180===this.K?b<=c.bounds.x?(c=c.bounds.x,t.l(p++,c-x,w),t.l(p++,c,w),t.l(p++,c+k,w)):(t.l(p++,b-x,w),t.l(p++,b,w),t.l(p++,b+k,w)):90===this.K?w>=c.bounds.bottom?(c=c.bounds.y+c.bounds.height,t.l(p++,b,c+k),t.l(p++,b,c),t.l(p++,b,c-x)):(t.l(p++,b,w+k),t.l(p++,b,w),t.l(p++,b,w-x)):270===this.K?w<=c.bounds.y?(c=c.bounds.y,t.l(p++,b,c-x),t.l(p++,b,c),t.l(p++,b,c+k)):(t.l(p++,b,w-x),t.l(p++,b,w),t.l(p++,b,w+k)):0===this.K&&(b>=c.bounds.right?(c=c.bounds.x+c.bounds.width,t.l(p++,c+k,w),t.l(p++,c,w),t.l(p++,c-x,w)):(t.l(p++,b+k,w),t.l(p++,b,w),t.l(p++,b-x,w)));else{t.l(p++,m,v);var M=0;180===this.K||0===this.K?((180===this.K?b>=c.bounds.right:b<=c.bounds.x)&&(M=(0===this.K?-x:k)/2),t.l(p++,m+M,w)):((270===this.K?w>=c.bounds.bottom:w<=c.bounds.y)&&(M=(90===this.K?-x:k)/2),t.l(p++,b,v+M)),t.l(p++,b,w)}}else x=Math.max(10,this.ae[y.layer]),k=Math.max(10,this.xd[y.layer]),d?180===this.K?(t.l(p++,b-x-g,w),t.l(p++,Math.min(b-x+g/2,b),w),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,Math.max(b+k-g/2,b),w),t.l(p++,b+k+g,w)):90===this.K?(t.l(p++,b,w+k+g),t.l(p++,b,Math.max(w+k-g/2,w)),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,b,Math.min(w-x+g/2,w)),t.l(p++,b,w-x-g)):270===this.K?(t.l(p++,b,w-x-g),t.l(p++,b,Math.min(w-x+g/2,w)),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,b,Math.max(w+k-g/2,w)),t.l(p++,b,w+k+g)):(t.l(p++,b+k+g,w),t.l(p++,Math.max(b+k-g/2,b),w),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,Math.min(b-x+g/2,b),w),t.l(p++,b-x-g,w)):t.l(p++,b,w)}c=y}(null===a||l!==te||f)&&(m=t.i(p-1).x,v=t.i(p-1).y,b=t.i(p).x,w=t.i(p).y,f?(g=this.xd[u.layer],180===this.K||0===this.K?((f=v)>=u.bounds.y&&f<=u.bounds.bottom&&(180===this.K?b>=u.bounds.x:b<=u.bounds.right)&&(c=u.centerX+(180===this.K?-g:g),f=f<u.bounds.y+u.bounds.height/2?u.bounds.y-this.ac/2:u.bounds.bottom+this.ac/2,t.l(p++,c,v),t.l(p++,c,f)),t.l(p++,b,f)):((f=m)>=u.bounds.x&&f<=u.bounds.right&&(270===this.K?w>=u.bounds.y:w<=u.bounds.bottom)&&(c=u.centerY+(270===this.K?-g:g),f=f<u.bounds.x+u.bounds.width/2?u.bounds.x-this.ac/2:u.bounds.right+this.ac/2,t.l(p++,m,c),t.l(p++,f,c)),t.l(p++,f,w)),t.l(p++,b,w)):d?(x=Math.max(10,this.ae[u.layer]),k=Math.max(10,this.xd[u.layer]),180===this.K&&b>=u.bounds.x?(c=u.bounds.x+u.bounds.width,t.M(p-2,c,v),t.M(p-1,c+k,v)):90===this.K&&w<=u.bounds.bottom?(c=u.bounds.y,t.M(p-2,m,c),t.M(p-1,m,c-x)):270===this.K&&w>=u.bounds.y?(c=u.bounds.y+u.bounds.height,t.M(p-2,m,c),t.M(p-1,m,c+k)):0===this.K&&b<=u.bounds.right&&(c=u.bounds.x,t.M(p-2,c,v),t.M(p-1,c-x,v))):(x=Math.max(10,this.ae[u.layer]),k=Math.max(10,this.xd[u.layer]),f=0,180===this.K||0===this.K?((180===this.K?b<=u.bounds.x:b>=u.bounds.right)&&(f=(0===this.K?k:-x)/2),t.l(p++,b+f,v)):((270===this.K?w<=u.bounds.y:w>=u.bounds.bottom)&&(f=(90===this.K?k:-x)/2),t.l(p++,m,w+f)),t.l(p++,b,w)))}else{for(;null!==u&&u!==c;){for(x=y=null,u=u.destinationEdges.iterator;u.next()&&((m=u.value).link!==i.link||(y=m.toVertex,null!==(x=m.fromVertex).node&&(x=null),null!==y.node)););if(null===y)break;y!==c&&(m=t.i(p-1).x,v=t.i(p-1).y,b=y.centerX,w=y.centerY,f?180===this.K||0===this.K?(null!==x?x.centerY:v)!==w&&(x=this.Ka[y.layer]+this.Rc.x,p===t.firstPickIndex+1&&(x=0===this.K?Math.max(x,m):Math.min(x,m)),t.l(p++,x,v),t.l(p++,x,w)):(null!==x?x.centerX:m)!==b&&(x=this.Ka[y.layer]+this.Rc.y,p===t.firstPickIndex+1&&(x=90===this.K?Math.max(x,v):Math.min(x,v)),t.l(p++,m,x),t.l(p++,b,x)):(x=Math.max(10,this.ae[y.layer]),k=Math.max(10,this.xd[y.layer]),d?180===this.K?(t.l(p++,b+k+g,w),t.l(p++,Math.max(b+k-g/2,b),w),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,Math.min(b-x+g/2,b),w),t.l(p++,b-x-g,w)):90===this.K?(t.l(p++,b,w-x-g),t.l(p++,b,Math.min(w-x+g/2,w)),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,b,Math.max(w+k-g/2,w)),t.l(p++,b,w+k+g)):270===this.K?(t.l(p++,b,w+k+g),t.l(p++,b,Math.max(w+k-g/2,w)),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,b,Math.min(w-x+g/2,w)),t.l(p++,b,w-x-g)):(t.l(p++,b-x-g,w),t.l(p++,Math.min(b-x+g/2,b),w),t.l(p++,b,w),t.l(p++,b,w),t.l(p++,Math.max(b+k-g/2,b),w),t.l(p++,b+k+g,w)):180===this.K?(t.l(p++,b+k,w),t.l(p++,b-x,w)):90===this.K?(t.l(p++,b,w-x),t.l(p++,b,w+k)):270===this.K?(t.l(p++,b,w+k),t.l(p++,b,w-x)):(t.l(p++,b-x,w),t.l(p++,b+k,w)))),u=y}f&&(m=t.i(p-1).x,v=t.i(p-1).y,b=t.i(p).x,w=t.i(p).y,180===this.K||0===this.K?v!==w&&(x=0===this.K?Math.min(Math.max((b+m)/2,this.Ka[c.layer]+this.Rc.x),b):Math.max(Math.min((b+m)/2,this.Ka[c.layer]+this.Rc.x),b),t.l(p++,x,v),t.l(p++,x,w)):m!==b&&(x=90===this.K?Math.min(Math.max((w+v)/2,this.Ka[c.layer]+this.Rc.y),w):Math.max(Math.min((w+v)/2,this.Ka[c.layer]+this.Rc.y),w),t.l(p++,m,x),t.l(p++,b,x)))}null!==n&&d&&(null!==s&&(l===te&&(l=t.i(0),n=t.i(2),l.A(n)||t.M(1,(l.x+n.x)/2,(l.y+n.y)/2)),(l=t.getLinkPoint(r,s,te,!0,!1,o,a)).u()||l.set(r.actualBounds.center),t.M(0,l.x,l.y)),null!==a&&(h===te&&(h=t.i(t.pointsCount-1),l=t.i(t.pointsCount-3),h.A(l)||t.M(t.pointsCount-2,(h.x+l.x)/2,(h.y+l.y)/2)),(r=t.getLinkPoint(o,a,te,!1,!1,r,s)).u()||r.set(o.actualBounds.center),t.M(t.pointsCount-1,r.x,r.y))),t.vf(),i.commit()}}}this.avoidOrthogonalOverlaps()},Op.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new J,e=this.network.edges.iterator;e.next();){var i=e.value.link;null!==i&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(90===this.K||270===this.K){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(null!==n&&n.isOrthogonal)for(var r=2;r<n.pointsCount-3;r++){var o=n.i(r),s=n.i(r+1);if(this.w(o.y,s.y)&&!this.w(o.x,s.x)){var a=new Sg;a.layer=Math.floor(o.y/2);var h=n.i(0),l=n.i(n.pointsCount-1);if(a.first=h.x*h.x+h.y,a.$b=l.x*l.x+l.y,a.ed=Math.min(o.x,s.x),a.vc=Math.max(o.x,s.x),a.index=r,a.link=n,r+2<n.pointsCount){h=n.i(r-1),l=n.i(r+2);var u=0;h.y<o.y?u=l.y<o.y?3:o.x<s.x?2:1:h.y>o.y&&(u=l.y>o.y?0:s.x<o.x?2:1),a.j=u}i.push(a)}}}if(1<i.length)for(i.sort(this.uy),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(s=i[o].vc,r=t+1;r<n&&i[r].ed<s;)s=Math.max(s,i[r].vc),r++;if(1<(s=r-o)){for(this.Vi(i,this.Qs,o,o+s),u=1,a=i[o].$b,h=o;h<r;h++)(l=i[h]).$b!==a&&(u++,a=l.$b);this.Vi(i,this.ty,o,o+s);var c=1;for(a=i[o].first,h=o;h<r;h++)(l=i[h]).first!==a&&(c++,a=l.first);for(h=!0,l=c,u<c?(h=!1,l=u,a=i[o].$b,this.Vi(i,this.Qs,o,o+s)):a=i[o].first,u=0,c=o;c<r;c++){var f=i[c];(h?f.first:f.$b)!==a&&(u++,a=h?f.first:f.$b);var d=f.link;o=d.i(f.index),s=d.i(f.index+1);var p=this.linkSpacing*(u-(l-1)/2);e++,d.Lh(),d.M(f.index,o.x,o.y+p),d.M(f.index+1,s.x,s.y+p),d.vf()}}o=r}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(null!==(n=t.value)&&n.isOrthogonal)for(r=2;r<n.pointsCount-3;r++)o=n.i(r),s=n.i(r+1),this.w(o.x,s.x)&&!this.w(o.y,s.y)&&((a=new Sg).layer=Math.floor(o.x/2),h=n.i(0),l=n.i(n.pointsCount-1),a.first=h.x+h.y*h.y,a.$b=l.x+l.y*l.y,a.ed=Math.min(o.y,s.y),a.vc=Math.max(o.y,s.y),a.index=r,a.link=n,r+2<n.pointsCount&&(h=n.i(r-1),l=n.i(r+2),u=0,h.x<o.x?u=l.x<o.x?3:o.y<s.y?2:1:h.x>o.x&&(u=l.x>o.x?0:s.y<o.y?2:1),a.j=u),i.push(a));if(1<i.length)for(i.sort(this.uy),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(s=i[o].vc,r=t+1;r<n&&i[r].ed<s;)s=Math.max(s,i[r].vc),r++;if(1<(s=r-o)){for(this.Vi(i,this.Qs,o,o+s),u=1,a=i[o].$b,h=o;h<r;h++)(l=i[h]).$b!==a&&(u++,a=l.$b);for(this.Vi(i,this.ty,o,o+s),c=1,a=i[o].first,h=o;h<r;h++)(l=i[h]).first!==a&&(c++,a=l.first);for(h=!0,l=c,u<c?(h=!1,l=u,a=i[o].$b,this.Vi(i,this.Qs,o,o+s)):a=i[o].first,u=0,c=o;c<r;c++)f=i[c],(h?f.first:f.$b)!==a&&(u++,a=h?f.first:f.$b),o=(d=f.link).i(f.index),s=d.i(f.index+1),p=this.linkSpacing*(u-(l-1)/2),e++,d.Lh(),d.M(f.index,o.x+p,o.y),d.M(f.index+1,s.x+p,s.y),d.vf()}o=r}t=n}}}},(e=Op.prototype).uy=function(t,e){return t instanceof Sg&&e instanceof Sg&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ed<e.ed?-1:t.ed>e.ed?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},e.ty=function(t,e){return t instanceof Sg&&e instanceof Sg&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ed<e.ed?-1:t.ed>e.ed?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},e.Qs=function(t,e){return t instanceof Sg&&e instanceof Sg&&t!==e?t.$b<e.$b?-1:t.$b>e.$b||t.j<e.j?1:t.j>e.j||t.ed<e.ed?-1:t.ed>e.ed?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},e.w=function(t,e){return-1<(t-=e)&&1>t},e.Vi=function(t,e,i,n){var r=t.length,o=n-i;if(!(1>=o))if((0>i||i>=r-1)&&w(\"not in range 0 <= from < length: \"+i),2===o)0<e(n=t[i],r=t[i+1])&&(t[i]=r,t[i+1]=n);else if(0===i)if(n>=r)t.sort(e);else for((i=t.slice(0,n)).sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=r)for((n=t.slice(i)).sort(e),e=i;e<r;e++)t[e]=n[e-i];else for((r=t.slice(i,n)).sort(e),e=i;e<n;e++)t[e]=r[e-i]},f.Object.defineProperties(Op.prototype,{layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&0<=t&&(this.be=t,this.B())}},columnSpacing:{get:function(){return this.ac},set:function(t){this.ac!==t&&0<t&&(this.ac=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(0===t||90===t||180===t||270===t?(this.K=t,this.B()):w(\"LayeredDigraphLayout.direction must be 0, 90, 180, or 270\"))}},cycleRemoveOption:{get:function(){return this.Kk},set:function(t){this.Kk===t||t!==fg&&t!==cg&&t!==dg||(this.Kk=t,this.B())}},layeringOption:{get:function(){return this.il},set:function(t){this.il===t||t!==pg&&t!==gg&&t!==yg||(this.il=t,this.B())}},initializeOption:{get:function(){return this.Zk},set:function(t){this.Zk===t||t!==mg&&t!==vg&&t!==xg||(this.Zk=t,this.B())}},iterations:{get:function(){return this.qj},set:function(t){this.qj!==t&&0<=t&&(this.qj=t,this.B())}},aggressiveOption:{get:function(){return this.vk},set:function(t){this.vk===t||t!==bg&&t!==wg&&t!==kg||(this.vk=t,this.B())}},packOption:{get:function(){return this.ag},set:function(t){this.ag!==t&&0<=t&&8>t&&(this.ag=t,this.B())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.B())}},linkSpacing:{get:function(){return this.jo},set:function(t){this.jo!==t&&0<=t&&(this.jo=t,this.B())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.ji}},maxColumn:{get:function(){return this.Ea}},minIndexLayer:{get:function(){return this.Vg}},maxIndexLayer:{get:function(){return this.tc}}});var cg=new V(Op,\"CycleDepthFirst\",0),fg=new V(Op,\"CycleGreedy\",1),dg=new V(Op,\"CycleFromLayers\",2),pg=new V(Op,\"LayerOptimalLinkLength\",0),gg=new V(Op,\"LayerLongestPathSink\",1),yg=new V(Op,\"LayerLongestPathSource\",2),mg=new V(Op,\"InitDepthFirstOut\",0),vg=new V(Op,\"InitDepthFirstIn\",1),xg=new V(Op,\"InitNaive\",2),bg=new V(Op,\"AggressiveNone\",0),wg=new V(Op,\"AggressiveLess\",1),kg=new V(Op,\"AggressiveMore\",2),Mg=8;function Sg(){this.index=this.vc=this.ed=this.$b=this.first=this.layer=0,this.link=null,this.j=0}function Pg(t){vf.call(this,t)}function Ng(t){Mf.call(this,t),this.Ra=this.Bg=this.fi=-1,this.D=NaN,this.L=null,this.valid=!1,this.finish=this.og=NaN,this.uf=0,this.hk=this.ik=null}function Cg(t){Pf.call(this,t),this.j=this.Ba=this.Ma=!1,this.wa=this.D=NaN,this.L=this.o=0}function Tg(t){rf.call(this),this.Kb=new Q,this.Mo=oy,this.ld=sy,this.Ep=ky,this.tr=Ly,this.Aw=[],this.jd=!0,this.Hb=Ny,this.Qd=new jt(10,10).freeze();var e=new Oy(this);this.V=new Dy(e),this.W=new Dy(e),this.ku=[],t&&Object.assign(this,t)}function Lg(t){var e=new Q;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}function Ag(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.ld){case sy:r.sourceEdges.count<i&&(i=r.sourceEdges.count,n=r);break;case ay:r.destinationEdges.count<i&&(i=r.destinationEdges.count,n=r);break;default:w(\"Unhandled path value \"+t.ld.toString())}}return n}function jg(t,e){if(null!==e){switch(t.ld){case sy:if(0<e.destinationEdges.count){for(var i=new J,n=e.destinationVertexes;n.next();){var r=n.value;Og(t,e,r)&&i.add(r)}0<i.count&&(e.children=i.ya())}break;case ay:if(0<e.sourceEdges.count){for(i=new J,n=e.sourceVertexes;n.next();)Og(t,e,r=n.value)&&i.add(r);0<i.count&&(e.children=i.ya())}break;default:w(\"Unhandled path value\"+t.ld.toString())}for(n=(i=e.children).length,r=0;r<n;r++){var o=i[r];o.initialized=!0,o.level=e.level+1,o.parent=e,t.Kb.remove(o)}for(e=0;e<n;e++)jg(t,i[e])}}function Og(t,e,i){if(i.initialized){if(null===e)var n=!1;else{for(n=e.parent;null!==n&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}function Dg(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===my&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,r=0,o=e.children,s=o.length,a=0;a<s;a++){var h=o[a];Dg(t,h),i+=h.descendantCount+1,n=Math.max(n,h.maxChildrenCount),r=Math.max(r,h.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?r+1:0}}function Fg(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var i=(e=e.children).length,n=0;n<i;n++)Fg(t,e[n])}}function Bg(t,e){if(null!==e){e.alignment!==my&&t.sortTreeVertexChildren(e);for(var i=(e=e.children).length,n=0;n<i;n++)Bg(t,e[n])}}function Ig(t){return t===yy||t===my||t===vy||t===xy}function zg(t){return t===yy||t===my}function Rg(t){var e=t.parent;if(null!==e){var i=e.alignment;if(Ig(i)){if(zg(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return 0==i%2}if(i===vy)return!0}}return!1}function Eg(t,e){if(0===e.childrenCount){var i=!1,n=0;null!==e.parent&&(n=e.parent.angle,i=Ig(i=e.parent.alignment));var r=Rg(e);e.U.h(0,0),e.va.h(e.width,e.height),null===e.parent||null===e.comments||(180!==n&&270!==n||i)&&!r?e.fa.h(0,0):180===n&&!i||(90===n||270===n)&&r?e.fa.h(e.width-2*e.focus.x,0):e.fa.h(0,e.height-2*e.focus.y)}else{i=90===(n=iy(e))||270===n;for(var o=0,s=(r=e.children).length,a=0;a<s;a++){var h=r[a];o=Math.max(o,i?h.va.width:h.va.height)}var l=e.alignment,u=l===py,c=l===gy;a=Ig(l);var f=Math.max(0,e.breadthLimit);h=ny(e);var d=e.nodeSpacing,p=ry(e),g=u||c?0:p/2,y=e.rowSpacing,m=0;(u||c||e.rm||e.sm&&1===e.maxGenerationCount)&&(m=Math.max(0,e.rowIndent)),u=e.width;var v=e.height,x=0,b=0,k=0,M=0,S=0,P=0,N=0,C=0,T=0;if(a&&!zg(l)&&135<n&&r.reverse(),zg(l))if(1<s)for(var L=0;L<s;L++){var A=r[L],j=A.va;0==L%2&&L!==s-1&&(T=Math.max(T,(i?j.width:j.height)+Yg(A)-d))}else 1===s&&(T=i?r[0].va.width:r[0].va.height);if(a)switch(l){case yy:case my:T=(b=135>n?_g(e,r,T,x,b):Vg(e,r,T,x,b)).x,x=b.width,b=b.height;break;case vy:for(t=0;t<s;t++)g=(f=r[t]).va,k=0===N?0:y,i?(f.U.h(o-g.width,S+k),x=Math.max(x,g.width),b=Math.max(b,S+k+g.height),S+=k+g.height):(f.U.h(M+k,o-g.height),x=Math.max(x,M+k+g.width),b=Math.max(b,g.height),M+=k+g.width),N++;break;case xy:for(o=0;o<s;o++)f=(t=r[o]).va,g=0===N?0:y,i?(t.U.h(d/2+e.focus.x,S+g),x=Math.max(x,f.width),b=Math.max(b,S+g+f.height),S+=g+f.height):(t.U.h(M+g,d/2+e.focus.y),x=Math.max(x,M+g+f.width),b=Math.max(b,f.height),M+=g+f.width),N++}else for(L=0;L<s;L++){if(j=(A=r[L]).va,i){0<f&&0<N&&M+d+j.width>f&&(M<o&&Kg(e,l,o-M,0,C,L-1),P++,N=0,C=L,k=b,M=0,S=135<n?-b-y:b+y);var O=0===N?g:d;Wg(t,A,0,S),A.U.h(M+O,S),x=Math.max(x,M+O+j.width),b=Math.max(b,k+(0===P?0:y)+j.height),M+=O+j.width}else 0<f&&0<N&&S+d+j.height>f&&(S<o&&Kg(e,l,0,o-S,C,L-1),P++,N=0,C=L,k=x,S=0,M=135<n?-x-y:x+y),O=0===N?g:d,Wg(t,A,M,0),A.U.h(M,S+O),b=Math.max(b,S+O+j.height),x=Math.max(x,k+(0===P?0:y)+j.width),S+=O+j.height;N++}switch(0<P&&(i?(b+=Math.max(0,h),M<x&&Kg(e,l,x-M,0,C,s-1),0<m&&(c||Hg(e,m,0,0,s-1),x+=m)):(x+=Math.max(0,h),S<b&&Kg(e,l,0,b-S,C,s-1),0<m&&(c||Hg(e,0,m,0,s-1),b+=m))),m=c=0,l){case fy:i?c+=x/2-e.focus.x-p/2:m+=b/2-e.focus.y-p/2;break;case dy:0<P?i?c+=x/2-e.focus.x-p/2:m+=b/2-e.focus.y-p/2:i?c+=(l=r[0].U.x+r[0].fa.x)+(r[s-1].U.x+r[s-1].fa.x+2*r[s-1].focus.x-l)/2-e.focus.x-p/2:m+=(l=r[0].U.y+r[0].fa.y)+(r[s-1].U.y+r[s-1].fa.y+2*r[s-1].focus.y-l)/2-e.focus.y-p/2;break;case py:i?(c-=p,x+=p):(m-=p,b+=p);break;case gy:i?(c+=x-e.width+p,x+=p):(m+=b-e.height+p,b+=p);break;case yy:case my:i?c+=1<s?T+d/2-e.focus.x:r[0].focus.x-e.focus.x+r[0].fa.x:m+=1<s?T+d/2-e.focus.y:r[0].focus.y-e.focus.y+r[0].fa.y;break;case vy:i?c+=x+d/2-e.focus.x:m+=b+d/2-e.focus.y;break;case xy:break;default:w(\"Unhandled alignment value \"+l.toString())}for(p=0;p<s;p++)l=r[p],i?l.U.h(l.U.x+l.fa.x-c,l.U.y+(135<n?(a?-b:-l.va.height)+l.fa.y-h:v+h+l.fa.y)):l.U.h(l.U.x+(135<n?(a?-x:-l.va.width)+l.fa.x-h:u+h+l.fa.x),l.U.y+l.fa.y-m);i?(x=Xg(e,x,c),0>c&&(c=0),135<n&&(m+=b+h),b=Math.max(Math.max(b,v),b+v+h)):(135<n&&(c+=x+h),x=Math.max(Math.max(x,u),x+u+h),b=Ug(e,b,m),0>m&&(m=0)),e.fa.h(c,m),e.va.h(x,b)}}function _g(t,e,i,n,r){var o=e.length;if(0===o)return new Bt(i,0,n,r);if(1===o)return new Bt(i,0,n=(t=e[0]).va.width,r=t.va.height);for(var s=t.nodeSpacing,a=t.rowSpacing,h=90===iy(t),l=0,u=0,c=0,f=0;f<o;f++)if(!(0!=f%2||1<o&&f===o-1)){var d=e[f],p=d.va,g=0===l?0:a;if(h){var y=Yg(d)-s;d.U.h(i-(p.width+y),c+g),n=Math.max(n,p.width+y),r=Math.max(r,c+g+p.height),c+=g+p.height}else y=Yg(d)-s,d.U.h(u+g,i-(p.height+y)),r=Math.max(r,p.height+y),n=Math.max(n,u+g+p.width),u+=g+p.width;l++}for(l=0,d=u,f=c,h?(u=i+s,c=0):(u=0,c=i+s),p=0;p<o;p++)if(0!=p%2){y=(g=e[p]).va;var m=0===l?0:a;if(h){var v=Yg(g)-s;g.U.h(u+v,c+m),n=Math.max(n,u+y.width+v),r=Math.max(r,c+m+y.height),c+=m+y.height}else v=Yg(g)-s,g.U.h(u+m,c+v),n=Math.max(n,u+m+y.width),r=Math.max(r,c+y.height+v),u+=m+y.width;l++}return 1<o&&1==o%2&&(o=(e=e[o-1]).va,a=null===e.parent?0:e.parent.rowSpacing,h?(e.U.h(i+s/2-e.focus.x-e.fa.x,r+a),h=i+s/2-e.focus.x-e.fa.x,n=Math.max(n,h+o.width),0>h&&(n-=h),r=Math.max(r,Math.max(f,c)+a+o.height),0>e.U.x&&(i=Gg(t,e.U.x,!1,i,s))):(e.U.h(n+a,i+s/2-e.focus.y-e.fa.y),n=Math.max(n,Math.max(d,u)+a+o.width),c=i+s/2-e.focus.y-e.fa.y,r=Math.max(r,c+o.height),0>c&&(r-=c),0>e.U.y&&(i=Gg(t,e.U.y,!0,i,s)))),new Bt(i,0,n,r)}function Vg(t,e,i,n,r){var o=e.length;if(0===o)return new Bt(i,0,n,r);if(1===o)return new Bt(i,0,n=(e=e[0]).va.width,r=e.va.height);for(var s=t.nodeSpacing,a=t.rowSpacing,h=270===iy(t),l=0,u=0,c=0,f=0;f<o;f++)if(!(0!=f%2||1<o&&f===o-1)){var d=e[f],p=d.va,g=0===l?0:a;if(h){var y=Yg(d)-s;c-=g+p.height,d.U.h(i-(p.width+y),c),n=Math.max(n,p.width+y),r=Math.max(r,Math.abs(c))}else y=Yg(d)-s,u-=g+p.width,d.U.h(u,i-(p.height+y)),r=Math.max(r,p.height+y),n=Math.max(n,Math.abs(u));l++}for(l=0,d=u,f=c,h?(u=i+s,c=0):(u=0,c=i+s),p=0;p<o;p++)if(0!=p%2){y=(g=e[p]).va;var m=0===l?0:a;if(h){var v=Yg(g)-s;c-=m+y.height,g.U.h(u+v,c),n=Math.max(n,u+y.width+v),r=Math.max(r,Math.abs(c))}else v=Yg(g)-s,u-=m+y.width,g.U.h(u,c+v),r=Math.max(r,c+y.height+v),n=Math.max(n,Math.abs(u));l++}for(1<o&&1==o%2&&(l=(a=e[o-1]).va,p=null===a.parent?0:a.parent.rowSpacing,h?(a.U.h(i+s/2-a.focus.x-a.fa.x,-r-l.height-p),u=i+s/2-a.focus.x-a.fa.x,n=Math.max(n,u+l.width),0>u&&(n-=u),r=Math.max(r,Math.abs(Math.min(f,c))+p+l.height),0>a.U.x&&(i=Gg(t,a.U.x,!1,i,s))):(a.U.h(-n-l.width-p,i+s/2-a.focus.y-a.fa.y),n=Math.max(n,Math.abs(Math.min(d,u))+p+l.width),c=i+s/2-a.focus.y-a.fa.y,r=Math.max(r,c+l.height),0>c&&(r-=c),0>a.U.y&&(i=Gg(t,a.U.y,!0,i,s)))),t=0;t<o;t++)s=e[t],h?s.U.h(s.U.x,s.U.y+r):s.U.h(s.U.x+n,s.U.y);return new Bt(i,0,n,r)}function Yg(t){return null===t.parent?0:t.parent.nodeSpacing}function Gg(t,e,i,n,r){for(var o=(t=t.children).length,s=0;s<o;s++)i?t[s].U.h(t[s].U.x,t[s].U.y-e):t[s].U.h(t[s].U.x-e,t[s].U.y);return e=t[o-1],Math.max(n,i?e.fa.y+e.focus.y-r/2:e.fa.x+e.focus.x-r/2)}function Xg(t,e,i){switch(t.alignment){case dy:case fy:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case py:return t.width>e?t.width:e;case gy:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case yy:case my:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case vy:return t.width-t.focus.x+t.nodeSpacing/2+e;case xy:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Ug(t,e,i){switch(t.alignment){case dy:case fy:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case py:return t.height>e?t.height:e;case gy:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case yy:case my:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case vy:return t.height-t.focus.y+t.nodeSpacing/2+e;case xy:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function qg(t,e,i){switch(t){case fy:case dy:e/=2,i/=2;break;case py:i=e=0;break;case gy:break;default:w(\"Unhandled alignment value \"+t.toString())}return new gt(e,i)}function Kg(t,e,i,n,r,o){Hg(t,(e=qg(e,i,n)).x,e.y,r,o)}function Hg(t,e,i,n,r){if(0!==e||0!==i)for(t=t.children;n<=r;n++){var o=t[n].U;o.x+=e,o.y+=i}}function Wg(t,e,i,n){var r=e.parent;switch(t.ld){case sy:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===r&&e.relativePoint.h(i,n);break;case ay:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===r&&e.relativePoint.h(i,n);break;default:w(\"Unhandled path value \"+t.ld.toString())}}function Zg(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.x+=e,r.y+=i}}function Jg(t,e,i,n,r,o,s,a){var h=iy(e),l=90===h||270===h,u=e.nodeSpacing;e=n;var c=r;n=o;var f=s,d=i.fq,p=i.rq;s=i.va;var g=l?Math.max(f,s.height):Math.max(n,s.width);if(null!==d&&h===iy(i)||(d=$g(t,2),p=$g(t,2),l?(d[0].h(0,0),d[1].h(0,s.height),p[0].h(s.width,0),p[1].h(p[0].x,d[1].y)):(d[0].h(0,0),d[1].h(s.width,0),p[0].h(0,s.height),p[1].h(d[1].x,p[0].y))),l){if(f=9999999,!(null===c||2>c.length||null===d||2>d.length))for(r=i=0;i<c.length&&r<d.length;){o=c[i];var y=d[r];h=y.x,l=y.y,h+=n;var m=o;i+1<c.length&&(m=c[i+1]);var v=y;y=v.x,v=v.y,r+1<d.length&&(y=(v=d[r+1]).x,v=v.y,y+=n);var x=f;o.y===l?x=h-o.x:o.y>l&&o.y<v?x=h+(o.y-l)/(v-l)*(y-h)-o.x:l>o.y&&l<m.y&&(x=h-(o.x+(l-o.y)/(m.y-o.y)*(m.x-o.x))),x<f&&(f=x),m.y<=o.y?i++:v<=l?r++:(m.y<=v&&i++,v<=m.y&&r++)}if(f=n-f,i=d,r=f+=u,null===e||2>e.length||null===i||2>i.length)n=null;else{for(u=$g(t,e.length+i.length),n=o=h=0;o<i.length&&i[o].y<e[0].y;)l=i[o++],u[n++].h(l.x+r,l.y);for(;h<e.length;)l=e[h++],u[n++].h(l.x,l.y);for(h=e[e.length-1].y;o<i.length&&i[o].y<=h;)o++;for(;o<i.length&&i[o].y>h;)l=i[o++],u[n++].h(l.x+r,l.y);for(i=$g(t,n),h=0;h<n;h++)i[h].assign(u[h]);Qg(t,u),n=i}if(o=p,h=f,null===c||2>c.length||null===o||2>o.length)r=null;else{for(u=$g(t,c.length+o.length),r=l=i=0;i<c.length&&c[i].y<o[0].y;)m=c[i++],u[r++].h(m.x,m.y);for(;l<o.length;)m=o[l++],u[r++].h(m.x+h,m.y);for(o=o[o.length-1].y;i<c.length&&c[i].y<=o;)i++;for(;i<c.length&&c[i].y>o;)h=c[i++],u[r++].h(h.x,h.y);for(o=$g(t,r),i=0;i<r;i++)o[i].assign(u[i]);Qg(t,u),r=o}return o=Math.max(0,f)+s.width,s=g,Qg(t,e),Qg(t,d),Qg(t,c),Qg(t,p),a[0]=n,a[1]=r,new Bt(f,0,o,s)}if(n=9999999,!(null===c||2>c.length||null===d||2>d.length))for(r=i=0;i<c.length&&r<d.length;)o=c[i],h=(y=d[r]).x,l=y.y,l+=f,m=o,i+1<c.length&&(m=c[i+1]),y=(v=y).x,v=v.y,r+1<d.length&&(y=(v=d[r+1]).x,v=v.y,v+=f),x=n,o.x===h?x=l-o.y:o.x>h&&o.x<y?x=l+(o.x-h)/(y-h)*(v-l)-o.y:h>o.x&&h<m.x&&(x=l-(o.y+(h-o.x)/(m.x-o.x)*(m.y-o.y))),x<n&&(n=x),m.x<=o.x?i++:y<=h?r++:(m.x<=y&&i++,y<=m.x&&r++);if(f-=n,i=d,r=f+=u,null===e||2>e.length||null===i||2>i.length)n=null;else{for(u=$g(t,e.length+i.length),n=o=h=0;o<i.length&&i[o].x<e[0].x;)l=i[o++],u[n++].h(l.x,l.y+r);for(;h<e.length;)l=e[h++],u[n++].h(l.x,l.y);for(h=e[e.length-1].x;o<i.length&&i[o].x<=h;)o++;for(;o<i.length&&i[o].x>h;)l=i[o++],u[n++].h(l.x,l.y+r);for(i=$g(t,n),h=0;h<n;h++)i[h].assign(u[h]);Qg(t,u),n=i}if(o=p,h=f,null===c||2>c.length||null===o||2>o.length)r=null;else{for(u=$g(t,c.length+o.length),r=l=i=0;i<c.length&&c[i].x<o[0].x;)m=c[i++],u[r++].h(m.x,m.y);for(;l<o.length;)m=o[l++],u[r++].h(m.x,m.y+h);for(o=o[o.length-1].x;i<c.length&&c[i].x<=o;)i++;for(;i<c.length&&c[i].x>o;)h=c[i++],u[r++].h(h.x,h.y);for(o=$g(t,r),i=0;i<r;i++)o[i].assign(u[i]);Qg(t,u),r=o}return o=g,s=Math.max(0,f)+s.height,Qg(t,e),Qg(t,d),Qg(t,c),Qg(t,p),a[0]=n,a[1]=r,new Bt(f,0,o,s)}function $g(t,e){if(void 0!==(t=t.ku[e])&&void 0!==(t=t.pop()))return t;t=[];for(var i=0;i<e;i++)t[i]=new gt;return t}function Qg(t,e){var i=e.length,n=t.ku[i];void 0===n&&(n=[],t.ku[i]=n),n.push(e)}function ty(t,e,i,n){if(null!==e){e.x=i,e.y=n;for(var r=(e=e.children).length,o=0;o<r;o++){var s=e[o];ty(t,s,i+s.U.x,n+s.U.y)}}}function ey(t,e){if(null!==e){t.setPortSpots(e);for(var i=(e=e.children).length,n=0;n<i;n++)ey(t,e[n])}}function iy(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function ny(t){var e=iy(t);e=90===e||270===e;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i}function ry(t){var e=iy(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=90===e||270===e?t.width*n:t.height*n}return Math.max(0,i)}Op.className=\"LayeredDigraphLayout\",Op.CycleDepthFirst=cg,Op.CycleGreedy=fg,Op.CycleFromLayers=dg,Op.LayerOptimalLinkLength=pg,Op.LayerLongestPathSink=gg,Op.LayerLongestPathSource=yg,Op.InitDepthFirstOut=mg,Op.InitDepthFirstIn=vg,Op.InitNaive=xg,Op.AggressiveNone=bg,Op.AggressiveLess=wg,Op.AggressiveMore=kg,Op.PackNone=0,Op.PackExpand=1,Op.PackStraighten=2,Op.PackMedian=4,Op.PackAll=15,Sg.className=\"SegInfo\",c(Pg,vf),Pg.prototype.createVertex=function(){return new Ng(this)},Pg.prototype.createEdge=function(){return new Cg(this)},Pg.className=\"LayeredDigraphNetwork\",c(Ng,Mf),Ng.prototype.serializeVertexProperties=function(t,e){Mf.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?it(this.near):null,t.valid=this.valid,t.og=this.og,t.finish=this.finish,t.uf=this.uf,t.ik=this.ik,t.hk=this.hk},Ng.prototype.deserializeVertexProperties=function(t,e,i,n){Mf.prototype.deserializeVertexProperties.call(this,t,e,i,n),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.og=t.og,this.finish=t.finish,this.uf=t.uf,this.ik=t.ik,this.hk=t.hk},f.Object.defineProperties(Ng.prototype,{layer:{get:function(){return this.fi},set:function(t){this.fi!==t&&(this.fi=t)}},column:{get:function(){return this.Bg},set:function(t){this.Bg!==t&&(this.Bg=t)}},index:{get:function(){return this.Ra},set:function(t){this.Ra!==t&&(this.Ra=t)}},component:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}},near:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}}}),Ng.className=\"LayeredDigraphVertex\",c(Cg,Pf),Cg.prototype.serializeEdgeProperties=function(t,e){Pf.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},Cg.prototype.deserializeEdgeProperties=function(t,e,i,n){Pf.prototype.deserializeEdgeProperties.call(this,t,e,i,n),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},f.Object.defineProperties(Cg.prototype,{fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},valid:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},rev:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}},portToPos:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}}}),Cg.className=\"LayeredDigraphEdge\",c(Tg,rf),Tg.prototype.cloneProtected=function(t){rf.prototype.cloneProtected.call(this,t),t.Mo=this.Mo,t.Ep=this.Ep,t.tr=this.tr,t.jd=this.jd,t.Hb=this.Hb,t.Qd.assign(this.Qd),t.V.copyInheritedPropertiesFrom(this.V),t.W.copyInheritedPropertiesFrom(this.W)},Tg.prototype.gb=function(t){t.classType===Tg?0===t.name.indexOf(\"Alignment\")?this.alignment=t:0===t.name.indexOf(\"Arrangement\")?this.arrangement=t:0===t.name.indexOf(\"Compaction\")?this.compaction=t:0===t.name.indexOf(\"Path\")?this.path=t:0===t.name.indexOf(\"Sorting\")?this.sorting=t:0===t.name.indexOf(\"Style\")?this.treeStyle=t:w(\"Unknown enum value: \"+t):rf.prototype.gb.call(this,t)},Tg.prototype.createNetwork=function(){return new Oy(this)},Tg.prototype.makeNetwork=function(t){function e(t){if(t instanceof wu)return!t.isLinkLabel&&\"Comment\"!==t.category;if(t instanceof qu){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&\"Comment\"!==e.category&&null!==(t=t.toNode)&&!t.isLinkLabel&&\"Comment\"!==t.category}return!1}var i=this.createNetwork();return t instanceof Pr?(i.mg(t.nodes,!0,e),i.mg(t.links,!0,e)):t instanceof _u?i.mg(t.memberParts,!1,e):i.mg(t.iterator,!1,e),i},Tg.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Ty&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof Pr&&(e=t),this.path===oy&&null!==e?this.ld=e.isTreePathToChildren?sy:ay:this.ld=this.path===oy?sy:this.path,0<this.network.vertexes.count){for(this.network.Sp(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Kb.count){for(t=new Q,e=this.Kb.iterator;e.next();){var i=e.value;i instanceof wu?null!==(i=this.network.Ji(i))&&t.add(i):i instanceof Dy&&t.add(i)}this.Kb=t}for(0===this.Kb.count&&this.findRoots(),t=this.Kb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,jg(this,e));for(e=this.network.vertexes,t=null;0<(t=Lg(e)).count;)null!==(e=Ag(this,t))&&this.Kb.add(e),e.initialized=!0,jg(this,e),e=t;for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof Dy&&Dg(this,e);for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof Dy&&Fg(this,e);for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof Dy&&Bg(this,e);if(this.vu(),this.layerStyle===jy){for(t=[],e=this.network.vertexes.iterator;e.next();){var n=(i=e.value).parent;null===n&&(n=i),n=0===n.angle||180===n.angle;var r=t[i.level];void 0===r&&(r=0),t[i.level]=Math.max(r,n?i.width:i.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.Aw=t,e=this.network.vertexes.iterator;e.next();)null===(n=(i=e.value).parent)&&(n=i),0===n.angle||180===n.angle?(180===n.angle&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(270===n.angle&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===Ay)for(t=this.network.vertexes.iterator;t.next();){for(i=0===(e=t.value).angle||180===e.angle,n=-1,r=0;r<e.children.length;r++){var o=e.children[r];n=Math.max(n,i?o.width:o.height)}if(0<=n)for(r=0;r<e.children.length;r++)o=e.children[r],i?(180===e.angle&&(o.focusX+=n-o.width),o.width=n):(270===e.angle&&(o.focusY+=n-o.height),o.height=n)}for(t=this.Kb.iterator;t.next();)(e=t.value)instanceof Dy&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Kb=new Q,this.isValidLayout=!0},Tg.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.ld){case sy:0===i.sourceEdges.count&&this.Kb.add(i);break;case ay:0===i.destinationEdges.count&&this.Kb.add(i);break;default:w(\"Unhandled path value \"+this.ld.toString())}}0===this.Kb.count&&null!==(t=Ag(this,t))&&this.Kb.add(t)},Tg.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var i=t.children,n=0,r=0;r<i.length;r++)i[r]===e&&n++;if(0<n){n=Array(i.length-n);for(var o=r=0;o<i.length;o++)i[o]!==e&&(n[r++]=i[o]);t.children=n}}},Tg.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function(t,e){switch(t.Ep){default:case ky:return null!==e.parent?e.parent:t.V;case Py:return null===e.parent?t.V:null===e.parent.parent?t.W:e.parent;case Sy:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.W:t.V;case My:var i=!0;if(0===e.childrenCount)i=!1;else for(var n=e.children,r=n.length,o=0;o<r;o++)if(0<n[o].childrenCount){i=!1;break}return i&&null!==e.parent?t.W:null!==e.parent?e.parent:t.V}}(this,t)),null!==t.parent&&t.parent.alignment===my){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;0==n%2?n!==i.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},Tg.prototype.assignTreeVertexValues=function(){},Tg.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case hy:break;case ly:t.children.reverse();break;case uy:t.children.sort(t.comparer);break;case cy:t.children.sort(t.comparer),t.children.reverse();break;default:w(\"Unhandled sorting value \"+t.sorting.toString())}},Tg.prototype.vu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Tg.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,r=!1;null!==i&&(n=i.angle,r=Ig(r=i.alignment)),e=90===e||270===e,n=90===n||270===n,i=0===t.childrenCount;var o=0,s=0,a=0,h=t.commentSpacing;if(null!==t.node)for(var l=t.node.Nu();l.next();){var u=l.value;\"Comment\"===u.category&&u.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.Ta(),u=u.measuredBounds,e&&!i||!r&&!n&&i||r&&n&&i?(o=Math.max(o,u.width),s+=u.height+Math.abs(a)):(o+=u.width+Math.abs(a),s=Math.max(s,u.height)),a=h)}null!==t.comments&&(e&&!i||!r&&!n&&i||r&&n&&i?(o+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),r=Bt.allocAt(0,0,t.bounds.width+o,t.bounds.height+s),t.bounds=r,Bt.free(r))},Tg.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,i=t.parent,n=t.angle,r=0,o=!1;null!==i&&(r=i.angle,o=Ig(o=i.alignment)),n=90===n||270===n,i=90===r||270===r;for(var s=0===t.childrenCount,a=Rg(t),h=0,l=t.comments,u=l.length,c=gt.alloc(),f=0;f<u;f++){var d=l[f],p=d.measuredBounds;if(n&&!s||!o&&!i&&s||o&&i&&s){if(135<r&&!o||i&&a)if(0<=t.commentMargin)for(c.h(t.bounds.x-t.commentMargin-p.width,t.bounds.y+h),d.move(c),d=d.Gd();d.next();){var g=d.value;g.fromSpot=je,g.toSpot=Oe}else for(c.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+h),d.move(c),d=d.Gd();d.next();)(g=d.value).fromSpot=Oe,g.toSpot=je;else if(0<=t.commentMargin)for(c.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+h),d.move(c),d=d.Gd();d.next();)(g=d.value).fromSpot=Oe,g.toSpot=je;else for(c.h(t.bounds.x+t.commentMargin-p.width,t.bounds.y+h),d.move(c),d=d.Gd();d.next();)(g=d.value).fromSpot=je,g.toSpot=Oe;h=0<=t.commentSpacing?h+(p.height+t.commentSpacing):h+(t.commentSpacing-p.height)}else{if(135<r&&!o||!i&&a)if(0<=t.commentMargin)for(c.h(t.bounds.x+h,t.bounds.y-t.commentMargin-p.height),d.move(c),d=d.Gd();d.next();)(g=d.value).fromSpot=Ae,g.toSpot=De;else for(c.h(t.bounds.x+h,t.bounds.y+2*t.focus.y-t.commentMargin),d.move(c),d=d.Gd();d.next();)(g=d.value).fromSpot=De,g.toSpot=Ae;else if(0<=t.commentMargin)for(c.h(t.bounds.x+h,t.bounds.y+2*t.focus.y+t.commentMargin),d.move(c),d=d.Gd();d.next();)(g=d.value).fromSpot=De,g.toSpot=Ae;else for(c.h(t.bounds.x+h,t.bounds.y+t.commentMargin-p.height),d.move(c),d=d.Gd();d.next();)(g=d.value).fromSpot=Ae,g.toSpot=De;h=0<=t.commentSpacing?h+(p.width+t.commentSpacing):h+(t.commentSpacing-p.width)}}if(gt.free(c),e=h-t.commentSpacing-(n?e.height:e.width),this.ld===sy)for(t=t.destinationEdges;t.next();)null===(r=t.value.link)||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(r=t.value.link)||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},Tg.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case by:Eg(this,t);break;case wy:if(t.alignment===my)Eg(this,t);else if(0===t.childrenCount)i=!1,e=0,null!==(n=t.parent)&&(e=n.angle,i=Ig(i=n.alignment)),n=Rg(t),t.U.h(0,0),t.va.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||i)&&!n?t.fa.h(0,0):180===e&&!i||(90===e||270===e)&&n?t.fa.h(t.width-2*t.focus.x,0):t.fa.h(0,t.height-2*t.focus.y),t.fq=null,t.rq=null;else{var r=iy(t);e=90===r||270===r;var o=0,s=t.children,a=s.length;for(i=0;i<a;i++)n=s[i],o=Math.max(o,e?n.va.width:n.va.height);var h=t.alignment,l=h===gy,u=Ig(h),c=Math.max(0,t.breadthLimit);i=ny(t);var f=t.nodeSpacing,d=ry(t),p=t.rowSpacing,g=0;(h===py||l||t.rm||t.sm&&1===t.maxGenerationCount)&&(g=Math.max(0,t.rowIndent)),n=t.width;var y=t.height,m=0,v=0,x=0,b=null,k=null,M=0,S=0,P=0,N=0,C=0,T=0,L=0,O=0;if(u&&!zg(h)&&135<r&&s.reverse(),zg(h))if(1<a)for(var D=0;D<a;D++)0==D%2&&D!==a-1&&(O=Math.max(O,e?s[D].va.width:s[D].va.height));else 1===a&&(O=e?s[0].va.width:s[0].va.height);if(u){switch(h){case yy:O=(v=135>r?_g(t,s,O,m,v):Vg(t,s,O,m,v)).x,m=v.width,v=v.height;break;case vy:for(b=0;b<a;b++)c=(k=s[b]).va,x=0===T?0:p,e?(k.U.h(o-c.width,N+x),m=Math.max(m,c.width),v=Math.max(v,N+x+c.height),N+=x+c.height):(k.U.h(P+x,o-c.height),m=Math.max(m,P+x+c.width),v=Math.max(v,c.height),P+=x+c.width),T++;break;case xy:for(b=0;b<a;b++)o=(k=s[b]).va,c=0===T?0:p,e?(k.U.h(f/2+t.focus.x,N+c),m=Math.max(m,o.width),v=Math.max(v,N+c+o.height),N+=c+o.height):(k.U.h(P+c,f/2+t.focus.y),m=Math.max(m,P+c+o.width),v=Math.max(v,o.height),P+=c+o.width),T++}b=$g(this,2),k=$g(this,2),e?(b[0].h(0,0),b[1].h(0,v),k[0].h(m,0)):(b[0].h(0,0),b[1].h(m,0),k[0].h(0,v)),k[1].h(m,v)}else for(D=0;D<a;D++){var F=s[D],B=F.va;if(e){0<c&&0<T&&P+f+B.width>c&&(P<o&&Kg(t,h,o-P,0,L,D-1),C++,T=0,L=D,x=v,P=0,N=135<r?-v-p:v+p),Wg(this,F,0,N);var I=0;if(0===T)b=F.fq,k=F.rq,M=B.width,S=B.height,(null===b||null===k||r!==iy(F))&&(b=$g(this,2),k=$g(this,2),b[0].h(0,0),b[1].h(0,S),k[0].h(M,0),k[1].h(M,S));else{var z=A();I=(S=Jg(this,t,F,b,k,M,S,z)).x,b=z[0],k=z[1],M=S.width,S=S.height,j(z),P<B.width&&0>I&&(Hg(t,-I,0,L,D-1),Zg(b,-I,0),Zg(k,-I,0),I=0)}F.U.h(I,N),m=Math.max(m,M),v=Math.max(v,x+(0===C?0:p)+B.height),P=M}else 0<c&&0<T&&N+f+B.height>c&&(N<o&&Kg(t,h,0,o-N,L,D-1),C++,T=0,L=D,x=m,N=0,P=135<r?-m-p:m+p),Wg(this,F,P,0),I=0,0===T?(b=F.fq,k=F.rq,M=B.width,S=B.height,(null===b||null===k||r!==iy(F))&&(b=$g(this,2),k=$g(this,2),b[0].h(0,0),b[1].h(M,0),k[0].h(0,S),k[1].h(M,S))):(I=(S=Jg(this,t,F,b,k,M,S,z=A())).x,b=z[0],k=z[1],M=S.width,S=S.height,j(z),N<B.height&&0>I&&(Hg(t,0,-I,L,D-1),Zg(b,0,-I),Zg(k,0,-I),I=0)),F.U.h(P,I),v=Math.max(v,S),m=Math.max(m,x+(0===C?0:p)+B.width),N=S;T++}switch(0<C&&(e?(v+=Math.max(0,i),P<m&&Kg(t,h,m-P,0,L,a-1),0<g&&(l||Hg(t,g,0,0,a-1),m+=g)):(m+=Math.max(0,i),N<v&&Kg(t,h,0,v-N,L,a-1),0<g&&(l||Hg(t,0,g,0,a-1),v+=g))),g=l=0,h){case fy:e?l+=m/2-t.focus.x-d/2:g+=v/2-t.focus.y-d/2;break;case dy:0<C?e?l+=m/2-t.focus.x-d/2:g+=v/2-t.focus.y-d/2:e?l+=(O=s[0].U.x+s[0].fa.x)+(s[a-1].U.x+s[a-1].fa.x+2*s[a-1].focus.x-O)/2-t.focus.x-d/2:g+=(O=s[0].U.y+s[0].fa.y)+(s[a-1].U.y+s[a-1].fa.y+2*s[a-1].focus.y-O)/2-t.focus.y-d/2;break;case py:e?(l-=d,m+=d):(g-=d,v+=d);break;case gy:e?(l+=m-t.width+d,m+=d):(g+=v-t.height+d,v+=d);break;case yy:e?l+=1<a?O+f/2-t.focus.x:s[0].focus.x-t.focus.x+s[0].fa.x:g+=1<a?O+f/2-t.focus.y:s[0].focus.y-t.focus.y+s[0].fa.y;break;case vy:e?l+=m+f/2-t.focus.x:g+=v+f/2-t.focus.y;break;case xy:break;default:w(\"Unhandled alignment value \"+h.toString())}for(d=0;d<a;d++)O=s[d],e?O.U.h(O.U.x+O.fa.x-l,O.U.y+(135<r?(u?-v:-O.va.height)+O.fa.y-i:y+i+O.fa.y)):O.U.h(O.U.x+(135<r?(u?-m:-O.va.width)+O.fa.x-i:n+i+O.fa.x),O.U.y+O.fa.y-g);if(a=s=0,u?e?(m=Xg(t,m,l),0>l&&(l=0),135<r&&(g+=v+i),v+=y+i,h===xy&&(s+=f/2+t.focus.x),a+=y+i):(135<r&&(l+=m+i),m+=n+i,v=Ug(t,v,g),0>g&&(g=0),h===xy&&(a+=f/2+t.focus.y),s+=n+i):e?(null===t.comments?n>m&&(s=(m=qg(h,n-m,0)).x,a=m.y,m=n,l=0):m=Xg(t,m,l),0>l&&(s-=l,l=0),135<r&&(g+=v+i),v=Math.max(Math.max(v,y),v+y+i),a+=y+i):(135<r&&(l+=m+i),m=Math.max(Math.max(m,n),m+n+i),null===t.comments?y>v&&(s=(v=qg(h,0,y-v)).x,a=v.y,v=y,g=0):v=Ug(t,v,g),0>g&&(a-=g,g=0),s+=n+i),0<C)r=$g(this,4),C=$g(this,4),e?(r[2].h(0,y+i),r[3].h(r[2].x,v),C[2].h(m,r[2].y),C[3].h(C[2].x,r[3].y)):(r[2].h(n+i,0),r[3].h(m,r[2].y),C[2].h(r[2].x,v),C[3].h(r[3].x,C[2].y));else{for(r=$g(this,b.length+2),C=$g(this,k.length+2),h=0;h<b.length;h++)u=b[h],r[h+2].h(u.x+s,u.y+a);for(h=0;h<k.length;h++)u=k[h],C[h+2].h(u.x+s,u.y+a)}e?(r[0].h(l,0),r[1].h(r[0].x,y),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),C[0].h(l+n,0),C[1].h(C[0].x,y),C[2].y<C[1].y&&(C[2].x<C[0].x?C[2].assign(C[1]):C[1].assign(C[2])),C[3].y<C[2].y&&(C[3].x<C[0].x?C[3].assign(C[2]):C[2].assign(C[3])),r[2].y-=i/2,C[2].y-=i/2):(r[0].h(0,g),r[1].h(n,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),C[0].h(0,g+y),C[1].h(n,C[0].y),C[2].x<C[1].x&&(C[2].y<C[0].y?C[2].assign(C[1]):C[1].assign(C[2])),C[3].x<C[2].x&&(C[3].y<C[0].y?C[3].assign(C[2]):C[2].assign(C[3])),r[2].x-=i/2,C[2].x-=i/2),Qg(this,b),Qg(this,k),t.fq=r,t.rq=C,t.fa.h(l,g),t.va.h(m,v)}break;default:w(\"Unhandled compaction value \"+t.compaction.toString())}}},Tg.prototype.arrangeTrees=function(){if(this.Hb===Ty)for(var t=this.Kb.iterator;t.next();){var e=t.value;if(e instanceof Dy){var i=e.node;if(null!==i){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),ty(this,e,i,n)}}}else{for(t=[],e=this.Kb.iterator;e.next();)(i=e.value)instanceof Dy&&t.push(i);switch(this.sorting){case hy:break;case ly:t.reverse();break;case uy:t.sort(this.comparer);break;case cy:t.sort(this.comparer),t.reverse();break;default:w(\"Unhandled sorting value \"+this.sorting.toString())}for(e=(i=this.arrangementOrigin).x,i=i.y,n=0;n<t.length;n++){var r=t[n];switch(ty(this,r,e+r.fa.x,i+r.fa.y),this.Hb){case Ny:i+=r.va.height+this.Qd.height;break;case Cy:e+=r.va.width+this.Qd.width;break;default:w(\"Unhandled arrangement value \"+this.Hb.toString())}}}},Tg.prototype.commitLayout=function(){this.Iv(),this.commitNodes(),this.Bu(),this.isRouting&&this.commitLinks()},Tg.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Tg.prototype.Bu=function(){if(this.layerStyle===jy){for(var t=this.Aw,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var r=n.value;null===i?i=r.bounds.copy():i.Qc(r.bounds);var o=e[r.level];o=void 0===o?ny(r):Math.max(o,ny(r)),e[r.level]=o}for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);if(90===this.angle||270===this.angle?(i.Jc(this.nodeSpacing/2,this.layerSpacing),n=new gt(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Jc(this.layerSpacing,this.nodeSpacing/2),n=new gt(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],i=90===this.angle||270===this.angle?i.width:i.height,o=0,180===this.angle||270===this.angle)for(var s=0;s<t.length;s++)o+=t[s]+e[s];for(s=0;s<t.length;s++){var a=t[s]+e[s];270===this.angle?(o-=a,r.push(new Bt(0,o,i,a))):90===this.angle?(r.push(new Bt(0,o,i,a)),o+=a):180===this.angle?(o-=a,r.push(new Bt(o,0,a,i))):(r.push(new Bt(o,0,a,i)),o+=a)}this.commitLayers(r,n)}},Tg.prototype.commitLayers=function(){},Tg.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Tg.prototype.Iv=function(){for(var t=this.Kb.iterator;t.next();){var e=t.value;e instanceof Dy&&ey(this,e)}},Tg.prototype.setPortSpots=function(t){var e=t.alignment;if(Ig(e)){var i=this.ld===sy,n=iy(t);switch(n){case 0:var r=Oe;break;case 90:r=De;break;case 180:r=je;break;default:r=Ae}var o=t.children,s=o.length;switch(e){case yy:case my:for(e=0;e<s;e++){var a=o[e];if(null!==(a=(i?a.sourceEdges:a.destinationEdges).first())&&null!==(a=a.link)){var h=90===n||270===n?je:Ae;if(1===s||e===s-1&&1==s%2)switch(n){case 0:h=je;break;case 90:h=Ae;break;case 180:h=Oe;break;default:h=De}else 0==e%2&&(h=90===n||270===n?Oe:De);i?(t.setsPortSpot&&(a.fromSpot=r),t.setsChildPortSpot&&(a.toSpot=h)):(t.setsPortSpot&&(a.fromSpot=h),t.setsChildPortSpot&&(a.toSpot=r))}}break;case vy:for(n=90===n||270===n?Oe:De,o=i?t.destinationEdges:t.sourceEdges;o.next();)null!==(s=o.value.link)&&(i?(t.setsPortSpot&&(s.fromSpot=r),t.setsChildPortSpot&&(s.toSpot=n)):(t.setsPortSpot&&(s.fromSpot=n),t.setsChildPortSpot&&(s.toSpot=r)));break;case xy:for(n=90===n||270===n?je:Ae,o=i?t.destinationEdges:t.sourceEdges;o.next();)null!==(s=o.value.link)&&(i?(t.setsPortSpot&&(s.fromSpot=r),t.setsChildPortSpot&&(s.toSpot=n)):(t.setsPortSpot&&(s.fromSpot=n),t.setsChildPortSpot&&(s.toSpot=r)))}}else if(i=iy(t),this.ld===sy){for(r=t.destinationEdges;r.next();)if(null!==(n=r.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(i){case 0:n.fromSpot=Oe;break;case 90:n.fromSpot=De;break;case 180:n.fromSpot=je;break;default:n.fromSpot=Ae}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(i){case 0:n.toSpot=je;break;case 90:n.toSpot=Ae;break;case 180:n.toSpot=Oe;break;default:n.toSpot=De}else n.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(null!==(n=r.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(i){case 0:n.toSpot=Oe;break;case 90:n.toSpot=De;break;case 180:n.toSpot=je;break;default:n.toSpot=Ae}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(i){case 0:n.fromSpot=je;break;case 90:n.fromSpot=Ae;break;case 180:n.fromSpot=Oe;break;default:n.fromSpot=De}else n.fromSpot=t.childPortSpot}},f.Object.defineProperties(Tg.prototype,{roots:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t,this.B())}},path:{get:function(){return this.Mo},set:function(t){this.Mo!==t&&(this.Mo=t,this.B())}},treeStyle:{get:function(){return this.Ep},set:function(t){this.Hb===t||t!==ky&&t!==Sy&&t!==My&&t!==Py||(this.Ep=t,this.B())}},layerStyle:{get:function(){return this.tr},set:function(t){this.Hb===t||t!==Ly&&t!==Ay&&t!==jy||(this.tr=t,this.B())}},comments:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t,this.B())}},arrangement:{get:function(){return this.Hb},set:function(t){this.Hb===t||t!==Ny&&t!==Cy&&t!==Ty||(this.Hb=t,this.B())}},arrangementSpacing:{get:function(){return this.Qd},set:function(t){this.Qd.A(t)||(this.Qd.assign(t),this.B())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.B())}},alternateDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.B())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==hy&&t!==ly&&t!==uy&&!cy||(this.V.sorting=t,this.B())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.B())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(0===t||90===t||180===t||270===t?(this.V.angle=t,this.B()):w(\"TreeLayout.angle must be 0, 90, 180, or 270\"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.B())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.B())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.B())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.B())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.B())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.B())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==by&&t!==wy||(this.V.compaction=t,this.B())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.B())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.B())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.B())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.B())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.B())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.B())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.A(t)||(this.V.portSpot=t,this.B())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.B())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.A(t)||(this.V.childPortSpot=t,this.B())}},alternateSorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==hy&&t!==ly&&t!==uy&&!cy||(this.W.sorting=t,this.B())}},alternateComparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.B())}},alternateAngle:{get:function(){return this.W.angle},set:function(t){this.W.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.W.angle=t,this.B())}},alternateAlignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.B())}},alternateNodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.B())}},alternateNodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.B())}},alternateNodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.B())}},alternateLayerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.B())}},alternateLayerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.B())}},alternateCompaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==by&&t!==wy||(this.W.compaction=t,this.B())}},alternateBreadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.B())}},alternateRowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.B())}},alternateRowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.B())}},alternateCommentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.B())}},alternateCommentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.B())}},alternateSetsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.B())}},alternatePortSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.A(t)||(this.W.portSpot=t,this.B())}},alternateSetsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.B())}},alternateChildPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.A(t)||(this.W.childPortSpot=t,this.B())}}});var oy=new V(Tg,\"PathDefault\",-1),sy=new V(Tg,\"PathDestination\",0),ay=new V(Tg,\"PathSource\",1),hy=new V(Tg,\"SortingForwards\",10),ly=new V(Tg,\"SortingReverse\",11),uy=new V(Tg,\"SortingAscending\",12),cy=new V(Tg,\"SortingDescending\",13),fy=new V(Tg,\"AlignmentCenterSubtrees\",20),dy=new V(Tg,\"AlignmentCenterChildren\",21),py=new V(Tg,\"AlignmentStart\",22),gy=new V(Tg,\"AlignmentEnd\",23),yy=new V(Tg,\"AlignmentBus\",24),my=new V(Tg,\"AlignmentBusBranching\",25),vy=new V(Tg,\"AlignmentTopLeftBus\",26),xy=new V(Tg,\"AlignmentBottomRightBus\",27),by=new V(Tg,\"CompactionNone\",30),wy=new V(Tg,\"CompactionBlock\",31),ky=new V(Tg,\"StyleLayered\",40),My=new V(Tg,\"StyleLastParents\",41),Sy=new V(Tg,\"StyleAlternating\",42),Py=new V(Tg,\"StyleRootOnly\",43),Ny=new V(Tg,\"ArrangementVertical\",50),Cy=new V(Tg,\"ArrangementHorizontal\",51),Ty=new V(Tg,\"ArrangementFixedRoots\",52),Ly=new V(Tg,\"LayerIndividual\",60),Ay=new V(Tg,\"LayerSiblings\",61),jy=new V(Tg,\"LayerUniform\",62);function Oy(t){vf.call(this,t)}function Dy(t){Mf.call(this,t),this.wa=!1,this.Gb=null,this.D=[],this.Qb=this.Ma=this.L=this.Ba=0,this.jd=null,this.U=new gt(0,0),this.va=new jt(0,0),this.fa=new gt(0,0),this.sm=this.rm=this.MA=!1,this.rq=this.fq=null,this.$c=hy,this.Sc=Sf,this.zb=0,this.yb=dy,this.Cr=this.Br=0,this.Dr=20,this.be=50,this.sr=0,this.Lq=wy,this.Eq=0,this.Mr=25,this.Kq=this.Lr=10,this.Jq=20,this.Qr=!0,this.Ir=Pe,this.Pr=!0,this.Hq=Pe}function Fy(t){Pf.call(this,t),this.Xt=new gt(0,0)}Tg.className=\"TreeLayout\",Tg.PathDefault=oy,Tg.PathDestination=sy,Tg.PathSource=ay,Tg.SortingForwards=hy,Tg.SortingReverse=ly,Tg.SortingAscending=uy,Tg.SortingDescending=cy,Tg.AlignmentCenterSubtrees=fy,Tg.AlignmentCenterChildren=dy,Tg.AlignmentStart=py,Tg.AlignmentEnd=gy,Tg.AlignmentBus=yy,Tg.AlignmentBusBranching=my,Tg.AlignmentTopLeftBus=vy,Tg.AlignmentBottomRightBus=xy,Tg.CompactionNone=by,Tg.CompactionBlock=wy,Tg.StyleLayered=ky,Tg.StyleLastParents=My,Tg.StyleAlternating=Sy,Tg.StyleRootOnly=Py,Tg.ArrangementVertical=Ny,Tg.ArrangementHorizontal=Cy,Tg.ArrangementFixedRoots=Ty,Tg.LayerIndividual=Ly,Tg.LayerSiblings=Ay,Tg.LayerUniform=jy,c(Oy,vf),Oy.prototype.createVertex=function(){return new Dy(this)},Oy.prototype.createEdge=function(){return new Fy(this)},Oy.className=\"TreeNetwork\",c(Dy,Mf),Dy.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.$c=t.sorting,this.Sc=t.comparer,this.zb=t.angle,this.yb=t.alignment,this.Br=t.nodeIndent,this.Cr=t.nodeIndentPastParent,this.Dr=t.nodeSpacing,this.be=t.layerSpacing,this.sr=t.layerSpacingParentOverlap,this.Lq=t.compaction,this.Eq=t.breadthLimit,this.Mr=t.rowSpacing,this.Lr=t.rowIndent,this.Kq=t.commentSpacing,this.Jq=t.commentMargin,this.Qr=t.setsPortSpot,this.Ir=t.portSpot,this.Pr=t.setsChildPortSpot,this.Hq=t.childPortSpot)},f.Object.defineProperties(Dy.prototype,{initialized:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}},parent:{get:function(){return this.Gb},set:function(t){this.Gb!==t&&(this.Gb=t)}},children:{get:function(){return this.D},set:function(t){if(this.D!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.D=t}}},level:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},descendantCount:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}},maxChildrenCount:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},maxGenerationCount:{get:function(){return this.Qb},set:function(t){this.Qb!==t&&(this.Qb=t)}},comments:{get:function(){return this.jd},set:function(t){if(this.jd!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.jd=t}}},sorting:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t)}},angle:{get:function(){return this.zb},set:function(t){this.zb!==t&&(this.zb=t)}},alignment:{get:function(){return this.yb},set:function(t){this.yb!==t&&(this.yb=t)}},nodeIndent:{get:function(){return this.Br},set:function(t){this.Br!==t&&(this.Br=t)}},nodeIndentPastParent:{get:function(){return this.Cr},set:function(t){this.Cr!==t&&(this.Cr=t)}},nodeSpacing:{get:function(){return this.Dr},set:function(t){this.Dr!==t&&(this.Dr=t)}},layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&(this.be=t)}},layerSpacingParentOverlap:{get:function(){return this.sr},set:function(t){this.sr!==t&&(this.sr=t)}},compaction:{get:function(){return this.Lq},set:function(t){this.Lq!==t&&(this.Lq=t)}},breadthLimit:{get:function(){return this.Eq},set:function(t){this.Eq!==t&&(this.Eq=t)}},rowSpacing:{get:function(){return this.Mr},set:function(t){this.Mr!==t&&(this.Mr=t)}},rowIndent:{get:function(){return this.Lr},set:function(t){this.Lr!==t&&(this.Lr=t)}},commentSpacing:{get:function(){return this.Kq},set:function(t){this.Kq!==t&&(this.Kq=t)}},commentMargin:{get:function(){return this.Jq},set:function(t){this.Jq!==t&&(this.Jq=t)}},setsPortSpot:{get:function(){return this.Qr},set:function(t){this.Qr!==t&&(this.Qr=t)}},portSpot:{get:function(){return this.Ir},set:function(t){this.Ir.A(t)||(this.Ir=t)}},setsChildPortSpot:{get:function(){return this.Pr},set:function(t){this.Pr!==t&&(this.Pr=t)}},childPortSpot:{get:function(){return this.Hq},set:function(t){this.Hq.A(t)||(this.Hq=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.U},set:function(t){this.U.set(t)}},subtreeSize:{get:function(){return this.va},set:function(t){this.va.set(t)}},subtreeOffset:{get:function(){return this.fa},set:function(t){this.fa.set(t)}}}),Dy.className=\"TreeVertex\",c(Fy,Pf),Fy.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.ld){case sy:i=this.fromVertex,n=this.toVertex;break;case ay:i=this.toVertex,n=this.fromVertex;break;default:w(\"Unhandled path value \"+e.ld.toString())}if(null!==i&&null!==n)if(0!==(e=this.Xt).x||0!==e.y||i.MA){n=i.bounds;var r=iy(i),o=ny(i),s=i.rowSpacing;t.ug();var a,h=t.curve===bc,l=t.isOrthogonal;if(t.Lh(),l||h){for(a=2;4<t.pointsCount;)t.Av(2);var u=t.i(1),c=t.i(2)}else{for(a=1;3<t.pointsCount;)t.Av(1);u=t.i(0),c=t.i(t.pointsCount-1)}var f=t.i(t.pointsCount-1);0===r?(i.alignment===gy?(r=n.bottom+e.y,0===e.y&&u.y>f.y+i.rowIndent&&(r=Math.min(r,Math.max(u.y,r-ry(i))))):i.alignment===py?(r=n.top+e.y,0===e.y&&u.y<f.y-i.rowIndent&&(r=Math.max(r,Math.min(u.y,r+ry(i))))):r=i.rm||i.sm&&1===i.maxGenerationCount?n.top-i.fa.y+e.y:n.y+n.height/2+e.y,h?(t.l(a,u.x,r),a++,t.l(a,n.right+o,r),a++,t.l(a,n.right+o+(e.x-s)/3,r),a++,t.l(a,n.right+o+2*(e.x-s)/3,r),a++,t.l(a,n.right+o+(e.x-s),r),a++,t.l(a,c.x,r)):(l&&(t.l(a,n.right+o/2,u.y),a++),t.l(a,n.right+o/2,r),a++,t.l(a,n.right+o+e.x-(l?s/2:s),r),a++,l&&t.l(a,t.i(a-1).x,c.y))):90===r?(i.alignment===gy?(r=n.right+e.x,0===e.x&&u.x>f.x+i.rowIndent&&(r=Math.min(r,Math.max(u.x,r-ry(i))))):i.alignment===py?(r=n.left+e.x,0===e.x&&u.x<f.x-i.rowIndent&&(r=Math.max(r,Math.min(u.x,r+ry(i))))):r=i.rm||i.sm&&1===i.maxGenerationCount?n.left-i.fa.x+e.x:n.x+n.width/2+e.x,h?(t.l(a,r,u.y),a++,t.l(a,r,n.bottom+o),a++,t.l(a,r,n.bottom+o+(e.y-s)/3),a++,t.l(a,r,n.bottom+o+2*(e.y-s)/3),a++,t.l(a,r,n.bottom+o+(e.y-s)),a++,t.l(a,r,c.y)):(l&&(t.l(a,u.x,n.bottom+o/2),a++),t.l(a,r,n.bottom+o/2),a++,t.l(a,r,n.bottom+o+e.y-(l?s/2:s)),a++,l&&t.l(a,c.x,t.i(a-1).y))):180===r?(i.alignment===gy?(r=n.bottom+e.y,0===e.y&&u.y>f.y+i.rowIndent&&(r=Math.min(r,Math.max(u.y,r-ry(i))))):i.alignment===py?(r=n.top+e.y,0===e.y&&u.y<f.y-i.rowIndent&&(r=Math.max(r,Math.min(u.y,r+ry(i))))):r=i.rm||i.sm&&1===i.maxGenerationCount?n.top-i.fa.y+e.y:n.y+n.height/2+e.y,h?(t.l(a,u.x,r),a++,t.l(a,n.left-o,r),a++,t.l(a,n.left-o+(e.x+s)/3,r),a++,t.l(a,n.left-o+2*(e.x+s)/3,r),a++,t.l(a,n.left-o+(e.x+s),r),a++,t.l(a,c.x,r)):(l&&(t.l(a,n.left-o/2,u.y),a++),t.l(a,n.left-o/2,r),a++,t.l(a,n.left-o+e.x+(l?s/2:s),r),a++,l&&t.l(a,t.i(a-1).x,c.y))):270===r?(i.alignment===gy?(r=n.right+e.x,0===e.x&&u.x>f.x+i.rowIndent&&(r=Math.min(r,Math.max(u.x,r-ry(i))))):i.alignment===py?(r=n.left+e.x,0===e.x&&u.x<f.x-i.rowIndent&&(r=Math.max(r,Math.min(u.x,r+ry(i))))):r=i.rm||i.sm&&1===i.maxGenerationCount?n.left-i.fa.x+e.x:n.x+n.width/2+e.x,h?(t.l(a,r,u.y),a++,t.l(a,r,n.top-o),a++,t.l(a,r,n.top-o+(e.y+s)/3),a++,t.l(a,r,n.top-o+2*(e.y+s)/3),a++,t.l(a,r,n.top-o+(e.y+s)),a++,t.l(a,r,c.y)):(l&&(t.l(a,u.x,n.top-o/2),a++),t.l(a,r,n.top-o/2),a++,t.l(a,r,n.top-o+e.y+(l?s/2:s)),a++,l&&t.l(a,c.x,t.i(a-1).y))):w(\"Invalid angle \"+r),t.vf()}else t=this.link,(o=iy(i))!==iy(n)&&(s=ny(i),h=i.bounds,i=n.bounds,0===o&&i.left-h.right<s+1||90===o&&i.top-h.bottom<s+1||180===o&&h.left-i.right<s+1||270===o&&h.top-i.bottom<s+1||(t.ug(),i=t.curve===bc,e=t.isOrthogonal,n=Ig(this.fromVertex.alignment),t.Lh(),0===o?(o=h.right+s/2,i?4===t.pointsCount&&(i=t.i(3).y,t.M(1,o-20,t.i(1).y),t.l(2,o-20,i),t.l(3,o,i),t.l(4,o+20,i),t.M(5,t.i(5).x,i)):e?n?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,o,t.i(2).y),t.M(3,o,t.i(3).y)):4===t.pointsCount?t.l(2,o,t.i(2).y):3===t.pointsCount?t.M(1,o,t.i(2).y):2===t.pointsCount&&t.l(1,o,t.i(1).y)):90===o?(o=h.bottom+s/2,i?4===t.pointsCount&&(i=t.i(3).x,t.M(1,t.i(1).x,o-20),t.l(2,i,o-20),t.l(3,i,o),t.l(4,i,o+20),t.M(5,i,t.i(5).y)):e?n?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,o),t.M(3,t.i(3).x,o)):4===t.pointsCount?t.l(2,t.i(2).x,o):3===t.pointsCount?t.M(1,t.i(2).x,o):2===t.pointsCount&&t.l(1,t.i(1).x,o)):180===o?(o=h.left-s/2,i?4===t.pointsCount&&(i=t.i(3).y,t.M(1,o+20,t.i(1).y),t.l(2,o+20,i),t.l(3,o,i),t.l(4,o-20,i),t.M(5,t.i(5).x,i)):e?n?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,o,t.i(2).y),t.M(3,o,t.i(3).y)):4===t.pointsCount?t.l(2,o,t.i(2).y):3===t.pointsCount?t.M(1,o,t.i(2).y):2===t.pointsCount&&t.l(1,o,t.i(1).y)):270===o&&(o=h.top-s/2,i?4===t.pointsCount&&(i=t.i(3).x,t.M(1,t.i(1).x,o+20),t.l(2,i,o+20),t.l(3,i,o),t.l(4,i,o-20),t.M(5,i,t.i(5).y)):e?n?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,o),t.M(3,t.i(3).x,o)):4===t.pointsCount?t.l(2,t.i(2).x,o):3===t.pointsCount?t.M(1,t.i(2).x,o):2===t.pointsCount&&t.l(1,t.i(1).x,o)),t.vf()))}},f.Object.defineProperties(Fy.prototype,{fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},relativePoint:{get:function(){return this.Xt},set:function(t){this.Xt.set(t)}}}),Fy.className=\"TreeEdge\",bi.prototype.initializeStandardTools=function(){this.Za(\"Action\",new yn,this.mouseDownTools),this.Za(\"Relinking\",new on,this.mouseDownTools),this.Za(\"LinkReshaping\",new an,this.mouseDownTools),this.Za(\"Rotating\",new pn,this.mouseDownTools),this.Za(\"Resizing\",new dn,this.mouseDownTools),this.Za(\"Linking\",new tn,this.mouseMoveTools),this.Za(\"Dragging\",new Ti,this.mouseMoveTools),this.Za(\"DragSelecting\",new vn,this.mouseMoveTools),this.Za(\"Panning\",new xn,this.mouseMoveTools),this.Za(\"ContextMenu\",new kn,this.mouseUpTools),this.Za(\"TextEditing\",new An,this.mouseUpTools),this.Za(\"ClickCreating\",new mn,this.mouseUpTools),this.Za(\"ClickSelecting\",new gn,this.mouseUpTools)},Eh(\"Horizontal\",new $a),Eh(\"Spot\",new th),Eh(\"Table\",new nh),Eh(\"Viewbox\",new sh),Eh(\"TableRow\",new rh),Eh(\"TableColumn\",new oh),Eh(\"Graduated\",new ch),Eh(\"Grid\",new ah),zo.add(\"GraphLinksModel\",Kf),zo.add(\"TreeModel\",Jf),lf(bp,null),lf(Op,null);var By=y.go,Iy={get licenseKey(){return Pr.licenseKey},set licenseKey(t){Pr.licenseKey=t},get version(){return Pr.version},Group:_u,EnumValue:V,List:J,Set:Q,Map:pt,Point:gt,Size:jt,Rect:Bt,Margin:Wt,Spot:ze,Geometry:Ue,PathFigure:Qe,PathSegment:ti,InputEvent:li,DiagramEvent:ui,ChangedEvent:ci,Model:Qf,GraphLinksModel:Ad,TreeModel:Vd,Binding:Pd,Transaction:yi,UndoManager:mi,CommandHandler:As,Tool:xi,DraggingTool:Ti,DraggingInfo:us,DraggingOptions:Ms,LinkingBaseTool:Wi,LinkingTool:tn,RelinkingTool:on,LinkReshapingTool:an,ResizingTool:dn,RotatingTool:pn,ClickSelectingTool:gn,ActionTool:yn,ClickCreatingTool:mn,HTMLInfo:bn,ContextMenuTool:kn,DragSelectingTool:vn,PanningTool:xn,TextEditingTool:An,ToolManager:bi,Animation:ar,AnimationManager:qn,AnimationTrigger:yr,Layer:kr,Diagram:Pr,Palette:Ss,Overview:Ns,Brush:wa,GraphObject:Ds,Panel:fh,RowColumnDefinition:Gh,Shape:Hh,TextBlock:rl,Picture:Dl,Part:Jl,Adornment:bu,Node:wu,Link:qu,Placeholder:Uu,Layout:rf,LayoutNetwork:vf,LayoutVertex:Mf,LayoutEdge:Pf,GridLayout:Nf,PanelLayout:Za,CircularLayout:Yd,CircularNetwork:yp,CircularVertex:mp,CircularEdge:xp,ForceDirectedLayout:bp,ForceDirectedNetwork:Tp,ForceDirectedVertex:Lp,ForceDirectedEdge:Ap,LayeredDigraphLayout:Op,LayeredDigraphNetwork:Pg,LayeredDigraphVertex:Ng,LayeredDigraphEdge:Cg,TreeLayout:Tg,TreeNetwork:Oy,TreeVertex:Dy,TreeEdge:Fy};\"object\"==typeof By&&By.version&&w(\"WARNING: a `go` object on the root object is already defined.  \"+(\"Debug\"in By?\"debug \":\"\")+\"version: \"+By.version+\", replaced with version: \"+Iy.version),Pr.prototype.go=Iy,y.go=Iy,(void 0===y||void 0===y.module||\"object\"!=typeof y.module.exports)&&y.define&&\"function\"==typeof y.define&&y.define.amd&&y.define(Iy),\"object\"==typeof t.exports&&(t.exports=void 0!==i.g?i.g.go:self.go)}(),void 0!==i.g?i.g.go:self.go;const n=void 0!==i.g?i.g.go:self.go,r=(n.Group,n.EnumValue,n.List,n.Set,n.Map),o=(n.Point,n.Size,n.Rect,n.Margin),s=n.Spot,a=n.Geometry,h=n.PathFigure,l=n.PathSegment,u=(n.InputEvent,n.DiagramEvent,n.ChangedEvent,n.Model,n.GraphLinksModel),c=(n.TreeModel,n.Binding),f=(n.Transaction,n.UndoManager,n.CommandHandler,n.Tool,n.DraggingTool,n.DraggingInfo,n.LinkingBaseTool,n.LinkingTool,n.RelinkingTool,n.LinkReshapingTool,n.ResizingTool,n.RotatingTool,n.ClickSelectingTool,n.ActionTool,n.ClickCreatingTool,n.HTMLInfo,n.ContextMenuTool,n.DragSelectingTool,n.PanningTool,n.TextEditingTool,n.ToolManager,n.Animation,n.AnimationManager,n.AnimationTrigger,n.Layer,n.Diagram),d=(n.Palette,n.Overview,n.Brush,n.GraphObject),p=n.Panel,g=(n.RowColumnDefinition,n.Shape),y=n.TextBlock,m=(n.TextBlockMetrics,n.Picture,n.Part,n.Adornment),v=n.Node,x=n.Link,b=n.Placeholder,w=(n.Layout,n.LayoutNetwork,n.LayoutVertex,n.LayoutEdge,n.GridLayout,n.PanelLayout,n.CircularLayout,n.CircularNetwork,n.CircularVertex,n.CircularEdge,n.ForceDirectedLayout,n.ForceDirectedNetwork,n.ForceDirectedVertex,n.ForceDirectedEdge,n.LayeredDigraphLayout);n.LayeredDigraphNetwork,n.LayeredDigraphVertex,n.LayeredDigraphEdge,n.TreeLayout,n.TreeNetwork,n.TreeVertex,n.TreeEdge,n.version},6486:function(t,e,i){t=i.nmd(t);var n=i(6544);(function(){var r,o=\"Expected a function\",s=\"__lodash_hash_undefined__\",a=\"__lodash_placeholder__\",h=32,l=128,u=1/0,c=9007199254740991,f=NaN,d=4294967295,p=[[\"ary\",l],[\"bind\",1],[\"bindKey\",2],[\"curry\",8],[\"curryRight\",16],[\"flip\",512],[\"partial\",h],[\"partialRight\",64],[\"rearg\",256]],g=\"[object Arguments]\",y=\"[object Array]\",m=\"[object Boolean]\",v=\"[object Date]\",x=\"[object Error]\",b=\"[object Function]\",w=\"[object GeneratorFunction]\",k=\"[object Map]\",M=\"[object Number]\",S=\"[object Object]\",P=\"[object Promise]\",N=\"[object RegExp]\",C=\"[object Set]\",T=\"[object String]\",L=\"[object Symbol]\",A=\"[object WeakMap]\",j=\"[object ArrayBuffer]\",O=\"[object DataView]\",D=\"[object Float32Array]\",F=\"[object Float64Array]\",B=\"[object Int8Array]\",I=\"[object Int16Array]\",z=\"[object Int32Array]\",R=\"[object Uint8Array]\",E=\"[object Uint8ClampedArray]\",_=\"[object Uint16Array]\",V=\"[object Uint32Array]\",Y=/\\b__p \\+= '';/g,G=/\\b(__p \\+=) '' \\+/g,X=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>\"']/g,K=RegExp(U.source),H=RegExp(q.source),W=/<%-([\\s\\S]+?)%>/g,Z=/<%([\\s\\S]+?)%>/g,J=/<%=([\\s\\S]+?)%>/g,$=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,Q=/^\\w*$/,tt=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,et=/[\\\\^$.*+?()[\\]{}|]/g,it=RegExp(et.source),nt=/^\\s+/,rt=/\\s/,ot=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,st=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,at=/,? & /,ht=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,lt=/[()=,{}\\[\\]\\/\\s]/,ut=/\\\\(\\\\)?/g,ct=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,ft=/\\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\\[object .+?Constructor\\]$/,yt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\\d*)$/,vt=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,xt=/($^)/,bt=/['\\n\\r\\u2028\\u2029\\\\]/g,wt=\"\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\",kt=\"a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff\",Mt=\"A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde\",St=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\\\\u2000-\\\\u206f \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",Pt=\"[\"+St+\"]\",Nt=\"[\"+wt+\"]\",Ct=\"\\\\d+\",Tt=\"[\"+kt+\"]\",Lt=\"[^\\\\ud800-\\\\udfff\"+St+Ct+\"\\\\u2700-\\\\u27bf\"+kt+Mt+\"]\",At=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",jt=\"[^\\\\ud800-\\\\udfff]\",Ot=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",Dt=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",Ft=\"[\"+Mt+\"]\",Bt=\"(?:\"+Tt+\"|\"+Lt+\")\",It=\"(?:\"+Ft+\"|\"+Lt+\")\",zt=\"(?:['?](?:d|ll|m|re|s|t|ve))?\",Rt=\"(?:['?](?:D|LL|M|RE|S|T|VE))?\",Et=\"(?:\"+Nt+\"|\"+At+\")?\",_t=\"[\\\\ufe0e\\\\ufe0f]?\",Vt=_t+Et+\"(?:\\\\u200d(?:\"+[jt,Ot,Dt].join(\"|\")+\")\"+_t+Et+\")*\",Yt=\"(?:\"+[\"[\\\\u2700-\\\\u27bf]\",Ot,Dt].join(\"|\")+\")\"+Vt,Gt=\"(?:\"+[jt+Nt+\"?\",Nt,Ot,Dt,\"[\\\\ud800-\\\\udfff]\"].join(\"|\")+\")\",Xt=RegExp(\"['?]\",\"g\"),Ut=RegExp(Nt,\"g\"),qt=RegExp(At+\"(?=\"+At+\")|\"+Gt+Vt,\"g\"),Kt=RegExp([Ft+\"?\"+Tt+\"+\"+zt+\"(?=\"+[Pt,Ft,\"$\"].join(\"|\")+\")\",It+\"+\"+Rt+\"(?=\"+[Pt,Ft+Bt,\"$\"].join(\"|\")+\")\",Ft+\"?\"+Bt+\"+\"+zt,Ft+\"+\"+Rt,\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",Ct,Yt].join(\"|\"),\"g\"),Ht=RegExp(\"[\\\\u200d\\\\ud800-\\\\udfff\"+wt+\"\\\\ufe0e\\\\ufe0f]\"),Wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zt=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],Jt=-1,$t={};$t[D]=$t[F]=$t[B]=$t[I]=$t[z]=$t[R]=$t[E]=$t[_]=$t[V]=!0,$t[g]=$t[y]=$t[j]=$t[m]=$t[O]=$t[v]=$t[x]=$t[b]=$t[k]=$t[M]=$t[S]=$t[N]=$t[C]=$t[T]=$t[A]=!1;var Qt={};Qt[g]=Qt[y]=Qt[j]=Qt[O]=Qt[m]=Qt[v]=Qt[D]=Qt[F]=Qt[B]=Qt[I]=Qt[z]=Qt[k]=Qt[M]=Qt[S]=Qt[N]=Qt[C]=Qt[T]=Qt[L]=Qt[R]=Qt[E]=Qt[_]=Qt[V]=!0,Qt[x]=Qt[b]=Qt[A]=!1;var te={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},ee=parseFloat,ie=parseInt,ne=\"object\"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,re=\"object\"==typeof self&&self&&self.Object===Object&&self,oe=ne||re||Function(\"return this\")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,he=ae&&ae.exports===se,le=he&&ne.process,ue=function(){try{return ae&&ae.require&&ae.require(\"util\").types||le&&le.binding&&le.binding(\"util\")}catch(t){}}(),ce=ue&&ue.isArrayBuffer,fe=ue&&ue.isDate,de=ue&&ue.isMap,pe=ue&&ue.isRegExp,ge=ue&&ue.isSet,ye=ue&&ue.isTypedArray;function me(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function ve(t,e,i,n){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(n,s,i(s),t)}return n}function xe(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function be(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function we(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function ke(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[r++]=s)}return o}function Me(t,e){return!(null==t||!t.length)&&De(t,e,0)>-1}function Se(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}function Pe(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function Ne(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function Ce(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function Te(t,e,i,n){var r=null==t?0:t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function Le(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}var Ae=ze(\"length\");function je(t,e,i){var n;return i(t,(function(t,i,r){if(e(t,i,r))return n=i,!1})),n}function Oe(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function De(t,e,i){return e==e?function(t,e,i){for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}(t,e,i):Oe(t,Be,i)}function Fe(t,e,i,n){for(var r=i-1,o=t.length;++r<o;)if(n(t[r],e))return r;return-1}function Be(t){return t!=t}function Ie(t,e){var i=null==t?0:t.length;return i?_e(t,e)/i:f}function ze(t){return function(e){return null==e?r:e[t]}}function Re(t){return function(e){return null==t?r:t[e]}}function Ee(t,e,i,n,r){return r(t,(function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)})),i}function _e(t,e){for(var i,n=-1,o=t.length;++n<o;){var s=e(t[n]);s!==r&&(i=i===r?s:i+s)}return i}function Ve(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function Ye(t){return t?t.slice(0,si(t)+1).replace(nt,\"\"):t}function Ge(t){return function(e){return t(e)}}function Xe(t,e){return Pe(e,(function(e){return t[e]}))}function Ue(t,e){return t.has(e)}function qe(t,e){for(var i=-1,n=t.length;++i<n&&De(e,t[i],0)>-1;);return i}function Ke(t,e){for(var i=t.length;i--&&De(e,t[i],0)>-1;);return i}function He(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}var We=Re({?:\"A\",?:\"A\",?:\"A\",?:\"A\",?:\"A\",?:\"A\",?:\"a\",?:\"a\",?:\"a\",?:\"a\",?:\"a\",?:\"a\",?:\"C\",?:\"c\",?:\"D\",?:\"d\",?:\"E\",?:\"E\",?:\"E\",?:\"E\",?:\"e\",?:\"e\",?:\"e\",?:\"e\",?:\"I\",?:\"I\",?:\"I\",?:\"I\",?:\"i\",?:\"i\",?:\"i\",?:\"i\",?:\"N\",?:\"n\",?:\"O\",?:\"O\",?:\"O\",?:\"O\",?:\"O\",?:\"O\",?:\"o\",?:\"o\",?:\"o\",?:\"o\",?:\"o\",?:\"o\",?:\"U\",?:\"U\",?:\"U\",?:\"U\",?:\"u\",?:\"u\",?:\"u\",?:\"u\",?:\"Y\",?:\"y\",?:\"y\",?:\"Ae\",?:\"ae\",?:\"Th\",?:\"th\",?:\"ss\",?:\"A\",?:\"A\",?:\"A\",?:\"a\",?:\"a\",?:\"a\",?:\"C\",?:\"C\",?:\"C\",?:\"C\",?:\"c\",?:\"c\",?:\"c\",?:\"c\",?:\"D\",?:\"D\",?:\"d\",?:\"d\",?:\"E\",?:\"E\",?:\"E\",?:\"E\",?:\"E\",?:\"e\",?:\"e\",?:\"e\",?:\"e\",?:\"e\",?:\"G\",?:\"G\",?:\"G\",?:\"G\",?:\"g\",?:\"g\",?:\"g\",?:\"g\",?:\"H\",?:\"H\",?:\"h\",?:\"h\",?:\"I\",?:\"I\",?:\"I\",?:\"I\",?:\"I\",?:\"i\",?:\"i\",?:\"i\",?:\"i\",?:\"i\",?:\"J\",?:\"j\",?:\"K\",?:\"k\",?:\"k\",?:\"L\",?:\"L\",?:\"L\",?:\"L\",?:\"L\",?:\"l\",?:\"l\",?:\"l\",?:\"l\",?:\"l\",?:\"N\",?:\"N\",?:\"N\",?:\"N\",?:\"n\",?:\"n\",?:\"n\",?:\"n\",?:\"O\",?:\"O\",?:\"O\",?:\"o\",?:\"o\",?:\"o\",?:\"R\",?:\"R\",?:\"R\",?:\"r\",?:\"r\",?:\"r\",?:\"S\",?:\"S\",?:\"S\",?:\"S\",?:\"s\",?:\"s\",?:\"s\",?:\"s\",?:\"T\",?:\"T\",?:\"T\",?:\"t\",?:\"t\",?:\"t\",?:\"U\",?:\"U\",?:\"U\",?:\"U\",?:\"U\",?:\"U\",?:\"u\",?:\"u\",?:\"u\",?:\"u\",?:\"u\",?:\"u\",?:\"W\",?:\"w\",?:\"Y\",?:\"y\",?:\"Y\",?:\"Z\",?:\"Z\",?:\"Z\",?:\"z\",?:\"z\",?:\"z\",?:\"IJ\",?:\"ij\",?:\"Oe\",?:\"oe\",?:\"'n\",?:\"s\"}),Ze=Re({\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"});function Je(t){return\"\\\\\"+te[t]}function $e(t){return Ht.test(t)}function Qe(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function ti(t,e){return function(i){return t(e(i))}}function ei(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var s=t[i];s!==e&&s!==a||(t[i]=a,o[r++]=i)}return o}function ii(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function ni(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}function ri(t){return $e(t)?function(t){for(var e=qt.lastIndex=0;qt.test(t);)++e;return e}(t):Ae(t)}function oi(t){return $e(t)?function(t){return t.match(qt)||[]}(t):function(t){return t.split(\"\")}(t)}function si(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var ai=Re({\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"}),hi=function t(e){var i,n=(e=null==e?oe:hi.defaults(oe.Object(),e,hi.pick(oe,Zt))).Array,rt=e.Date,wt=e.Error,kt=e.Function,Mt=e.Math,St=e.Object,Pt=e.RegExp,Nt=e.String,Ct=e.TypeError,Tt=n.prototype,Lt=kt.prototype,At=St.prototype,jt=e[\"__core-js_shared__\"],Ot=Lt.toString,Dt=At.hasOwnProperty,Ft=0,Bt=(i=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+i:\"\",It=At.toString,zt=Ot.call(St),Rt=oe._,Et=Pt(\"^\"+Ot.call(Dt).replace(et,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),_t=he?e.Buffer:r,Vt=e.Symbol,Yt=e.Uint8Array,Gt=_t?_t.allocUnsafe:r,qt=ti(St.getPrototypeOf,St),Ht=St.create,te=At.propertyIsEnumerable,ne=Tt.splice,re=Vt?Vt.isConcatSpreadable:r,se=Vt?Vt.iterator:r,ae=Vt?Vt.toStringTag:r,le=function(){try{var t=lo(St,\"defineProperty\");return t({},\"\",{}),t}catch(t){}}(),ue=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Ae=rt&&rt.now!==oe.Date.now&&rt.now,Re=e.setTimeout!==oe.setTimeout&&e.setTimeout,li=Mt.ceil,ui=Mt.floor,ci=St.getOwnPropertySymbols,fi=_t?_t.isBuffer:r,di=e.isFinite,pi=Tt.join,gi=ti(St.keys,St),yi=Mt.max,mi=Mt.min,vi=rt.now,xi=e.parseInt,bi=Mt.random,wi=Tt.reverse,ki=lo(e,\"DataView\"),Mi=lo(e,\"Map\"),Si=lo(e,\"Promise\"),Pi=lo(e,\"Set\"),Ni=lo(e,\"WeakMap\"),Ci=lo(St,\"create\"),Ti=Ni&&new Ni,Li={},Ai=Eo(ki),ji=Eo(Mi),Oi=Eo(Si),Di=Eo(Pi),Fi=Eo(Ni),Bi=Vt?Vt.prototype:r,Ii=Bi?Bi.valueOf:r,zi=Bi?Bi.toString:r;function Ri(t){if(ia(t)&&!Us(t)&&!(t instanceof Yi)){if(t instanceof Vi)return t;if(Dt.call(t,\"__wrapped__\"))return _o(t)}return new Vi(t)}var Ei=function(){function t(){}return function(e){if(!ea(e))return{};if(Ht)return Ht(e);t.prototype=e;var i=new t;return t.prototype=r,i}}();function _i(){}function Vi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Yi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Gi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Xi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ui(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function qi(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Ui;++e<i;)this.add(t[e])}function Ki(t){var e=this.__data__=new Xi(t);this.size=e.size}function Hi(t,e){var i=Us(t),n=!i&&Xs(t),r=!i&&!n&&Ws(t),o=!i&&!n&&!r&&ua(t),s=i||n||r||o,a=s?Ve(t.length,Nt):[],h=a.length;for(var l in t)!e&&!Dt.call(t,l)||s&&(\"length\"==l||r&&(\"offset\"==l||\"parent\"==l)||o&&(\"buffer\"==l||\"byteLength\"==l||\"byteOffset\"==l)||mo(l,h))||a.push(l);return a}function Wi(t){var e=t.length;return e?t[qn(0,e-1)]:r}function Zi(t,e){return Fo(Cr(t),sn(e,0,t.length))}function Ji(t){return Fo(Cr(t))}function $i(t,e,i){(i!==r&&!Vs(t[e],i)||i===r&&!(e in t))&&rn(t,e,i)}function Qi(t,e,i){var n=t[e];Dt.call(t,e)&&Vs(n,i)&&(i!==r||e in t)||rn(t,e,i)}function tn(t,e){for(var i=t.length;i--;)if(Vs(t[i][0],e))return i;return-1}function en(t,e,i,n){return cn(t,(function(t,r,o){e(n,t,i(t),o)})),n}function nn(t,e){return t&&Tr(e,Oa(e),t)}function rn(t,e,i){\"__proto__\"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function on(t,e){for(var i=-1,o=e.length,s=n(o),a=null==t;++i<o;)s[i]=a?r:Ca(t,e[i]);return s}function sn(t,e,i){return t==t&&(i!==r&&(t=t<=i?t:i),e!==r&&(t=t>=e?t:e)),t}function an(t,e,i,n,o,s){var a,h=1&e,l=2&e,u=4&e;if(i&&(a=o?i(t,n,o,s):i(t)),a!==r)return a;if(!ea(t))return t;var c=Us(t);if(c){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&\"string\"==typeof t[0]&&Dt.call(t,\"index\")&&(i.index=t.index,i.input=t.input),i}(t),!h)return Cr(t,a)}else{var f=fo(t),d=f==b||f==w;if(Ws(t))return wr(t,h);if(f==S||f==g||d&&!o){if(a=l||d?{}:go(t),!h)return l?function(t,e){return Tr(t,co(t),e)}(t,function(t,e){return t&&Tr(e,Da(e),t)}(a,t)):function(t,e){return Tr(t,uo(t),e)}(t,nn(a,t))}else{if(!Qt[f])return o?t:{};a=function(t,e,i){var n,r=t.constructor;switch(e){case j:return kr(t);case m:case v:return new r(+t);case O:return function(t,e){var i=e?kr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case D:case F:case B:case I:case z:case R:case E:case _:case V:return Mr(t,i);case k:return new r;case M:case T:return new r(t);case N:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return new r;case L:return n=t,Ii?St(Ii.call(n)):{}}}(t,f,h)}}s||(s=new Ki);var p=s.get(t);if(p)return p;s.set(t,a),aa(t)?t.forEach((function(n){a.add(an(n,e,i,n,t,s))})):na(t)&&t.forEach((function(n,r){a.set(r,an(n,e,i,r,t,s))}));var y=c?r:(u?l?io:eo:l?Da:Oa)(t);return xe(y||t,(function(n,r){y&&(n=t[r=n]),Qi(a,r,an(n,e,i,r,t,s))})),a}function hn(t,e,i){var n=i.length;if(null==t)return!n;for(t=St(t);n--;){var o=i[n],s=e[o],a=t[o];if(a===r&&!(o in t)||!s(a))return!1}return!0}function ln(t,e,i){if(\"function\"!=typeof t)throw new Ct(o);return Ao((function(){t.apply(r,i)}),e)}function un(t,e,i,n){var r=-1,o=Me,s=!0,a=t.length,h=[],l=e.length;if(!a)return h;i&&(e=Pe(e,Ge(i))),n?(o=Se,s=!1):e.length>=200&&(o=Ue,s=!1,e=new qi(e));t:for(;++r<a;){var u=t[r],c=null==i?u:i(u);if(u=n||0!==u?u:0,s&&c==c){for(var f=l;f--;)if(e[f]===c)continue t;h.push(u)}else o(e,c,n)||h.push(u)}return h}Ri.templateSettings={escape:W,evaluate:Z,interpolate:J,variable:\"\",imports:{_:Ri}},Ri.prototype=_i.prototype,Ri.prototype.constructor=Ri,Vi.prototype=Ei(_i.prototype),Vi.prototype.constructor=Vi,Yi.prototype=Ei(_i.prototype),Yi.prototype.constructor=Yi,Gi.prototype.clear=function(){this.__data__=Ci?Ci(null):{},this.size=0},Gi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gi.prototype.get=function(t){var e=this.__data__;if(Ci){var i=e[t];return i===s?r:i}return Dt.call(e,t)?e[t]:r},Gi.prototype.has=function(t){var e=this.__data__;return Ci?e[t]!==r:Dt.call(e,t)},Gi.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Ci&&e===r?s:e,this},Xi.prototype.clear=function(){this.__data__=[],this.size=0},Xi.prototype.delete=function(t){var e=this.__data__,i=tn(e,t);return!(i<0||(i==e.length-1?e.pop():ne.call(e,i,1),--this.size,0))},Xi.prototype.get=function(t){var e=this.__data__,i=tn(e,t);return i<0?r:e[i][1]},Xi.prototype.has=function(t){return tn(this.__data__,t)>-1},Xi.prototype.set=function(t,e){var i=this.__data__,n=tn(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},Ui.prototype.clear=function(){this.size=0,this.__data__={hash:new Gi,map:new(Mi||Xi),string:new Gi}},Ui.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Ui.prototype.get=function(t){return ao(this,t).get(t)},Ui.prototype.has=function(t){return ao(this,t).has(t)},Ui.prototype.set=function(t,e){var i=ao(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},qi.prototype.add=qi.prototype.push=function(t){return this.__data__.set(t,s),this},qi.prototype.has=function(t){return this.__data__.has(t)},Ki.prototype.clear=function(){this.__data__=new Xi,this.size=0},Ki.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Ki.prototype.get=function(t){return this.__data__.get(t)},Ki.prototype.has=function(t){return this.__data__.has(t)},Ki.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Xi){var n=i.__data__;if(!Mi||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Ui(n)}return i.set(t,e),this.size=i.size,this};var cn=jr(xn),fn=jr(bn,!0);function dn(t,e){var i=!0;return cn(t,(function(t,n,r){return i=!!e(t,n,r)})),i}function pn(t,e,i){for(var n=-1,o=t.length;++n<o;){var s=t[n],a=e(s);if(null!=a&&(h===r?a==a&&!la(a):i(a,h)))var h=a,l=s}return l}function gn(t,e){var i=[];return cn(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function yn(t,e,i,n,r){var o=-1,s=t.length;for(i||(i=yo),r||(r=[]);++o<s;){var a=t[o];e>0&&i(a)?e>1?yn(a,e-1,i,n,r):Ne(r,a):n||(r[r.length]=a)}return r}var mn=Or(),vn=Or(!0);function xn(t,e){return t&&mn(t,e,Oa)}function bn(t,e){return t&&vn(t,e,Oa)}function wn(t,e){return ke(e,(function(e){return $s(t[e])}))}function kn(t,e){for(var i=0,n=(e=mr(e,t)).length;null!=t&&i<n;)t=t[Ro(e[i++])];return i&&i==n?t:r}function Mn(t,e,i){var n=e(t);return Us(t)?n:Ne(n,i(t))}function Sn(t){return null==t?t===r?\"[object Undefined]\":\"[object Null]\":ae&&ae in St(t)?function(t){var e=Dt.call(t,ae),i=t[ae];try{t[ae]=r;var n=!0}catch(t){}var o=It.call(t);return n&&(e?t[ae]=i:delete t[ae]),o}(t):function(t){return It.call(t)}(t)}function Pn(t,e){return t>e}function Nn(t,e){return null!=t&&Dt.call(t,e)}function Cn(t,e){return null!=t&&e in St(t)}function Tn(t,e,i){for(var o=i?Se:Me,s=t[0].length,a=t.length,h=a,l=n(a),u=1/0,c=[];h--;){var f=t[h];h&&e&&(f=Pe(f,Ge(e))),u=mi(f.length,u),l[h]=!i&&(e||s>=120&&f.length>=120)?new qi(h&&f):r}f=t[0];var d=-1,p=l[0];t:for(;++d<s&&c.length<u;){var g=f[d],y=e?e(g):g;if(g=i||0!==g?g:0,!(p?Ue(p,y):o(c,y,i))){for(h=a;--h;){var m=l[h];if(!(m?Ue(m,y):o(t[h],y,i)))continue t}p&&p.push(y),c.push(g)}}return c}function Ln(t,e,i){var n=null==(t=No(t,e=mr(e,t)))?t:t[Ro(Jo(e))];return null==n?r:me(n,t,i)}function An(t){return ia(t)&&Sn(t)==g}function jn(t,e,i,n,o){return t===e||(null==t||null==e||!ia(t)&&!ia(e)?t!=t&&e!=e:function(t,e,i,n,o,s){var a=Us(t),h=Us(e),l=a?y:fo(t),u=h?y:fo(e),c=(l=l==g?S:l)==S,f=(u=u==g?S:u)==S,d=l==u;if(d&&Ws(t)){if(!Ws(e))return!1;a=!0,c=!1}if(d&&!c)return s||(s=new Ki),a||ua(t)?Qr(t,e,i,n,o,s):function(t,e,i,n,r,o,s){switch(i){case O:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case j:return!(t.byteLength!=e.byteLength||!o(new Yt(t),new Yt(e)));case m:case v:case M:return Vs(+t,+e);case x:return t.name==e.name&&t.message==e.message;case N:case T:return t==e+\"\";case k:var a=Qe;case C:var h=1&n;if(a||(a=ii),t.size!=e.size&&!h)return!1;var l=s.get(t);if(l)return l==e;n|=2,s.set(t,e);var u=Qr(a(t),a(e),n,r,o,s);return s.delete(t),u;case L:if(Ii)return Ii.call(t)==Ii.call(e)}return!1}(t,e,l,i,n,o,s);if(!(1&i)){var p=c&&Dt.call(t,\"__wrapped__\"),b=f&&Dt.call(e,\"__wrapped__\");if(p||b){var w=p?t.value():t,P=b?e.value():e;return s||(s=new Ki),o(w,P,i,n,s)}}return!!d&&(s||(s=new Ki),function(t,e,i,n,o,s){var a=1&i,h=eo(t),l=h.length;if(l!=eo(e).length&&!a)return!1;for(var u=l;u--;){var c=h[u];if(!(a?c in e:Dt.call(e,c)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++u<l;){var y=t[c=h[u]],m=e[c];if(n)var v=a?n(m,y,c,e,t,s):n(y,m,c,t,e,s);if(!(v===r?y===m||o(y,m,i,n,s):v)){p=!1;break}g||(g=\"constructor\"==c)}if(p&&!g){var x=t.constructor,b=e.constructor;x==b||!(\"constructor\"in t)||!(\"constructor\"in e)||\"function\"==typeof x&&x instanceof x&&\"function\"==typeof b&&b instanceof b||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,i,n,o,s))}(t,e,i,n,jn,o))}function On(t,e,i,n){var o=i.length,s=o,a=!n;if(null==t)return!s;for(t=St(t);o--;){var h=i[o];if(a&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++o<s;){var l=(h=i[o])[0],u=t[l],c=h[1];if(a&&h[2]){if(u===r&&!(l in t))return!1}else{var f=new Ki;if(n)var d=n(u,c,l,t,e,f);if(!(d===r?jn(c,u,3,n,f):d))return!1}}return!0}function Dn(t){return!(!ea(t)||(e=t,Bt&&Bt in e))&&($s(t)?Et:gt).test(Eo(t));var e}function Fn(t){return\"function\"==typeof t?t:null==t?rh:\"object\"==typeof t?Us(t)?En(t[0],t[1]):Rn(t):dh(t)}function Bn(t){if(!ko(t))return gi(t);var e=[];for(var i in St(t))Dt.call(t,i)&&\"constructor\"!=i&&e.push(i);return e}function In(t,e){return t<e}function zn(t,e){var i=-1,r=Ks(t)?n(t.length):[];return cn(t,(function(t,n,o){r[++i]=e(t,n,o)})),r}function Rn(t){var e=ho(t);return 1==e.length&&e[0][2]?So(e[0][0],e[0][1]):function(i){return i===t||On(i,t,e)}}function En(t,e){return xo(t)&&Mo(e)?So(Ro(t),e):function(i){var n=Ca(i,t);return n===r&&n===e?Ta(i,t):jn(e,n,3)}}function _n(t,e,i,n,o){t!==e&&mn(e,(function(s,a){if(o||(o=new Ki),ea(s))!function(t,e,i,n,o,s,a){var h=To(t,i),l=To(e,i),u=a.get(l);if(u)$i(t,i,u);else{var c=s?s(h,l,i+\"\",t,e,a):r,f=c===r;if(f){var d=Us(l),p=!d&&Ws(l),g=!d&&!p&&ua(l);c=l,d||p||g?Us(h)?c=h:Hs(h)?c=Cr(h):p?(f=!1,c=wr(l,!0)):g?(f=!1,c=Mr(l,!0)):c=[]:oa(l)||Xs(l)?(c=h,Xs(h)?c=va(h):ea(h)&&!$s(h)||(c=go(l))):f=!1}f&&(a.set(l,c),o(c,l,n,s,a),a.delete(l)),$i(t,i,c)}}(t,e,a,i,_n,n,o);else{var h=n?n(To(t,a),s,a+\"\",t,e,o):r;h===r&&(h=s),$i(t,a,h)}}),Da)}function Vn(t,e){var i=t.length;if(i)return mo(e+=e<0?i:0,i)?t[e]:r}function Yn(t,e,i){e=e.length?Pe(e,(function(t){return Us(t)?function(e){return kn(e,1===t.length?t[0]:t)}:t})):[rh];var n=-1;e=Pe(e,Ge(so()));var r=zn(t,(function(t,i,r){var o=Pe(e,(function(e){return e(t)}));return{criteria:o,index:++n,value:t}}));return function(t,e){var n=t.length;for(t.sort((function(t,e){return function(t,e,i){for(var n=-1,r=t.criteria,o=e.criteria,s=r.length,a=i.length;++n<s;){var h=Sr(r[n],o[n]);if(h)return n>=a?h:h*(\"desc\"==i[n]?-1:1)}return t.index-e.index}(t,e,i)}));n--;)t[n]=t[n].value;return t}(r)}function Gn(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var s=e[n],a=kn(t,s);i(a,s)&&Jn(o,mr(s,t),a)}return o}function Xn(t,e,i,n){var r=n?Fe:De,o=-1,s=e.length,a=t;for(t===e&&(e=Cr(e)),i&&(a=Pe(t,Ge(i)));++o<s;)for(var h=0,l=e[o],u=i?i(l):l;(h=r(a,u,h,n))>-1;)a!==t&&ne.call(a,h,1),ne.call(t,h,1);return t}function Un(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==o){var o=r;mo(r)?ne.call(t,r,1):lr(t,r)}}return t}function qn(t,e){return t+ui(bi()*(e-t+1))}function Kn(t,e){var i=\"\";if(!t||e<1||e>c)return i;do{e%2&&(i+=t),(e=ui(e/2))&&(t+=t)}while(e);return i}function Hn(t,e){return jo(Po(t,e,rh),t+\"\")}function Wn(t){return Wi(Va(t))}function Zn(t,e){var i=Va(t);return Fo(i,sn(e,0,i.length))}function Jn(t,e,i,n){if(!ea(t))return t;for(var o=-1,s=(e=mr(e,t)).length,a=s-1,h=t;null!=h&&++o<s;){var l=Ro(e[o]),u=i;if(\"__proto__\"===l||\"constructor\"===l||\"prototype\"===l)return t;if(o!=a){var c=h[l];(u=n?n(c,l,h):r)===r&&(u=ea(c)?c:mo(e[o+1])?[]:{})}Qi(h,l,u),h=h[l]}return t}var $n=Ti?function(t,e){return Ti.set(t,e),t}:rh,Qn=le?function(t,e){return le(t,\"toString\",{configurable:!0,enumerable:!1,value:eh(e),writable:!0})}:rh;function tr(t){return Fo(Va(t))}function er(t,e,i){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(i=i>o?o:i)<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var s=n(o);++r<o;)s[r]=t[r+e];return s}function ir(t,e){var i;return cn(t,(function(t,n,r){return!(i=e(t,n,r))})),!!i}function nr(t,e,i){var n=0,r=null==t?n:t.length;if(\"number\"==typeof e&&e==e&&r<=2147483647){for(;n<r;){var o=n+r>>>1,s=t[o];null!==s&&!la(s)&&(i?s<=e:s<e)?n=o+1:r=o}return r}return rr(t,e,rh,i)}function rr(t,e,i,n){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=i(e))!=e,h=null===e,l=la(e),u=e===r;o<s;){var c=ui((o+s)/2),f=i(t[c]),d=f!==r,p=null===f,g=f==f,y=la(f);if(a)var m=n||g;else m=u?g&&(n||d):h?g&&d&&(n||!p):l?g&&d&&!p&&(n||!y):!p&&!y&&(n?f<=e:f<e);m?o=c+1:s=c}return mi(s,4294967294)}function or(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var s=t[i],a=e?e(s):s;if(!i||!Vs(a,h)){var h=a;o[r++]=0===s?0:s}}return o}function sr(t){return\"number\"==typeof t?t:la(t)?f:+t}function ar(t){if(\"string\"==typeof t)return t;if(Us(t))return Pe(t,ar)+\"\";if(la(t))return zi?zi.call(t):\"\";var e=t+\"\";return\"0\"==e&&1/t==-1/0?\"-0\":e}function hr(t,e,i){var n=-1,r=Me,o=t.length,s=!0,a=[],h=a;if(i)s=!1,r=Se;else if(o>=200){var l=e?null:Kr(t);if(l)return ii(l);s=!1,r=Ue,h=new qi}else h=e?[]:a;t:for(;++n<o;){var u=t[n],c=e?e(u):u;if(u=i||0!==u?u:0,s&&c==c){for(var f=h.length;f--;)if(h[f]===c)continue t;e&&h.push(c),a.push(u)}else r(h,c,i)||(h!==a&&h.push(c),a.push(u))}return a}function lr(t,e){return null==(t=No(t,e=mr(e,t)))||delete t[Ro(Jo(e))]}function ur(t,e,i,n){return Jn(t,e,i(kn(t,e)),n)}function cr(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?er(t,n?0:o,n?o+1:r):er(t,n?o+1:0,n?r:o)}function fr(t,e){var i=t;return i instanceof Yi&&(i=i.value()),Ce(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),i)}function dr(t,e,i){var r=t.length;if(r<2)return r?hr(t[0]):[];for(var o=-1,s=n(r);++o<r;)for(var a=t[o],h=-1;++h<r;)h!=o&&(s[o]=un(s[o]||a,t[h],e,i));return hr(yn(s,1),e,i)}function pr(t,e,i){for(var n=-1,o=t.length,s=e.length,a={};++n<o;){var h=n<s?e[n]:r;i(a,t[n],h)}return a}function gr(t){return Hs(t)?t:[]}function yr(t){return\"function\"==typeof t?t:rh}function mr(t,e){return Us(t)?t:xo(t,e)?[t]:zo(xa(t))}var vr=Hn;function xr(t,e,i){var n=t.length;return i=i===r?n:i,!e&&i>=n?t:er(t,e,i)}var br=ue||function(t){return oe.clearTimeout(t)};function wr(t,e){if(e)return t.slice();var i=t.length,n=Gt?Gt(i):new t.constructor(i);return t.copy(n),n}function kr(t){var e=new t.constructor(t.byteLength);return new Yt(e).set(new Yt(t)),e}function Mr(t,e){var i=e?kr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Sr(t,e){if(t!==e){var i=t!==r,n=null===t,o=t==t,s=la(t),a=e!==r,h=null===e,l=e==e,u=la(e);if(!h&&!u&&!s&&t>e||s&&a&&l&&!h&&!u||n&&a&&l||!i&&l||!o)return 1;if(!n&&!s&&!u&&t<e||u&&i&&o&&!n&&!s||h&&i&&o||!a&&o||!l)return-1}return 0}function Pr(t,e,i,r){for(var o=-1,s=t.length,a=i.length,h=-1,l=e.length,u=yi(s-a,0),c=n(l+u),f=!r;++h<l;)c[h]=e[h];for(;++o<a;)(f||o<s)&&(c[i[o]]=t[o]);for(;u--;)c[h++]=t[o++];return c}function Nr(t,e,i,r){for(var o=-1,s=t.length,a=-1,h=i.length,l=-1,u=e.length,c=yi(s-h,0),f=n(c+u),d=!r;++o<c;)f[o]=t[o];for(var p=o;++l<u;)f[p+l]=e[l];for(;++a<h;)(d||o<s)&&(f[p+i[a]]=t[o++]);return f}function Cr(t,e){var i=-1,r=t.length;for(e||(e=n(r));++i<r;)e[i]=t[i];return e}function Tr(t,e,i,n){var o=!i;i||(i={});for(var s=-1,a=e.length;++s<a;){var h=e[s],l=n?n(i[h],t[h],h,i,t):r;l===r&&(l=t[h]),o?rn(i,h,l):Qi(i,h,l)}return i}function Lr(t,e){return function(i,n){var r=Us(i)?ve:en,o=e?e():{};return r(i,t,so(n,2),o)}}function Ar(t){return Hn((function(e,i){var n=-1,o=i.length,s=o>1?i[o-1]:r,a=o>2?i[2]:r;for(s=t.length>3&&\"function\"==typeof s?(o--,s):r,a&&vo(i[0],i[1],a)&&(s=o<3?r:s,o=1),e=St(e);++n<o;){var h=i[n];h&&t(e,h,n,s)}return e}))}function jr(t,e){return function(i,n){if(null==i)return i;if(!Ks(i))return t(i,n);for(var r=i.length,o=e?r:-1,s=St(i);(e?o--:++o<r)&&!1!==n(s[o],o,s););return i}}function Or(t){return function(e,i,n){for(var r=-1,o=St(e),s=n(e),a=s.length;a--;){var h=s[t?a:++r];if(!1===i(o[h],h,o))break}return e}}function Dr(t){return function(e){var i=$e(e=xa(e))?oi(e):r,n=i?i[0]:e.charAt(0),o=i?xr(i,1).join(\"\"):e.slice(1);return n[t]()+o}}function Fr(t){return function(e){return Ce($a(Xa(e).replace(Xt,\"\")),t,\"\")}}function Br(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ei(t.prototype),n=t.apply(i,e);return ea(n)?n:i}}function Ir(t){return function(e,i,n){var o=St(e);if(!Ks(e)){var s=so(i,3);e=Oa(e),i=function(t){return s(o[t],t,o)}}var a=t(e,i,n);return a>-1?o[s?e[a]:a]:r}}function zr(t){return to((function(e){var i=e.length,n=i,s=Vi.prototype.thru;for(t&&e.reverse();n--;){var a=e[n];if(\"function\"!=typeof a)throw new Ct(o);if(s&&!h&&\"wrapper\"==ro(a))var h=new Vi([],!0)}for(n=h?n:i;++n<i;){var l=ro(a=e[n]),u=\"wrapper\"==l?no(a):r;h=u&&bo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?h[ro(u[0])].apply(h,u[3]):1==a.length&&bo(a)?h[l]():h.thru(a)}return function(){var t=arguments,n=t[0];if(h&&1==t.length&&Us(n))return h.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}function Rr(t,e,i,o,s,a,h,u,c,f){var d=e&l,p=1&e,g=2&e,y=24&e,m=512&e,v=g?r:Br(t);return function r(){for(var l=arguments.length,x=n(l),b=l;b--;)x[b]=arguments[b];if(y)var w=oo(r),k=He(x,w);if(o&&(x=Pr(x,o,s,y)),a&&(x=Nr(x,a,h,y)),l-=k,y&&l<f){var M=ei(x,w);return Ur(t,e,Rr,r.placeholder,i,x,M,u,c,f-l)}var S=p?i:this,P=g?S[t]:t;return l=x.length,u?x=Co(x,u):m&&l>1&&x.reverse(),d&&c<l&&(x.length=c),this&&this!==oe&&this instanceof r&&(P=v||Br(P)),P.apply(S,x)}}function Er(t,e){return function(i,n){return function(t,e,i,n){return xn(t,(function(t,r,o){e(n,i(t),r,o)})),n}(i,t,e(n),{})}}function _r(t,e){return function(i,n){var o;if(i===r&&n===r)return e;if(i!==r&&(o=i),n!==r){if(o===r)return n;\"string\"==typeof i||\"string\"==typeof n?(i=ar(i),n=ar(n)):(i=sr(i),n=sr(n)),o=t(i,n)}return o}}function Vr(t){return to((function(e){return e=Pe(e,Ge(so())),Hn((function(i){var n=this;return t(e,(function(t){return me(t,n,i)}))}))}))}function Yr(t,e){var i=(e=e===r?\" \":ar(e)).length;if(i<2)return i?Kn(e,t):e;var n=Kn(e,li(t/ri(e)));return $e(e)?xr(oi(n),0,t).join(\"\"):n.slice(0,t)}function Gr(t){return function(e,i,o){return o&&\"number\"!=typeof o&&vo(e,i,o)&&(i=o=r),e=pa(e),i===r?(i=e,e=0):i=pa(i),function(t,e,i,r){for(var o=-1,s=yi(li((e-t)/(i||1)),0),a=n(s);s--;)a[r?s:++o]=t,t+=i;return a}(e,i,o=o===r?e<i?1:-1:pa(o),t)}}function Xr(t){return function(e,i){return\"string\"==typeof e&&\"string\"==typeof i||(e=ma(e),i=ma(i)),t(e,i)}}function Ur(t,e,i,n,o,s,a,l,u,c){var f=8&e;e|=f?h:64,4&(e&=~(f?64:h))||(e&=-4);var d=[t,e,o,f?s:r,f?a:r,f?r:s,f?r:a,l,u,c],p=i.apply(r,d);return bo(t)&&Lo(p,d),p.placeholder=n,Oo(p,t,e)}function qr(t){var e=Mt[t];return function(t,i){if(t=ma(t),(i=null==i?0:mi(ga(i),292))&&di(t)){var n=(xa(t)+\"e\").split(\"e\");return+((n=(xa(e(n[0]+\"e\"+(+n[1]+i)))+\"e\").split(\"e\"))[0]+\"e\"+(+n[1]-i))}return e(t)}}var Kr=Pi&&1/ii(new Pi([,-0]))[1]==u?function(t){return new Pi(t)}:lh;function Hr(t){return function(e){var i=fo(e);return i==k?Qe(e):i==C?ni(e):function(t,e){return Pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Wr(t,e,i,s,u,c,f,d){var p=2&e;if(!p&&\"function\"!=typeof t)throw new Ct(o);var g=s?s.length:0;if(g||(e&=-97,s=u=r),f=f===r?f:yi(ga(f),0),d=d===r?d:ga(d),g-=u?u.length:0,64&e){var y=s,m=u;s=u=r}var v=p?r:no(t),x=[t,e,i,s,u,y,m,c,f,d];if(v&&function(t,e){var i=t[1],n=e[1],r=i|n,o=r<131,s=n==l&&8==i||n==l&&256==i&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==i;if(!o&&!s)return t;1&n&&(t[2]=e[2],r|=1&i?0:4);var h=e[3];if(h){var u=t[3];t[3]=u?Pr(u,h,e[4]):h,t[4]=u?ei(t[3],a):e[4]}(h=e[5])&&(u=t[5],t[5]=u?Nr(u,h,e[6]):h,t[6]=u?ei(t[5],a):e[6]),(h=e[7])&&(t[7]=h),n&l&&(t[8]=null==t[8]?e[8]:mi(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(x,v),t=x[0],e=x[1],i=x[2],s=x[3],u=x[4],!(d=x[9]=x[9]===r?p?0:t.length:yi(x[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,i){var o=Br(t);return function s(){for(var a=arguments.length,h=n(a),l=a,u=oo(s);l--;)h[l]=arguments[l];var c=a<3&&h[0]!==u&&h[a-1]!==u?[]:ei(h,u);return(a-=c.length)<i?Ur(t,e,Rr,s.placeholder,r,h,c,r,r,i-a):me(this&&this!==oe&&this instanceof s?o:t,this,h)}}(t,e,d):e!=h&&33!=e||u.length?Rr.apply(r,x):function(t,e,i,r){var o=1&e,s=Br(t);return function e(){for(var a=-1,h=arguments.length,l=-1,u=r.length,c=n(u+h),f=this&&this!==oe&&this instanceof e?s:t;++l<u;)c[l]=r[l];for(;h--;)c[l++]=arguments[++a];return me(f,o?i:this,c)}}(t,e,i,s);else var b=function(t,e,i){var n=1&e,r=Br(t);return function e(){return(this&&this!==oe&&this instanceof e?r:t).apply(n?i:this,arguments)}}(t,e,i);return Oo((v?$n:Lo)(b,x),t,e)}function Zr(t,e,i,n){return t===r||Vs(t,At[i])&&!Dt.call(n,i)?e:t}function Jr(t,e,i,n,o,s){return ea(t)&&ea(e)&&(s.set(e,t),_n(t,e,r,Jr,s),s.delete(e)),t}function $r(t){return oa(t)?r:t}function Qr(t,e,i,n,o,s){var a=1&i,h=t.length,l=e.length;if(h!=l&&!(a&&l>h))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,p=2&i?new qi:r;for(s.set(t,e),s.set(e,t);++f<h;){var g=t[f],y=e[f];if(n)var m=a?n(y,g,f,e,t,s):n(g,y,f,t,e,s);if(m!==r){if(m)continue;d=!1;break}if(p){if(!Le(e,(function(t,e){if(!Ue(p,e)&&(g===t||o(g,t,i,n,s)))return p.push(e)}))){d=!1;break}}else if(g!==y&&!o(g,y,i,n,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function to(t){return jo(Po(t,r,qo),t+\"\")}function eo(t){return Mn(t,Oa,uo)}function io(t){return Mn(t,Da,co)}var no=Ti?function(t){return Ti.get(t)}:lh;function ro(t){for(var e=t.name+\"\",i=Li[e],n=Dt.call(Li,e)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function oo(t){return(Dt.call(Ri,\"placeholder\")?Ri:t).placeholder}function so(){var t=Ri.iteratee||oh;return t=t===oh?Fn:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var i,n,r=t.__data__;return(\"string\"==(n=typeof(i=e))||\"number\"==n||\"symbol\"==n||\"boolean\"==n?\"__proto__\"!==i:null===i)?r[\"string\"==typeof e?\"string\":\"hash\"]:r.map}function ho(t){for(var e=Oa(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,Mo(r)]}return e}function lo(t,e){var i=function(t,e){return null==t?r:t[e]}(t,e);return Dn(i)?i:r}var uo=ci?function(t){return null==t?[]:(t=St(t),ke(ci(t),(function(e){return te.call(t,e)})))}:yh,co=ci?function(t){for(var e=[];t;)Ne(e,uo(t)),t=qt(t);return e}:yh,fo=Sn;function po(t,e,i){for(var n=-1,r=(e=mr(e,t)).length,o=!1;++n<r;){var s=Ro(e[n]);if(!(o=null!=t&&i(t,s)))break;t=t[s]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&ta(r)&&mo(s,r)&&(Us(t)||Xs(t))}function go(t){return\"function\"!=typeof t.constructor||ko(t)?{}:Ei(qt(t))}function yo(t){return Us(t)||Xs(t)||!!(re&&t&&t[re])}function mo(t,e){var i=typeof t;return!!(e=null==e?c:e)&&(\"number\"==i||\"symbol\"!=i&&mt.test(t))&&t>-1&&t%1==0&&t<e}function vo(t,e,i){if(!ea(i))return!1;var n=typeof e;return!!(\"number\"==n?Ks(i)&&mo(e,i.length):\"string\"==n&&e in i)&&Vs(i[e],t)}function xo(t,e){if(Us(t))return!1;var i=typeof t;return!(\"number\"!=i&&\"symbol\"!=i&&\"boolean\"!=i&&null!=t&&!la(t))||Q.test(t)||!$.test(t)||null!=e&&t in St(e)}function bo(t){var e=ro(t),i=Ri[e];if(\"function\"!=typeof i||!(e in Yi.prototype))return!1;if(t===i)return!0;var n=no(i);return!!n&&t===n[0]}(ki&&fo(new ki(new ArrayBuffer(1)))!=O||Mi&&fo(new Mi)!=k||Si&&fo(Si.resolve())!=P||Pi&&fo(new Pi)!=C||Ni&&fo(new Ni)!=A)&&(fo=function(t){var e=Sn(t),i=e==S?t.constructor:r,n=i?Eo(i):\"\";if(n)switch(n){case Ai:return O;case ji:return k;case Oi:return P;case Di:return C;case Fi:return A}return e});var wo=jt?$s:mh;function ko(t){var e=t&&t.constructor;return t===(\"function\"==typeof e&&e.prototype||At)}function Mo(t){return t==t&&!ea(t)}function So(t,e){return function(i){return null!=i&&i[t]===e&&(e!==r||t in St(i))}}function Po(t,e,i){return e=yi(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=yi(r.length-e,0),a=n(s);++o<s;)a[o]=r[e+o];o=-1;for(var h=n(e+1);++o<e;)h[o]=r[o];return h[e]=i(a),me(t,this,h)}}function No(t,e){return e.length<2?t:kn(t,er(e,0,-1))}function Co(t,e){for(var i=t.length,n=mi(e.length,i),o=Cr(t);n--;){var s=e[n];t[n]=mo(s,i)?o[s]:r}return t}function To(t,e){if((\"constructor\"!==e||\"function\"!=typeof t[e])&&\"__proto__\"!=e)return t[e]}var Lo=Do($n),Ao=Re||function(t,e){return oe.setTimeout(t,e)},jo=Do(Qn);function Oo(t,e,i){var n=e+\"\";return jo(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?\"& \":\"\")+e[n],e=e.join(i>2?\", \":\" \"),t.replace(ot,\"{\\n/* [wrapped with \"+e+\"] */\\n\")}(n,function(t,e){return xe(p,(function(i){var n=\"_.\"+i[0];e&i[1]&&!Me(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(n),i)))}function Do(t){var e=0,i=0;return function(){var n=vi(),o=16-(n-i);if(i=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Fo(t,e){var i=-1,n=t.length,o=n-1;for(e=e===r?n:e;++i<e;){var s=qn(i,o),a=t[s];t[s]=t[i],t[i]=a}return t.length=e,t}var Bo,Io,zo=(Bo=Bs((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(\"\"),t.replace(tt,(function(t,i,n,r){e.push(n?r.replace(ut,\"$1\"):i||t)})),e}),(function(t){return 500===Io.size&&Io.clear(),t})),Io=Bo.cache,Bo);function Ro(t){if(\"string\"==typeof t||la(t))return t;var e=t+\"\";return\"0\"==e&&1/t==-1/0?\"-0\":e}function Eo(t){if(null!=t){try{return Ot.call(t)}catch(t){}try{return t+\"\"}catch(t){}}return\"\"}function _o(t){if(t instanceof Yi)return t.clone();var e=new Vi(t.__wrapped__,t.__chain__);return e.__actions__=Cr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vo=Hn((function(t,e){return Hs(t)?un(t,yn(e,1,Hs,!0)):[]})),Yo=Hn((function(t,e){var i=Jo(e);return Hs(i)&&(i=r),Hs(t)?un(t,yn(e,1,Hs,!0),so(i,2)):[]})),Go=Hn((function(t,e){var i=Jo(e);return Hs(i)&&(i=r),Hs(t)?un(t,yn(e,1,Hs,!0),r,i):[]}));function Xo(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:ga(i);return r<0&&(r=yi(n+r,0)),Oe(t,so(e,3),r)}function Uo(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=n-1;return i!==r&&(o=ga(i),o=i<0?yi(n+o,0):mi(o,n-1)),Oe(t,so(e,3),o,!0)}function qo(t){return null!=t&&t.length?yn(t,1):[]}function Ko(t){return t&&t.length?t[0]:r}var Ho=Hn((function(t){var e=Pe(t,gr);return e.length&&e[0]===t[0]?Tn(e):[]})),Wo=Hn((function(t){var e=Jo(t),i=Pe(t,gr);return e===Jo(i)?e=r:i.pop(),i.length&&i[0]===t[0]?Tn(i,so(e,2)):[]})),Zo=Hn((function(t){var e=Jo(t),i=Pe(t,gr);return(e=\"function\"==typeof e?e:r)&&i.pop(),i.length&&i[0]===t[0]?Tn(i,r,e):[]}));function Jo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var $o=Hn(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Xn(t,e):t}var ts=to((function(t,e){var i=null==t?0:t.length,n=on(t,e);return Un(t,Pe(e,(function(t){return mo(t,i)?+t:t})).sort(Sr)),n}));function es(t){return null==t?t:wi.call(t)}var is=Hn((function(t){return hr(yn(t,1,Hs,!0))})),ns=Hn((function(t){var e=Jo(t);return Hs(e)&&(e=r),hr(yn(t,1,Hs,!0),so(e,2))})),rs=Hn((function(t){var e=Jo(t);return e=\"function\"==typeof e?e:r,hr(yn(t,1,Hs,!0),r,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=ke(t,(function(t){if(Hs(t))return e=yi(t.length,e),!0})),Ve(e,(function(e){return Pe(t,ze(e))}))}function ss(t,e){if(!t||!t.length)return[];var i=os(t);return null==e?i:Pe(i,(function(t){return me(e,r,t)}))}var as=Hn((function(t,e){return Hs(t)?un(t,e):[]})),hs=Hn((function(t){return dr(ke(t,Hs))})),ls=Hn((function(t){var e=Jo(t);return Hs(e)&&(e=r),dr(ke(t,Hs),so(e,2))})),us=Hn((function(t){var e=Jo(t);return e=\"function\"==typeof e?e:r,dr(ke(t,Hs),r,e)})),cs=Hn(os),fs=Hn((function(t){var e=t.length,i=e>1?t[e-1]:r;return i=\"function\"==typeof i?(t.pop(),i):r,ss(t,i)}));function ds(t){var e=Ri(t);return e.__chain__=!0,e}function ps(t,e){return e(t)}var gs=to((function(t){var e=t.length,i=e?t[0]:0,n=this.__wrapped__,o=function(e){return on(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Yi&&mo(i)?((n=n.slice(i,+i+(e?1:0))).__actions__.push({func:ps,args:[o],thisArg:r}),new Vi(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),ys=Lr((function(t,e,i){Dt.call(t,i)?++t[i]:rn(t,i,1)})),ms=Ir(Xo),vs=Ir(Uo);function xs(t,e){return(Us(t)?xe:cn)(t,so(e,3))}function bs(t,e){return(Us(t)?be:fn)(t,so(e,3))}var ws=Lr((function(t,e,i){Dt.call(t,i)?t[i].push(e):rn(t,i,[e])})),ks=Hn((function(t,e,i){var r=-1,o=\"function\"==typeof e,s=Ks(t)?n(t.length):[];return cn(t,(function(t){s[++r]=o?me(e,t,i):Ln(t,e,i)})),s})),Ms=Lr((function(t,e,i){rn(t,i,e)}));function Ss(t,e){return(Us(t)?Pe:zn)(t,so(e,3))}var Ps=Lr((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]})),Ns=Hn((function(t,e){if(null==t)return[];var i=e.length;return i>1&&vo(t,e[0],e[1])?e=[]:i>2&&vo(e[0],e[1],e[2])&&(e=[e[0]]),Yn(t,yn(e,1),[])})),Cs=Ae||function(){return oe.Date.now()};function Ts(t,e,i){return e=i?r:e,e=t&&null==e?t.length:e,Wr(t,l,r,r,r,r,e)}function Ls(t,e){var i;if(\"function\"!=typeof e)throw new Ct(o);return t=ga(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=r),i}}var As=Hn((function(t,e,i){var n=1;if(i.length){var r=ei(i,oo(As));n|=h}return Wr(t,n,e,i,r)})),js=Hn((function(t,e,i){var n=3;if(i.length){var r=ei(i,oo(js));n|=h}return Wr(e,n,t,i,r)}));function Os(t,e,i){var n,s,a,h,l,u,c=0,f=!1,d=!1,p=!0;if(\"function\"!=typeof t)throw new Ct(o);function g(e){var i=n,o=s;return n=s=r,c=e,h=t.apply(o,i)}function y(t){return c=t,l=Ao(v,e),f?g(t):h}function m(t){var i=t-u;return u===r||i>=e||i<0||d&&t-c>=a}function v(){var t=Cs();if(m(t))return x(t);l=Ao(v,function(t){var i=e-(t-u);return d?mi(i,a-(t-c)):i}(t))}function x(t){return l=r,p&&n?g(t):(n=s=r,h)}function b(){var t=Cs(),i=m(t);if(n=arguments,s=this,u=t,i){if(l===r)return y(u);if(d)return br(l),l=Ao(v,e),g(u)}return l===r&&(l=Ao(v,e)),h}return e=ma(e)||0,ea(i)&&(f=!!i.leading,a=(d=\"maxWait\"in i)?yi(ma(i.maxWait)||0,e):a,p=\"trailing\"in i?!!i.trailing:p),b.cancel=function(){l!==r&&br(l),c=0,n=u=s=l=r},b.flush=function(){return l===r?h:x(Cs())},b}var Ds=Hn((function(t,e){return ln(t,1,e)})),Fs=Hn((function(t,e,i){return ln(t,ma(e)||0,i)}));function Bs(t,e){if(\"function\"!=typeof t||null!=e&&\"function\"!=typeof e)throw new Ct(o);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s)||o,s};return i.cache=new(Bs.Cache||Ui),i}function Is(t){if(\"function\"!=typeof t)throw new Ct(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Bs.Cache=Ui;var zs=vr((function(t,e){var i=(e=1==e.length&&Us(e[0])?Pe(e[0],Ge(so())):Pe(yn(e,1),Ge(so()))).length;return Hn((function(n){for(var r=-1,o=mi(n.length,i);++r<o;)n[r]=e[r].call(this,n[r]);return me(t,this,n)}))})),Rs=Hn((function(t,e){var i=ei(e,oo(Rs));return Wr(t,h,r,e,i)})),Es=Hn((function(t,e){var i=ei(e,oo(Es));return Wr(t,64,r,e,i)})),_s=to((function(t,e){return Wr(t,256,r,r,r,e)}));function Vs(t,e){return t===e||t!=t&&e!=e}var Ys=Xr(Pn),Gs=Xr((function(t,e){return t>=e})),Xs=An(function(){return arguments}())?An:function(t){return ia(t)&&Dt.call(t,\"callee\")&&!te.call(t,\"callee\")},Us=n.isArray,qs=ce?Ge(ce):function(t){return ia(t)&&Sn(t)==j};function Ks(t){return null!=t&&ta(t.length)&&!$s(t)}function Hs(t){return ia(t)&&Ks(t)}var Ws=fi||mh,Zs=fe?Ge(fe):function(t){return ia(t)&&Sn(t)==v};function Js(t){if(!ia(t))return!1;var e=Sn(t);return e==x||\"[object DOMException]\"==e||\"string\"==typeof t.message&&\"string\"==typeof t.name&&!oa(t)}function $s(t){if(!ea(t))return!1;var e=Sn(t);return e==b||e==w||\"[object AsyncFunction]\"==e||\"[object Proxy]\"==e}function Qs(t){return\"number\"==typeof t&&t==ga(t)}function ta(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=c}function ea(t){var e=typeof t;return null!=t&&(\"object\"==e||\"function\"==e)}function ia(t){return null!=t&&\"object\"==typeof t}var na=de?Ge(de):function(t){return ia(t)&&fo(t)==k};function ra(t){return\"number\"==typeof t||ia(t)&&Sn(t)==M}function oa(t){if(!ia(t)||Sn(t)!=S)return!1;var e=qt(t);if(null===e)return!0;var i=Dt.call(e,\"constructor\")&&e.constructor;return\"function\"==typeof i&&i instanceof i&&Ot.call(i)==zt}var sa=pe?Ge(pe):function(t){return ia(t)&&Sn(t)==N},aa=ge?Ge(ge):function(t){return ia(t)&&fo(t)==C};function ha(t){return\"string\"==typeof t||!Us(t)&&ia(t)&&Sn(t)==T}function la(t){return\"symbol\"==typeof t||ia(t)&&Sn(t)==L}var ua=ye?Ge(ye):function(t){return ia(t)&&ta(t.length)&&!!$t[Sn(t)]},ca=Xr(In),fa=Xr((function(t,e){return t<=e}));function da(t){if(!t)return[];if(Ks(t))return ha(t)?oi(t):Cr(t);if(se&&t[se])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[se]());var e=fo(t);return(e==k?Qe:e==C?ii:Va)(t)}function pa(t){return t?(t=ma(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ga(t){var e=pa(t),i=e%1;return e==e?i?e-i:e:0}function ya(t){return t?sn(ga(t),0,d):0}function ma(t){if(\"number\"==typeof t)return t;if(la(t))return f;if(ea(t)){var e=\"function\"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+\"\":e}if(\"string\"!=typeof t)return 0===t?t:+t;t=Ye(t);var i=pt.test(t);return i||yt.test(t)?ie(t.slice(2),i?2:8):dt.test(t)?f:+t}function va(t){return Tr(t,Da(t))}function xa(t){return null==t?\"\":ar(t)}var ba=Ar((function(t,e){if(ko(e)||Ks(e))Tr(e,Oa(e),t);else for(var i in e)Dt.call(e,i)&&Qi(t,i,e[i])})),wa=Ar((function(t,e){Tr(e,Da(e),t)})),ka=Ar((function(t,e,i,n){Tr(e,Da(e),t,n)})),Ma=Ar((function(t,e,i,n){Tr(e,Oa(e),t,n)})),Sa=to(on),Pa=Hn((function(t,e){t=St(t);var i=-1,n=e.length,o=n>2?e[2]:r;for(o&&vo(e[0],e[1],o)&&(n=1);++i<n;)for(var s=e[i],a=Da(s),h=-1,l=a.length;++h<l;){var u=a[h],c=t[u];(c===r||Vs(c,At[u])&&!Dt.call(t,u))&&(t[u]=s[u])}return t})),Na=Hn((function(t){return t.push(r,Jr),me(Ba,r,t)}));function Ca(t,e,i){var n=null==t?r:kn(t,e);return n===r?i:n}function Ta(t,e){return null!=t&&po(t,e,Cn)}var La=Er((function(t,e,i){null!=e&&\"function\"!=typeof e.toString&&(e=It.call(e)),t[e]=i}),eh(rh)),Aa=Er((function(t,e,i){null!=e&&\"function\"!=typeof e.toString&&(e=It.call(e)),Dt.call(t,e)?t[e].push(i):t[e]=[i]}),so),ja=Hn(Ln);function Oa(t){return Ks(t)?Hi(t):Bn(t)}function Da(t){return Ks(t)?Hi(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var i in St(t))e.push(i);return e}(t);var e=ko(t),i=[];for(var n in t)(\"constructor\"!=n||!e&&Dt.call(t,n))&&i.push(n);return i}(t)}var Fa=Ar((function(t,e,i){_n(t,e,i)})),Ba=Ar((function(t,e,i,n){_n(t,e,i,n)})),Ia=to((function(t,e){var i={};if(null==t)return i;var n=!1;e=Pe(e,(function(e){return e=mr(e,t),n||(n=e.length>1),e})),Tr(t,io(t),i),n&&(i=an(i,7,$r));for(var r=e.length;r--;)lr(i,e[r]);return i})),za=to((function(t,e){return null==t?{}:function(t,e){return Gn(t,e,(function(e,i){return Ta(t,i)}))}(t,e)}));function Ra(t,e){if(null==t)return{};var i=Pe(io(t),(function(t){return[t]}));return e=so(e),Gn(t,i,(function(t,i){return e(t,i[0])}))}var Ea=Hr(Oa),_a=Hr(Da);function Va(t){return null==t?[]:Xe(t,Oa(t))}var Ya=Fr((function(t,e,i){return e=e.toLowerCase(),t+(i?Ga(e):e)}));function Ga(t){return Ja(xa(t).toLowerCase())}function Xa(t){return(t=xa(t))&&t.replace(vt,We).replace(Ut,\"\")}var Ua=Fr((function(t,e,i){return t+(i?\"-\":\"\")+e.toLowerCase()})),qa=Fr((function(t,e,i){return t+(i?\" \":\"\")+e.toLowerCase()})),Ka=Dr(\"toLowerCase\"),Ha=Fr((function(t,e,i){return t+(i?\"_\":\"\")+e.toLowerCase()})),Wa=Fr((function(t,e,i){return t+(i?\" \":\"\")+Ja(e)})),Za=Fr((function(t,e,i){return t+(i?\" \":\"\")+e.toUpperCase()})),Ja=Dr(\"toUpperCase\");function $a(t,e,i){return t=xa(t),(e=i?r:e)===r?function(t){return Wt.test(t)}(t)?function(t){return t.match(Kt)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Qa=Hn((function(t,e){try{return me(t,r,e)}catch(t){return Js(t)?t:new wt(t)}})),th=to((function(t,e){return xe(e,(function(e){e=Ro(e),rn(t,e,As(t[e],t))})),t}));function eh(t){return function(){return t}}var ih=zr(),nh=zr(!0);function rh(t){return t}function oh(t){return Fn(\"function\"==typeof t?t:an(t,1))}var sh=Hn((function(t,e){return function(i){return Ln(i,t,e)}})),ah=Hn((function(t,e){return function(i){return Ln(t,i,e)}}));function hh(t,e,i){var n=Oa(e),r=wn(e,n);null!=i||ea(e)&&(r.length||!n.length)||(i=e,e=t,t=this,r=wn(e,Oa(e)));var o=!(ea(i)&&\"chain\"in i&&!i.chain),s=$s(t);return xe(r,(function(i){var n=e[i];t[i]=n,s&&(t.prototype[i]=function(){var e=this.__chain__;if(o||e){var i=t(this.__wrapped__),r=i.__actions__=Cr(this.__actions__);return r.push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,Ne([this.value()],arguments))})})),t}function lh(){}var uh=Vr(Pe),ch=Vr(we),fh=Vr(Le);function dh(t){return xo(t)?ze(Ro(t)):function(t){return function(e){return kn(e,t)}}(t)}var ph=Gr(),gh=Gr(!0);function yh(){return[]}function mh(){return!1}var vh,xh=_r((function(t,e){return t+e}),0),bh=qr(\"ceil\"),wh=_r((function(t,e){return t/e}),1),kh=qr(\"floor\"),Mh=_r((function(t,e){return t*e}),1),Sh=qr(\"round\"),Ph=_r((function(t,e){return t-e}),0);return Ri.after=function(t,e){if(\"function\"!=typeof e)throw new Ct(o);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},Ri.ary=Ts,Ri.assign=ba,Ri.assignIn=wa,Ri.assignInWith=ka,Ri.assignWith=Ma,Ri.at=Sa,Ri.before=Ls,Ri.bind=As,Ri.bindAll=th,Ri.bindKey=js,Ri.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Us(t)?t:[t]},Ri.chain=ds,Ri.chunk=function(t,e,i){e=(i?vo(t,e,i):e===r)?1:yi(ga(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,h=n(li(o/e));s<o;)h[a++]=er(t,s,s+=e);return h},Ri.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,r=[];++e<i;){var o=t[e];o&&(r[n++]=o)}return r},Ri.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),i=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ne(Us(i)?Cr(i):[i],yn(e,1))},Ri.cond=function(t){var e=null==t?0:t.length,i=so();return t=e?Pe(t,(function(t){if(\"function\"!=typeof t[1])throw new Ct(o);return[i(t[0]),t[1]]})):[],Hn((function(i){for(var n=-1;++n<e;){var r=t[n];if(me(r[0],this,i))return me(r[1],this,i)}}))},Ri.conforms=function(t){return function(t){var e=Oa(t);return function(i){return hn(i,t,e)}}(an(t,1))},Ri.constant=eh,Ri.countBy=ys,Ri.create=function(t,e){var i=Ei(t);return null==e?i:nn(i,e)},Ri.curry=function t(e,i,n){var o=Wr(e,8,r,r,r,r,r,i=n?r:i);return o.placeholder=t.placeholder,o},Ri.curryRight=function t(e,i,n){var o=Wr(e,16,r,r,r,r,r,i=n?r:i);return o.placeholder=t.placeholder,o},Ri.debounce=Os,Ri.defaults=Pa,Ri.defaultsDeep=Na,Ri.defer=Ds,Ri.delay=Fs,Ri.difference=Vo,Ri.differenceBy=Yo,Ri.differenceWith=Go,Ri.drop=function(t,e,i){var n=null==t?0:t.length;return n?er(t,(e=i||e===r?1:ga(e))<0?0:e,n):[]},Ri.dropRight=function(t,e,i){var n=null==t?0:t.length;return n?er(t,0,(e=n-(e=i||e===r?1:ga(e)))<0?0:e):[]},Ri.dropRightWhile=function(t,e){return t&&t.length?cr(t,so(e,3),!0,!0):[]},Ri.dropWhile=function(t,e){return t&&t.length?cr(t,so(e,3),!0):[]},Ri.fill=function(t,e,i,n){var o=null==t?0:t.length;return o?(i&&\"number\"!=typeof i&&vo(t,e,i)&&(i=0,n=o),function(t,e,i,n){var o=t.length;for((i=ga(i))<0&&(i=-i>o?0:o+i),(n=n===r||n>o?o:ga(n))<0&&(n+=o),n=i>n?0:ya(n);i<n;)t[i++]=e;return t}(t,e,i,n)):[]},Ri.filter=function(t,e){return(Us(t)?ke:gn)(t,so(e,3))},Ri.flatMap=function(t,e){return yn(Ss(t,e),1)},Ri.flatMapDeep=function(t,e){return yn(Ss(t,e),u)},Ri.flatMapDepth=function(t,e,i){return i=i===r?1:ga(i),yn(Ss(t,e),i)},Ri.flatten=qo,Ri.flattenDeep=function(t){return null!=t&&t.length?yn(t,u):[]},Ri.flattenDepth=function(t,e){return null!=t&&t.length?yn(t,e=e===r?1:ga(e)):[]},Ri.flip=function(t){return Wr(t,512)},Ri.flow=ih,Ri.flowRight=nh,Ri.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n},Ri.functions=function(t){return null==t?[]:wn(t,Oa(t))},Ri.functionsIn=function(t){return null==t?[]:wn(t,Da(t))},Ri.groupBy=ws,Ri.initial=function(t){return null!=t&&t.length?er(t,0,-1):[]},Ri.intersection=Ho,Ri.intersectionBy=Wo,Ri.intersectionWith=Zo,Ri.invert=La,Ri.invertBy=Aa,Ri.invokeMap=ks,Ri.iteratee=oh,Ri.keyBy=Ms,Ri.keys=Oa,Ri.keysIn=Da,Ri.map=Ss,Ri.mapKeys=function(t,e){var i={};return e=so(e,3),xn(t,(function(t,n,r){rn(i,e(t,n,r),t)})),i},Ri.mapValues=function(t,e){var i={};return e=so(e,3),xn(t,(function(t,n,r){rn(i,n,e(t,n,r))})),i},Ri.matches=function(t){return Rn(an(t,1))},Ri.matchesProperty=function(t,e){return En(t,an(e,1))},Ri.memoize=Bs,Ri.merge=Fa,Ri.mergeWith=Ba,Ri.method=sh,Ri.methodOf=ah,Ri.mixin=hh,Ri.negate=Is,Ri.nthArg=function(t){return t=ga(t),Hn((function(e){return Vn(e,t)}))},Ri.omit=Ia,Ri.omitBy=function(t,e){return Ra(t,Is(so(e)))},Ri.once=function(t){return Ls(2,t)},Ri.orderBy=function(t,e,i,n){return null==t?[]:(Us(e)||(e=null==e?[]:[e]),Us(i=n?r:i)||(i=null==i?[]:[i]),Yn(t,e,i))},Ri.over=uh,Ri.overArgs=zs,Ri.overEvery=ch,Ri.overSome=fh,Ri.partial=Rs,Ri.partialRight=Es,Ri.partition=Ps,Ri.pick=za,Ri.pickBy=Ra,Ri.property=dh,Ri.propertyOf=function(t){return function(e){return null==t?r:kn(t,e)}},Ri.pull=$o,Ri.pullAll=Qo,Ri.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?Xn(t,e,so(i,2)):t},Ri.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?Xn(t,e,r,i):t},Ri.pullAt=ts,Ri.range=ph,Ri.rangeRight=gh,Ri.rearg=_s,Ri.reject=function(t,e){return(Us(t)?ke:gn)(t,Is(so(e,3)))},Ri.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],o=t.length;for(e=so(e,3);++n<o;){var s=t[n];e(s,n,t)&&(i.push(s),r.push(n))}return Un(t,r),i},Ri.rest=function(t,e){if(\"function\"!=typeof t)throw new Ct(o);return Hn(t,e=e===r?e:ga(e))},Ri.reverse=es,Ri.sampleSize=function(t,e,i){return e=(i?vo(t,e,i):e===r)?1:ga(e),(Us(t)?Zi:Zn)(t,e)},Ri.set=function(t,e,i){return null==t?t:Jn(t,e,i)},Ri.setWith=function(t,e,i,n){return n=\"function\"==typeof n?n:r,null==t?t:Jn(t,e,i,n)},Ri.shuffle=function(t){return(Us(t)?Ji:tr)(t)},Ri.slice=function(t,e,i){var n=null==t?0:t.length;return n?(i&&\"number\"!=typeof i&&vo(t,e,i)?(e=0,i=n):(e=null==e?0:ga(e),i=i===r?n:ga(i)),er(t,e,i)):[]},Ri.sortBy=Ns,Ri.sortedUniq=function(t){return t&&t.length?or(t):[]},Ri.sortedUniqBy=function(t,e){return t&&t.length?or(t,so(e,2)):[]},Ri.split=function(t,e,i){return i&&\"number\"!=typeof i&&vo(t,e,i)&&(e=i=r),(i=i===r?d:i>>>0)?(t=xa(t))&&(\"string\"==typeof e||null!=e&&!sa(e))&&!(e=ar(e))&&$e(t)?xr(oi(t),0,i):t.split(e,i):[]},Ri.spread=function(t,e){if(\"function\"!=typeof t)throw new Ct(o);return e=null==e?0:yi(ga(e),0),Hn((function(i){var n=i[e],r=xr(i,0,e);return n&&Ne(r,n),me(t,this,r)}))},Ri.tail=function(t){var e=null==t?0:t.length;return e?er(t,1,e):[]},Ri.take=function(t,e,i){return t&&t.length?er(t,0,(e=i||e===r?1:ga(e))<0?0:e):[]},Ri.takeRight=function(t,e,i){var n=null==t?0:t.length;return n?er(t,(e=n-(e=i||e===r?1:ga(e)))<0?0:e,n):[]},Ri.takeRightWhile=function(t,e){return t&&t.length?cr(t,so(e,3),!1,!0):[]},Ri.takeWhile=function(t,e){return t&&t.length?cr(t,so(e,3)):[]},Ri.tap=function(t,e){return e(t),t},Ri.throttle=function(t,e,i){var n=!0,r=!0;if(\"function\"!=typeof t)throw new Ct(o);return ea(i)&&(n=\"leading\"in i?!!i.leading:n,r=\"trailing\"in i?!!i.trailing:r),Os(t,e,{leading:n,maxWait:e,trailing:r})},Ri.thru=ps,Ri.toArray=da,Ri.toPairs=Ea,Ri.toPairsIn=_a,Ri.toPath=function(t){return Us(t)?Pe(t,Ro):la(t)?[t]:Cr(zo(xa(t)))},Ri.toPlainObject=va,Ri.transform=function(t,e,i){var n=Us(t),r=n||Ws(t)||ua(t);if(e=so(e,4),null==i){var o=t&&t.constructor;i=r?n?new o:[]:ea(t)&&$s(o)?Ei(qt(t)):{}}return(r?xe:xn)(t,(function(t,n,r){return e(i,t,n,r)})),i},Ri.unary=function(t){return Ts(t,1)},Ri.union=is,Ri.unionBy=ns,Ri.unionWith=rs,Ri.uniq=function(t){return t&&t.length?hr(t):[]},Ri.uniqBy=function(t,e){return t&&t.length?hr(t,so(e,2)):[]},Ri.uniqWith=function(t,e){return e=\"function\"==typeof e?e:r,t&&t.length?hr(t,r,e):[]},Ri.unset=function(t,e){return null==t||lr(t,e)},Ri.unzip=os,Ri.unzipWith=ss,Ri.update=function(t,e,i){return null==t?t:ur(t,e,yr(i))},Ri.updateWith=function(t,e,i,n){return n=\"function\"==typeof n?n:r,null==t?t:ur(t,e,yr(i),n)},Ri.values=Va,Ri.valuesIn=function(t){return null==t?[]:Xe(t,Da(t))},Ri.without=as,Ri.words=$a,Ri.wrap=function(t,e){return Rs(yr(e),t)},Ri.xor=hs,Ri.xorBy=ls,Ri.xorWith=us,Ri.zip=cs,Ri.zipObject=function(t,e){return pr(t||[],e||[],Qi)},Ri.zipObjectDeep=function(t,e){return pr(t||[],e||[],Jn)},Ri.zipWith=fs,Ri.entries=Ea,Ri.entriesIn=_a,Ri.extend=wa,Ri.extendWith=ka,hh(Ri,Ri),Ri.add=xh,Ri.attempt=Qa,Ri.camelCase=Ya,Ri.capitalize=Ga,Ri.ceil=bh,Ri.clamp=function(t,e,i){return i===r&&(i=e,e=r),i!==r&&(i=(i=ma(i))==i?i:0),e!==r&&(e=(e=ma(e))==e?e:0),sn(ma(t),e,i)},Ri.clone=function(t){return an(t,4)},Ri.cloneDeep=function(t){return an(t,5)},Ri.cloneDeepWith=function(t,e){return an(t,5,e=\"function\"==typeof e?e:r)},Ri.cloneWith=function(t,e){return an(t,4,e=\"function\"==typeof e?e:r)},Ri.conformsTo=function(t,e){return null==e||hn(t,e,Oa(e))},Ri.deburr=Xa,Ri.defaultTo=function(t,e){return null==t||t!=t?e:t},Ri.divide=wh,Ri.endsWith=function(t,e,i){t=xa(t),e=ar(e);var n=t.length,o=i=i===r?n:sn(ga(i),0,n);return(i-=e.length)>=0&&t.slice(i,o)==e},Ri.eq=Vs,Ri.escape=function(t){return(t=xa(t))&&H.test(t)?t.replace(q,Ze):t},Ri.escapeRegExp=function(t){return(t=xa(t))&&it.test(t)?t.replace(et,\"\\\\$&\"):t},Ri.every=function(t,e,i){var n=Us(t)?we:dn;return i&&vo(t,e,i)&&(e=r),n(t,so(e,3))},Ri.find=ms,Ri.findIndex=Xo,Ri.findKey=function(t,e){return je(t,so(e,3),xn)},Ri.findLast=vs,Ri.findLastIndex=Uo,Ri.findLastKey=function(t,e){return je(t,so(e,3),bn)},Ri.floor=kh,Ri.forEach=xs,Ri.forEachRight=bs,Ri.forIn=function(t,e){return null==t?t:mn(t,so(e,3),Da)},Ri.forInRight=function(t,e){return null==t?t:vn(t,so(e,3),Da)},Ri.forOwn=function(t,e){return t&&xn(t,so(e,3))},Ri.forOwnRight=function(t,e){return t&&bn(t,so(e,3))},Ri.get=Ca,Ri.gt=Ys,Ri.gte=Gs,Ri.has=function(t,e){return null!=t&&po(t,e,Nn)},Ri.hasIn=Ta,Ri.head=Ko,Ri.identity=rh,Ri.includes=function(t,e,i,n){t=Ks(t)?t:Va(t),i=i&&!n?ga(i):0;var r=t.length;return i<0&&(i=yi(r+i,0)),ha(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&De(t,e,i)>-1},Ri.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:ga(i);return r<0&&(r=yi(n+r,0)),De(t,e,r)},Ri.inRange=function(t,e,i){return e=pa(e),i===r?(i=e,e=0):i=pa(i),function(t,e,i){return t>=mi(e,i)&&t<yi(e,i)}(t=ma(t),e,i)},Ri.invoke=ja,Ri.isArguments=Xs,Ri.isArray=Us,Ri.isArrayBuffer=qs,Ri.isArrayLike=Ks,Ri.isArrayLikeObject=Hs,Ri.isBoolean=function(t){return!0===t||!1===t||ia(t)&&Sn(t)==m},Ri.isBuffer=Ws,Ri.isDate=Zs,Ri.isElement=function(t){return ia(t)&&1===t.nodeType&&!oa(t)},Ri.isEmpty=function(t){if(null==t)return!0;if(Ks(t)&&(Us(t)||\"string\"==typeof t||\"function\"==typeof t.splice||Ws(t)||ua(t)||Xs(t)))return!t.length;var e=fo(t);if(e==k||e==C)return!t.size;if(ko(t))return!Bn(t).length;for(var i in t)if(Dt.call(t,i))return!1;return!0},Ri.isEqual=function(t,e){return jn(t,e)},Ri.isEqualWith=function(t,e,i){var n=(i=\"function\"==typeof i?i:r)?i(t,e):r;return n===r?jn(t,e,r,i):!!n},Ri.isError=Js,Ri.isFinite=function(t){return\"number\"==typeof t&&di(t)},Ri.isFunction=$s,Ri.isInteger=Qs,Ri.isLength=ta,Ri.isMap=na,Ri.isMatch=function(t,e){return t===e||On(t,e,ho(e))},Ri.isMatchWith=function(t,e,i){return i=\"function\"==typeof i?i:r,On(t,e,ho(e),i)},Ri.isNaN=function(t){return ra(t)&&t!=+t},Ri.isNative=function(t){if(wo(t))throw new wt(\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\");return Dn(t)},Ri.isNil=function(t){return null==t},Ri.isNull=function(t){return null===t},Ri.isNumber=ra,Ri.isObject=ea,Ri.isObjectLike=ia,Ri.isPlainObject=oa,Ri.isRegExp=sa,Ri.isSafeInteger=function(t){return Qs(t)&&t>=-9007199254740991&&t<=c},Ri.isSet=aa,Ri.isString=ha,Ri.isSymbol=la,Ri.isTypedArray=ua,Ri.isUndefined=function(t){return t===r},Ri.isWeakMap=function(t){return ia(t)&&fo(t)==A},Ri.isWeakSet=function(t){return ia(t)&&\"[object WeakSet]\"==Sn(t)},Ri.join=function(t,e){return null==t?\"\":pi.call(t,e)},Ri.kebabCase=Ua,Ri.last=Jo,Ri.lastIndexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=n;return i!==r&&(o=(o=ga(i))<0?yi(n+o,0):mi(o,n-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,o):Oe(t,Be,o,!0)},Ri.lowerCase=qa,Ri.lowerFirst=Ka,Ri.lt=ca,Ri.lte=fa,Ri.max=function(t){return t&&t.length?pn(t,rh,Pn):r},Ri.maxBy=function(t,e){return t&&t.length?pn(t,so(e,2),Pn):r},Ri.mean=function(t){return Ie(t,rh)},Ri.meanBy=function(t,e){return Ie(t,so(e,2))},Ri.min=function(t){return t&&t.length?pn(t,rh,In):r},Ri.minBy=function(t,e){return t&&t.length?pn(t,so(e,2),In):r},Ri.stubArray=yh,Ri.stubFalse=mh,Ri.stubObject=function(){return{}},Ri.stubString=function(){return\"\"},Ri.stubTrue=function(){return!0},Ri.multiply=Mh,Ri.nth=function(t,e){return t&&t.length?Vn(t,ga(e)):r},Ri.noConflict=function(){return oe._===this&&(oe._=Rt),this},Ri.noop=lh,Ri.now=Cs,Ri.pad=function(t,e,i){t=xa(t);var n=(e=ga(e))?ri(t):0;if(!e||n>=e)return t;var r=(e-n)/2;return Yr(ui(r),i)+t+Yr(li(r),i)},Ri.padEnd=function(t,e,i){t=xa(t);var n=(e=ga(e))?ri(t):0;return e&&n<e?t+Yr(e-n,i):t},Ri.padStart=function(t,e,i){t=xa(t);var n=(e=ga(e))?ri(t):0;return e&&n<e?Yr(e-n,i)+t:t},Ri.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),xi(xa(t).replace(nt,\"\"),e||0)},Ri.random=function(t,e,i){if(i&&\"boolean\"!=typeof i&&vo(t,e,i)&&(e=i=r),i===r&&(\"boolean\"==typeof e?(i=e,e=r):\"boolean\"==typeof t&&(i=t,t=r)),t===r&&e===r?(t=0,e=1):(t=pa(t),e===r?(e=t,t=0):e=pa(e)),t>e){var n=t;t=e,e=n}if(i||t%1||e%1){var o=bi();return mi(t+o*(e-t+ee(\"1e-\"+((o+\"\").length-1))),e)}return qn(t,e)},Ri.reduce=function(t,e,i){var n=Us(t)?Ce:Ee,r=arguments.length<3;return n(t,so(e,4),i,r,cn)},Ri.reduceRight=function(t,e,i){var n=Us(t)?Te:Ee,r=arguments.length<3;return n(t,so(e,4),i,r,fn)},Ri.repeat=function(t,e,i){return e=(i?vo(t,e,i):e===r)?1:ga(e),Kn(xa(t),e)},Ri.replace=function(){var t=arguments,e=xa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Ri.result=function(t,e,i){var n=-1,o=(e=mr(e,t)).length;for(o||(o=1,t=r);++n<o;){var s=null==t?r:t[Ro(e[n])];s===r&&(n=o,s=i),t=$s(s)?s.call(t):s}return t},Ri.round=Sh,Ri.runInContext=t,Ri.sample=function(t){return(Us(t)?Wi:Wn)(t)},Ri.size=function(t){if(null==t)return 0;if(Ks(t))return ha(t)?ri(t):t.length;var e=fo(t);return e==k||e==C?t.size:Bn(t).length},Ri.snakeCase=Ha,Ri.some=function(t,e,i){var n=Us(t)?Le:ir;return i&&vo(t,e,i)&&(e=r),n(t,so(e,3))},Ri.sortedIndex=function(t,e){return nr(t,e)},Ri.sortedIndexBy=function(t,e,i){return rr(t,e,so(i,2))},Ri.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=nr(t,e);if(n<i&&Vs(t[n],e))return n}return-1},Ri.sortedLastIndex=function(t,e){return nr(t,e,!0)},Ri.sortedLastIndexBy=function(t,e,i){return rr(t,e,so(i,2),!0)},Ri.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=nr(t,e,!0)-1;if(Vs(t[i],e))return i}return-1},Ri.startCase=Wa,Ri.startsWith=function(t,e,i){return t=xa(t),i=null==i?0:sn(ga(i),0,t.length),e=ar(e),t.slice(i,i+e.length)==e},Ri.subtract=Ph,Ri.sum=function(t){return t&&t.length?_e(t,rh):0},Ri.sumBy=function(t,e){return t&&t.length?_e(t,so(e,2)):0},Ri.template=function(t,e,i){var n=Ri.templateSettings;i&&vo(t,e,i)&&(e=r),t=xa(t),e=ka({},e,n,Zr);var o,s,a=ka({},e.imports,n.imports,Zr),h=Oa(a),l=Xe(a,h),u=0,c=e.interpolate||xt,f=\"__p += '\",d=Pt((e.escape||xt).source+\"|\"+c.source+\"|\"+(c===J?ct:xt).source+\"|\"+(e.evaluate||xt).source+\"|$\",\"g\"),p=\"//# sourceURL=\"+(Dt.call(e,\"sourceURL\")?(e.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++Jt+\"]\")+\"\\n\";t.replace(d,(function(e,i,n,r,a,h){return n||(n=r),f+=t.slice(u,h).replace(bt,Je),i&&(o=!0,f+=\"' +\\n__e(\"+i+\") +\\n'\"),a&&(s=!0,f+=\"';\\n\"+a+\";\\n__p += '\"),n&&(f+=\"' +\\n((__t = (\"+n+\")) == null ? '' : __t) +\\n'\"),u=h+e.length,e})),f+=\"';\\n\";var g=Dt.call(e,\"variable\")&&e.variable;if(g){if(lt.test(g))throw new wt(\"Invalid `variable` option passed into `_.template`\")}else f=\"with (obj) {\\n\"+f+\"\\n}\\n\";f=(s?f.replace(Y,\"\"):f).replace(G,\"$1\").replace(X,\"$1;\"),f=\"function(\"+(g||\"obj\")+\") {\\n\"+(g?\"\":\"obj || (obj = {});\\n\")+\"var __t, __p = ''\"+(o?\", __e = _.escape\":\"\")+(s?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+f+\"return __p\\n}\";var y=Qa((function(){return kt(h,p+\"return \"+f).apply(r,l)}));if(y.source=f,Js(y))throw y;return y},Ri.times=function(t,e){if((t=ga(t))<1||t>c)return[];var i=d,n=mi(t,d);e=so(e),t-=d;for(var r=Ve(n,e);++i<t;)e(i);return r},Ri.toFinite=pa,Ri.toInteger=ga,Ri.toLength=ya,Ri.toLower=function(t){return xa(t).toLowerCase()},Ri.toNumber=ma,Ri.toSafeInteger=function(t){return t?sn(ga(t),-9007199254740991,c):0===t?t:0},Ri.toString=xa,Ri.toUpper=function(t){return xa(t).toUpperCase()},Ri.trim=function(t,e,i){if((t=xa(t))&&(i||e===r))return Ye(t);if(!t||!(e=ar(e)))return t;var n=oi(t),o=oi(e);return xr(n,qe(n,o),Ke(n,o)+1).join(\"\")},Ri.trimEnd=function(t,e,i){if((t=xa(t))&&(i||e===r))return t.slice(0,si(t)+1);if(!t||!(e=ar(e)))return t;var n=oi(t);return xr(n,0,Ke(n,oi(e))+1).join(\"\")},Ri.trimStart=function(t,e,i){if((t=xa(t))&&(i||e===r))return t.replace(nt,\"\");if(!t||!(e=ar(e)))return t;var n=oi(t);return xr(n,qe(n,oi(e))).join(\"\")},Ri.truncate=function(t,e){var i=30,n=\"...\";if(ea(e)){var o=\"separator\"in e?e.separator:o;i=\"length\"in e?ga(e.length):i,n=\"omission\"in e?ar(e.omission):n}var s=(t=xa(t)).length;if($e(t)){var a=oi(t);s=a.length}if(i>=s)return t;var h=i-ri(n);if(h<1)return n;var l=a?xr(a,0,h).join(\"\"):t.slice(0,h);if(o===r)return l+n;if(a&&(h+=l.length-h),sa(o)){if(t.slice(h).search(o)){var u,c=l;for(o.global||(o=Pt(o.source,xa(ft.exec(o))+\"g\")),o.lastIndex=0;u=o.exec(c);)var f=u.index;l=l.slice(0,f===r?h:f)}}else if(t.indexOf(ar(o),h)!=h){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+n},Ri.unescape=function(t){return(t=xa(t))&&K.test(t)?t.replace(U,ai):t},Ri.uniqueId=function(t){var e=++Ft;return xa(t)+e},Ri.upperCase=Za,Ri.upperFirst=Ja,Ri.each=xs,Ri.eachRight=bs,Ri.first=Ko,hh(Ri,(vh={},xn(Ri,(function(t,e){Dt.call(Ri.prototype,e)||(vh[e]=t)})),vh),{chain:!1}),Ri.VERSION=\"4.17.21\",xe([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],(function(t){Ri[t].placeholder=Ri})),xe([\"drop\",\"take\"],(function(t,e){Yi.prototype[t]=function(i){i=i===r?1:yi(ga(i),0);var n=this.__filtered__&&!e?new Yi(this):this.clone();return n.__filtered__?n.__takeCount__=mi(i,n.__takeCount__):n.__views__.push({size:mi(i,d),type:t+(n.__dir__<0?\"Right\":\"\")}),n},Yi.prototype[t+\"Right\"]=function(e){return this.reverse()[t](e).reverse()}})),xe([\"filter\",\"map\",\"takeWhile\"],(function(t,e){var i=e+1,n=1==i||3==i;Yi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}})),xe([\"head\",\"last\"],(function(t,e){var i=\"take\"+(e?\"Right\":\"\");Yi.prototype[t]=function(){return this[i](1).value()[0]}})),xe([\"initial\",\"tail\"],(function(t,e){var i=\"drop\"+(e?\"\":\"Right\");Yi.prototype[t]=function(){return this.__filtered__?new Yi(this):this[i](1)}})),Yi.prototype.compact=function(){return this.filter(rh)},Yi.prototype.find=function(t){return this.filter(t).head()},Yi.prototype.findLast=function(t){return this.reverse().find(t)},Yi.prototype.invokeMap=Hn((function(t,e){return\"function\"==typeof t?new Yi(this):this.map((function(i){return Ln(i,t,e)}))})),Yi.prototype.reject=function(t){return this.filter(Is(so(t)))},Yi.prototype.slice=function(t,e){t=ga(t);var i=this;return i.__filtered__&&(t>0||e<0)?new Yi(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==r&&(i=(e=ga(e))<0?i.dropRight(-e):i.take(e-t)),i)},Yi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Yi.prototype.toArray=function(){return this.take(d)},xn(Yi.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=Ri[n?\"take\"+(\"last\"==e?\"Right\":\"\"):e],s=n||/^find/.test(e);o&&(Ri.prototype[e]=function(){var e=this.__wrapped__,a=n?[1]:arguments,h=e instanceof Yi,l=a[0],u=h||Us(e),c=function(t){var e=o.apply(Ri,Ne([t],a));return n&&f?e[0]:e};u&&i&&\"function\"==typeof l&&1!=l.length&&(h=u=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=h&&!d;if(!s&&u){e=g?e:new Yi(this);var y=t.apply(e,a);return y.__actions__.push({func:ps,args:[c],thisArg:r}),new Vi(y,f)}return p&&g?t.apply(this,a):(y=this.thru(c),p?n?y.value()[0]:y.value():y)})})),xe([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],(function(t){var e=Tt[t],i=/^(?:push|sort|unshift)$/.test(t)?\"tap\":\"thru\",n=/^(?:pop|shift)$/.test(t);Ri.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(Us(r)?r:[],t)}return this[i]((function(i){return e.apply(Us(i)?i:[],t)}))}})),xn(Yi.prototype,(function(t,e){var i=Ri[e];if(i){var n=i.name+\"\";Dt.call(Li,n)||(Li[n]=[]),Li[n].push({name:e,func:i})}})),Li[Rr(r,2).name]=[{name:\"wrapper\",func:r}],Yi.prototype.clone=function(){var t=new Yi(this.__wrapped__);return t.__actions__=Cr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Cr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Cr(this.__views__),t},Yi.prototype.reverse=function(){if(this.__filtered__){var t=new Yi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Yi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Us(t),n=e<0,r=i?t.length:0,o=function(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],s=o.size;switch(o.type){case\"drop\":t+=s;break;case\"dropRight\":e-=s;break;case\"take\":e=mi(e,t+s);break;case\"takeRight\":t=yi(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,h=a-s,l=n?a:s-1,u=this.__iteratees__,c=u.length,f=0,d=mi(h,this.__takeCount__);if(!i||!n&&r==h&&d==h)return fr(t,this.__actions__);var p=[];t:for(;h--&&f<d;){for(var g=-1,y=t[l+=e];++g<c;){var m=u[g],v=m.iteratee,x=m.type,b=v(y);if(2==x)y=b;else if(!b){if(1==x)continue t;break t}}p[f++]=y}return p},Ri.prototype.at=gs,Ri.prototype.chain=function(){return ds(this)},Ri.prototype.commit=function(){return new Vi(this.value(),this.__chain__)},Ri.prototype.next=function(){this.__values__===r&&(this.__values__=da(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Ri.prototype.plant=function(t){for(var e,i=this;i instanceof _i;){var n=_o(i);n.__index__=0,n.__values__=r,e?o.__wrapped__=n:e=n;var o=n;i=i.__wrapped__}return o.__wrapped__=t,e},Ri.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Yi){var e=t;return this.__actions__.length&&(e=new Yi(this)),(e=e.reverse()).__actions__.push({func:ps,args:[es],thisArg:r}),new Vi(e,this.__chain__)}return this.thru(es)},Ri.prototype.toJSON=Ri.prototype.valueOf=Ri.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},Ri.prototype.first=Ri.prototype.head,se&&(Ri.prototype[se]=function(){return this}),Ri}();\"function\"==typeof n&&\"object\"==typeof n.amd&&n.amd?(oe._=hi,n((function(){return hi}))):ae?((ae.exports=hi)._=hi,se._=hi):oe._=hi}).call(this)},9567:(t,e,i)=>{\"use strict\";function n(t,e,i){if(!t)return i;let n=t[e];return void 0===n?i:n}i.d(e,{N:()=>n})},982:(t,e,i)=>{\"use strict\";i.d(e,{d9:()=>r});var n=i(9567);function r(t,e,i){const r=function(t,e,i){return t?n.N(t[e.objectName],e.propertyName,i):i}(t,e,i);return r&&r.solid?r.solid.color:null==r||\"object\"==typeof r&&!r.solid?i:r}},4554:(t,e,i)=>{\"use strict\";i.d(e,{U:()=>r});var n=i(982);class r{static getDefault(){return new this}static createPropertyIdentifier(t,e){return{objectName:t,propertyName:e}}static parse(t){let e,i=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return i;e=i.getProperties();for(let r in e)for(let o in e[r]){const s=i[r][o];i[r][o]=n.d9(t.metadata.objects,e[r][o],s)}return i}static isPropertyEnumerable(t){return!r.InnumerablePropertyPrefix.test(t)}static enumerateObjectInstances(t,e){let i=t&&t[e.objectName];if(!i)return[];let n={objectName:e.objectName,selector:null,properties:{}};for(let t in i)i.hasOwnProperty(t)&&(n.properties[t]=i[t]);return{instances:[n]}}getProperties(){let t={};return Object.keys(this).forEach((e=>{if(r.isPropertyEnumerable(e)){let i=Object.keys(this[e]);t[e]={},i.forEach((i=>{r.isPropertyEnumerable(e)&&(t[e][i]=r.createPropertyIdentifier(e,i))}))}})),t}}r.InnumerablePropertyPrefix=/^_/},7970:(t,e,i)=>{\"use strict\";i.d(e,{p2:()=>n.p});var n=i(880)},880:(t,e,i)=>{\"use strict\";i.d(e,{p:()=>a});var n=i(6837),r=i(282),o=i(5572),s=i(6738);function a(t,e,i=500){return new h({tooltipService:t,rootElement:e,handleTouchDelay:i})}class h{constructor(t){this.visualHostTooltipService=t.tooltipService,this.rootElement=t.rootElement,this.handleTouchDelay=t.handleTouchDelay}addTooltip(t,e,i,r){if(!t||!this.visualHostTooltipService.enabled())return;let a=this.rootElement,h=(0,n.Z)(t.nodes());h.on(\"mouseover.tooltip\",((t,n)=>{if(!this.canDisplayTooltip(t))return;let r=this.getCoordinates(t,a,!0),o=e(n);if(null==o)return;let s=i?[i(n)]:[];this.visualHostTooltipService.show({coordinates:r,isTouchEvent:!1,dataItems:o,identities:s})})),h.on(\"mouseout.tooltip\",((t,e)=>{this.visualHostTooltipService.hide({isTouchEvent:!1,immediately:!1})})),h.on(\"mousemove.tooltip\",((t,n)=>{if(!this.canDisplayTooltip(t))return;let o,s=this.getCoordinates(t,a,!0);if(r&&(o=e(n),null==o))return;let h=i?[i(n)]:[];this.visualHostTooltipService.move({coordinates:s,isTouchEvent:!1,dataItems:o,identities:h})}));let l=o.ME(),u=o.dF();o.bQ(),h.on(l+\".tooltip\",((t,n)=>{let r=this.getCoordinates(t,a,!0),o=e(n),h=i?[i(n)]:[];this.handleTouchTimeoutId=s.setTimeout((()=>{this.visualHostTooltipService.show({coordinates:r,isTouchEvent:!0,dataItems:o,identities:h}),this.handleTouchTimeoutId=void 0}),this.handleTouchDelay)})),h.on(u+\".tooltip\",(()=>{this.cancelTouchTimeoutEvents()}))}cancelTouchTimeoutEvents(){this.handleTouchTimeoutId&&clearTimeout(this.handleTouchTimeoutId)}hide(){this.visualHostTooltipService.hide({immediately:!0,isTouchEvent:!1})}canDisplayTooltip(t){let e=!0;const i=t;return void 0!==i.buttons&&(e=!(0!==i.buttons)),e=e&&null==this.handleTouchTimeoutId,e}getCoordinates(t,e,i){let n;if(i){let i,r=t;for(;i=r.sourceEvent;)r=i;let o=e.getBoundingClientRect();n=[r.clientX-o.left-e.clientLeft,r.clientY-o.top-e.clientTop]}else{let e=(0,r.Z)(t);e&&e.length>0&&(n=e[0])}return n}}},5572:(t,e,i)=>{\"use strict\";function n(){return\"touchstart\"}function r(){return\"touchend\"}function o(){return!1}i.d(e,{ME:()=>n,bQ:()=>o,dF:()=>r})},6455:(t,e,i)=>{\"use strict\";function n(t){return\"object\"==typeof t&&\"length\"in t?t:Array.from(t)}i.d(e,{Z:()=>n})},5486:(t,e,i)=>{\"use strict\";function n(t){return function(){return t}}i.d(e,{Z:()=>n})},5418:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>a});var n=i(844),r=i(8156);function o(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===r.P&&e.documentElement.namespaceURI===r.P?e.createElement(t):e.createElementNS(i,t)}}function s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function a(t){var e=(0,n.Z)(t);return(e.local?s:o)(e)}},1304:(t,e,i)=>{\"use strict\";function n(t){return function(){return this.matches(t)}}function r(t){return function(e){return e.matches(t)}}i.d(e,{P:()=>r,Z:()=>n})},844:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>r});var n=i(8156);function r(t){var e=t+=\"\",i=e.indexOf(\":\");return i>=0&&\"xmlns\"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),n.Z.hasOwnProperty(e)?{space:n.Z[e],local:t}:t}},8156:(t,e,i)=>{\"use strict\";i.d(e,{P:()=>n,Z:()=>r});var n=\"http://www.w3.org/1999/xhtml\";const r={svg:\"http://www.w3.org/2000/svg\",xhtml:n,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"}},574:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>r});var n=i(5691);function r(t,e){if(t=(0,n.Z)(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var r=i.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}},282:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>o});var n=i(574),r=i(5691);function o(t,e){return t.target&&(t=(0,r.Z)(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>(0,n.Z)(t,e)))}},6837:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>o});var n=i(6455),r=i(762);function o(t){return\"string\"==typeof t?new r.Y1([document.querySelectorAll(t)],[document.documentElement]):new r.Y1([null==t?[]:(0,n.Z)(t)],r.Jz)}},3855:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>r});var n=i(5418);function r(t){var e=\"function\"==typeof t?t:(0,n.Z)(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}},8190:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>u});var n=i(844);function r(t){return function(){this.removeAttribute(t)}}function o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function s(t,e){return function(){this.setAttribute(t,e)}}function a(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function h(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function l(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function u(t,e){var i=(0,n.Z)(t);if(arguments.length<2){var u=this.node();return i.local?u.getAttributeNS(i.space,i.local):u.getAttribute(i)}return this.each((null==e?i.local?o:r:\"function\"==typeof e?i.local?l:h:i.local?a:s)(i,e))}},9049:(t,e,i)=>{\"use strict\";function n(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}i.d(e,{Z:()=>n})},9660:(t,e,i)=>{\"use strict\";function n(t){return t.trim().split(/^|\\s+/)}function r(t){return t.classList||new o(t)}function o(t){this._node=t,this._names=n(t.getAttribute(\"class\")||\"\")}function s(t,e){for(var i=r(t),n=-1,o=e.length;++n<o;)i.add(e[n])}function a(t,e){for(var i=r(t),n=-1,o=e.length;++n<o;)i.remove(e[n])}function h(t){return function(){s(this,t)}}function l(t){return function(){a(this,t)}}function u(t,e){return function(){(e.apply(this,arguments)?s:a)(this,t)}}function c(t,e){var i=n(t+\"\");if(arguments.length<2){for(var o=r(this.node()),s=-1,a=i.length;++s<a;)if(!o.contains(i[s]))return!1;return!0}return this.each((\"function\"==typeof e?u:e?h:l)(i,e))}i.d(e,{Z:()=>c}),o.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(t){return this._names.indexOf(t)>=0}}},1280:(t,e,i)=>{\"use strict\";function n(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function o(t){return this.select(t?r:n)}i.d(e,{Z:()=>o})},869:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>u});var n=i(762),r=i(6580),o=i(6455),s=i(5486);function a(t,e,i,n,o,s){for(var a,h=0,l=e.length,u=s.length;h<u;++h)(a=e[h])?(a.__data__=s[h],n[h]=a):i[h]=new r.F(t,s[h]);for(;h<l;++h)(a=e[h])&&(o[h]=a)}function h(t,e,i,n,o,s,a){var h,l,u,c=new Map,f=e.length,d=s.length,p=new Array(f);for(h=0;h<f;++h)(l=e[h])&&(p[h]=u=a.call(l,l.__data__,h,e)+\"\",c.has(u)?o[h]=l:c.set(u,l));for(h=0;h<d;++h)u=a.call(t,s[h],h,s)+\"\",(l=c.get(u))?(n[h]=l,l.__data__=s[h],c.delete(u)):i[h]=new r.F(t,s[h]);for(h=0;h<f;++h)(l=e[h])&&c.get(p[h])===l&&(o[h]=l)}function l(t){return t.__data__}function u(t,e){if(!arguments.length)return Array.from(this,l);var i=e?h:a,r=this._parents,u=this._groups;\"function\"!=typeof t&&(t=(0,s.Z)(t));for(var c=u.length,f=new Array(c),d=new Array(c),p=new Array(c),g=0;g<c;++g){var y=r[g],m=u[g],v=m.length,x=(0,o.Z)(t.call(y,y&&y.__data__,g,r)),b=x.length,w=d[g]=new Array(b),k=f[g]=new Array(b),M=p[g]=new Array(v);i(y,m,w,k,M,x,e);for(var S,P,N=0,C=0;N<b;++N)if(S=w[N]){for(N>=C&&(C=N+1);!(P=k[C])&&++C<b;);S._next=P||null}}return(f=new n.Y1(f,r))._enter=d,f._exit=p,f}},5045:(t,e,i)=>{\"use strict\";function n(t){return arguments.length?this.property(\"__data__\",t):this.node().__data__}i.d(e,{Z:()=>n})},2461:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>a});var n=i(4416);function r(t,e,i){var r=(0,n.Z)(t),o=r.CustomEvent;\"function\"==typeof o?o=new o(e,i):(o=r.document.createEvent(\"Event\"),i?(o.initEvent(e,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function o(t,e){return function(){return r(this,t,e)}}function s(t,e){return function(){return r(this,t,e.apply(this,arguments))}}function a(t,e){return this.each((\"function\"==typeof e?s:o)(t,e))}},5353:(t,e,i)=>{\"use strict\";function n(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var r,o=e[i],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this}i.d(e,{Z:()=>n})},352:(t,e,i)=>{\"use strict\";function n(){return!this.node()}i.d(e,{Z:()=>n})},6580:(t,e,i)=>{\"use strict\";i.d(e,{F:()=>s,Z:()=>o});var n=i(530),r=i(762);function o(){return new r.Y1(this._enter||this._groups.map(n.Z),this._parents)}function s(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}s.prototype={constructor:s,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},7772:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>o});var n=i(530),r=i(762);function o(){return new r.Y1(this._exit||this._groups.map(n.Z),this._parents)}},3425:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>o});var n=i(762),r=i(1304);function o(t){\"function\"!=typeof t&&(t=(0,r.Z)(t));for(var e=this._groups,i=e.length,o=new Array(i),s=0;s<i;++s)for(var a,h=e[s],l=h.length,u=o[s]=[],c=0;c<l;++c)(a=h[c])&&t.call(a,a.__data__,c,h)&&u.push(a);return new n.Y1(o,this._parents)}},1088:(t,e,i)=>{\"use strict\";function n(){this.innerHTML=\"\"}function r(t){return function(){this.innerHTML=t}}function o(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?\"\":e}}function s(t){return arguments.length?this.each(null==t?n:(\"function\"==typeof t?o:r)(t)):this.node().innerHTML}i.d(e,{Z:()=>s})},762:(t,e,i)=>{\"use strict\";i.d(e,{Jz:()=>z,Y1:()=>R});var n=i(9652),r=i(8566),o=i(5025),s=i(1706),a=i(3425),h=i(869),l=i(6580),u=i(7772),c=i(9979),f=i(1566),d=i(2158),p=i(3004),g=i(9049),y=i(7899),m=i(9405),v=i(4019),x=i(352),b=i(5353),w=i(8190),k=i(7981),M=i(9973),S=i(9660),P=i(5341),N=i(1088),C=i(2490),T=i(2573),L=i(3855),A=i(954),j=i(8327),O=i(1280),D=i(5045),F=i(7797),B=i(2461),I=i(4478),z=[null];function R(t,e){this._groups=t,this._parents=e}R.prototype=function(){return new R([[document.documentElement]],z)}.prototype={constructor:R,select:n.Z,selectAll:r.Z,selectChild:o.Z,selectChildren:s.Z,filter:a.Z,data:h.Z,enter:l.Z,exit:u.Z,join:c.Z,merge:f.Z,selection:function(){return this},order:d.Z,sort:p.Z,call:g.Z,nodes:y.Z,node:m.Z,size:v.Z,empty:x.Z,each:b.Z,attr:w.Z,style:k.Z,property:M.Z,classed:S.Z,text:P.Z,html:N.Z,raise:C.Z,lower:T.Z,append:L.Z,insert:A.Z,remove:j.Z,clone:O.Z,datum:D.Z,on:F.Z,dispatch:B.Z,[Symbol.iterator]:I.Z}},954:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>s});var n=i(5418),r=i(9029);function o(){return null}function s(t,e){var i=\"function\"==typeof t?t:(0,n.Z)(t),s=null==e?o:\"function\"==typeof e?e:(0,r.Z)(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)}))}},4478:(t,e,i)=>{\"use strict\";function*n(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,r=t[e],o=0,s=r.length;o<s;++o)(n=r[o])&&(yield n)}i.d(e,{Z:()=>n})},9979:(t,e,i)=>{\"use strict\";function n(t,e,i){var n=this.enter(),r=this,o=this.exit();return n=\"function\"==typeof t?t(n):n.append(t+\"\"),null!=e&&(r=e(r)),null==i?o.remove():i(o),n&&r?n.merge(r).order():r}i.d(e,{Z:()=>n})},2573:(t,e,i)=>{\"use strict\";function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function r(){return this.each(n)}i.d(e,{Z:()=>r})},1566:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>r});var n=i(762);function r(t){if(!(t instanceof n.Y1))throw new Error(\"invalid merge\");for(var e=this._groups,i=t._groups,r=e.length,o=i.length,s=Math.min(r,o),a=new Array(r),h=0;h<s;++h)for(var l,u=e[h],c=i[h],f=u.length,d=a[h]=new Array(f),p=0;p<f;++p)(l=u[p]||c[p])&&(d[p]=l);for(;h<r;++h)a[h]=e[h];return new n.Y1(a,this._parents)}},9405:(t,e,i)=>{\"use strict\";function n(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,o=n.length;r<o;++r){var s=n[r];if(s)return s}return null}i.d(e,{Z:()=>n})},7899:(t,e,i)=>{\"use strict\";function n(){return Array.from(this)}i.d(e,{Z:()=>n})},7797:(t,e,i)=>{\"use strict\";function n(t){return t.trim().split(/^|\\s+/).map((function(t){var e=\"\",i=t.indexOf(\".\");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}function r(t){return function(){var e=this.__on;if(e){for(var i,n=0,r=-1,o=e.length;n<o;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++r]=i:this.removeEventListener(i.type,i.listener,i.options);++r?e.length=r:delete this.__on}}}function o(t,e,i){return function(){var n,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((n=r[s]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=o,n.options=i),void(n.value=e);this.addEventListener(t.type,o,i),n={type:t.type,name:t.name,value:e,listener:o,options:i},r?r.push(n):this.__on=[n]}}function s(t,e,i){var s,a,h=n(t+\"\"),l=h.length;if(!(arguments.length<2)){for(u=e?o:r,s=0;s<l;++s)this.each(u(h[s],e,i));return this}var u=this.node().__on;if(u)for(var c,f=0,d=u.length;f<d;++f)for(s=0,c=u[f];s<l;++s)if((a=h[s]).type===c.type&&a.name===c.name)return c.value}i.d(e,{Z:()=>s})},2158:(t,e,i)=>{\"use strict\";function n(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,r=t[e],o=r.length-1,s=r[o];--o>=0;)(n=r[o])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this}i.d(e,{Z:()=>n})},9973:(t,e,i)=>{\"use strict\";function n(t){return function(){delete this[t]}}function r(t,e){return function(){this[t]=e}}function o(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function s(t,e){return arguments.length>1?this.each((null==e?n:\"function\"==typeof e?o:r)(t,e)):this.node()[t]}i.d(e,{Z:()=>s})},2490:(t,e,i)=>{\"use strict\";function n(){this.nextSibling&&this.parentNode.appendChild(this)}function r(){return this.each(n)}i.d(e,{Z:()=>r})},8327:(t,e,i)=>{\"use strict\";function n(){var t=this.parentNode;t&&t.removeChild(this)}function r(){return this.each(n)}i.d(e,{Z:()=>r})},9652:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>o});var n=i(762),r=i(9029);function o(t){\"function\"!=typeof t&&(t=(0,r.Z)(t));for(var e=this._groups,i=e.length,o=new Array(i),s=0;s<i;++s)for(var a,h,l=e[s],u=l.length,c=o[s]=new Array(u),f=0;f<u;++f)(a=l[f])&&(h=t.call(a,a.__data__,f,l))&&(\"__data__\"in a&&(h.__data__=a.__data__),c[f]=h);return new n.Y1(o,this._parents)}},8566:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>s});var n=i(762),r=i(6455),o=i(6176);function s(t){t=\"function\"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:(0,r.Z)(e)}}(t):(0,o.Z)(t);for(var e=this._groups,i=e.length,s=[],a=[],h=0;h<i;++h)for(var l,u=e[h],c=u.length,f=0;f<c;++f)(l=u[f])&&(s.push(t.call(l,l.__data__,f,u)),a.push(l));return new n.Y1(s,a)}},5025:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>s});var n=i(1304),r=Array.prototype.find;function o(){return this.firstElementChild}function s(t){return this.select(null==t?o:function(t){return function(){return r.call(this.children,t)}}(\"function\"==typeof t?t:(0,n.P)(t)))}},1706:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>s});var n=i(1304),r=Array.prototype.filter;function o(){return this.children}function s(t){return this.selectAll(null==t?o:function(t){return function(){return r.call(this.children,t)}}(\"function\"==typeof t?t:(0,n.P)(t)))}},4019:(t,e,i)=>{\"use strict\";function n(){let t=0;for(const e of this)++t;return t}i.d(e,{Z:()=>n})},3004:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>r});var n=i(762);function r(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=o);for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a){for(var h,l=i[a],u=l.length,c=s[a]=new Array(u),f=0;f<u;++f)(h=l[f])&&(c[f]=h);c.sort(e)}return new n.Y1(s,this._parents).order()}function o(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},530:(t,e,i)=>{\"use strict\";function n(t){return new Array(t.length)}i.d(e,{Z:()=>n})},7981:(t,e,i)=>{\"use strict\";i.d(e,{Z:()=>a});var n=i(4416);function r(t){return function(){this.style.removeProperty(t)}}function o(t,e,i){return function(){this.style.setProperty(t,e,i)}}function s(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function a(t,e,i){return arguments.length>1?this.each((null==e?r:\"function\"==typeof e?s:o)(t,e,null==i?\"\":i)):h(this.node(),t)}function h(t,e){return t.style.getPropertyValue(e)||(0,n.Z)(t).getComputedStyle(t,null).getPropertyValue(e)}},5341:(t,e,i)=>{\"use strict\";function n(){this.textContent=\"\"}function r(t){return function(){this.textContent=t}}function o(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?\"\":e}}function s(t){return arguments.length?this.each(null==t?n:(\"function\"==typeof t?o:r)(t)):this.node().textContent}i.d(e,{Z:()=>s})},9029:(t,e,i)=>{\"use strict\";function n(){}function r(t){return null==t?n:function(){return this.querySelector(t)}}i.d(e,{Z:()=>r})},6176:(t,e,i)=>{\"use strict\";function n(){return[]}function r(t){return null==t?n:function(){return this.querySelectorAll(t)}}i.d(e,{Z:()=>r})},5691:(t,e,i)=>{\"use strict\";function n(t){let e;for(;e=t.sourceEvent;)t=e;return t}i.d(e,{Z:()=>n})},4416:(t,e,i)=>{\"use strict\";function n(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}i.d(e,{Z:()=>n})},4155:t=>{var e,i,n=t.exports={};function r(){throw new Error(\"setTimeout has not been defined\")}function o(){throw new Error(\"clearTimeout has not been defined\")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(i){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e=\"function\"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{i=\"function\"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var a,h=[],l=!1,u=-1;function c(){l&&a&&(l=!1,a.length?h=a.concat(h):u=-1,h.length&&f())}function f(){if(!l){var t=s(c);l=!0;for(var e=h.length;e;){for(a=h,h=[];++u<e;)a&&a[u].run();u=-1,e=h.length}a=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title=\"browser\",n.browser=!0,n.env={},n.argv=[],n.version=\"\",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error(\"process.binding is not supported\")},n.cwd=function(){return\"/\"},n.chdir=function(t){throw new Error(\"process.chdir is not supported\")},n.umask=function(){return 0}},2931:(t,e,i)=>{\"use strict\";function n(t){let e=t.match(/^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i);return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}}i.d(e,{o:()=>n})},476:(t,e,i)=>{\"use strict\";function n({r:t,g:e,b:i}){return\"#\"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)}i.d(e,{v:()=>n})},9353:(t,e,i)=>{\"use strict\";function n({r:t,g:e,b:i,a:n}){return{r:Math.round(255*(1-n)+n*t),g:Math.round(255*(1-n)+n*e),b:Math.round(255*(1-n)+n*i)}}i.d(e,{D:()=>n})},5236:(t,e,i)=>{\"use strict\";i.d(e,{b:()=>n});let n=document.createElement(\"div\");n.innerHTML=\"<section>\\n    <h1>Welcome to SKAN.ai PowerBI Visual</h1>\\n    <h3>To begin please fill the following data buckets:</h3>\\n    <ul>\\n        <li><h2>Process ID</h2></li>\\n        <li><h2>Node Label</h2></li>\\n        <li><h2>Chronological Order</h2></li>\\n    </ul>\\n</section>\",n.style.height=\"100%\",n.style.display=\"flex\",n.style.justifyContent=\"center\",n.style.alignItems=\"center\",n.style.background=\"white\"},4166:(t,e,i)=>{\"use strict\";i.d(e,{Jx:()=>r});var n=i(4554).U;class r extends n{constructor(){super(...arguments),this.nodeProperties=new o,this.groupingSettings=new s,this.nodeLabel=new a}}class o{constructor(){this.width=150}}class s{constructor(){this.groupBy=\"process_id\",this.aggregationAlgorithm=\"sum\"}}class a{constructor(){this.fontFamily=\"Arial\",this.fontSize=12,this.textAlign=\"center\",this.fontColor=\"#000000\"}}},2147:(t,e,i)=>{\"use strict\";i.d(e,{i:()=>r});var n=i(6486);class r extends Array{constructor(t,e,i){super(),this.host=i;let{categories:o,values:s}=t.categorical,a=Object.assign(Object.assign({},(0,n.groupBy)(o,r.groupByRoleIteratee)),(0,n.groupBy)(s,r.groupByRoleIteratee)),{tooltips:h=[]}=a,l=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}(a,[\"tooltips\"]),u=Object.getOwnPropertyNames(l);if(!u.includes(e))throw\"Primary column isn't present in the column list\";if(!u.includes(\"ordering\")||!u.includes(\"process_id\")||!u.includes(\"node_label\"))return[];let[c]=l[e],f=c.values.map(((t,i)=>({[e]:t,selection:this.host.createSelectionIdBuilder().withCategory(c,i).createSelectionId(),displayNames:{}})));h=h.map((t=>{let{displayName:e}=t.source;return t.values.map((t=>({displayName:e,value:t})))}));let d=[];for(let t in f){let e=h.map((e=>e[t]));d.push(e)}let p={};for(let t of u)f=f.map(((e,i)=>{let[n]=l[t];return p=Object.assign(Object.assign({},p),{[t]:n.source.displayName}),Object.assign(Object.assign({},e),{[t]:n.values[i],displayNames:p,tooltips:d[i]})}));let{highlights:g=[]}=(null==s?void 0:s.find((({source:{roles:t}})=>t.node_value)))||{};if(g.length)for(let t in g)f[t]=Object.assign(Object.assign({},f[t]),{highlight:null!==g[t]});f.forEach(((t,e)=>{this[e]=t}))}static groupByRoleIteratee(t){let[e]=Object.getOwnPropertyNames(t.source.roles);return e}}},7666:(t,e,i)=>{\"use strict\";var n=i(9921);n.bn.defineFigureGenerator(\"Pill\",((t,e,i)=>{let r=Math.min(e,i)/2,o=r*((Math.sqrt(2)-1)/4*4),s=(new n.ZX).add(new n.zS(r,0,!0).add(new n.IL(n.IL.Line,e-r,0)).add(new n.IL(n.IL.Bezier,e,r,e-o,0,e,o)).add(new n.IL(n.IL.Line,e,i-r)).add(new n.IL(n.IL.Bezier,e-r,i,e,i-o,e-o,i)).add(new n.IL(n.IL.Line,r,i)).add(new n.IL(n.IL.Bezier,0,i-r,o,i,0,i-o)).add(new n.IL(n.IL.Line,0,r)).add(new n.IL(n.IL.Bezier,r,0,0,o,o,0).close()));return o>1&&(s.spot1=new n.z6(0,0,o,o),s.spot2=new n.z6(1,1,-o,-o)),s}))},624:(t,e,i)=>{\"use strict\";i.d(e,{P:()=>o});var n=i(9921);let r=n.bx.make,o=r(n.rU,{curviness:20,corner:20,isLayoutPositioned:!0,routing:n.rU.Bezier,layerName:\"Background\"},r(n.bn,{stroke:\"#DFBB00\"},new n.KX(\"stroke\",\"linkColor\"),new n.KX(\"strokeWidth\",\"linkThickness\")),r(n.bn,{toArrow:\"Standard\",strokeWidth:0},new n.KX(\"fill\",\"linkColor\")),r(n.s_,\"Auto\",r(n.bn,\"RoundedRectangle\",{strokeWidth:0},new n.KX(\"fill\",\"linkColor\")),r(n.al,{margin:3,stroke:\"#FFFFFF\"},new n.KX(\"text\",\"label\"))))},9698:(t,e,i)=>{\"use strict\";i.d(e,{_:()=>o});var n=i(9921);let r=n.bx.make,o=r(n.rU,{curviness:20,corner:20,isLayoutPositioned:!0,routing:n.rU.Bezier,layerName:\"Background\"},r(n.bn,{strokeDashArray:[4,4]},new n.KX(\"stroke\",\"linkColor\"),new n.KX(\"strokeWidth\",\"linkThickness\")),r(n.bn,{toArrow:\"Standard\",strokeWidth:0},new n.KX(\"fill\",\"linkColor\")))},3747:(t,e,i)=>{\"use strict\";i.d(e,{u:()=>c});var n=i(9921),r=i(2931),o=i(476),s=i(9353),a=i(9264);let h=n.bx.make,l=48;var u;!function(t){t.PILL=\"pill\",t.CIRC=\"circ\"}(u||(u={}));let c=h(n.NB,{layerName:\"Foreground\",mouseEnter:({event:t},e)=>{let i=e.findObject(u.PILL);i.stroke=e.data.secondaryColor,i.fill=(0,o.v)((0,s.D)(Object.assign(Object.assign({},(0,r.o)(e.data.secondaryColor)),{a:.3})));let{clientX:n,clientY:h}=t,{tooltips:l,selection:c}=e.part.data;a.Q.show({coordinates:[n,h],isTouchEvent:!1,dataItems:l.map((({displayName:t,value:e})=>({displayName:t,value:e.toString()}))),identities:c})},mouseLeave:(t,e)=>{let i=e.findObject(u.PILL);i.fill=e.data.primaryColor,i.stroke=e.data.borderColor,i.fill=e.data.primaryColor,a.Q.hide({immediately:!0})}},h(n.s_,\"Auto\",h(n.bn,\"Pill\",{name:u.PILL,height:l},new n.KX(\"fill\",\"primaryColor\"),new n.KX(\"stroke\",\"borderColor\"),new n.KX(\"width\",\"width\")),h(n.al,{height:l,verticalAlignment:n.z6.Center,isMultiline:!0,margin:new n.Zt(0,0,0,l)},new n.KX(\"text\",\"primaryLabel\"),new n.KX(\"stroke\",\"fontColor\"),new n.KX(\"font\",\"font\"),new n.KX(\"textAlign\",\"textAlign\"),new n.KX(\"width\",\"width\",(t=>t-19-l)))),h(n.s_,\"Auto\",h(n.bn,\"Pill\",{name:u.CIRC,height:49,width:l,strokeWidth:0},new n.KX(\"fill\",\"secondaryColor\")),h(n.al,{stroke:\"#FFFFFF\"},new n.KX(\"font\",\"font\"),new n.KX(\"text\",\"valueLabel\"))),{selectionAdornmentTemplate:h(n.uz,h(n.bn,\"Pill\",{height:l,strokeWidth:1},new n.KX(\"width\",\"width\"),new n.KX(\"stroke\",\"secondaryColor\"),new n.KX(\"fill\",\"secondaryColor\",(t=>{let{r:e,g:i,b:n}=(0,r.o)(t);return`rgba(${e},${i},${n},0.3)`}))),h(n.Vm))},new n.KX(\"toSpot\",\"toSpot\"),new n.KX(\"fromSpot\",\"fromSpot\"))},9181:(t,e,i)=>{\"use strict\";i.d(e,{x:()=>o});var n=i(9921);let r=n.bx.make,o=r(n.NB,{layerName:\"Foreground\"},r(n.bn,\"RoundedRectangle\",{fill:\"#6BAF48\",strokeWidth:0,width:48,height:48,parameter1:12}),r(n.s_,\"Vertical\",{width:48},r(n.s_,\"Horizontal\",{height:48},r(n.al,{stroke:\"#FFFFFF\"},new n.KX(\"text\",\"primaryLabel\")))))},9264:(t,e,i)=>{\"use strict\";i.d(e,{Q:()=>v,u:()=>b});var n=i(9921),r=i(7970),o=i(9289),s=i(5236),a=i(4166),h=i(2147),l=(i(7666),i(624)),u=i(9698),c=i(3747),f=i(9181),d=i(6486),p=i(9738),g=i(4155);g.env.GOJS_LICENSE_KEY&&(n.S0.licenseKey=g.env.GOJS_LICENSE_KEY),n.S0.licenseKey=\"73f942e4b46428a800ca0d2b113f69ee1bb37f3b9ed11bf0595541f5ea5f6d463089ee2f02878bc082ff1afb1874c0da8f956c7a9e1c0168e139d3dc45b586ace23f77b0430a448da7512e97cca838b1fa2d21f4c2e727a3c8688ff3e8abdc9c5cf7f0dc\";let y=document.getElementsByTagName(\"head\")[0],m=document.createElement(\"style\");m.type=\"text/css\",y.appendChild(m),m.innerHTML=\".gshHeader {\\tborder-color: #e77c97;\\topacity: 72%;\\tmargin-bottom: 5px;  }\";let v,x=n.bx.make;class b{constructor({element:t,host:e}){this.landing=s.b,this.update=(0,d.throttle)((({dataViews:[t]})=>{const e=t.categorical.values[0].values.length;console.log(\"******************************** UPDATE CALLED \",e);try{let e=t.metadata.columns.map((t=>{let[e]=Object.getOwnPropertyNames(t.roles);return e}));if(e.includes(\"node_label\")&&e.includes(\"process_id\")&&e.includes(\"ordering\")){this.target.firstChild.hidden=!1,this.landing.remove(),this.settings=b.parseSettings(t);const e=new h.i(t,\"node_label\",this.host).sort(((t,e)=>t.process_id.localeCompare(e.process_id)||t.ordering.localeCompare(e.ordering)));console.log(\"?? ~ file: visual.ts:139 ~ Visual ~ update=throttle ~ START\");let{anodes:i,alinks:r}=function(t){let e=\"\",i=0,n={start:{category:\"roundedRectangle\",key:0,primaryLabel:\"Start\",width:150,font:\"normal 12px Arial, Sans-serif\",fontColor:\"#000000\",textAlign:\"center\",fromSpot:{x:.5,y:1,offsetX:0,offsetY:0,v:!0},toSpot:{x:.5,y:0,offsetX:0,offsetY:0,v:!0}},end:{category:\"roundedRectangle\",key:-1,primaryLabel:\"End\",width:150,font:\"normal 12px Arial, Sans-serif\",fontColor:\"#000000\",textAlign:\"center\",fromSpot:{x:.5,y:1,offsetX:0,offsetY:0,v:!0},toSpot:{x:.5,y:0,offsetX:0,offsetY:0,v:!0}}},r={},o=\"0\";function s(t,e,i){r.hasOwnProperty(t+\"::\"+e)?(r[t+\"::\"+e].value+=i,r[t+\"::\"+e].label=r[t+\"::\"+e].value.toString()):r[t+\"::\"+e]={from:t,to:e,label:i.toString(),value:i,category:\"dashedLabeledLine\",linkColor:\"#B3BFC7\"}}return t.forEach((t=>{e!=t.process_id?(i+=1,\"0\"!==o&&s(o,\"-1\",1),e=t.process_id,s(\"0\",t.node_label,t.link_value)):s(o,t.node_label,t.link_value),o=t.node_label,function(t){n.hasOwnProperty(t.node_label)?n[t.node_label].count+=1:n[t.node_label]={valueLabel:t.node_value,key:t.node_label,primaryLabel:t.node_label,count:1,primaryColor:\"#FFFFFF\",secondaryColor:\"#00008b\",borderColor:\"#B3BFC7\",toSpot:{offsetX:0,offsetY:0,v:!0,x:.5,y:0},category:\"default\"}}(t)})),s(o,\"-1\",1),{anodes:Object.values(n),alinks:Object.values(r)}}(e);console.log(\"?? ~ file: visual.ts:139 ~ Visual ~ update=throttle ~ END\"),this.diagram.model=new n.FJ(i,r,{linkKeyProperty:\"key\"})}else this.target.firstChild.hidden=!0,this.target.appendChild(this.landing)}catch(t){return this.diagram.model=new n.FJ([{key:\"Process \",color:\"lightblue\"},{key:\"Map\",color:\"orange\"},{key:\"Too\",color:\"lightgreen\"},{key:\"Complex\",color:\"pink\"}],[{from:\"Process\",to:\"Map\"},{from:\"Process\",to:\"Too\"},{from:\"Map\",to:\"Too\"},{from:\"Too\",to:\"Complex\"}]),void console.log(\"******************************** UPDATE ENDED\")}for(let t of document.getElementsByClassName(\"zoomSlider\"))t.remove();new p.z(this.diagram,{alignment:n.z6.BottomLeft});let[i]=Array.from(document.getElementsByClassName(\"zoomSlider\"));i.style.left=\"0\",this.diagram.commandHandler.zoomToFit(),this.diagram.alignDocument(n.z6.Center,n.z6.Center),console.log(\"******************************** UPDATE ENDED\")}),300),this.host=e,this.target=t,this.selectionManager=this.host.createSelectionManager(),v=this.host.tooltipService,this.tooltipServiceWrapper=(0,r.p2)(v,t),this.diagram=new n.S0(this.target,{\"undoManager.isEnabled\":!0,\"clickCreatingTool.archetypeNodeData\":{text:\"new node\",color:\"lightblue\"},\"animationManager.isInitial\":!1,\"animationManager.isEnabled\":!1,layout:x(n.KQ,{aggressiveOption:n.KQ.AggressiveMore,layeringOption:n.KQ.LayerOptimalLinkLength,isOngoing:!0,layerSpacing:40,columnSpacing:40,setsPortSpots:!1,direction:90})}),this.diagram.nodeTemplateMap=(new n.D5).add(\"default\",c.u).add(\"roundedRectangle\",f.x),this.diagram.linkTemplateMap=(new n.D5).add(\"default\",u._).add(\"dashedLabeledLine\",l.P),this.diagram.addDiagramListener(\"BackgroundSingleClicked\",(()=>{return t=this,e=void 0,n=function*(){yield this.selectionManager.clear()},new((i=void 0)||(i=Promise))((function(r,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n})),this.diagram.addDiagramListener(\"ObjectSingleClicked\",(t=>{let e=t.subject.part;if(e instanceof n.NB&&\"selection\"in e.data)if(this.diagram.lastInput.shift||this.diagram.lastInput.meta||this.diagram.lastInput.control){let t=this.selectionManager.getSelectionIds(),i=e.data.selection;if(new Set([...t,...i]).size===t.length){let t=this.selectionManager.getSelectionIds().filter((t=>!i.includes(t)));0===t.length?this.selectionManager.clear():this.selectionManager.select(t)}else this.selectionManager.select([...e.data.selection,...this.selectionManager.getSelectionIds()])}else this.selectionManager.select(e.data.selection)})),this.diagram.addDiagramListener(\"ObjectSingleClicked\",(t=>{let e=t.subject.part;e instanceof n.rU&&\"selection\"in e.data&&this.selectionManager.select(e.data.selection)})),this.diagram.addDiagramListener(\"LayoutCompleted\",(t=>{this.router.avoidOrthogonalOverlaps(t.diagram.links)})),this.router=new o.n,this.router.linkSpacing=80}static parseSettings(t){return a.Jx.parse(t)}enumerateObjectInstances(t){return a.Jx.enumerateObjectInstances(this.settings||a.Jx.getDefault(),t)}}},6738:t=>{\"use strict\";t.exports=Function(\"return this\")()},6544:t=>{\"use strict\";t.exports=!1}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if(\"object\"==typeof globalThis)return globalThis;try{return this||new Function(\"return this\")()}catch(t){if(\"object\"==typeof window)return window}}(),i.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,\"exports\",{enumerable:!0,set:()=>{throw new Error(\"ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: \"+t.id)}}),t),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};(()=>{\"use strict\";i.r(n),i.d(n,{default:()=>o});var t=i(9264),e=i(6738).powerbi,r={name:\"skanpbi5D56A846E8FF4747BAED556F45F00512\",displayName:\"skan_pbi_1\",class:\"Visual\",apiVersion:\"3.8.0\",create:e=>{if(t.u)return new t.u(e);throw\"Visual instance not found\"},createModalDialog:(t,e,i)=>{const n=globalThis.dialogRegistry;t in n&&new n[t](e,i)},custom:!0};void 0!==e&&(e.visuals=e.visuals||{},e.visuals.plugins=e.visuals.plugins||{},e.visuals.plugins.skanpbi5D56A846E8FF4747BAED556F45F00512=r);const o=r})(),skanpbi5D56A846E8FF4747BAED556F45F00512=n})();","css":".zoomSlider {\n  position: absolute;\n  padding: 0;\n  opacity: 0.75;\n  z-index: 99;\n  width: 125px;\n  height: 25px;\n  top: 0px;\n  left: 0px;\n}\n.zoomButton {\n  display: inline-block;\n  vertical-align: top;\n  text-align: center;\n  padding: 0;\n  margin: 0;\n  transition: opacity 0.2s;\n}\n.zoomRangeContainer {\n  display: inline-block;\n  vertical-align: top;\n  padding: 0;\n}\n.zoomRangeInput {\n  margin: 0;\n  padding: 0;\n  outline: none;\n  transition: opacity 0.2s;\n  background: transparent;\n  -webkit-appearance: none;\n}\n/* Set up additional styling to ensure consistenty across browsers */\n.zoomRangeInput::-webkit-slider-runnable-track {\n  box-sizing: border-box;\n  border: none;\n  width: 100%;\n  height: 3px;\n  background: #ccc;\n}\n.zoomRangeInput::-moz-range-track {\n  box-sizing: border-box;\n  border: none;\n  width: 100%;\n  height: 3px;\n  background: #ccc;\n}\n.zoomRangeInput::-ms-track {\n  box-sizing: border-box;\n  border: none;\n  width: 100%;\n  height: 3px;\n  background: #ccc;\n  color: transparent;\n}\n.zoomRangeInput::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  margin-top: -3.33px;\n  box-sizing: border-box;\n  border: none;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: #444;\n}\n.zoomRangeInput::-moz-range-thumb {\n  box-sizing: border-box;\n  border: none;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: #444;\n}\n.zoomRangeInput::-ms-thumb {\n  margin-top: 0;\n  box-sizing: border-box;\n  border: none;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: #444;\n}\n.zoomRangeInput::-ms-tooltip,\n.zoomRangeInput::-ms-fill-lower,\n.zoomRangeInput::-ms-fill-upper {\n  display: none;\n}\n\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE1UExURSEVeSEVeiEVeyMXeygcfiUafEg+kSYafCIVeyIWfiMWfsXB3f///1ZNnSMWf1lQn0Y8kHNrqu7t9W5mqCIWfEI3kf7+/62oz1VMmP39/vf3+qqmzPb1+fz8/VFHlpqUxMbC3vb2+i8jhiMWgKWgyXZvrFpRm4R9tSgcgezr9FtRn353tFpQn62ozXFpqW1kqnBorCUYgOTi79PR5mNbofTz+IuFuTQphMXC3fHx9yodg5SOwU9FmVpQoIJ8tPr6/KahyTInhEM4j6WgykM4kqSfyjowiJeRwO/u9eHf7TQphT4zi2depDkuiWBXoF1TnjImhmFYoTImhC0igMC82Z2YxDEmg0tBksrH3zMog9XT5r+72Nza6oiCtycbfTkviMvI4H94slNKl8jG3iYbfKiky8vI350/TakAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADdSURBVChTtc1bIwJBGMbx16Yt22NKpk0iUsohFCXnotKBInI+hnz/j2DXzOyNW/0vZub53Qz9cyN2mqa5Rl0C3LruIfKOGT6MM+ZH4FcngkBwkrgRMhF2eCoyHY3OzMa4MReZjy8kJCexSJRKu/nSsm8Fq4mM4DWs2xfxDWRzm1uK8yhsF23e2d1j+zg4lF8elVAqH9OJWWGsatYU02m9gWbr7LzNOe9cXHavBBNd93Ajn6pb3TrucC+W6gGP1hnDk5hOz3h5fXtHX07VRxxWn19yOgUG373+Hx1SRD9wwxo3ll9ucQAAAABJRU5ErkJggg=="},"visualEntryPoint":"","toolsVersion":null,"externalJS":[],"assets":{"icon":"assets/icon.png"}}